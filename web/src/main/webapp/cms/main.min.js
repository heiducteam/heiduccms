/*
 * jabsorb - a Java to JavaScript Advanced Object Request Broker
 * http://www.jabsorb.org
 *
 * Copyright 2007-2009 The jabsorb team
 * Copyright (c) 2005 Michael Clark, Metaparadigm Pte Ltd
 * Copyright (c) 2003-2004 Jan-Klaas Kollhof
 *
 * This code is based on original code from the json-rpc-java library
 * which was originally based on Jan-Klaas' JavaScript o lait library
 * (jsolait).
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     Backbone.js 0.5.3
//     (c) 2010 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://documentcloud.github.com/backbone

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

/**
 * @license
 * (c) 2009-2013 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.2
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */

/*!
 * jQuery Form Plugin
 * version: 2.95 (30-JAN-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */

/*
 * Treeview 1.5pre - jQuery plugin to hide and show branches of a tree
 * 
 * http://bassistance.de/jquery-plugins/jquery-plugin-treeview/
 * http://docs.jquery.com/Plugins/Treeview
 *
 * Copyright (c) 2007 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.treeview.js 5759 2008-07-01 07:50:28Z joern.zaefferer $
 *
 */

/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/*
 * jQuery xmlDOM Plugin v1.0
 * http://outwestmedia.com/jquery-plugins/xmldom/
 *
 * Released: 2009-04-06
 * Version: 1.0
 *
 * Copyright (c) 2009 Jonathan Sharp, Out West Media LLC.
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 */

/*
 * jQote2 - client-side Javascript templating engine
 * Copyright (C) 2010, aefxx
 * http://aefxx.com/
 *
 * Dual licensed under the WTFPL v2 or MIT (X11) licenses
 * WTFPL v2 Copyright (C) 2004, Sam Hocevar
 *
 * Date: Thu, Oct 21st, 2010
 * Version: 0.9.7
 */

//! moment.js
//! version : 2.4.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/**
 * noty - jQuery Notification Plugin v2.2.2
 * Contributors: https://github.com/needim/noty/graphs/contributors
 *
 * Examples and Documentation - http://needim.github.com/noty/
 *
 * Licensed under the MIT licenses:
 * http://www.opensource.org/licenses/mit-license.php
 *
 **/

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */

/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* =========================================================
 * bootstrap-datepicker.js
 * Repo: https://github.com/eternicode/bootstrap-datepicker/
 * Demo: http://eternicode.github.io/bootstrap-datepicker/
 * Docs: http://bootstrap-datepicker.readthedocs.org/
 * Forked from http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Started by Stefan Petre; improvements by Andrew Rowls + contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

function toJSON(t){function e(){for(var t;i;)t=i[s].prev,delete i[s],i=t}function n(t,l,c){var d,u,p,h,f,m=[];if(null===t||void 0===t)return"null";if("string"==typeof t)return escapeJSONString(t);if("number"==typeof t)return t.toString();if("boolean"==typeof t)return t.toString();if(t[s]){for(d=[c],p=l;p;)u&&u.unshift(p[s].ref),p===t&&(h=p,u=[h[s].ref]),d.unshift(p[s].ref),p=p[s].parent;if(h){if(JSONRpcClient.fixupCircRefs)return d.shift(),u.shift(),a.push([d,u]),r;throw e(),new Error("circular reference detected!")}if(JSONRpcClient.fixupDuplicates){for(u=[t[s].ref],p=t[s].parent;p;)u.unshift(p[s].ref),p=p[s].parent;return d.shift(),u.shift(),a.push([d,u]),r}}else t[s]={parent:l,prev:i,ref:c},i=t;if(t.constructor===Date)return t.javaClass?'{javaClass: "'+t.javaClass+'", time: '+t.valueOf()+"}":'{javaClass: "java.util.Date", time: '+t.valueOf()+"}";if(t.constructor===Array){for(f=0;f<t.length;f++)o=n(t[f],t,f),m.push(o===r?null:o);return"["+m.join(", ")+"]"}for(var g in t)g===s||(null===t[g]||void 0===t[g]?m.push('"'+g+'": null'):"function"==typeof t[g]||(o=n(t[g],t,g),o!==r&&m.push(escapeJSONString(g)+": "+o)));return"{"+m.join(", ")+"}"}var i,o,s="$_$jabsorbed$813492",a=[],r={};return o=n(t,null,"root"),e(),a.length?{json:o,fixups:a}:{json:o}}function JSONRpcClient(){var t,e,n,i=0,o=typeof arguments[0],s=!0;"function"===o?(this.readyCB=arguments[0],i++):arguments[0]&&"object"===o&&arguments[0].length&&(this._addMethods(arguments[0]),i++,s=!1),this.serverURL=arguments[i],this.user=arguments[i+1],this.pass=arguments[i+2],this.objectID=0,s&&(this._addMethods(["system.listMethods"]),t=JSONRpcClient._makeRequest(this,"system.listMethods",[]),this.readyCB&&(n=this,t.cb=function(t,e){e||n._addMethods(t),n.readyCB(t,e)}),this.readyCB?(JSONRpcClient.async_requests.push(t),JSONRpcClient.kick_async()):(e=JSONRpcClient._sendRequest(this,t),this._addMethods(e)))}function JSONRPCCallableProxy(){this.objectID=arguments[0],this.javaClass=arguments[1],this.JSONRPCType="CallableReference"}var escapeJSONString=function(){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(n){return t.lastIndex=0,t.test(n)?'"'+n.replace(t,function(t){var n=e[t];return"string"==typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}}();JSONRpcClient.prototype.createCallableProxy=function(t,e){var n,i;n=new JSONRPCCallableProxy(t,e);for(i in JSONRpcClient.knownClasses[e])n[i]=JSONRpcClient.bind(JSONRpcClient.knownClasses[e][i],n);return n},JSONRpcClient.knownClasses={},JSONRpcClient.Exception=function(t){var e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.trace&&(e=this.trace.match(/^([^:]*)/),e&&(this.name=e[0])),this.name||(this.name="JSONRpcClientException")},JSONRpcClient.Exception.CODE_REMOTE_EXCEPTION=490,JSONRpcClient.Exception.CODE_ERR_CLIENT=550,JSONRpcClient.Exception.CODE_ERR_PARSE=590,JSONRpcClient.Exception.CODE_ERR_NOMETHOD=591,JSONRpcClient.Exception.CODE_ERR_UNMARSHALL=592,JSONRpcClient.Exception.CODE_ERR_MARSHALL=593,JSONRpcClient.Exception.prototype=new Error,JSONRpcClient.Exception.prototype.toString=function(t,e){var n="";return this.name&&(n+=this.name),this.message&&(n+=": "+this.message),0==n.length&&(n="no exception information given"),n},JSONRpcClient.default_ex_handler=function(t){alert(t)},JSONRpcClient.toplevel_ex_handler=JSONRpcClient.default_ex_handler,JSONRpcClient.profile_async=!1,JSONRpcClient.max_req_active=1,JSONRpcClient.requestId=1,JSONRpcClient.fixupCircRefs=!0,JSONRpcClient.fixupDuplicates=!0,JSONRpcClient.transformDates=!1,JSONRpcClient.transformDateWithoutHint=!1,JSONRpcClient.javaDateClasses={"java.util.Date":!0,"java.sql.Date":!0,"java.sql.Time":!0,"java.sql.Timestamp":!0},JSONRpcClient.bind=function(t,e){return function(){return t.apply(e,arguments)}},JSONRpcClient._createMethod=function(t,e){var n=function(){for(var n,i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);"function"==typeof i[0]&&(n=i.shift());var s=JSONRpcClient._makeRequest(this,e,i,this.objectID,n);return n?(JSONRpcClient.async_requests.push(s),JSONRpcClient.kick_async(),s.requestId):JSONRpcClient._sendRequest(t,s)};return n},JSONRpcClient.prototype.createObject=function(){for(var t,e,n,i=[],o=null,s=0;s<arguments.length;s++)i.push(arguments[s]);return"function"==typeof i[0]&&(o=i.shift()),t=i[0]+".$constructor",e=i[1],n=JSONRpcClient._makeRequest(this,t,e,0,o),null===o?JSONRpcClient._sendRequest(this,n):(JSONRpcClient.async_requests.push(n),JSONRpcClient.kick_async(),n.requestId)},JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX=".ref",JSONRpcClient.prototype._addMethods=function(t,e){for(var n,i,o,s,a,r,l,c,d=[],u=0;u<t.length;u++){if(i=this,o=t[u].split("."),l=t[u].indexOf("["),c=t[u].indexOf("]"),t[u].substring(0,JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX.length)==JSONRpcClient.CALLABLE_REFERENCE_METHOD_PREFIX&&l!=-1&&c!=-1&&l<c)r=t[u].substring(l+1,c);else for(s=0;s<o.length-1;s++)n=o[s],i[n]?i=i[n]:(i[n]={},i=i[n]);n=o[o.length-1],r?(a=JSONRpcClient._createMethod(this,n),JSONRpcClient.knownClasses[r]||(JSONRpcClient.knownClasses[r]={}),JSONRpcClient.knownClasses[r][n]=a):(a=JSONRpcClient._createMethod(this,t[u]),i[n]||e||(i[n]=JSONRpcClient.bind(a,this)),d.push(a)),r=null}return d},JSONRpcClient._getCharsetFromHeaders=function(t){var e,n,i;try{for(e=t.getResponseHeader("Content-type"),n=e.split(/\s*;\s*/),i=0;i<n.length;i++)if("charset="==n[i].substring(0,8))return n[i].substring(8,n[i].length)}catch(t){}return"UTF-8"},JSONRpcClient.async_requests=[],JSONRpcClient.async_inflight={},JSONRpcClient.async_responses=[],JSONRpcClient.async_timeout=null,JSONRpcClient.num_req_active=0,JSONRpcClient._async_handler=function(){var t,e;for(JSONRpcClient.async_timeout=null;JSONRpcClient.async_responses.length>0;)if(t=JSONRpcClient.async_responses.shift(),!t.canceled){t.profile&&(t.profile.dispatch=new Date);try{t.cb(t.result,t.ex,t.profile)}catch(t){JSONRpcClient.toplevel_ex_handler(t)}}for(;JSONRpcClient.async_requests.length>0&&JSONRpcClient.num_req_active<JSONRpcClient.max_req_active;)e=JSONRpcClient.async_requests.shift(),e.canceled||JSONRpcClient._sendRequest(e.client,e)},JSONRpcClient.kick_async=function(){JSONRpcClient.async_timeout||(JSONRpcClient.async_timeout=setTimeout(JSONRpcClient._async_handler,0))},JSONRpcClient.cancelRequest=function(t){if(JSONRpcClient.async_inflight[t])return JSONRpcClient.async_inflight[t].canceled=!0,!0;var e;for(e in JSONRpcClient.async_requests)if(JSONRpcClient.async_requests[e].requestId==t)return JSONRpcClient.async_requests[e].canceled=!0,!0;for(e in JSONRpcClient.async_responses)if(JSONRpcClient.async_responses[e].requestId==t)return JSONRpcClient.async_responses[e].canceled=!0,!0;return!1},JSONRpcClient._makeRequest=function(t,e,n,i,o){var s={};s.client=t,s.requestId=JSONRpcClient.requestId++;var a="{id:"+s.requestId+",method:";a+=i&&i>0?'".obj['+i+"]."+e+'"':'"'+e+'"',o&&(s.cb=o),JSONRpcClient.profile_async&&(s.profile={submit:new Date});var r=toJSON(n);return a+=",params:"+r.json,r.fixups&&(a+=",fixups:"+toJSON(r.fixups).json),s.data=a+"}",s},JSONRpcClient._sendRequest=function(t,e){var n;e.profile&&(e.profile.start=new Date),n=JSONRpcClient.poolGetHTTPRequest(),JSONRpcClient.num_req_active++,n.open("POST",t.serverURL,!!e.cb,t.user,t.pass);try{n.setRequestHeader("Content-type","text/plain")}catch(t){}e.cb?n.onreadystatechange=function(){var i;if(4==n.readyState){n.onreadystatechange=function(){},i={cb:e.cb,result:null,ex:null},e.profile?(i.profile=e.profile,i.profile.end=new Date):i.profile=!1;try{i.result=t._handleResponse(n)}catch(t){i.ex=t}JSONRpcClient.async_inflight[e.requestId].canceled||JSONRpcClient.async_responses.push(i),delete JSONRpcClient.async_inflight[e.requestId],JSONRpcClient.kick_async()}}:n.onreadystatechange=function(){},JSONRpcClient.async_inflight[e.requestId]=e;try{n.send(e.data)}catch(t){throw JSONRpcClient.poolReturnHTTPRequest(n),JSONRpcClient.num_req_active--,new JSONRpcClient.Exception({code:JSONRpcClient.Exception.CODE_ERR_CLIENT,message:"Connection failed"})}return e.cb?null:(delete JSONRpcClient.async_inflight[e.requestId],t._handleResponse(n))},JSONRpcClient.prototype._handleResponse=function(t){this.charset||(this.charset=JSONRpcClient._getCharsetFromHeaders(t));var e,n,i;try{e=t.status,n=t.statusText,i=t.responseText}catch(e){throw JSONRpcClient.poolReturnHTTPRequest(t),JSONRpcClient.num_req_active--,JSONRpcClient.kick_async(),new JSONRpcClient.Exception({code:JSONRpcClient.Exception.CODE_ERR_CLIENT,message:"Connection failed"})}if(JSONRpcClient.poolReturnHTTPRequest(t),JSONRpcClient.num_req_active--,200!=e)throw new JSONRpcClient.Exception({code:e,message:n});return this.unmarshallResponse(i)},JSONRpcClient.prototype.unmarshallResponse=function(data){function applyFixups(t,e){function n(t,e){for(var n=0,i=e.length;n<i;n++)t=t[e[n]];return t}function i(t,e,n){for(var i=e.length-1,o=0;o<i;o++)t=t[e[o]];t[e[i]]=n}for(var o=0,s=e.length;o<s;o++)i(t,e[o][0],n(t,e[o][1]))}function transformDate(t){function e(t,e){var n,i=0;if(t.hasOwnProperty(e)){for(n in t)if(t.hasOwnProperty(n)&&(i++,i>1))return;return!0}}var n,i;if(t&&"object"==typeof t){if(t.javaClass&&JSONRpcClient.javaDateClasses[t.javaClass])return i=new Date(t.time),"java.util.Date"!==t.javaClass&&(i.javaClass=t.javaClass),i;if(JSONRpcClient.transformDateWithoutHint&&e(t,"time"))return new Date(t.time);for(n in t)t.hasOwnProperty(n)&&(t[n]=transformDate(t[n]));return t}return t}var obj;try{eval("obj = "+data)}catch(t){throw new JSONRpcClient.Exception({code:550,message:"error parsing result"})}if(obj.error)throw new JSONRpcClient.Exception(obj.error);var r=obj.result,i,tmp;if(r){if(r.objectID&&"CallableReference"==r.JSONRPCType)return this.createCallableProxy(r.objectID,r.javaClass);r=JSONRpcClient.extractCallableReferences(this,JSONRpcClient.transformDates?transformDate(r):r),obj.fixups&&applyFixups(r,obj.fixups)}return r},JSONRpcClient.extractCallableReferences=function(t,e){var n,i,o;for(n in e)"object"==typeof e[n]&&(i=JSONRpcClient.makeCallableReference(t,e[n]),i?e[n]=i:(i=JSONRpcClient.extractCallableReferences(t,e[n]),e[n]=i)),"object"==typeof n&&(i=JSONRpcClient.makeCallableReference(t,n),i?(o=e[n],delete e[n],e[i]=o):(i=JSONRpcClient.extractCallableReferences(t,n),o=e[n],delete e[n],e[i]=o));return e},JSONRpcClient.makeCallableReference=function(t,e){return e&&e.objectID&&e.javaClass&&"CallableReference"==e.JSONRPCType?t.createCallableProxy(e.objectID,e.javaClass):null},JSONRpcClient.http_spare=[],JSONRpcClient.http_max_spare=8,JSONRpcClient.poolGetHTTPRequest=function(){var t=JSONRpcClient.http_spare.pop();return t?t:JSONRpcClient.getHTTPRequest()},JSONRpcClient.poolReturnHTTPRequest=function(t){JSONRpcClient.http_spare.length>=JSONRpcClient.http_max_spare?delete t:JSONRpcClient.http_spare.push(t)},JSONRpcClient.msxmlNames=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","Microsoft.XMLHTTP"],JSONRpcClient.getHTTPRequest=function(){try{return JSONRpcClient.httpObjectName="XMLHttpRequest",new XMLHttpRequest}catch(t){}for(var t=0;t<JSONRpcClient.msxmlNames.length;t++)try{return JSONRpcClient.httpObjectName=JSONRpcClient.msxmlNames[t],new ActiveXObject(JSONRpcClient.msxmlNames[t])}catch(t){}throw JSONRpcClient.httpObjectName=null,new JSONRpcClient.Exception({code:0,message:"Can't create XMLHttpRequest object"})},define("jsonrpc",function(){});var Heiduc={};if(Heiduc.javaList=function(t){return{javaClass:"java.util.ArrayList",list:t}},Heiduc.javaMap=function(t){return{javaClass:"java.util.HashMap",map:t}},Heiduc.accents={"ÀÁÂÃÄÅ":"A","Æ":"AE","Ç":"C","ÈÉÊË":"E","ÌÍÎÏ":"I","Ð":"Th","Ñ":"N","ÒÓÔÕÖØ":"O","ÙÚÛÜ":"U","Ý":"Y","Þ":"Th","ß":"ss","àáâãäå":"a","æ":"ae","ç":"c","èéêë":"e","ìíîï":"i","ð":"o","ñ":"n","òóôõöø":"o","ùúûü":"u","ýÿ":"y","þ":"th"},Heiduc.replaceAccents=function(t){return $.each(Heiduc.accents,function(e,n){for(var i=0;i<e.length;i++)t=t.replace(e.charAt(i),n)}),t.toLowerCase()},Heiduc.urlFromTitle=function(t){return Heiduc.replaceAccents(t.toLowerCase()).replace(/\W/g,"-")},Heiduc.nameFromTitle=function(t){return t.toLowerCase().replace(/\W/g,"_")},Heiduc.isImage=function(t){var e=Heiduc.getFileExt(t);return null!=e.toLowerCase().match(/gif|jpg|jpeg|png|ico/)},Heiduc.getFileExt=function(t){return t.substring(t.lastIndexOf(".")+1,t.length)},Heiduc.getFileName=function(t){var e=t.lastIndexOf("\\");return e==-1&&(e=t.lastIndexOf("/")),e==-1?t:t.substring(e+1,t.length)},Heiduc.formatDate=function(t){return $.datepicker.formatDate("dd.mm.yy",t)},Heiduc.formatTime=function(t){return $.datepicker.formatDate("HH:MM",t)},Heiduc.identifier_regex=/^[a-zA-Z_][a-zA-Z0-9_]*$/,Heiduc.isValidIdentifier=function(t){return Heiduc.identifier_regex.test(t)},Heiduc.strip=function(t){for(var e=0;e<t.length&&" "==t[e];)e++;var n=t.substring(e);for(e=n.length-1;e>=0&&" "==n[e];)e--;return n.slice(0,e+1)},Heiduc.getQueryParam=function(t){var e=window.location.search.match(new RegExp("(\\?|&)"+t+"(\\[\\])?=([^&]*)"));return Heiduc.escapeHtml(e?e[3]:"")},Heiduc.escapeHtml=function(t){return t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/`/g,"&lsquo;").replace(/'/g,"&rsquo;")},Heiduc.unescapeHtml=function(t){return t.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&lsquo;/g,"`").replace(/&rsquo;/g,"'")},Heiduc.generateGUID=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},Heiduc.jsonrpc="",Heiduc.jsonrpcListeners=[],Heiduc.jsonrpcSystemListeners=[],Heiduc.jsonrpcInitialized=!1,Heiduc.jsonrpcInitError=null,Heiduc.createJSONRpc=function(){Heiduc.jsonrpc=new JSONRpcClient(function(t,e){if(e)Heiduc.jsonrpcInitError="Error during JSON-RPC initialization "+e+" "+e.message;else{for(;Heiduc.jsonrpcSystemListeners.length>0;){var n=Heiduc.jsonrpcSystemListeners.pop();n()}for(;Heiduc.jsonrpcListeners.length>0;){var n=Heiduc.jsonrpcListeners.pop();n()}}Heiduc.jsonrpcInitialized=!0},"/json-rpc/")},Heiduc.createJSONRpc(),Heiduc.initJSONRpc=function(t){void 0!=t&&(Heiduc.jsonrpcInitialized?t():Heiduc.jsonrpcListeners.push(t))},Heiduc.initJSONRpcSystem=function(t){void 0!=t&&(Heiduc.jsonrpcInitialized?t():Heiduc.jsonrpcSystemListeners.push(t))},Heiduc.serviceFailed=function(t){return null!=t&&(alert("JSON-RPC service fail "+t+" "+t.message),!0)},Heiduc.changeLanguage=function(t){var e=location.href.replace("#",""),n=e.indexOf("language="),i=location.search.indexOf("?")==-1?"?":"&";if(n>0){var o=e.substr(n+1),s=o.indexOf("&");e=e.substr(0,n)+"language="+t,s>0&&(e+=o.substr(s+1)),e.indexOf("&")<0&&(i="")}else e=e+i+"language="+t;location.href=e},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.startsWith=function(t){return this.match("^"+t)==t},String.prototype.endsWith=function(t){return this.match(t+"$")==t},define("heiduc",["jsonrpc"],function(){}),!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=Z.type(t);return"function"!==n&&!Z.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}function i(t,e,n){if(Z.isFunction(e))return Z.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return Z.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(rt.test(e))return Z.filter(e,t,n);e=Z.filter(e,t)}return Z.grep(t,function(t){return W.call(e,t)>=0!==n})}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e=ft[t]={};return Z.each(t.match(ht)||[],function(t,n){e[n]=!0}),e}function a(){K.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),Z.ready()}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+r.uid++}function l(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(wt,"-$1").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:yt.test(n)?Z.parseJSON(n):n)}catch(t){}bt.set(t,e,n)}else n=void 0;return n}function c(){return!0}function d(){return!1}function u(){try{return K.activeElement}catch(t){}}function p(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function h(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=At.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n=0,i=t.length;i>n;n++)vt.set(t[n],"globalEval",!e||vt.get(e[n],"globalEval"))}function g(t,e){var n,i,o,s,a,r,l,c;if(1===e.nodeType){if(vt.hasData(t)&&(s=vt.access(t),a=vt.set(e,s),c=s.events)){delete a.handle,a.events={};for(o in c)for(n=0,i=c[o].length;i>n;n++)Z.event.add(e,o,c[o][n])}bt.hasData(t)&&(r=bt.access(t),l=Z.extend({},r),bt.set(e,l))}}function v(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],n):n}function b(t,e){var n=e.nodeName.toLowerCase();"input"===n&&kt.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(e,n){var i,o=Z(n.createElement(e)).appendTo(n.body),s=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:Z.css(o[0],"display");return o.detach(),s}function w(t){var e=K,n=zt[t];return n||(n=y(t,e),"none"!==n&&n||(Ot=(Ot||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ot[0].contentDocument,e.write(),e.close(),n=y(t,e),Ot.detach()),zt[t]=n),n}function x(t,e,n){var i,o,s,a,r=t.style;return n=n||Vt(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||Z.contains(t.ownerDocument,t)||(a=Z.style(t,e)),Bt.test(a)&&Ft.test(e)&&(i=r.width,o=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=n.width,r.width=i,r.minWidth=o,r.maxWidth=s)),void 0!==a?a+"":a}function C(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function S(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,o=Jt.length;o--;)if(e=Jt[o]+n,e in t)return e;return i}function k(t,e,n){var i=qt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function $(t,e,n,i,o){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>s;s+=2)"margin"===n&&(a+=Z.css(t,n+Ct[s],!0,o)),i?("content"===n&&(a-=Z.css(t,"padding"+Ct[s],!0,o)),"margin"!==n&&(a-=Z.css(t,"border"+Ct[s]+"Width",!0,o))):(a+=Z.css(t,"padding"+Ct[s],!0,o),"padding"!==n&&(a+=Z.css(t,"border"+Ct[s]+"Width",!0,o)));return a}function T(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,s=Vt(t),a="border-box"===Z.css(t,"boxSizing",!1,s);if(0>=o||null==o){if(o=x(t,e,s),(0>o||null==o)&&(o=t.style[e]),Bt.test(o))return o;i=a&&(G.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+$(t,e,n||(a?"border":"content"),i,s)+"px"}function _(t,e){for(var n,i,o,s=[],a=0,r=t.length;r>a;a++)i=t[a],i.style&&(s[a]=vt.get(i,"olddisplay"),n=i.style.display,e?(s[a]||"none"!==n||(i.style.display=""),""===i.style.display&&St(i)&&(s[a]=vt.access(i,"olddisplay",w(i.nodeName)))):(o=St(i),"none"===n&&o||vt.set(i,"olddisplay",o?n:Z.css(i,"display"))));for(a=0;r>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[a]||"":"none"));return t}function D(t,e,n,i,o){return new D.prototype.init(t,e,n,i,o)}function R(){return setTimeout(function(){Gt=void 0}),Gt=Z.now()}function E(t,e){var n,i=0,o={height:t};for(e=e?1:0;4>i;i+=2-e)n=Ct[i],o["margin"+n]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function M(t,e,n){for(var i,o=(ne[e]||[]).concat(ne["*"]),s=0,a=o.length;a>s;s++)if(i=o[s].call(n,e,t))return i}function H(t,e,n){var i,o,s,a,r,l,c,d,u=this,p={},h=t.style,f=t.nodeType&&St(t),m=vt.get(t,"fxshow");n.queue||(r=Z._queueHooks(t,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,u.always(function(){u.always(function(){r.unqueued--,Z.queue(t,"fx").length||r.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=Z.css(t,"display"),d="none"===c?vt.get(t,"olddisplay")||w(t.nodeName):c,"inline"===d&&"none"===Z.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],Qt.exec(o)){if(delete e[i],s=s||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;f=!0}p[i]=m&&m[i]||Z.style(t,i)}else c=void 0;if(Z.isEmptyObject(p))"inline"===("none"===c?w(t.nodeName):c)&&(h.display=c);else{m?"hidden"in m&&(f=m.hidden):m=vt.access(t,"fxshow",{}),s&&(m.hidden=!f),f?Z(t).show():u.done(function(){Z(t).hide()}),u.done(function(){var e;vt.remove(t,"fxshow");for(e in p)Z.style(t,e,p[e])});for(i in p)a=M(f?m[i]:0,i,u),i in m||(m[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function N(t,e){var n,i,o,s,a;for(n in t)if(i=Z.camelCase(n),o=e[i],s=t[n],Z.isArray(s)&&(o=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),a=Z.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=o)}else e[i]=o}function P(t,e,n){var i,o,s=0,a=ee.length,r=Z.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Gt||R(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,s=1-i,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(s);return r.notifyWith(t,[c,s,n]),1>s&&l?n:(r.resolveWith(t,[c]),!1)},c=r.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Gt||R(),duration:n.duration,tweens:[],createTween:function(e,n){var i=Z.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return e?r.resolveWith(t,[c,e]):r.rejectWith(t,[c,e]),this}}),d=c.props;for(N(d,c.opts.specialEasing);a>s;s++)if(i=ee[s].call(c,t,d,c.opts))return i;return Z.map(d,M,c),Z.isFunction(c.opts.start)&&c.opts.start.call(t,c),Z.fx.timer(Z.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function L(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,s=e.toLowerCase().match(ht)||[];if(Z.isFunction(n))for(;i=s[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function A(t,e,n,i){function o(r){var l;return s[r]=!0,Z.each(t[r]||[],function(t,r){var c=r(e,n,i);return"string"!=typeof c||a||s[c]?a?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var s={},a=t===ye;return o(e.dataTypes[0])||!s["*"]&&o("*")}function I(t,e){var n,i,o=Z.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&Z.extend(!0,t,i),t}function j(t,e,n){for(var i,o,s,a,r=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in r)if(r[o]&&r[o].test(i)){l.unshift(o);break}if(l[0]in n)s=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function O(t,e,n,i){var o,s,a,r,l,c={},d=t.dataTypes.slice();if(d[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(s=d.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(a=c[l+" "+s]||c["* "+s],!a)for(o in c)if(r=o.split(" "),r[1]===s&&(a=c[l+" "+r[0]]||c["* "+r[0]])){a===!0?a=c[o]:c[o]!==!0&&(s=r[0],d.unshift(r[1]));break}if(a!==!0)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function z(t,e,n,i){var o;if(Z.isArray(e))Z.each(e,function(e,o){n||ke.test(t)?i(t,o):z(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==Z.type(e))i(t,e);else for(o in e)z(t+"["+o+"]",e[o],n,i)}function F(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var B=[],V=B.slice,U=B.concat,q=B.push,W=B.indexOf,Y={},X=Y.toString,J=Y.hasOwnProperty,G={},K=t.document,Q="2.1.3",Z=function(t,e){return new Z.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,nt=/-([\da-z])/gi,it=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return V.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:V.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:q,sort:B.sort,splice:B.splice},Z.extend=Z.fn.extend=function(){var t,e,n,i,o,s,a=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[r]||{},r++),"object"==typeof a||Z.isFunction(a)||(a={}),r===l&&(a=this,r--);l>r;r++)if(null!=(t=arguments[r]))for(e in t)n=a[e],i=t[e],a!==i&&(c&&i&&(Z.isPlainObject(i)||(o=Z.isArray(i)))?(o?(o=!1,s=n&&Z.isArray(n)?n:[]):s=n&&Z.isPlainObject(n)?n:{},a[e]=Z.extend(c,s,i)):void 0!==i&&(a[e]=i));return a},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"===Z.type(t)&&!t.nodeType&&!Z.isWindow(t)&&!(t.constructor&&!J.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Y[X.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=K.createElement("script"),e.text=t,K.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(et,"ms-").replace(nt,it)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,s=0,a=t.length,r=n(t);if(i){if(r)for(;a>s&&(o=e.apply(t[s],i),o!==!1);s++);else for(s in t)if(o=e.apply(t[s],i),o===!1)break}else if(r)for(;a>s&&(o=e.call(t[s],s,t[s]),o!==!1);s++);else for(s in t)if(o=e.call(t[s],s,t[s]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?Z.merge(i,"string"==typeof t?[t]:t):q.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:W.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],s=0,a=t.length,r=!n;a>s;s++)i=!e(t[s],s),i!==r&&o.push(t[s]);return o},map:function(t,e,i){var o,s=0,a=t.length,r=n(t),l=[];if(r)for(;a>s;s++)o=e(t[s],s,i),null!=o&&l.push(o);else for(s in t)o=e(t[s],s,i),null!=o&&l.push(o);return U.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(n=t[e],e=t,t=n),Z.isFunction(t)?(i=V.call(arguments,2),o=function(){return t.apply(e||this,i.concat(V.call(arguments)))},o.guid=t.guid=t.guid||Z.guid++,o):void 0},now:Date.now,support:G}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()});var ot=function(t){function e(t,e,n,i){var o,s,a,r,l,c,u,h,f,m;if((e?e.ownerDocument||e:z)!==H&&M(e),e=e||H,n=n||[],r=e.nodeType,"string"!=typeof t||!t||1!==r&&9!==r&&11!==r)return n;if(!i&&P){if(11!==r&&(o=bt.exec(t)))if(a=o[1]){if(9===r){if(s=e.getElementById(a),!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(a))&&j(e,s)&&s.id===a)return n.push(s),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((a=o[3])&&x.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(a)),n}if(x.qsa&&(!L||!L.test(t))){if(h=u=O,f=e,m=1!==r&&t,1===r&&"object"!==e.nodeName.toLowerCase()){for(c=$(t),(u=e.getAttribute("id"))?h=u.replace(wt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+p(c[l]);f=yt.test(t)&&d(e.parentNode)||e,m=c.join(",")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(t){}finally{u||e.removeAttribute("id")}}}return _(t.replace(lt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>C.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[O]=!0,t}function o(t){var e=H.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=t.length;i--;)C.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function r(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var o,s=t([],n.length,e),a=s.length;a--;)n[o=s[a]]&&(n[o]=!(i[o]=n[o]))})})}function d(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function h(t,e,n){var i=e.dir,o=n&&"parentNode"===i,s=B++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,s)}:function(e,n,a){var r,l,c=[F,s];if(a){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[O]||(e[O]={}),(r=l[i])&&r[0]===F&&r[1]===s)return c[2]=r[2];if(l[i]=c,c[2]=t(e,n,a))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var o=0,s=n.length;s>o;o++)e(t,n[o],i);return i}function g(t,e,n,i,o){for(var s,a=[],r=0,l=t.length,c=null!=e;l>r;r++)(s=t[r])&&(!n||n(s,i,o))&&(a.push(s),c&&e.push(r));return a}function v(t,e,n,o,s,a){return o&&!o[O]&&(o=v(o)),s&&!s[O]&&(s=v(s,a)),i(function(i,a,r,l){var c,d,u,p=[],h=[],f=a.length,v=i||m(e||"*",r.nodeType?[r]:r,[]),b=!t||!i&&e?v:g(v,p,t,r,l),y=n?s||(i?t:f||o)?[]:a:b;if(n&&n(b,y,r,l),o)for(c=g(y,h),o(c,[],r,l),d=c.length;d--;)(u=c[d])&&(y[h[d]]=!(b[h[d]]=u));if(i){if(s||t){if(s){for(c=[],d=y.length;d--;)(u=y[d])&&c.push(b[d]=u);s(null,y=[],c,l)}for(d=y.length;d--;)(u=y[d])&&(c=s?tt(i,u):p[d])>-1&&(i[c]=!(a[c]=u))}}else y=g(y===a?y.splice(f,y.length):y),s?s(null,a,y,l):Q.apply(a,y)})}function b(t){for(var e,n,i,o=t.length,s=C.relative[t[0].type],a=s||C.relative[" "],r=s?1:0,l=h(function(t){return t===e},a,!0),c=h(function(t){return tt(e,t)>-1},a,!0),d=[function(t,n,i){var o=!s&&(i||n!==D)||((e=n).nodeType?l(t,n,i):c(t,n,i));return e=null,o}];o>r;r++)if(n=C.relative[t[r].type])d=[h(f(d),n)];else{if(n=C.filter[t[r].type].apply(null,t[r].matches),
n[O]){for(i=++r;o>i&&!C.relative[t[i].type];i++);return v(r>1&&f(d),r>1&&p(t.slice(0,r-1).concat({value:" "===t[r-2].type?"*":""})).replace(lt,"$1"),n,i>r&&b(t.slice(r,i)),o>i&&b(t=t.slice(i)),o>i&&p(t))}d.push(n)}return f(d)}function y(t,n){var o=n.length>0,s=t.length>0,a=function(i,a,r,l,c){var d,u,p,h=0,f="0",m=i&&[],v=[],b=D,y=i||s&&C.find.TAG("*",c),w=F+=null==b?1:Math.random()||.1,x=y.length;for(c&&(D=a!==H&&a);f!==x&&null!=(d=y[f]);f++){if(s&&d){for(u=0;p=t[u++];)if(p(d,a,r)){l.push(d);break}c&&(F=w)}o&&((d=!p&&d)&&h--,i&&m.push(d))}if(h+=f,o&&f!==h){for(u=0;p=n[u++];)p(m,v,a,r);if(i){if(h>0)for(;f--;)m[f]||v[f]||(v[f]=G.call(l));v=g(v)}Q.apply(l,v),c&&!i&&v.length>0&&h+n.length>1&&e.uniqueSort(l)}return c&&(F=w,D=b),m};return o?i(a):a}var w,x,C,S,k,$,T,_,D,R,E,M,H,N,P,L,A,I,j,O="sizzle"+1*new Date,z=t.document,F=0,B=0,V=n(),U=n(),q=n(),W=function(t,e){return t===e&&(E=!0),0},Y=1<<31,X={}.hasOwnProperty,J=[],G=J.pop,K=J.push,Q=J.push,Z=J.slice,tt=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=it.replace("w","w#"),st="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+nt+"*\\]",at=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",rt=new RegExp(nt+"+","g"),lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),dt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ut=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(at),ht=new RegExp("^"+ot+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),Ct=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},St=function(){M()};try{Q.apply(J=Z.call(z.childNodes),z.childNodes),J[z.childNodes.length].nodeType}catch(t){Q={apply:J.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}x=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},M=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:z;return i!==H&&9===i.nodeType&&i.documentElement?(H=i,N=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",St,!1):n.attachEvent&&n.attachEvent("onunload",St)),P=!k(i),x.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(i.getElementsByClassName),x.getById=o(function(t){return N.appendChild(t).id=O,!i.getElementsByName||!i.getElementsByName(O).length}),x.getById?(C.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&P){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(xt,Ct);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(xt,Ct);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[o++];)1===n.nodeType&&i.push(n);return i}return s},C.find.CLASS=x.getElementsByClassName&&function(t,e){return P?e.getElementsByClassName(t):void 0},A=[],L=[],(x.qsa=vt.test(i.querySelectorAll))&&(o(function(t){N.appendChild(t).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+O+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+O+"+*").length||L.push(".#.+[+~]")}),o(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(x.matchesSelector=vt.test(I=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){x.disconnectedMatch=I.call(t,"div"),I.call(t,"[s!='']:x"),A.push("!=",at)}),L=L.length&&new RegExp(L.join("|")),A=A.length&&new RegExp(A.join("|")),e=vt.test(N.compareDocumentPosition),j=e||vt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return E=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===z&&j(z,t)?-1:e===i||e.ownerDocument===z&&j(z,e)?1:R?tt(R,t)-tt(R,e):0:4&n?-1:1)}:function(t,e){if(t===e)return E=!0,0;var n,o=0,s=t.parentNode,r=e.parentNode,l=[t],c=[e];if(!s||!r)return t===i?-1:e===i?1:s?-1:r?1:R?tt(R,t)-tt(R,e):0;if(s===r)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===z?-1:c[o]===z?1:0},i):H},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==H&&M(t),n=n.replace(ut,"='$1']"),!(!x.matchesSelector||!P||A&&A.test(n)||L&&L.test(n)))try{var i=I.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,H,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==H&&M(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==H&&M(t);var n=C.attrHandle[e.toLowerCase()],i=n&&X.call(C.attrHandle,e.toLowerCase())?n(t,e,!P):void 0;return void 0!==i?i:x.attributes||!P?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(E=!x.detectDuplicates,R=!x.sortStable&&t.slice(0),t.sort(W),E){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return R=null,t},S=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,Ct),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,Ct),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&pt.test(n)&&(e=$(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,Ct).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=V[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&V(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var s=e.attr(o,t);return null==s?"!="===n:!n||(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(rt," ")+" ").indexOf(i)>-1:"|="===n&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,o){var s="nth"!==t.slice(0,3),a="last"!==t.slice(-4),r="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,d,u,p,h,f,m=s!==a?"nextSibling":"previousSibling",g=e.parentNode,v=r&&e.nodeName.toLowerCase(),b=!l&&!r;if(g){if(s){for(;m;){for(u=e;u=u[m];)if(r?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&b){for(d=g[O]||(g[O]={}),c=d[t]||[],h=c[0]===F&&c[1],p=c[0]===F&&c[2],u=h&&g.childNodes[h];u=++h&&u&&u[m]||(p=h=0)||f.pop();)if(1===u.nodeType&&++p&&u===e){d[t]=[F,h,p];break}}else if(b&&(c=(e[O]||(e[O]={}))[t])&&c[0]===F)p=c[1];else for(;(u=++h&&u&&u[m]||(p=h=0)||f.pop())&&((r?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++p||(b&&((u[O]||(u[O]={}))[t]=[F,p]),u!==e)););return p-=o,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(t,n){var o,s=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[O]?s(n):s.length>1?(o=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=s(t,n),a=o.length;a--;)i=tt(t,o[a]),t[i]=!(e[i]=o[a])}):function(t){return s(t,0,o)}):s}},pseudos:{not:i(function(t){var e=[],n=[],o=T(t.replace(lt,"$1"));return o[O]?i(function(t,e,n,i){for(var s,a=o(t,null,i,[]),r=t.length;r--;)(s=a[r])&&(t[r]=!(e[r]=s))}):function(t,i,s){return e[0]=t,o(e,null,s,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(xt,Ct),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,Ct).toLowerCase(),function(e){var n;do if(n=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=r(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return u.prototype=C.filters=C.pseudos,C.setFilters=new u,$=e.tokenize=function(t,n){var i,o,s,a,r,l,c,d=U[t+" "];if(d)return n?0:d.slice(0);for(r=t,l=[],c=C.preFilter;r;){(!i||(o=ct.exec(r)))&&(o&&(r=r.slice(o[0].length)||r),l.push(s=[])),i=!1,(o=dt.exec(r))&&(i=o.shift(),s.push({value:i,type:o[0].replace(lt," ")}),r=r.slice(i.length));for(a in C.filter)!(o=ft[a].exec(r))||c[a]&&!(o=c[a](o))||(i=o.shift(),s.push({value:i,type:a,matches:o}),r=r.slice(i.length));if(!i)break}return n?r.length:r?e.error(t):U(t,l).slice(0)},T=e.compile=function(t,e){var n,i=[],o=[],s=q[t+" "];if(!s){for(e||(e=$(t)),n=e.length;n--;)s=b(e[n]),s[O]?i.push(s):o.push(s);s=q(t,y(o,i)),s.selector=t}return s},_=e.select=function(t,e,n,i){var o,s,a,r,l,c="function"==typeof t&&t,u=!i&&$(t=c.selector||t);if(n=n||[],1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&x.getById&&9===e.nodeType&&P&&C.relative[s[1].type]){if(e=(C.find.ID(a.matches[0].replace(xt,Ct),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(o=ft.needsContext.test(t)?0:s.length;o--&&(a=s[o],!C.relative[r=a.type]);)if((l=C.find[r])&&(i=l(a.matches[0].replace(xt,Ct),yt.test(s[0].type)&&d(e.parentNode)||e))){if(s.splice(o,1),t=i.length&&p(s),!t)return Q.apply(n,i),n;break}}return(c||T(t,u))(i,e,!P,n,yt.test(t)&&d(e.parentNode)||e),n},x.sortStable=O.split("").sort(W).join("")===O,x.detectDuplicates=!!E,M(),x.sortDetached=o(function(t){return 1&t.compareDocumentPosition(H.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(et,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);Z.find=ot,Z.expr=ot.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=ot.uniqueSort,Z.text=ot.getText,Z.isXMLDoc=ot.isXML,Z.contains=ot.contains;var st=Z.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rt=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?Z.find.matchesSelector(i,t)?[i]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,n=this.length,i=[],o=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;n>e;e++)if(Z.contains(o[e],this))return!0}));for(e=0;n>e;e++)Z.find(t,o[e],i);return i=this.pushStack(n>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&st.test(t)?Z(t):t||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,dt=Z.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ct.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:K,!0)),at.test(n[1])&&Z.isPlainObject(e))for(n in e)Z.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return i=K.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=K,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof lt.ready?lt.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};dt.prototype=Z.fn,lt=Z(K);var ut=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&Z(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Z.fn.extend({has:function(t){var e=Z(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,s=[],a=st.test(t)||"string"!=typeof t?Z(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?Z.unique(s):s)},index:function(t){return t?"string"==typeof t?W.call(Z(t),this[0]):W.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Z.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Z.dir(t,"previousSibling",n)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(n,i){var o=Z.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=Z.filter(i,o)),this.length>1&&(pt[t]||Z.unique(o),ut.test(t)&&o.reverse()),this.pushStack(o)}});var ht=/\S+/g,ft={};Z.Callbacks=function(t){t="string"==typeof t?ft[t]||s(t):Z.extend({},t);var e,n,i,o,a,r,l=[],c=!t.once&&[],d=function(s){for(e=t.memory&&s,n=!0,r=o||0,o=0,a=l.length,i=!0;l&&a>r;r++)if(l[r].apply(s[0],s[1])===!1&&t.stopOnFalse){e=!1;break}i=!1,l&&(c?c.length&&d(c.shift()):e?l=[]:u.disable())},u={add:function(){if(l){var n=l.length;!function e(n){Z.each(n,function(n,i){var o=Z.type(i);"function"===o?t.unique&&u.has(i)||l.push(i):i&&i.length&&"string"!==o&&e(i)})}(arguments),i?a=l.length:e&&(o=n,d(e))}return this},remove:function(){return l&&Z.each(arguments,function(t,e){for(var n;(n=Z.inArray(e,l,n))>-1;)l.splice(n,1),i&&(a>=n&&a--,r>=n&&r--)}),this},has:function(t){return t?Z.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=e=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,e||u.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||n&&!c||(e=e||[],e=[t,e.slice?e.slice():e],i?c.push(e):d(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(n){Z.each(e,function(e,s){var a=Z.isFunction(t[e])&&t[e];o[s[1]](function(){var t=a&&a.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,i):i}},o={};return i.pipe=i.then,Z.each(e,function(t,s){var a=s[2],r=s[3];i[s[1]]=a.add,r&&a.add(function(){n=r},e[1^t][2].disable,e[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?i:this,arguments),this},o[s[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,s=V.call(arguments),a=s.length,r=1!==a||t&&Z.isFunction(t.promise)?a:0,l=1===r?t:Z.Deferred(),c=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?V.call(arguments):o,i===e?l.notifyWith(n,i):--r||l.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>o;o++)s[o]&&Z.isFunction(s[o].promise)?s[o].promise().done(c(o,i,s)).fail(l.reject).progress(c(o,n,e)):--r;return r||l.resolveWith(i,s),l.promise()}});var mt;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(mt.resolveWith(K,[Z]),Z.fn.triggerHandler&&(Z(K).triggerHandler("ready"),Z(K).off("ready"))))}}),Z.ready.promise=function(e){return mt||(mt=Z.Deferred(),"complete"===K.readyState?setTimeout(Z.ready):(K.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),mt.promise(e)},Z.ready.promise();var gt=Z.access=function(t,e,n,i,o,s,a){var r=0,l=t.length,c=null==n;if("object"===Z.type(n)){o=!0;for(r in n)Z.access(t,e,r,n[r],!0,s,a)}else if(void 0!==i&&(o=!0,Z.isFunction(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(Z(t),n)})),e))for(;l>r;r++)e(t[r],n,a?i:i.call(t[r],r,e(t[r],n)));return o?t:c?e.call(t):l?e(t[0],n):s};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},r.uid=1,r.accepts=Z.acceptData,r.prototype={key:function(t){if(!r.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=r.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,Z.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,o=this.key(t),s=this.cache[o];if("string"==typeof e)s[e]=n;else if(Z.isEmptyObject(s))Z.extend(this.cache[o],e);else for(i in e)s[i]=e[i];return s},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,Z.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,o,s=this.key(t),a=this.cache[s];if(void 0===e)this.cache[s]={};else{Z.isArray(e)?i=e.concat(e.map(Z.camelCase)):(o=Z.camelCase(e),e in a?i=[e,o]:(i=o,i=i in a?[i]:i.match(ht)||[])),n=i.length;for(;n--;)delete a[i[n]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new r,bt=new r,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;Z.extend({hasData:function(t){return bt.hasData(t)||vt.hasData(t)},data:function(t,e,n){return bt.access(t,e,n)},removeData:function(t,e){bt.remove(t,e)},_data:function(t,e,n){return vt.access(t,e,n)},_removeData:function(t,e){vt.remove(t,e)}}),Z.fn.extend({data:function(t,e){var n,i,o,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(o=bt.get(s),1===s.nodeType&&!vt.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),l(s,i,o[i])));vt.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each(function(){bt.set(this,t)}):gt(this,function(e){var n,i=Z.camelCase(t);if(s&&void 0===e){if(n=bt.get(s,t),void 0!==n)return n;if(n=bt.get(s,i),void 0!==n)return n;if(n=l(s,i,void 0),void 0!==n)return n}else this.each(function(){var n=bt.get(this,i);bt.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&bt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){bt.remove(this,t)})}}),Z.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=vt.get(t,e),n&&(!i||Z.isArray(n)?i=vt.access(t,e,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Z.queue(t,e),i=n.length,o=n.shift(),s=Z._queueHooks(t,e),a=function(){Z.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete s.stop,o.call(t,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return vt.get(t,n)||vt.access(t,n,{empty:Z.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",n])})})}}),Z.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?Z.queue(this[0],t):void 0===e?this:this.each(function(){var n=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=Z.Deferred(),s=this,a=this.length,r=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=vt.get(s[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(r));return r(),o.promise(e)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ct=["Top","Right","Bottom","Left"],St=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},kt=/^(?:checkbox|radio)$/i;!function(){var t=K.createDocumentFragment(),e=t.appendChild(K.createElement("div")),n=K.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),G.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",G.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var $t="undefined";G.focusinBubbles="onfocusin"in t;var Tt=/^key/,_t=/^(?:mouse|pointer|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,Rt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,n,i,o){var s,a,r,l,c,d,u,p,h,f,m,g=vt.get(t);if(g)for(n.handler&&(s=n,n=s.handler,o=s.selector),n.guid||(n.guid=Z.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(e){return typeof Z!==$t&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(ht)||[""],c=e.length;c--;)r=Rt.exec(e[c])||[],h=m=r[1],f=(r[2]||"").split(".").sort(),h&&(u=Z.event.special[h]||{},h=(o?u.delegateType:u.bindType)||h,u=Z.event.special[h]||{},d=Z.extend({type:h,origType:m,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&Z.expr.match.needsContext.test(o),namespace:f.join(".")},s),(p=l[h])||(p=l[h]=[],p.delegateCount=0,u.setup&&u.setup.call(t,i,f,a)!==!1||t.addEventListener&&t.addEventListener(h,a,!1)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),Z.event.global[h]=!0)},remove:function(t,e,n,i,o){var s,a,r,l,c,d,u,p,h,f,m,g=vt.hasData(t)&&vt.get(t);if(g&&(l=g.events)){for(e=(e||"").match(ht)||[""],c=e.length;c--;)if(r=Rt.exec(e[c])||[],h=m=r[1],f=(r[2]||"").split(".").sort(),h){for(u=Z.event.special[h]||{},h=(i?u.delegateType:u.bindType)||h,p=l[h]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=p.length;s--;)d=p[s],!o&&m!==d.origType||n&&n.guid!==d.guid||r&&!r.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(p.splice(s,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(t,d));a&&!p.length&&(u.teardown&&u.teardown.call(t,f,g.handle)!==!1||Z.removeEvent(t,h,g.handle),delete l[h])}else for(h in l)Z.event.remove(t,h+e[c],n,i,!0);Z.isEmptyObject(l)&&(delete g.handle,vt.remove(t,"events"))}},trigger:function(e,n,i,o){var s,a,r,l,c,d,u,p=[i||K],h=J.call(e,"type")?e.type:e,f=J.call(e,"namespace")?e.namespace.split("."):[];if(a=r=i=i||K,3!==i.nodeType&&8!==i.nodeType&&!Dt.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,e=e[Z.expando]?e:new Z.Event(h,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:Z.makeArray(n,[e]),u=Z.event.special[h]||{},o||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!o&&!u.noBubble&&!Z.isWindow(i)){for(l=u.delegateType||h,Dt.test(l+h)||(a=a.parentNode);a;a=a.parentNode)p.push(a),r=a;r===(i.ownerDocument||K)&&p.push(r.defaultView||r.parentWindow||t)}for(s=0;(a=p[s++])&&!e.isPropagationStopped();)e.type=s>1?l:u.bindType||h,d=(vt.get(a,"events")||{})[e.type]&&vt.get(a,"handle"),d&&d.apply(a,n),d=c&&a[c],d&&d.apply&&Z.acceptData(a)&&(e.result=d.apply(a,n),e.result===!1&&e.preventDefault());return e.type=h,o||e.isDefaultPrevented()||u._default&&u._default.apply(p.pop(),n)!==!1||!Z.acceptData(i)||c&&Z.isFunction(i[h])&&!Z.isWindow(i)&&(r=i[c],r&&(i[c]=null),Z.event.triggered=h,i[h](),Z.event.triggered=void 0,r&&(i[c]=r)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,n,i,o,s,a=[],r=V.call(arguments),l=(vt.get(this,"events")||{})[t.type]||[],c=Z.event.special[t.type]||{};if(r[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=Z.event.handlers.call(this,t,l),e=0;(o=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,n=0;(s=o.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,i=((Z.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,r),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,s,a=[],r=e.delegateCount,l=t.target;if(r&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(i=[],n=0;r>n;n++)s=e[n],o=s.selector+" ",void 0===i[o]&&(i[o]=s.needsContext?Z(o,this).index(l)>=0:Z.find(o,this,null,[l]).length),i[o]&&i.push(s);i.length&&a.push({elem:l,handlers:i})}return r<e.length&&a.push({elem:this,handlers:e.slice(r)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,s=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||K,i=n.documentElement,o=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,n,i,o=t.type,s=t,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=_t.test(o)?this.mouseHooks:Tt.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new Z.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=K),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result);
}}},simulate:function(t,e,n,i){var o=Z.extend(new Z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(o,null,e):Z.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:d):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,s=t.handleObj;return(!o||o!==i&&!Z.contains(i,o))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),G.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=vt.access(i,e);o||i.addEventListener(t,n,!0),vt.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=vt.access(i,e)-1;o?vt.access(i,e,o):(i.removeEventListener(t,n,!0),vt.remove(i,e))}}}),Z.fn.extend({on:function(t,e,n,i,o){var s,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=d;else if(!i)return this;return 1===o&&(s=i,i=function(t){return Z().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,Z(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=d),this.each(function(){Z.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Z.event.trigger(t,e,n,!0):void 0}});var Et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mt=/<([\w:]+)/,Ht=/<|&#?\w+;/,Nt=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Lt=/^$|\/(?:java|ecma)script/i,At=/^true\/(.*)/,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,jt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jt.optgroup=jt.option,jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.thead,jt.th=jt.td,Z.extend({clone:function(t,e,n){var i,o,s,a,r=t.cloneNode(!0),l=Z.contains(t.ownerDocument,t);if(!(G.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(a=v(r),s=v(t),i=0,o=s.length;o>i;i++)b(s[i],a[i]);if(e)if(n)for(s=s||v(t),a=a||v(r),i=0,o=s.length;o>i;i++)g(s[i],a[i]);else g(t,r);return a=v(r,"script"),a.length>0&&m(a,!l&&v(t,"script")),r},buildFragment:function(t,e,n,i){for(var o,s,a,r,l,c,d=e.createDocumentFragment(),u=[],p=0,h=t.length;h>p;p++)if(o=t[p],o||0===o)if("object"===Z.type(o))Z.merge(u,o.nodeType?[o]:o);else if(Ht.test(o)){for(s=s||d.appendChild(e.createElement("div")),a=(Mt.exec(o)||["",""])[1].toLowerCase(),r=jt[a]||jt._default,s.innerHTML=r[1]+o.replace(Et,"<$1></$2>")+r[2],c=r[0];c--;)s=s.lastChild;Z.merge(u,s.childNodes),s=d.firstChild,s.textContent=""}else u.push(e.createTextNode(o));for(d.textContent="",p=0;o=u[p++];)if((!i||-1===Z.inArray(o,i))&&(l=Z.contains(o.ownerDocument,o),s=v(d.appendChild(o),"script"),l&&m(s),n))for(c=0;o=s[c++];)Lt.test(o.type||"")&&n.push(o);return d},cleanData:function(t){for(var e,n,i,o,s=Z.event.special,a=0;void 0!==(n=t[a]);a++){if(Z.acceptData(n)&&(o=n[vt.expando],o&&(e=vt.cache[o]))){if(e.events)for(i in e.events)s[i]?Z.event.remove(n,i):Z.removeEvent(n,i,e.handle);vt.cache[o]&&delete vt.cache[o]}delete bt.cache[n[bt.expando]]}}}),Z.fn.extend({text:function(t){return gt(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?Z.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(e&&Z.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return gt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Nt.test(t)&&!jt[(Mt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Et,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(Z.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=U.apply([],t);var n,i,o,s,a,r,l=0,c=this.length,d=this,u=c-1,p=t[0],m=Z.isFunction(p);if(m||c>1&&"string"==typeof p&&!G.checkClone&&Pt.test(p))return this.each(function(n){var i=d.eq(n);m&&(t[0]=p.call(this,n,i.html())),i.domManip(t,e)});if(c&&(n=Z.buildFragment(t,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(o=Z.map(v(n,"script"),h),s=o.length;c>l;l++)a=n,l!==u&&(a=Z.clone(a,!0,!0),s&&Z.merge(o,v(a,"script"))),e.call(this[l],a,l);if(s)for(r=o[o.length-1].ownerDocument,Z.map(o,f),l=0;s>l;l++)a=o[l],Lt.test(a.type||"")&&!vt.access(a,"globalEval")&&Z.contains(r,a)&&(a.src?Z._evalUrl&&Z._evalUrl(a.src):Z.globalEval(a.textContent.replace(It,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var n,i=[],o=Z(t),s=o.length-1,a=0;s>=a;a++)n=a===s?this:this.clone(!0),Z(o[a])[e](n),q.apply(i,n.get());return this.pushStack(i)}});var Ot,zt={},Ft=/^margin/,Bt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Vt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",o.appendChild(s);var e=t.getComputedStyle(a,null);n="1%"!==e.top,i="4px"===e.width,o.removeChild(s)}var n,i,o=K.documentElement,s=K.createElement("div"),a=K.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",G.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(a),t.getComputedStyle&&Z.extend(G,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},reliableMarginRight:function(){var e,n=a.appendChild(K.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",o.appendChild(s),e=!parseFloat(t.getComputedStyle(n,null).marginRight),o.removeChild(s),a.removeChild(n),e}}))}(),Z.swap=function(t,e,n,i){var o,s,a={};for(s in e)a[s]=t.style[s],t.style[s]=e[s];o=n.apply(t,i||[]);for(s in e)t.style[s]=a[s];return o};var Ut=/^(none|table(?!-c[ea]).+)/,qt=new RegExp("^("+xt+")(.*)$","i"),Wt=new RegExp("^([+-])=("+xt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=x(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,r=Z.camelCase(e),l=t.style;return e=Z.cssProps[r]||(Z.cssProps[r]=S(l,r)),a=Z.cssHooks[e]||Z.cssHooks[r],void 0===n?a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:l[e]:(s=typeof n,"string"===s&&(o=Wt.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(Z.css(t,e)),s="number"),void(null!=n&&n===n&&("number"!==s||Z.cssNumber[r]||(n+="px"),G.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l[e]=n))))}},css:function(t,e,n,i){var o,s,a,r=Z.camelCase(e);return e=Z.cssProps[r]||(Z.cssProps[r]=S(t.style,r)),a=Z.cssHooks[e]||Z.cssHooks[r],a&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=x(t,e,i)),"normal"===o&&e in Xt&&(o=Xt[e]),""===n||n?(s=parseFloat(o),n===!0||Z.isNumeric(s)?s||0:o):o}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,n,i){return n?Ut.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,Yt,function(){return T(t,e,i)}):T(t,e,i):void 0},set:function(t,n,i){var o=i&&Vt(t);return k(t,n,i?$(t,e,i,"border-box"===Z.css(t,"boxSizing",!1,o),o):0)}}}),Z.cssHooks.marginRight=C(G.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(n){for(var i=0,o={},s="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+Ct[i]+e]=s[i]||s[i-2]||s[0];return o}},Ft.test(t)||(Z.cssHooks[t+e].set=k)}),Z.fn.extend({css:function(t,e){return gt(this,function(t,e,n){var i,o,s={},a=0;if(Z.isArray(e)){for(i=Vt(t),o=e.length;o>a;a++)s[e[a]]=Z.css(t,e[a],!1,i);return s}return void 0!==n?Z.style(t,e,n):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){St(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=D,D.prototype={constructor:D,init:function(t,e,n,i,o,s){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(Z.cssNumber[n]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,n=D.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=D.prototype.init,Z.fx.step={};var Gt,Kt,Qt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[H],ne={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=Zt.exec(e),s=o&&o[3]||(Z.cssNumber[t]?"":"px"),a=(Z.cssNumber[t]||"px"!==s&&+i)&&Zt.exec(Z.css(n.elem,t)),r=1,l=20;if(a&&a[3]!==s){s=s||a[3],o=o||[],a=+i||1;do r=r||".5",a/=r,Z.style(n.elem,t,a+s);while(r!==(r=n.cur()/i)&&1!==r&&--l)}return o&&(a=n.start=+a||+i||0,n.unit=s,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};Z.Animation=Z.extend(P,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],ne[n]=ne[n]||[],ne[n].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Z.speed=function(t,e,n){var i=t&&"object"==typeof t?Z.extend({},t):{complete:n||!n&&e||Z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Z.isFunction(e)&&e};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(t,e,n,i){return this.filter(St).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=Z.isEmptyObject(t),s=Z.speed(e,n,i),a=function(){var e=P(this,Z.extend({},t),s);(o||vt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,o||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",s=Z.timers,a=vt.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&te.test(o)&&i(a[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(n),e=!1,s.splice(o,1));(e||!n)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=vt.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],s=Z.timers,a=i?i.length:0;for(n.finish=!0,Z.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var n=Z.fn[e];Z.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(E(e,!0),t,i,o)}}),Z.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,n=Z.timers;for(Gt=Z.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Z.fx.stop(),Gt=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Kt||(Kt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Kt),Kt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=K.createElement("input"),e=K.createElement("select"),n=e.appendChild(K.createElement("option"));t.type="checkbox",G.checkOn=""!==t.value,G.optSelected=n.selected,e.disabled=!0,G.optDisabled=!n.disabled,t=K.createElement("input"),t.value="t",t.type="radio",G.radioValue="t"===t.value}();var ie,oe,se=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return gt(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,n){var i,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===$t?Z.prop(t,e,n):(1===s&&Z.isXMLDoc(t)||(e=e.toLowerCase(),i=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?oe:ie)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=Z.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void Z.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,s=e&&e.match(ht);if(s&&1===t.nodeType)for(;n=s[o++];)i=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!G.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),oe={set:function(t,e,n){return e===!1?Z.removeAttr(t,n):t.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var n=se[e]||Z.find.attr;se[e]=function(t,e,i){var o,s;return i||(s=se[e],se[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,se[e]=s),o}});var ae=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return gt(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,o,s,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return s=1!==a||!Z.isXMLDoc(t),s&&(e=Z.propFix[e]||e,o=Z.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ae.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),G.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var re=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,n,i,o,s,a,r="string"==typeof t&&t,l=0,c=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(r)for(e=(t||"").match(ht)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(re," "):" ")){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a=Z.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,o,s,a,r=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(r)for(e=(t||"").match(ht)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(re," "):"")){for(s=0;o=e[s++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");a=t?Z.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(Z.isFunction(t)?function(n){Z(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,o=Z(this),s=t.match(ht)||[];e=s[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===$t||"boolean"===n)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(re," ").indexOf(e)>=0)return!0;return!1}});var le=/\r/g;Z.fn.extend({val:function(t){var e,n,i,o=this[0];return arguments.length?(i=Z.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,Z(this).val()):t,null==o?o="":"number"==typeof o?o+="":Z.isArray(o)&&(o=Z.map(o,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))})):o?(e=Z.valHooks[o.type]||Z.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(le,""):null==n?"":n)):void 0}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,s="select-one"===t.type||0>o,a=s?null:[],r=s?o+1:i.length,l=0>o?r:s?o:0;r>l;l++)if(n=i[l],!(!n.selected&&l!==o||(G.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(e=Z(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,s=Z.makeArray(e),a=o.length;a--;)i=o[a],(i.selected=Z.inArray(i.value,s)>=0)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},G.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ce=Z.now(),de=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(t){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var ue=/#.*$/,pe=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/gm,fe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,me=/^(?:GET|HEAD)$/,ge=/^\/\//,ve=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,be={},ye={},we="*/".concat("*"),xe=t.location.href,Ce=ve.exec(xe.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe,type:"GET",isLocal:fe.test(Ce[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":we,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?I(I(t,Z.ajaxSettings),e):I(Z.ajaxSettings,t)},ajaxPrefilter:L(be),ajaxTransport:L(ye),ajax:function(t,e){function n(t,e,n,a){var l,d,v,b,w,C=e;2!==y&&(y=2,r&&clearTimeout(r),i=void 0,s=a||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,n&&(b=j(u,x,n)),b=O(u,b,x,l),l?(u.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Z.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(Z.etag[o]=w)),204===t||"HEAD"===u.type?C="nocontent":304===t?C="notmodified":(C=b.state,d=b.data,v=b.error,l=!v)):(v=C,(t||!C)&&(C="error",0>t&&(t=0))),x.status=t,x.statusText=(e||C)+"",l?f.resolveWith(p,[d,C,x]):f.rejectWith(p,[x,C,v]),x.statusCode(g),g=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[x,u,l?d:v]),m.fireWith(p,[x,C]),c&&(h.trigger("ajaxComplete",[x,u]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,s,a,r,l,c,d,u=Z.ajaxSetup({},e),p=u.context||u,h=u.context&&(p.nodeType||p.jquery)?Z(p):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),g=u.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!a)for(a={};e=he.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=b[n]=b[n]||t,v[t]=e),this},overrideMimeType:function(t){return y||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),n(0,e),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,u.url=((t||u.url||xe)+"").replace(ue,"").replace(ge,Ce[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=Z.trim(u.dataType||"*").toLowerCase().match(ht)||[""],null==u.crossDomain&&(l=ve.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===Ce[1]&&l[2]===Ce[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(Ce[3]||("http:"===Ce[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=Z.param(u.data,u.traditional)),A(be,u,e,x),2===y)return x;c=Z.event&&u.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!me.test(u.type),o=u.url,u.hasContent||(u.data&&(o=u.url+=(de.test(o)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=pe.test(o)?o.replace(pe,"$1_="+ce++):o+(de.test(o)?"&":"?")+"_="+ce++)),u.ifModified&&(Z.lastModified[o]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[o]),Z.etag[o]&&x.setRequestHeader("If-None-Match",Z.etag[o])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+we+"; q=0.01":""):u.accepts["*"]);for(d in u.headers)x.setRequestHeader(d,u.headers[d]);if(u.beforeSend&&(u.beforeSend.call(p,x,u)===!1||2===y))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](u[d]);if(i=A(ye,u,e,x)){x.readyState=1,c&&h.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(r=setTimeout(function(){x.abort("timeout")},u.timeout));try{y=1,i.send(v,n)}catch(t){if(!(2>y))throw t;n(-1,t)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return Z.get(t,e,n,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,n,i,o){return Z.isFunction(n)&&(o=o||i,i=n,n=void 0),Z.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Z.isFunction(t)?function(e){Z(this).wrapInner(t.call(this,e))}:function(){var e=Z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(n){Z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var Se=/%20/g,ke=/\[\]$/,$e=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,_e=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var n,i=[],o=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){o(this.name,this.value)});else for(n in t)z(n,t[n],e,o);return i.join("&").replace(Se,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&_e.test(this.nodeName)&&!Te.test(t)&&(this.checked||!kt.test(t))}).map(function(t,e){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(t){return{name:e.name,value:t.replace($e,"\r\n")}}):{name:e.name,value:n.replace($e,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var De=0,Re={},Ee={0:200,1223:204},Me=Z.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Re)Re[t]()}),G.cors=!!Me&&"withCredentials"in Me,G.ajax=Me=!!Me,Z.ajaxTransport(function(t){var e;return G.cors||Me&&!t.crossDomain?{send:function(n,i){var o,s=t.xhr(),a=++De;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)s.setRequestHeader(o,n[o]);e=function(t){return function(){e&&(delete Re[a],e=s.onload=s.onerror=null,"abort"===t?s.abort():"error"===t?i(s.status,s.statusText):i(Ee[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=e(),s.onerror=e("error"),e=Re[a]=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,o){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),K.head.appendChild(e[0])},abort:function(){n&&n()}}}});var He=[],Ne=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=He.pop()||Z.expando+"_"+ce++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,n,i){var o,s,a,r=e.jsonp!==!1&&(Ne.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ne.test(e.data)&&"data");return r||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(Ne,"$1"+o):e.jsonp!==!1&&(e.url+=(de.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||Z.error(o+" was not called"),a[0]},e.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=s,e[o]&&(e.jsonpCallback=n.jsonpCallback,He.push(o)),a&&Z.isFunction(s)&&s(a[0]),a=s=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||K;var i=at.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=Z.buildFragment([t],e,o),o&&o.length&&Z(o).remove(),Z.merge([],i.childNodes))};var Pe=Z.fn.load;Z.fn.load=function(t,e,n){
if("string"!=typeof t&&Pe)return Pe.apply(this,arguments);var i,o,s,a=this,r=t.indexOf(" ");return r>=0&&(i=Z.trim(t.slice(r)),t=t.slice(0,r)),Z.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&Z.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,a.html(i?Z("<div>").append(Z.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,s||[t.responseText,e,t])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Le=t.document.documentElement;Z.offset={setOffset:function(t,e,n){var i,o,s,a,r,l,c,d=Z.css(t,"position"),u=Z(t),p={};"static"===d&&(t.style.position="relative"),r=u.offset(),s=Z.css(t,"top"),l=Z.css(t,"left"),c=("absolute"===d||"fixed"===d)&&(s+l).indexOf("auto")>-1,c?(i=u.position(),a=i.top,o=i.left):(a=parseFloat(s)||0,o=parseFloat(l)||0),Z.isFunction(e)&&(e=e.call(t,n,r)),null!=e.top&&(p.top=e.top-r.top+a),null!=e.left&&(p.left=e.left-r.left+o),"using"in e?e.using.call(t,p):u.css(p)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,n,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;return s?(e=s.documentElement,Z.contains(e,i)?(typeof i.getBoundingClientRect!==$t&&(o=i.getBoundingClientRect()),n=F(s),{top:o.top+n.pageYOffset-e.clientTop,left:o.left+n.pageXOffset-e.clientLeft}):o):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===Z.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(i=t.offset()),i.top+=Z.css(t[0],"borderTopWidth",!0),i.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-Z.css(n,"marginTop",!0),left:e.left-i.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Le;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Le})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i="pageYOffset"===n;Z.fn[e]=function(o){return gt(this,function(e,o,s){var a=F(e);return void 0===s?a?a[n]:e[o]:void(a?a.scrollTo(i?t.pageXOffset:s,i?s:t.pageYOffset):e[o]=s)},e,o,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=C(G.pixelPosition,function(t,n){return n?(n=x(t,e),Bt.test(n)?Z(t).position()[e]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){Z.fn[i]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||o===!0?"margin":"border");return gt(this,function(e,n,i){var o;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?Z.css(e,n,a):Z.style(e,n,i,a)},e,s?i:void 0,s,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Ae=t.jQuery,Ie=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=Ie),e&&t.jQuery===Z&&(t.jQuery=Ae),Z},typeof e===$t&&(t.jQuery=t.$=Z),Z}),function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,s=Function.prototype,a=i.push,r=i.slice,l=i.concat,c=o.toString,d=o.hasOwnProperty,u=i.forEach,p=i.map,h=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,b=i.indexOf,y=i.lastIndexOf,w=Array.isArray,x=Object.keys,C=s.bind,S=function(t){return t instanceof S?t:this instanceof S?void(this._wrapped=t):new S(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):t._=S,S.VERSION="1.6.0";var k=S.each=S.forEach=function(t,e,i){if(null==t)return t;if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,s=t.length;o<s;o++)if(e.call(i,t[o],o,t)===n)return}else for(var a=S.keys(t),o=0,s=a.length;o<s;o++)if(e.call(i,t[a[o]],a[o],t)===n)return;return t};S.map=S.collect=function(t,e,n){var i=[];return null==t?i:p&&t.map===p?t.map(e,n):(k(t,function(t,o,s){i.push(e.call(n,t,o,s))}),i)};var $="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return i&&(e=S.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(k(t,function(t,s,a){o?n=e.call(i,n,t,s,a):(n=t,o=!0)}),!o)throw new TypeError($);return n},S.reduceRight=S.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=S.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var a=S.keys(t);s=a.length}if(k(t,function(r,l,c){l=a?a[--s]:--s,o?n=e.call(i,n,t[l],l,c):(n=t[l],o=!0)}),!o)throw new TypeError($);return n},S.find=S.detect=function(t,e,n){var i;return T(t,function(t,o,s){if(e.call(n,t,o,s))return i=t,!0}),i},S.filter=S.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(k(t,function(t,o,s){e.call(n,t,o,s)&&i.push(t)}),i)},S.reject=function(t,e,n){return S.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},S.every=S.all=function(t,e,i){e||(e=S.identity);var o=!0;return null==t?o:g&&t.every===g?t.every(e,i):(k(t,function(t,s,a){if(!(o=o&&e.call(i,t,s,a)))return n}),!!o)};var T=S.some=S.any=function(t,e,i){e||(e=S.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(k(t,function(t,s,a){if(o||(o=e.call(i,t,s,a)))return n}),!!o)};S.contains=S.include=function(t,e){return null!=t&&(b&&t.indexOf===b?t.indexOf(e)!=-1:T(t,function(t){return t===e}))},S.invoke=function(t,e){var n=r.call(arguments,2),i=S.isFunction(e);return S.map(t,function(t){return(i?e:t[e]).apply(t,n)})},S.pluck=function(t,e){return S.map(t,S.property(e))},S.where=function(t,e){return S.filter(t,S.matches(e))},S.findWhere=function(t,e){return S.find(t,S.matches(e))},S.max=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-(1/0),o=-(1/0);return k(t,function(t,s,a){var r=e?e.call(n,t,s,a):t;r>o&&(i=t,o=r)}),i},S.min=function(t,e,n){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,o=1/0;return k(t,function(t,s,a){var r=e?e.call(n,t,s,a):t;r<o&&(i=t,o=r)}),i},S.shuffle=function(t){var e,n=0,i=[];return k(t,function(t){e=S.random(n++),i[n-1]=i[e],i[e]=t}),i},S.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=S.values(t)),t[S.random(t.length-1)]):S.shuffle(t).slice(0,Math.max(0,e))};var _=function(t){return null==t?S.identity:S.isFunction(t)?t:S.property(t)};S.sortBy=function(t,e,n){return e=_(e),S.pluck(S.map(t,function(t,i,o){return{value:t,index:i,criteria:e.call(n,t,i,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,i){var o={};return n=_(n),k(e,function(s,a){var r=n.call(i,s,a,e);t(o,r,s)}),o}};S.groupBy=D(function(t,e,n){S.has(t,e)?t[e].push(n):t[e]=[n]}),S.indexBy=D(function(t,e,n){t[e]=n}),S.countBy=D(function(t,e){S.has(t,e)?t[e]++:t[e]=1}),S.sortedIndex=function(t,e,n,i){n=_(n);for(var o=n.call(i,e),s=0,a=t.length;s<a;){var r=s+a>>>1;n.call(i,t[r])<o?s=r+1:a=r}return s},S.toArray=function(t){return t?S.isArray(t)?r.call(t):t.length===+t.length?S.map(t,S.identity):S.values(t):[]},S.size=function(t){return null==t?0:t.length===+t.length?t.length:S.keys(t).length},S.first=S.head=S.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:e<0?[]:r.call(t,0,e)},S.initial=function(t,e,n){return r.call(t,0,t.length-(null==e||n?1:e))},S.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:r.call(t,Math.max(t.length-e,0))},S.rest=S.tail=S.drop=function(t,e,n){return r.call(t,null==e||n?1:e)},S.compact=function(t){return S.filter(t,S.identity)};var R=function(t,e,n){return e&&S.every(t,S.isArray)?l.apply(n,t):(k(t,function(t){S.isArray(t)||S.isArguments(t)?e?a.apply(n,t):R(t,e,n):n.push(t)}),n)};S.flatten=function(t,e){return R(t,e,[])},S.without=function(t){return S.difference(t,r.call(arguments,1))},S.partition=function(t,e,n){e=_(e);var i=[],o=[];return k(t,function(t){(e.call(n,t)?i:o).push(t)}),[i,o]},S.uniq=S.unique=function(t,e,n,i){S.isFunction(e)&&(i=n,n=e,e=!1);var o=n?S.map(t,n,i):t,s=[],a=[];return k(o,function(n,i){(e?i&&a[a.length-1]===n:S.contains(a,n))||(a.push(n),s.push(t[i]))}),s},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(t){var e=r.call(arguments,1);return S.filter(S.uniq(t),function(t){return S.every(e,function(e){return S.contains(e,t)})})},S.difference=function(t){var e=l.apply(i,r.call(arguments,1));return S.filter(t,function(t){return!S.contains(e,t)})},S.zip=function(){for(var t=S.max(S.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;n<t;n++)e[n]=S.pluck(arguments,""+n);return e},S.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},S.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(t,e),t[i]===e?i:-1;i=n<0?Math.max(0,o+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;i<o;i++)if(t[i]===e)return i;return-1},S.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(y&&t.lastIndexOf===y)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},S.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,s=new Array(i);o<i;)s[o++]=t,t+=n;return s};var E=function(){};S.bind=function(t,e){var n,i;if(C&&t.bind===C)return C.apply(t,r.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(r.call(arguments)));E.prototype=t.prototype;var o=new E;E.prototype=null;var s=t.apply(o,n.concat(r.call(arguments)));return Object(s)===s?s:o}},S.partial=function(t){var e=r.call(arguments,1);return function(){for(var n=0,i=e.slice(),o=0,s=i.length;o<s;o++)i[o]===S&&(i[o]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},S.bindAll=function(t){var e=r.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return k(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,e){var n={};return e||(e=S.identity),function(){var i=e.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},S.delay=function(t,e){var n=r.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},S.defer=function(t){return S.delay.apply(S,[t,1].concat(r.call(arguments,1)))},S.throttle=function(t,e,n){var i,o,s,a=null,r=0;n||(n={});var l=function(){r=n.leading===!1?0:S.now(),a=null,s=t.apply(i,o),i=o=null};return function(){var c=S.now();r||n.leading!==!1||(r=c);var d=e-(c-r);return i=this,o=arguments,d<=0?(clearTimeout(a),a=null,r=c,s=t.apply(i,o),i=o=null):a||n.trailing===!1||(a=setTimeout(l,d)),s}},S.debounce=function(t,e,n){var i,o,s,a,r,l=function(){var c=S.now()-a;c<e?i=setTimeout(l,e-c):(i=null,n||(r=t.apply(s,o),s=o=null))};return function(){s=this,o=arguments,a=S.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(r=t.apply(s,o),s=o=null),r}},S.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},S.wrap=function(t,e){return S.partial(e,t)},S.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},S.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},S.keys=function(t){if(!S.isObject(t))return[];if(x)return x(t);var e=[];for(var n in t)S.has(t,n)&&e.push(n);return e},S.values=function(t){for(var e=S.keys(t),n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},S.pairs=function(t){for(var e=S.keys(t),n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},S.invert=function(t){for(var e={},n=S.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},S.functions=S.methods=function(t){var e=[];for(var n in t)S.isFunction(t[n])&&e.push(n);return e.sort()},S.extend=function(t){return k(r.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},S.pick=function(t){var e={},n=l.apply(i,r.call(arguments,1));return k(n,function(n){n in t&&(e[n]=t[n])}),e},S.omit=function(t){var e={},n=l.apply(i,r.call(arguments,1));for(var o in t)S.contains(n,o)||(e[o]=t[o]);return e},S.defaults=function(t){return k(r.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},S.clone=function(t){return S.isObject(t)?S.isArray(t)?t.slice():S.extend({},t):t},S.tap=function(t,e){return e(t),t};var M=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof S&&(t=t._wrapped),e instanceof S&&(e=e._wrapped);var o=c.call(t);if(o!=c.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var a=t.constructor,r=e.constructor;if(a!==r&&!(S.isFunction(a)&&a instanceof a&&S.isFunction(r)&&r instanceof r)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,d=!0;if("[object Array]"==o){if(l=t.length,d=l==e.length)for(;l--&&(d=M(t[l],e[l],n,i)););}else{for(var u in t)if(S.has(t,u)&&(l++,!(d=S.has(e,u)&&M(t[u],e[u],n,i))))break;if(d){for(u in e)if(S.has(e,u)&&!l--)break;d=!l}}return n.pop(),i.pop(),d};S.isEqual=function(t,e){return M(t,e,[],[])},S.isEmpty=function(t){if(null==t)return!0;if(S.isArray(t)||S.isString(t))return 0===t.length;for(var e in t)if(S.has(t,e))return!1;return!0},S.isElement=function(t){return!(!t||1!==t.nodeType)},S.isArray=w||function(t){return"[object Array]"==c.call(t)},S.isObject=function(t){return t===Object(t)},k(["Arguments","Function","String","Number","Date","RegExp"],function(t){S["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),S.isArguments(arguments)||(S.isArguments=function(t){return!(!t||!S.has(t,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(t){return"function"==typeof t}),S.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},S.isNaN=function(t){return S.isNumber(t)&&t!=+t},S.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},S.isNull=function(t){return null===t},S.isUndefined=function(t){return void 0===t},S.has=function(t,e){return d.call(t,e)},S.noConflict=function(){return t._=e,this},S.identity=function(t){return t},S.constant=function(t){return function(){return t}},S.property=function(t){return function(e){return e[t]}},S.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},S.times=function(t,e,n){for(var i=Array(Math.max(0,t)),o=0;o<t;o++)i[o]=e.call(n,o);return i},S.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},S.now=Date.now||function(){return(new Date).getTime()};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};H.unescape=S.invert(H.escape);var N={escape:new RegExp("["+S.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(H.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(t){S[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return H[t][e]})}}),S.result=function(t,e){if(null!=t){var n=t[e];return S.isFunction(n)?n.call(t):n}},S.mixin=function(t){k(S.functions(t),function(e){var n=S[e]=t[e];S.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),j.call(this,n.apply(S,t))}})};var P=0;S.uniqueId=function(t){var e=++P+"";return t?t+e:e},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(t,e,n){var i;n=S.defaults({},n,S.templateSettings);var o=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),s=0,a="__p+='";t.replace(o,function(e,n,i,o,r){return a+=t.slice(s,r).replace(I,function(t){return"\\"+A[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),s=r+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(t){throw t.source=a,t}if(e)return i(e,S);var r=function(t){return i.call(this,t,S)};return r.source="function("+(n.variable||"obj")+"){\n"+a+"}",r},S.chain=function(t){return S(t).chain()};var j=function(t){return this._chain?S(t).chain():t};S.mixin(S),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];S.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],j.call(this,n)}}),k(["concat","join","slice"],function(t){var e=i[t];S.prototype[t]=function(){return j.call(this,e.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}.call(this),function(){var t,e=this,n=e.Backbone;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="0.5.3";var i=e._;i||"undefined"==typeof require||(i=require("underscore")._);var o=e.jQuery||e.Zepto;t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1,t.Events={bind:function(t,e,n){var i=this._callbacks||(this._callbacks={}),o=i[t]||(i[t]=[]);return o.push([e,n]),this},unbind:function(t,e){var n;if(t){if(n=this._callbacks)if(e){var i=n[t];if(!i)return this;for(var o=0,s=i.length;o<s;o++)if(i[o]&&e===i[o][0]){i[o]=null;break}}else n[t]=[]}else this._callbacks={};return this},trigger:function(t){var e,n,i,o,s,a=2;if(!(n=this._callbacks))return this;for(;a--;)if(i=a?t:"all",e=n[i])for(var r=0,l=e.length;r<l;r++)(o=e[r])?(s=a?Array.prototype.slice.call(arguments,1):arguments,o[0].apply(o[1]||this,s)):(e.splice(r,1),r--,l--);return this}},t.Model=function(t,e){var n;t||(t={}),(n=this.defaults)&&(i.isFunction(n)&&(n=n.call(this)),t=i.extend({},n,t)),this.attributes={},this._escapedAttributes={},this.cid=i.uniqueId("c"),this.set(t,{silent:!0}),this._changed=!1,this._previousAttributes=i.clone(this.attributes),e&&e.collection&&(this.collection=e.collection),this.initialize(t,e)},i.extend(t.Model.prototype,t.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){var e;if(e=this._escapedAttributes[t])return e;var n=this.attributes[t];return this._escapedAttributes[t]=C(null==n?"":""+n)},has:function(t){return null!=this.attributes[t]},set:function(t,e){if(e||(e={}),!t)return this;t.attributes&&(t=t.attributes);var n=this.attributes,o=this._escapedAttributes;if(!e.silent&&this.validate&&!this._performValidation(t,e))return!1;this.idAttribute in t&&(this.id=t[this.idAttribute]);var s=this._changing;this._changing=!0;for(var a in t){var r=t[a];i.isEqual(n[a],r)||(n[a]=r,delete o[a],this._changed=!0,e.silent||this.trigger("change:"+a,this,r,e))}return s||e.silent||!this._changed||this.change(e),this._changing=!1,this},unset:function(t,e){if(!(t in this.attributes))return this;e||(e={});var n=(this.attributes[t],{});return n[t]=void 0,!(!e.silent&&this.validate&&!this._performValidation(n,e))&&(delete this.attributes[t],delete this._escapedAttributes[t],t==this.idAttribute&&delete this.id,this._changed=!0,e.silent||(this.trigger("change:"+t,this,void 0,e),this.change(e)),this)},clear:function(t){t||(t={});var e,n=this.attributes,i={};for(e in n)i[e]=void 0;if(!t.silent&&this.validate&&!this._performValidation(i,t))return!1;if(this.attributes={},this._escapedAttributes={},this._changed=!0,!t.silent){for(e in n)this.trigger("change:"+e,this,void 0,t);this.change(t)}return this},fetch:function(e){e||(e={});var n=this,i=e.success;return e.success=function(t,o,s){return!!n.set(n.parse(t,s),e)&&void(i&&i(n,t))},e.error=x(e.error,n,e),(this.sync||t.sync).call(this,"read",this,e)},save:function(e,n){if(n||(n={}),e&&!this.set(e,n))return!1;var i=this,o=n.success;n.success=function(t,e,s){return!!i.set(i.parse(t,s),n)&&void(o&&o(i,t,s))},n.error=x(n.error,i,n);var s=this.isNew()?"create":"update";return(this.sync||t.sync).call(this,s,this,n)},destroy:function(e){if(e||(e={}),this.isNew())return this.trigger("destroy",this,this.collection,e);var n=this,i=e.success;return e.success=function(t){n.trigger("destroy",n,n.collection,e),i&&i(n,t)},e.error=x(e.error,n,e),(this.sync||t.sync).call(this,"delete",this,e)},url:function(){var t=y(this.collection)||this.urlRoot||w();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this)},isNew:function(){return null==this.id},change:function(t){this.trigger("change",this,t),this._previousAttributes=i.clone(this.attributes),this._changed=!1},hasChanged:function(t){return t?this._previousAttributes[t]!=this.attributes[t]:this._changed},changedAttributes:function(t){t||(t=this.attributes);var e=this._previousAttributes,n=!1;for(var o in t)i.isEqual(e[o],t[o])||(n=n||{},n[o]=t[o]);return n},previous:function(t){return t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},_performValidation:function(t,e){var n=this.validate(t);return!n||(e.error?e.error(this,n,e):this.trigger("error",this,n,e),!1)}}),t.Collection=function(t,e){e||(e={}),e.comparator&&(this.comparator=e.comparator),i.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),t&&this.reset(t,{silent:!0}),this.initialize.apply(this,arguments)},i.extend(t.Collection.prototype,t.Events,{model:t.Model,initialize:function(){},toJSON:function(){return this.map(function(t){return t.toJSON()})},add:function(t,e){if(i.isArray(t))for(var n=0,o=t.length;n<o;n++)this._add(t[n],e);else this._add(t,e);return this},remove:function(t,e){if(i.isArray(t))for(var n=0,o=t.length;n<o;n++)this._remove(t[n],e);else this._remove(t,e);return this},get:function(t){return null==t?null:this._byId[null!=t.id?t.id:t]},getByCid:function(t){return t&&this._byCid[t.cid||t]},at:function(t){return this.models[t]},sort:function(t){if(t||(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),t.silent||this.trigger("reset",this,t),this},pluck:function(t){return i.map(this.models,function(e){return e.get(t)})},reset:function(t,e){return t||(t=[]),e||(e={}),this.each(this._removeReference),this._reset(),this.add(t,{silent:!0}),e.silent||this.trigger("reset",this,e),this},fetch:function(e){e||(e={});var n=this,i=e.success;return e.success=function(t,o,s){n[e.add?"add":"reset"](n.parse(t,s),e),i&&i(n,t)},e.error=x(e.error,n,e),(this.sync||t.sync).call(this,"read",this,e)},create:function(t,e){var n=this;if(e||(e={}),t=this._prepareModel(t,e),!t)return!1;var i=e.success;return e.success=function(t,o,s){n.add(t,e),i&&i(t,o,s)},t.save(null,e),t},parse:function(t,e){return t},chain:function(){return i(this.models).chain()},_reset:function(t){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,n){if(e instanceof t.Model)e.collection||(e.collection=this);else{var i=e;e=new this.model(i,{collection:this}),e.validate&&!e._performValidation(i,n)&&(e=!1)}return e},_add:function(t,e){if(e||(e={}),t=this._prepareModel(t,e),!t)return!1;var n=this.getByCid(t);if(n)throw new Error(["Can't add the same model to a set twice",n.id]);this._byId[t.id]=t,this._byCid[t.cid]=t;var i=null!=e.at?e.at:this.comparator?this.sortedIndex(t,this.comparator):this.length;return this.models.splice(i,0,t),t.bind("all",this._onModelEvent),this.length++,e.silent||t.trigger("add",t,this,e),t},_remove:function(t,e){return e||(e={}),(t=this.getByCid(t)||this.get(t))?(delete this._byId[t.id],delete this._byCid[t.cid],this.models.splice(this.indexOf(t),1),this.length--,e.silent||t.trigger("remove",t,this,e),this._removeReference(t),t):null},_removeReference:function(t){this==t.collection&&delete t.collection,t.unbind("all",this._onModelEvent)},_onModelEvent:function(t,e,n,i){("add"!=t&&"remove"!=t||n==this)&&("destroy"==t&&this._remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],this._byId[e.id]=e),this.trigger.apply(this,arguments))}});var s=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];i.each(s,function(e){t.Collection.prototype[e]=function(){return i[e].apply(i,[this.models].concat(i.toArray(arguments)))}}),t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var a=/:([\w\d]+)/g,r=/\*([\w\d]+)/g,l=/[-[\]{}()+?.,\\^$|#\s]/g;i.extend(t.Router.prototype,t.Events,{initialize:function(){},route:function(e,n,o){t.history||(t.history=new t.History),i.isRegExp(e)||(e=this._routeToRegExp(e)),t.history.route(e,i.bind(function(t){var i=this._extractParameters(e,t);o.apply(this,i),this.trigger.apply(this,["route:"+n].concat(i))},this))},navigate:function(e,n){t.history.navigate(e,n)},_bindRoutes:function(){if(this.routes){var t=[];for(var e in this.routes)t.unshift([e,this.routes[e]]);for(var n=0,i=t.length;n<i;n++)this.route(t[n][0],t[n][1],this[t[n][1]])}},_routeToRegExp:function(t){return t=t.replace(l,"\\$&").replace(a,"([^/]*)").replace(r,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}}),t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl")};var c=/^#*/,d=/msie [\w.]+/,u=!1;i.extend(t.History.prototype,{interval:50,getFragment:function(t,e){if(null==t)if(this._hasPushState||e){t=window.location.pathname;var n=window.location.search;n&&(t+=n),0==t.indexOf(this.options.root)&&(t=t.substr(this.options.root.length))}else t=window.location.hash;return decodeURIComponent(t.replace(c,""))},start:function(t){if(u)throw new Error("Backbone.history has already been started");this.options=i.extend({},{root:"/"},this.options,t),this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var e=this.getFragment(),n=document.documentMode,s=d.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);s&&(this.iframe=o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?o(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!s?o(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=e,u=!0;var a=window.location,r=a.pathname==this.options.root;return!this._wantsPushState||this._hasPushState||r?(this._wantsPushState&&this._hasPushState&&r&&a.hash&&(this.fragment=a.hash.replace(c,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl()):(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0)},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.iframe.location.hash)),e!=this.fragment&&e!=decodeURIComponent(this.fragment)&&(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(window.location.hash)))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=i.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0});return n},navigate:function(t,e){var n=(t||"").replace(c,"");if(this.fragment!=n&&this.fragment!=decodeURIComponent(n)){if(this._hasPushState){var i=window.location;0!=n.indexOf(this.options.root)&&(n=this.options.root+n),this.fragment=n,window.history.pushState({},document.title,i.protocol+"//"+i.host+n)}else window.location.hash=this.fragment=n,this.iframe&&n!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=n);e&&this.loadUrl(t)}}}),t.View=function(t){this.cid=i.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var p=function(t){return o(t,this.el)},h=/^(\S+)\s*(.*)$/,f=["model","collection","el","id","attributes","className","tagName"];i.extend(t.View.prototype,t.Events,{tagName:"div",$:p,initialize:function(){},render:function(){return this},remove:function(){return o(this.el).remove(),this},make:function(t,e,n){var i=document.createElement(t);return e&&o(i).attr(e),n&&o(i).html(n),i},delegateEvents:function(t){if(t||(t=this.events)){i.isFunction(t)&&(t=t.call(this)),o(this.el).unbind(".delegateEvents"+this.cid);for(var e in t){var n=this[t[e]];if(!n)throw new Error('Event "'+t[e]+'" does not exist');var s=e.match(h),a=s[1],r=s[2];n=i.bind(n,this),a+=".delegateEvents"+this.cid,""===r?o(this.el).bind(a,n):o(this.el).delegate(r,a,n)}}},_configure:function(t){this.options&&(t=i.extend({},this.options,t));for(var e=0,n=f.length;e<n;e++){var o=f[e];t[o]&&(this[o]=t[o])}this.options=t},_ensureElement:function(){if(this.el)i.isString(this.el)&&(this.el=o(this.el).get(0));else{var t=this.attributes||{};this.id&&(t.id=this.id),this.className&&(t.class=this.className),this.el=this.make(this.tagName,t)}}});var m=function(t,e){var n=b(this,t,e);return n.extend=this.extend,n};t.Model.extend=t.Collection.extend=t.Router.extend=t.View.extend=m;var g={create:"POST",update:"PUT",delete:"DELETE",read:"GET"};t.sync=function(e,n,s){var a=g[e],r=i.extend({type:a,dataType:"json"},s);return r.url||(r.url=y(n)||w()),r.data||!n||"create"!=e&&"update"!=e||(r.contentType="application/json",r.data=JSON.stringify(n.toJSON())),t.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),t.emulateHTTP&&("PUT"!==a&&"DELETE"!==a||(t.emulateJSON&&(r.data._method=a),r.type="POST",r.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",a)})),"GET"===r.type||t.emulateJSON||(r.processData=!1),o.ajax(r)};var v=function(){},b=function(t,e,n){var o;return o=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},i.extend(o,t),v.prototype=t.prototype,o.prototype=new v,e&&i.extend(o.prototype,e),n&&i.extend(o,n),o.prototype.constructor=o,o.__super__=t.prototype,o},y=function(t){return t&&t.url?i.isFunction(t.url)?t.url():t.url:null},w=function(){throw new Error('A "url" property or function must be specified')},x=function(t,e,n){return function(i){t?t(e,i,n):e.trigger("error",e,i,n)}},C=function(t){return t.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}.call(this),define("backbone",["jquery","underscore"],function(t){return function(){var e;return e||t.Backbone}}(this)),define("text",["module"],function(t){"use strict";function e(t,e){return void 0===t||""===t?e:t}function n(t,n,i,o){if(n===o)return!0;if(t===i){if("http"===t)return e(n,"80")===e(o,"80");if("https"===t)return e(n,"443")===e(o,"443");
}return!1}var i,o,s,a,r,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,p=u&&location.protocol&&location.protocol.replace(/\:/,""),h=u&&location.hostname,f=u&&(location.port||void 0),m={},g=t.config&&t.config()||{};return i={version:"2.0.15",strip:function(t){if(t){t=t.replace(c,"");var e=t.match(d);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){n=l[e];try{t=new ActiveXObject(n)}catch(t){}if(t){l=[n];break}}return t},parseName:function(t){var e,n,i,o=!1,s=t.lastIndexOf("."),a=0===t.indexOf("./")||0===t.indexOf("../");return s!==-1&&(!a||s>1)?(e=t.substring(0,s),n=t.substring(s+1)):e=t,i=n||e,s=i.indexOf("!"),s!==-1&&(o="strip"===i.substring(s+1),i=i.substring(0,s),n?n=i:e=i),{moduleName:e,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,o,s){var a,r,l,c=i.xdRegExp.exec(t);return!c||(a=c[2],r=c[3],r=r.split(":"),l=r[1],r=r[0],(!a||a===e)&&(!r||r.toLowerCase()===o.toLowerCase())&&(!l&&!r||n(a,l,e,s)))},finishLoad:function(t,e,n,o){n=e?i.strip(n):n,g.isBuild&&(m[t]=n),o(n)},load:function(t,e,n,o){if(o&&o.isBuild&&!o.inlineText)return void n();g.isBuild=o&&o.isBuild;var s=i.parseName(t),a=s.moduleName+(s.ext?"."+s.ext:""),r=e.toUrl(a),l=g.useXhr||i.useXhr;return 0===r.indexOf("empty:")?void n():void(!u||l(r,p,h,f)?i.get(r,function(e){i.finishLoad(t,s.strip,e,n)},function(t){n.error&&n.error(t)}):e([a],function(t){i.finishLoad(s.moduleName+"."+s.ext,s.strip,t,n)}))},write:function(t,e,n,o){if(m.hasOwnProperty(e)){var s=i.jsEscape(m[e]);n.asModule(t+"!"+e,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,e,n,o,s){var a=i.parseName(e),r=a.ext?"."+a.ext:"",l=a.moduleName+r,c=n.toUrl(a.moduleName+r)+".js";i.load(l,n,function(e){var n=function(t){return o(c,t)};n.asModule=function(t,e){return o.asModule(t,c,e)},i.write(t,l,n,s)},s)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=require.nodeRequire("fs"),i.get=function(t,e,n){try{var i=o.readFileSync(t,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),e(i)}catch(t){n&&n(t)}}):"xhr"===g.env||!g.env&&i.createXhr()?i.get=function(t,e,n,o){var s,a=i.createXhr();if(a.open("GET",t,!0),o)for(s in o)o.hasOwnProperty(s)&&a.setRequestHeader(s.toLowerCase(),o[s]);g.onXhr&&g.onXhr(a,t),a.onreadystatechange=function(i){var o,s;4===a.readyState&&(o=a.status||0,o>399&&o<600?(s=new Error(t+" HTTP status: "+o),s.xhr=a,n&&n(s)):e(a.responseText),g.onXhrComplete&&g.onXhrComplete(a,t))},a.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(t,e){var n,i,o="utf-8",s=new java.io.File(t),a=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),o)),l="";try{for(n=new java.lang.StringBuffer,i=r.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=r.readLine());)n.append(a),n.append(i);l=String(n.toString())}finally{r.close()}e(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in s,i.get=function(t,e){var n,i,o,l={};r&&(t=t.replace(/\//g,"\\")),o=new FileUtils.File(t);try{n=s["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),n.init(o,1,0,!1),i=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),i.init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),l),i.close(),n.close(),e(l.value)}catch(t){throw new Error((o&&o.path||"")+": "+t)}}),i}),define("text!template/login.html",[],function(){return'\n<div class="login_container">\n\t<form id="login">\n\t\t<h1 class="login_heading"><%= messages("login.sign") %> <span></h1>\n\t\t<div class="form-group">\n\t\t\t<label for="login_username"><%= messages("email") %></label>\n\t\t\t<input type="text" class="form-control input-lg" value="" id="loginEmail">\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<label for="login_password"><%= messages("password") %></label>\n\t\t\t<input type="password" class="form-control input-lg" value="" id="loginPassword">\n\t\t</div>\n\t\t<div class="submit_section">\n\t\t\t<button class="btn btn-lg btn-success btn-block"><%= messages("login") %></button>\n\t\t</div>\n\t\t<span class="help-block"><a id="forgot" data-toggle="modal" data-target="#forgot-dialog"><%= messages("forgot_password") %>?</a></span>\n\t\t<div class="form-group" id="login-messages"> </div>\n\t\t\n\t</form>\n</div>\n\n<div class="modal fade" id="forgot-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <form id="forgotForm">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("forgot_password") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<div class="row">\n      \t<div class="form-group">\n\t\t\t<p><%= messages("login.forgot_dialog") %></p>\n\t\t</div>\n\t\t</div>\n\t\t<div class="row">\n\t\t<div class="col-lg-12">\n\t\t\t<label><%= messages("email") %></label>\n\t\t\t<input type="text" id="email">\n\t\t</div>\n\t\t</div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n        <button type="button" class="btn btn-primary">OK</button>\n      </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n\n\n\n\n'}),define("text!template/locale.html",[],function(){return'<a href="#" class="dropdown-toggle" data-toggle="dropdown">\n\t<i class="fa fa-language"></i> <span ><%= messages("language") %> <i class="fa fa-caret-down"></i></span>\n</a>\n<ul class="dropdown-menu dropdown-menu-right">\n    <li><a onclick="Heiduc.changeLanguageCall(\'zh_CN\')">中文(简体)</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'zh_TW\')">中文(繁體)</a></li>\n\t<li><a onclick="Heiduc.changeLanguageCall(\'en\')">English</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'de\')">Deutsch</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'es\')">Español</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'sv\')">Swedish</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'ru\')">Русский</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'cs\')">Česky</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'tr\')">Türkçe</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'pt_BR\')">Brazilian Portuguese</a></li>\n    <li><a onclick="Heiduc.changeLanguageCall(\'ja\')">日本語</a></li>\n</ul>'}),define("text!template/login-topbar.html",[],function(){return'<!-- HEADER -->\n<nav class="header-navbar">\n    <div class="navbar-header clearfix">\n\t<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mini-navbar-collapse">\n\t    <span class="sr-only">Toggle navigation</span>\n\t    <i class="fa fa-plus"></i>\n\t</a>\n\t\n\t<a class="logo pull-left" href="#">\n\t    <img src="/static/assets/img/logo.png" width="110" alt="Heiduc Logo">\n\t</a>\n\t\n    </div>\n  \n    <div class="collapse navbar-collapse" id="mini-navbar-collapse">\n\t\n\t<ul class="nav navbar-nav navbar-right">\n\t\t<li>\n\t\t\t<%= locale %>\n\t\t</li>\n\t</ul>\n    </div><!-- navbar-collapse -->\n</nav>\n<!-- HEADER -->\n\n\n\t\n'}),define("view/LoginView",["text!template/login.html","text!template/locale.html","text!template/login-topbar.html"],function(t,e,n){function i(t){t.preventDefault();var e=$("#email").val();return e?($("#loading").show(),Heiduc.jsonrpc.loginFrontService.forgotPassword(function(e){$("#loading").hide(),"success"==e.result?Heiduc.info(messages("login.password_letter_success")):Heiduc.error(t.message),$("#forgot-dialog").dialog("close")},e.toLowerCase()),!1):(Heiduc.error(messages("email_is_empty")),!1)}return Backbone.View.extend({el:$("#content"),events:{"click #forgot":"forgot_click","submit form#login":"login_submit"},css:"/static/css/login.css",forgot_click:function(){this.$("#email").val("")},login_submit:function(t){if(t.preventDefault(),Heiduc.app.loggedIn)return Heiduc.app.trigger("login"),!1;var e=this.$("#loginEmail").val(),n=this.$("#loginPassword").val();return""==e?Heiduc.errorMessage("#login-messages",messages("email_is_empty")):Heiduc.jsonrpc.loginFrontService.login(function(t,e){if(Heiduc.serviceFailed(e))return!1;if("success"==t.result){if("siteUser"==t.data)return Heiduc.error(messages("permission_denied")),!1;Heiduc.infoMessage("#login-messages",messages("success_logging_in")),Heiduc.app.loggedIn=!0,Heiduc.app.trigger("login")}else Heiduc.errorMessage("#login-messages",t.message)},e,n),!1},render:function(){Heiduc.addCSSFile(this.css),this.el.html($.jqote(t,{messages:messages})),$("#forgotForm").submit(i),$("#forgotCancelButton").click(function(){$("#forgot-dialog").dialog("close")});var o=_.template(e,{messages:messages});return $("#topbar").html(_.template(n,{messages:messages,locale:o})),this},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/pages.html",[],function(){return'\n<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("pages") %></a></li>\n\t\t\t\t\t\t\t<li><a href="#structures"><%= messages("structures") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-md-9">\n\t\t\t\t\t\t\t\t\t\t<div id="GridPanel">\n\t\t\t\t\t\t\t\t\t\t\t<div id="ContentBrowseToolbar" class="toolbar">\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageAdd" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>New</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageEdit" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Edit</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageDelete" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Delete</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageProperty" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Property</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageTitle" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Title</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pagePublish" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Publish</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<!-- \n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pagePreview" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Preview</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageDuplicate" class="button" disabled>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Duplicate</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageMove" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Move</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t<button id="pageSort" class="button">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Sort</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t -->\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div id="ContentTreeGrid" class="tree-grid">\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="TreeGridToolbar" class="toolbar">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="button"><span>显示标题</span></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button id="invertOrder" class="button"><span>倒序</span></button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="treegrid" style="width:calc(100%);" class="grid no-header"></div>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="input-group col-md-3">\n\t\t\t\t\t\t\t\t       \n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id="pageSearch" style="display:none;"></div>\n\t\t\t\t\t\t        <div style="float:left;display:none;">\n\t\t\t\t\t\t          <div id="showTitleDiv">\n\t\t\t\t\t\t            <a id="showTitle"><%= messages(\'show_names\') %></a>\n\t\t\t\t\t\t            <a id="invertOrder"><%= messages(\'invert_order\') %></a>\n\t\t\t\t\t\t          </div>\n\t\t\t\t\t\t          <ul id="pages-tree"><img src="/static/images/ajax-loader.gif" /></ul>\n\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="modal fade" id="page-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("pages.new_page") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="pageForm">\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("pages.page_title") %></label>\n\t\t        <input id="title"/>\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("pages.page_url") %></label>\n\t\t        <span id="parentURL"></span> <input id="url"/>\n\t\t    </div>\n\t\t    <div id="pageMessages"></div>\n\t\t    <div class="modal-footer">\n\t\t        <button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n\t\t        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n\n'}),function(t){function e(){}function n(t){if(!t||"object"!=typeof t)return!1;var e=x(t)||rt;return/object|function/.test(typeof e.Element)?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName}function i(t){return t===rt||!(!t||!t.Window)&&t instanceof t.Window}function o(t){return s(t)&&void 0!==typeof t.length&&a(t.splice)}function s(t){return!!t&&"object"==typeof t}function a(t){return"function"==typeof t}function r(t){return"number"==typeof t}function l(t){return"boolean"==typeof t}function c(t){return"string"==typeof t}function d(t){return!!c(t)&&(lt.querySelector(t),!0)}function u(t,e){for(var n in e)t[n]=e[n];return t}function p(t,e){for(var n in e){var i,o=!1;for(i in Ft)if(0===n.indexOf(i)&&Ft[i].test(n)){o=!0;break}o||(t[n]=e[n])}return t}function h(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function f(t,e,n){t.page.x=n.page.x-e.page.x,t.page.y=n.page.y-e.page.y,t.client.x=n.client.x-e.client.x,t.client.y=n.client.y-e.client.y,t.timeStamp=(new Date).getTime()-e.timeStamp,e=Math.max(t.timeStamp/1e3,.001),t.page.speed=mt(t.page.x,t.page.y)/e,t.page.vx=t.page.x/e,t.page.vy=t.page.y/e,t.client.speed=mt(t.client.x,t.page.y)/e,t.client.vx=t.client.x/e,t.client.vy=t.client.y/e}function m(t){return t instanceof rt.Event||kt&&rt.Touch&&t instanceof rt.Touch}function g(t,e,n){return n=n||{},t=t||"page",n.x=e[t+"X"],n.y=e[t+"Y"],n}function v(t,e){return e=e||{},Lt&&m(t)?(g("screen",t,e),e.x+=rt.scrollX,e.y+=rt.scrollY):g("page",t,e),e}function b(t,e){return e=e||{},Lt&&m(t)?g("screen",t,e):g("client",t,e),e}function y(t){return r(t.pointerId)?t.pointerId:t.identifier}function w(t){return t instanceof pt?t.correspondingUseElement:t}function x(t){return i(t)?t:(t=t.ownerDocument||t,t.defaultView||t.parentWindow||rt)}function C(t){return(t=t instanceof dt?t.getBoundingClientRect():t.getClientRects()[0])&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}function S(t){var e,n=C(t);return!At&&n&&(e=(e=x(t))||rt,t=e.scrollX||e.document.documentElement.scrollLeft,e=e.scrollY||e.document.documentElement.scrollTop,n.left+=t,n.right+=t,n.top+=e,n.bottom+=e),n}function k(t){var e=[];return o(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function $(t){for(var e,n={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<t.length;i++)for(e in n)n[e]+=t[i][e];for(e in n)n[e]/=t.length;return n}function T(t){if(t.length||t.touches&&1<t.touches.length){t=k(t);var e=Math.min(t[0].pageX,t[1].pageX),n=Math.min(t[0].pageY,t[1].pageY);return{x:e,y:n,left:e,top:n,width:Math.max(t[0].pageX,t[1].pageX)-e,height:Math.max(t[0].pageY,t[1].pageY)-n}}}function _(t,e){e=e||Ct.deltaSource;var n=e+"X",i=e+"Y",o=k(t);return mt(o[0][n]-o[1][n],o[0][i]-o[1][i])}function D(t,e,n){n=n||Ct.deltaSource;var i=n+"X";return n+="Y",t=k(t),i=180*Math.atan((t[0][n]-t[1][n])/(t[0][i]-t[1][i]))/Math.PI,r(e)&&(e=(i-e)%360,315<e?i-=360+i/360|0:135<e?i-=180+i/360|0:-315>e?i+=360+i/360|0:-135>e&&(i+=180+i/360|0)),i}function R(t,e){var i=t?t.options.origin:Ct.origin;return"parent"===i?i=N(e):"self"===i?i=t.getRect(e):d(i)&&(i=H(e,i)||{x:0,y:0}),a(i)&&(i=i(t&&e)),n(i)&&(i=S(i)),i.x="x"in i?i.x:i.left,i.y="y"in i?i.y:i.top,i}function E(t,e,n,i){var o=1-t;return o*o*e+2*o*t*n+t*t*i}function M(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function H(t,e){for(var i=N(t);n(i);){if(it(i,e))return i;i=N(i)}return null}function N(t){if((t=t.parentNode)&&t instanceof ct)for(;(t=t.host)&&t&&t instanceof ct;);return t}function P(t,e){return t._context===e.ownerDocument||M(t._context,e)}function L(t,e,i){return!(!(t=t.options.ignoreFrom)||!n(i))&&(c(t)?ot(i,t,e):!!n(t)&&M(t,i))}function A(t,e,i){return!(t=t.options.allowFrom)||!!n(i)&&(c(t)?ot(i,t,e):!!n(t)&&M(t,i))}function I(t,e){if(!e)return!1;var n=e.options.drag.axis;return"xy"===t||"xy"===n||n===t}function j(t,e){var n=t.options;return/^resize/.test(e)&&(e="resize"),n[e].snap&&n[e].snap.enabled}function O(t,e){var n=t.options;return/^resize/.test(e)&&(e="resize"),n[e].restrict&&n[e].restrict.enabled}function z(t,e,n){for(var i=t.options,o=i[n.name].max,i=i[n.name].maxPerElement,s=0,a=0,r=0,l=0,c=yt.length;l<c;l++){var d=yt[l],u=d.prepared.name;if(d.interacting()&&(s++,s>=Rt||d.target===t&&(a+=u===n.name|0,a>=o||d.element===e&&(r++,u!==n.name||r>=i))))return!1}return 0<Rt}function F(){if(this.prevDropElement=this.prevDropTarget=this.dropElement=this.dropTarget=this.element=this.target=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},a(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var t=this;this.boundInertiaFrame=function(){return t.inertiaFrame()},this.boundSmoothEndFrame=function(){return t.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this.prevEvent=this._curEventTarget=this._eventTarget=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.resizing=this.dragging=this.gesturing=this.pointerWasMoved=this.pointerIsDown=!1,this.resizeAxes="xy",this.mouse=!1,yt.push(this)}function B(t,e,n){var i,o=0,s=yt.length,a=/mouse/i.test(t.pointerType||e)||4===t.pointerType;if(t=y(t),/down|start/i.test(e))for(o=0;o<s;o++){i=yt[o];var r=n;if(i.inertiaStatus.active&&i.target.options[i.prepared.name].inertia.allowResume&&i.mouse===a)for(;r;){if(r===i.element)return i;r=N(r)}}if(a||!kt&&!$t){for(o=0;o<s;o++)if(yt[o].mouse&&!yt[o].inertiaStatus.active)return yt[o];for(o=0;o<s;o++)if(yt[o].mouse&&(!/down/.test(e)||!yt[o].inertiaStatus.active))return i;return i=new F,i.mouse=!0,i}for(o=0;o<s;o++)if(-1!==nt(yt[o].pointerIds,t))return yt[o];if(/up|end|out/i.test(e))return null;for(o=0;o<s;o++)if(i=yt[o],!(i.prepared.name&&!i.target.options.gesture.enabled||i.interacting()||!a&&i.mouse))return i;return new F}function V(t){return function(e){var n,i,o=w(e.path?e.path[0]:e.target),s=w(e.currentTarget);if(kt&&/touch/.test(e.type))for(Dt=(new Date).getTime(),i=0;i<e.changedTouches.length;i++){var a=e.changedTouches[i];(n=B(a,e.type,o))&&(n._updateEventTargets(o,s),n[t](a,e,o,s))}else{if(!$t&&/mouse/.test(e.type)){for(i=0;i<yt.length;i++)if(!yt[i].mouse&&yt[i].pointerIsDown)return;if(500>(new Date).getTime()-Dt)return}(n=B(e,e.type,o))&&(n._updateEventTargets(o,s),n[t](e,e,o,s))}}}function U(t,e,n,i,o,s){var a,r,l=t.target,c=t.snapStatus,d=t.restrictStatus,p=t.pointers,h=(l&&l.options||Ct).deltaSource,f=h+"X",m=h+"Y",g=l?l.options:Ct,v=R(l,o),b="start"===i,y="end"===i;a=b?t.startCoords:t.curCoords,o=o||t.element,r=u({},a.page),a=u({},a.client),r.x-=v.x,r.y-=v.y,a.x-=v.x,a.y-=v.y;var w=g[n].snap&&g[n].snap.relativePoints;!j(l,n)||b&&w&&w.length||(this.snap={range:c.range,locked:c.locked,x:c.snappedX,y:c.snappedY,realX:c.realX,realY:c.realY,dx:c.dx,dy:c.dy},c.locked&&(r.x+=c.dx,r.y+=c.dy,a.x+=c.dx,a.y+=c.dy)),!O(l,n)||b&&g[n].restrict.elementRect||!d.restricted||(r.x+=d.dx,r.y+=d.dy,a.x+=d.dx,a.y+=d.dy,this.restrict={dx:d.dx,dy:d.dy}),this.pageX=r.x,this.pageY=r.y,this.clientX=a.x,this.clientY=a.y,this.x0=t.startCoords.page.x-v.x,this.y0=t.startCoords.page.y-v.y,this.clientX0=t.startCoords.client.x-v.x,this.clientY0=t.startCoords.client.y-v.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.buttons=e.buttons,this.target=o,this.t0=t.downTimes[0],this.type=n+(i||""),this.interaction=t,this.interactable=l,o=t.inertiaStatus,o.active&&(this.detail="inertia"),s&&(this.relatedTarget=s),y?"client"===h?(this.dx=a.x-t.startCoords.client.x,this.dy=a.y-t.startCoords.client.y):(this.dx=r.x-t.startCoords.page.x,this.dy=r.y-t.startCoords.page.y):b?this.dy=this.dx=0:"inertiastart"===i?(this.dx=t.prevEvent.dx,this.dy=t.prevEvent.dy):"client"===h?(this.dx=a.x-t.prevEvent.clientX,this.dy=a.y-t.prevEvent.clientY):(this.dx=r.x-t.prevEvent.pageX,this.dy=r.y-t.prevEvent.pageY),t.prevEvent&&"inertia"===t.prevEvent.detail&&!o.active&&g[n].inertia&&g[n].inertia.zeroResumeDelta&&(o.resumeDx+=this.dx,o.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===n&&t.resizeAxes?g.resize.square?("y"===t.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=t.resizeAxes,"x"===t.resizeAxes?this.dy=0:"y"===t.resizeAxes&&(this.dx=0)):"gesture"===n&&(this.touches=[p[0],p[1]],b?(this.distance=_(p,h),this.box=T(p),this.scale=1,this.ds=0,this.angle=D(p,void 0,h),this.da=0):y||e instanceof U?(this.distance=t.prevEvent.distance,this.box=t.prevEvent.box,this.scale=t.prevEvent.scale,this.ds=this.scale-1,this.angle=t.prevEvent.angle,this.da=this.angle-t.gesture.startAngle):(this.distance=_(p,h),this.box=T(p),this.scale=this.distance/t.gesture.startDistance,this.angle=D(p,t.gesture.prevAngle,h),this.ds=this.scale-t.gesture.prevScale,this.da=this.angle-t.gesture.prevAngle)),b?(this.timeStamp=t.downTimes[0],this.velocityY=this.velocityX=this.speed=this.duration=this.dt=0):"inertiastart"===i?(this.timeStamp=t.prevEvent.timeStamp,this.dt=t.prevEvent.dt,this.duration=t.prevEvent.duration,this.speed=t.prevEvent.speed,this.velocityX=t.prevEvent.velocityX,this.velocityY=t.prevEvent.velocityY):(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-t.prevEvent.timeStamp,this.duration=this.timeStamp-t.downTimes[0],e instanceof U?(e=this[f]-t.prevEvent[f],m=this[m]-t.prevEvent[m],n=this.dt/1e3,this.speed=mt(e,m)/n,this.velocityX=e/n,this.velocityY=m/n):(this.speed=t.pointerDelta[h].speed,this.velocityX=t.pointerDelta[h].vx,this.velocityY=t.pointerDelta[h].vy)),(y||"inertiastart"===i)&&600<t.prevEvent.speed&&150>this.timeStamp-t.prevEvent.timeStamp&&(i=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI,0>i&&(i+=360),y=112.5<=i&&247.5>i,m=202.5<=i&&337.5>i,this.swipe={up:m,down:!m&&22.5<=i&&157.5>i,left:y,right:!y&&(292.5<=i||67.5>i),angle:i,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}})}function q(){this.originalEvent.preventDefault()}function W(t){var e="";if("drag"===t.name&&(e=Et.drag),"resize"===t.name)if(t.axis)e=Et[t.name+t.axis];else if(t.edges){for(var e="resize",n=["top","bottom","left","right"],i=0;4>i;i++)t.edges[n[i]]&&(e+=n[i]);e=Et[e]}return e}function Y(t,e,i){t=this.getRect(i);var o,a=!1,l=null,c=null,d=u({},e.curCoords.page),l=this.options;if(!t)return null;if(Mt.resize&&l.resize.enabled)if(a=l.resize,o={left:!1,right:!1,top:!1,bottom:!1},s(a.edges)){for(var p in o){var h,f=o,m=p;t:{h=p;var g=a.edges[p],v=d,b=e._eventTarget,y=i,w=t,x=a.margin||Tt;if(g){if(!0===g){var C=r(w.width)?w.width:w.right-w.left,S=r(w.height)?w.height:w.bottom-w.top;if(0>C&&("left"===h?h="right":"right"===h&&(h="left")),0>S&&("top"===h?h="bottom":"bottom"===h&&(h="top")),"left"===h){h=v.x<(0<=C?w.left:w.right)+x;break t}if("top"===h){h=v.y<(0<=S?w.top:w.bottom)+x;break t}if("right"===h){h=v.x>(0<=C?w.right:w.left)-x;break t}if("bottom"===h){h=v.y>(0<=S?w.bottom:w.top)-x;break t}}h=!!n(b)&&(n(g)?g===b:ot(b,g,y))}else h=!1}f[m]=h}o.left=o.left&&!o.right,o.top=o.top&&!o.bottom,a=o.left||o.right||o.top||o.bottom}else i="y"!==l.resize.axis&&d.x>t.right-Tt,t="x"!==l.resize.axis&&d.y>t.bottom-Tt,a=i||t,c=(i?"x":"")+(t?"y":"");return l=a?"resize":Mt.drag&&l.drag.enabled?"drag":null,Mt.gesture&&2<=e.pointerIds.length&&!e.dragging&&!e.resizing&&(l="gesture"),l?{name:l,axis:c,edges:o}:null}function X(t,e){if(!s(t))return null;var n=t.name,i=e.options;return("resize"===n&&i.resize.enabled||"drag"===n&&i.drag.enabled||"gesture"===n&&i.gesture.enabled)&&Mt[n]?t:null}function J(t,e){var i={},o=xt[t.type],s=w(t.path?t.path[0]:t.target),a=s;e=!!e;for(var r in t)i[r]=t[r];for(i.originalEvent=t,i.preventDefault=q;n(a);){for(r=0;r<o.selectors.length;r++){var l=o.contexts[r];if(it(a,o.selectors[r])&&M(l,s)&&M(l,a)){l=o.listeners[r],i.currentTarget=a;for(var c=0;c<l.length;c++)l[c][1]===e&&l[c][0](i)}}a=N(a)}}function G(t){return J.call(this,t,!0)}function K(t,e){return bt.get(t,e)||new Q(t,e)}function Q(t,e){this._element=t,this._iEvents=this._iEvents||{};var i;if(d(t)){this.selector=t;var o=e&&e.context;i=o?x(o):rt,o&&(i.Node?o instanceof i.Node:n(o)||o===i.document)&&(this._context=o)}else i=x(t),n(t,i)&&(ft?(zt.add(this._element,st.down,Bt.pointerDown),zt.add(this._element,st.move,Bt.pointerHover)):(zt.add(this._element,"mousedown",Bt.pointerDown),zt.add(this._element,"mousemove",Bt.pointerHover),zt.add(this._element,"touchstart",Bt.pointerDown),zt.add(this._element,"touchmove",Bt.pointerHover)));this._doc=i.document,-1===nt(vt,this._doc)&&et(this._doc),bt.push(this),this.set(e)}function Z(t,e){var n=!1;return function(){return n||(rt.console.warn(e),n=!0),t.apply(this,arguments)}}function tt(t){for(var e=0;e<yt.length;e++)yt[e].pointerEnd(t,t)}function et(t){if(-1===nt(vt,t)){var e,n=t.defaultView||t.parentWindow;for(e in xt)zt.add(t,e,J),zt.add(t,e,G,!0);ft?(st=ft===n.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},zt.add(t,st.down,Bt.selectorDown),zt.add(t,st.move,Bt.pointerMove),zt.add(t,st.over,Bt.pointerOver),zt.add(t,st.out,Bt.pointerOut),zt.add(t,st.up,Bt.pointerUp),zt.add(t,st.cancel,Bt.pointerCancel),zt.add(t,st.move,Bt.autoScrollMove)):(zt.add(t,"mousedown",Bt.selectorDown),zt.add(t,"mousemove",Bt.pointerMove),zt.add(t,"mouseup",Bt.pointerUp),zt.add(t,"mouseover",Bt.pointerOver),zt.add(t,"mouseout",Bt.pointerOut),zt.add(t,"touchstart",Bt.selectorDown),zt.add(t,"touchmove",Bt.pointerMove),zt.add(t,"touchend",Bt.pointerUp),zt.add(t,"touchcancel",Bt.pointerCancel),zt.add(t,"mousemove",Bt.autoScrollMove),zt.add(t,"touchmove",Bt.autoScrollMove)),zt.add(n,"blur",tt);try{if(n.frameElement){var i=n.frameElement.ownerDocument,o=i.defaultView;zt.add(i,"mouseup",Bt.pointerEnd),zt.add(i,"touchend",Bt.pointerEnd),zt.add(i,"touchcancel",Bt.pointerEnd),zt.add(i,"pointerup",Bt.pointerEnd),zt.add(i,"MSPointerUp",Bt.pointerEnd),zt.add(o,"blur",tt)}}catch(t){K.windowParentError=t}zt.add(t,"dragstart",function(t){for(var e=0;e<yt.length;e++){var n=yt[e];if(n.element&&(n.element===t.target||M(n.element,t.target))){n.checkAndPreventDefault(t,n.target,n.element);break}}}),zt.useAttachEvent&&(zt.add(t,"selectstart",function(t){var e=yt[0];e.currentAction()&&e.checkAndPreventDefault(t)}),zt.add(t,"dblclick",V("ie8Dblclick"))),vt.push(t)}}function nt(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function it(e,n,i){return at?at(e,n,i):(rt!==t&&(n=n.replace(/\/deep\//g," ")),e[It](n))}function ot(t,e,i){for(;n(t);){if(it(t,e))return!0;if(t=N(t),t===i)return it(t,e)}return!1}if(t){var st,at,rt=function(){var e=t.document.createTextNode("");return e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e?t.wrap(t):t}(),lt=rt.document,ct=rt.DocumentFragment||e,dt=rt.SVGElement||e,ut=rt.SVGSVGElement||e,pt=rt.SVGElementInstance||e,ht=rt.HTMLElement||rt.Element,ft=rt.PointerEvent||rt.MSPointerEvent,mt=Math.hypot||function(t,e){return Math.sqrt(t*t+e*e)},gt={},vt=[],bt=[],yt=[],wt=!1,xt={},Ct={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:lt,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,
smoothEndDuration:300}},_holdDuration:600},St={interaction:null,i:null,x:0,y:0,scroll:function(){var t,e=St.interaction.target.options[St.interaction.prepared.name].autoScroll,n=e.container||x(St.interaction.element),o=(new Date).getTime(),s=(o-St.prevTimeX)/1e3,a=(o-St.prevTimeY)/1e3;e.velocity?(t=e.velocity.x,e=e.velocity.y):t=e=e.speed,s*=t,a*=e,(1<=s||1<=a)&&(i(n)?n.scrollBy(St.x*s,St.y*a):n&&(n.scrollLeft+=St.x*s,n.scrollTop+=St.y*a),1<=s&&(St.prevTimeX=o),1<=a&&(St.prevTimeY=o)),St.isScrolling&&(Ot(St.i),St.i=jt(St.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(t){St.isScrolling=!0,Ot(St.i),St.interaction=t,St.prevTimeX=(new Date).getTime(),St.prevTimeY=(new Date).getTime(),St.i=jt(St.scroll)},stop:function(){St.isScrolling=!1,Ot(St.i)}},kt="ontouchstart"in rt||rt.DocumentTouch&&lt instanceof rt.DocumentTouch,$t=!!ft,Tt=kt||$t?20:10,_t=1,Dt=0,Rt=1/0,Et=lt.all&&!rt.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},Mt={drag:!0,resize:!0,gesture:!0},Ht="onmousewheel"in lt?"mousewheel":"wheel",Nt="dragstart dragmove draginertiastart dragend dragenter dragleave dropactivate dropdeactivate dropmove drop resizestart resizemove resizeinertiastart resizeend gesturestart gesturemove gestureinertiastart gestureend down move up cancel tap doubletap hold".split(" "),Pt={},Lt="Opera"==navigator.appName&&kt&&navigator.userAgent.match("Presto"),At=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),It="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",jt=t.requestAnimationFrame,Ot=t.cancelAnimationFrame,zt=function(){function t(e,n,i,s){var u,p,h,f=nt(l,e),m=c[f],g=i;if(m&&m.events)if(o&&(p=d[f],h=nt(p.supplied,i),g=p.wrapped[h]),"all"===n)for(n in m.events)m.events.hasOwnProperty(n)&&t(e,n,"all");else{if(m.events[n]){var v=m.events[n].length;if("all"===i){for(u=0;u<v;u++)t(e,n,m.events[n][u],Boolean(s));return}for(u=0;u<v;u++)if(m.events[n][u]===i){e[a](r+n,g,s||!1),m.events[n].splice(u,1),o&&p&&(p.useCount[h]--,0===p.useCount[h]&&(p.supplied.splice(h,1),p.wrapped.splice(h,1),p.useCount.splice(h,1)));break}m.events[n]&&0===m.events[n].length&&(m.events[n]=null,m.typeCount--)}m.typeCount||(c.splice(f,1),l.splice(f,1),d.splice(f,1))}}function e(){this.returnValue=!1}function n(){this.cancelBubble=!0}function i(){this.immediatePropagationStopped=this.cancelBubble=!0}var o="attachEvent"in rt&&!("addEventListener"in rt),s=o?"attachEvent":"addEventListener",a=o?"detachEvent":"removeEventListener",r=o?"on":"",l=[],c=[],d=[];return{add:function(t,a,u,p){var h=nt(l,t),f=c[h];if(f||(f={events:{},typeCount:0},h=l.push(t)-1,c.push(f),d.push(o?{supplied:[],wrapped:[],useCount:[]}:null)),f.events[a]||(f.events[a]=[],f.typeCount++),-1===nt(f.events[a],u)){if(o){var h=d[h],m=nt(h.supplied,u),g=h.wrapped[m]||function(o){o.immediatePropagationStopped||(o.target=o.srcElement,o.currentTarget=t,o.preventDefault=o.preventDefault||e,o.stopPropagation=o.stopPropagation||n,o.stopImmediatePropagation=o.stopImmediatePropagation||i,/mouse|click/.test(o.type)&&(o.pageX=o.clientX+x(t).document.documentElement.scrollLeft,o.pageY=o.clientY+x(t).document.documentElement.scrollTop),u(o))};p=t[s](r+a,g,Boolean(p)),-1===m?(h.supplied.push(u),h.wrapped.push(g),h.useCount.push(1)):h.useCount[m]++}else p=t[s](a,u,p||!1);return f.events[a].push(u),p}},remove:t,useAttachEvent:o,_elements:l,_targets:c,_attachedListeners:d}}(),Ft={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};F.prototype={getPageXY:function(t,e){return v(t,e,this)},getClientXY:function(t,e){return b(t,e,this)},setEventXY:function(t,e){var n=1<e.length?$(e):e[0];v(n,gt,this),t.page.x=gt.x,t.page.y=gt.y,b(n,gt,this),t.client.x=gt.x,t.client.y=gt.y,t.timeStamp=(new Date).getTime()},pointerOver:function(t,e,n){function i(t,e){t&&P(t,n)&&!L(t,n,n)&&A(t,n,n)&&it(n,e)&&(o.push(t),s.push(n))}if(!this.prepared.name&&this.mouse){var o=[],s=[],a=this.element;this.addPointer(t),!this.target||!L(this.target,this.element,n)&&A(this.target,this.element,n)||(this.element=this.target=null,this.matches=[],this.matchElements=[]);var r=bt.get(n),l=r&&!L(r,n,n)&&A(r,n,n)&&X(r.getAction(t,e,this,n),r);l&&!z(r,n,l)&&(l=null),l?(this.target=r,this.element=n,this.matches=[],this.matchElements=[]):(bt.forEachSelector(i),this.validateSelector(t,e,o,s)?(this.matches=o,this.matchElements=s,this.pointerHover(t,e,this.matches,this.matchElements),zt.add(n,ft?st.move:"mousemove",Bt.pointerHover)):this.target&&(M(a,n)?(this.pointerHover(t,e,this.matches,this.matchElements),zt.add(this.element,ft?st.move:"mousemove",Bt.pointerHover)):(this.element=this.target=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(t,e,n,i,o,s){if(n=this.target,!this.prepared.name&&this.mouse){var a;this.setEventXY(this.curCoords,[t]),o?a=this.validateSelector(t,e,o,s):n&&(a=X(n.getAction(this.pointers[0],e,this,this.element),this.target)),n&&n.options.styleCursor&&(n._doc.documentElement.style.cursor=a?W(a):"")}else this.prepared.name&&this.checkAndPreventDefault(e,n,this.element)},pointerOut:function(t,e,n){this.prepared.name||(bt.get(n)||zt.remove(n,ft?st.move:"mousemove",Bt.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(t,e,i,o){function s(t,e,n){n=at?n.querySelectorAll(e):void 0,P(t,c)&&!L(t,c,i)&&A(t,c,i)&&it(c,e,n)&&(r.matches.push(t),r.matchElements.push(c))}var a,r=this,l=zt.useAttachEvent?u({},e):e,c=i,d=this.addPointer(t);if(this.holdTimers[d]=setTimeout(function(){r.pointerHold(zt.useAttachEvent?l:t,l,i,o)},Ct._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;n(c);){if(c===this.element&&X(this.target.getAction(t,e,this,this.element),this.target).name===this.prepared.name)return Ot(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(t,e,i,"down");c=N(c)}if(!this.interacting()){for(this.setEventXY(this.curCoords,[t]),this.downEvent=e;n(c)&&!a;)this.matches=[],this.matchElements=[],bt.forEachSelector(s),a=this.validateSelector(t,e,this.matches,this.matchElements),c=N(c);if(a)return this.prepared.name=a.name,this.prepared.axis=a.axis,this.prepared.edges=a.edges,this.collectEventTargets(t,e,i,"down"),this.pointerDown(t,e,i,o,a);this.downTimes[d]=(new Date).getTime(),this.downTargets[d]=i,p(this.downPointer,t),h(this.prevCoords,this.curCoords),this.pointerWasMoved=!1}this.collectEventTargets(t,e,i,"down")},pointerDown:function(t,e,n,i,o){if(!o&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name)this.checkAndPreventDefault(e,this.target,this.element);else{this.pointerIsDown=!0,this.downEvent=e;var s,a=this.addPointer(t);if(1<this.pointerIds.length&&this.target._element===this.element){var r=X(o||this.target.getAction(t,e,this,this.element),this.target);z(this.target,this.element,r)&&(s=r),this.prepared.name=null}else this.prepared.name||(r=bt.get(i))&&!L(r,i,n)&&A(r,i,n)&&(s=X(o||r.getAction(t,e,this,i),r,n))&&z(r,i,s)&&(this.target=r,this.element=i);var l=(r=this.target)&&r.options;!r||!o&&this.prepared.name?this.inertiaStatus.active&&i===this.element&&X(r.getAction(t,e,this,this.element),r).name===this.prepared.name&&(Ot(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(e,r,this.element)):(s=s||X(o||r.getAction(t,e,this,i),r,this.element),this.setEventXY(this.startCoords,this.pointers),s&&(l.styleCursor&&(r._doc.documentElement.style.cursor=W(s)),this.resizeAxes="resize"===s.name?s.axis:null,"gesture"===s&&2>this.pointerIds.length&&(s=null),this.prepared.name=s.name,this.prepared.axis=s.axis,this.prepared.edges=s.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[a]=(new Date).getTime(),this.downTargets[a]=n,p(this.downPointer,t),h(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(e,r,this.element)))}},setModifications:function(t,e){var n=this.target,i=!0,o=j(n,this.prepared.name)&&(!n.options[this.prepared.name].snap.endOnly||e),n=O(n,this.prepared.name)&&(!n.options[this.prepared.name].restrict.endOnly||e);return o?this.setSnapping(t):this.snapStatus.locked=!1,n?this.setRestriction(t):this.restrictStatus.restricted=!1,o&&this.snapStatus.locked&&!this.snapStatus.changed?i=n&&this.restrictStatus.restricted&&this.restrictStatus.changed:n&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(i=!1),i},setStartOffsets:function(t,e,n){t=e.getRect(n);var i=R(e,n);n=e.options[this.prepared.name].snap,e=e.options[this.prepared.name].restrict;var o,s;if(t?(this.startOffset.left=this.startCoords.page.x-t.left,this.startOffset.top=this.startCoords.page.y-t.top,this.startOffset.right=t.right-this.startCoords.page.x,this.startOffset.bottom=t.bottom-this.startCoords.page.y,o="width"in t?t.width:t.right-t.left,s="height"in t?t.height:t.bottom-t.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0),i=n&&"startCoords"===n.offset?{x:this.startCoords.page.x-i.x,y:this.startCoords.page.y-i.y}:n&&n.offset||{x:0,y:0},t&&n&&n.relativePoints&&n.relativePoints.length)for(var a=0;a<n.relativePoints.length;a++)this.snapOffsets.push({x:this.startOffset.left-o*n.relativePoints[a].x+i.x,y:this.startOffset.top-s*n.relativePoints[a].y+i.y});else this.snapOffsets.push(i);t&&e.elementRect?(this.restrictOffset.left=this.startOffset.left-o*e.elementRect.left,this.restrictOffset.top=this.startOffset.top-s*e.elementRect.top,this.restrictOffset.right=this.startOffset.right-o*(1-e.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-s*(1-e.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(t,e,n){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===t.name?2:1)||(-1===nt(yt,this)&&yt.push(this),this.prepared.name||this.setEventXY(this.startCoords),this.prepared.name=t.name,this.prepared.axis=t.axis,this.prepared.edges=t.edges,this.target=e,this.element=n,this.setStartOffsets(t.name,e,n),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(t,e,i,o,s){if(this.inertiaStatus.active){o=this.inertiaStatus.upCoords.page;var a=this.inertiaStatus.upCoords.client;this.setEventXY(this.curCoords,[{pageX:o.x+this.inertiaStatus.sx,pageY:o.y+this.inertiaStatus.sy,clientX:a.x+this.inertiaStatus.sx,clientY:a.y+this.inertiaStatus.sy}])}else this.recordPointer(t),this.setEventXY(this.curCoords,this.pointers);o=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var r,l,a=this.mouse?0:nt(this.pointerIds,y(t));if(this.pointerIsDown&&!this.pointerWasMoved&&(r=this.curCoords.client.x-this.startCoords.client.x,l=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=mt(r,l)>_t),o||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[a]),this.collectEventTargets(t,e,i,"move")),this.pointerIsDown)if(o&&this.pointerWasMoved&&!s)this.checkAndPreventDefault(e,this.target,this.element);else if(f(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||t instanceof U&&/inertiastart/.test(t.type))){if(!this.interacting()&&(f(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){r=Math.abs(r),l=Math.abs(l),o=this.target.options.drag.axis;var c=r>l?"x":r<l?"y":"xy";if("xy"!==c&&"xy"!==o&&o!==c){this.prepared.name=null;for(var d=i;n(d);){if((l=bt.get(d))&&l!==this.target&&!l.options.drag.manualStart&&"drag"===l.getAction(this.downPointer,this.downEvent,this,d).name&&I(c,l)){this.prepared.name="drag",this.target=l,this.element=d;break}d=N(d)}if(!this.prepared.name){var u=this;for(l=function(t,e,n){if(n=at?n.querySelectorAll(e):void 0,t!==u.target&&P(t,i)&&!t.options.drag.manualStart&&!L(t,d,i)&&A(t,d,i)&&it(d,e,n)&&"drag"===t.getAction(u.downPointer,u.downEvent,u,d).name&&I(c,t)&&z(t,d,"drag"))return t},d=i;n(d);){if(r=bt.forEachSelector(l)){this.prepared.name="drag",this.target=r,this.element=d;break}d=N(d)}}}}if((l=!!this.prepared.name&&!this.interacting())&&(this.target.options[this.prepared.name].manualStart||!z(this.target,this.element,this.prepared)))return void this.stop(e);this.prepared.name&&this.target&&(l&&this.start(this.prepared,this.target,this.element),(this.setModifications(this.curCoords.page,s)||l)&&(this.prevEvent=this[this.prepared.name+"Move"](e)),this.checkAndPreventDefault(e,this.target,this.element))}h(this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&this.autoScrollMove(t)}},dragStart:function(t){var e=new U(this,t,"drag","start",this.element);return this.dragging=!0,this.target.fire(e),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element),t=this.getDropEvents(t,e),t.activate&&this.fireActiveDrops(t.activate),e},dragMove:function(t){var e=this.target,n=new U(this,t,"drag","move",this.element),i=this.getDrop(n,t,this.element);return this.dropTarget=i.dropzone,this.dropElement=i.element,t=this.getDropEvents(t,n),e.fire(n),t.leave&&this.prevDropTarget.fire(t.leave),t.enter&&this.dropTarget.fire(t.enter),t.move&&this.dropTarget.fire(t.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,n},resizeStart:function(t){if(t=new U(this,t,"resize","start",this.element),this.prepared.edges){var e=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var n=u({},this.prepared.edges);n.top=n.top||n.left&&!n.bottom,n.left=n.left||n.top&&!n.right,n.bottom=n.bottom||n.right&&!n.top,n.right=n.right||n.bottom&&!n.left,this.prepared._linkedEdges=n}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=e.width/e.height),this.resizeRects={start:e,current:u({},e),restricted:u({},e),previous:u({},e),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},t.rect=this.resizeRects.restricted,t.deltaRect=this.resizeRects.delta}return this.target.fire(t),this.resizing=!0,t},resizeMove:function(t){t=new U(this,t,"resize","move",this.element);var e=this.prepared.edges,n=this.target.options.resize.invert,i="reposition"===n||"negate"===n;if(e){var o=t.dx,s=t.dy,a=this.resizeRects.start,r=this.resizeRects.current,l=this.resizeRects.restricted,c=this.resizeRects.delta,d=u(this.resizeRects.previous,l),p=e;if(this.target.options.resize.preserveAspectRatio){var h=this.resizeStartAspectRatio,e=this.prepared._linkedEdges;p.left&&p.bottom||p.right&&p.top?s=-o/h:p.left||p.right?s=o/h:(p.top||p.bottom)&&(o=s*h)}else this.target.options.resize.square&&(e=this.prepared._linkedEdges,p.left&&p.bottom||p.right&&p.top?s=-o:p.left||p.right?s=o:(p.top||p.bottom)&&(o=s));e.top&&(r.top+=s),e.bottom&&(r.bottom+=s),e.left&&(r.left+=o),e.right&&(r.right+=o),i?(u(l,r),"reposition"===n&&(l.top>l.bottom&&(e=l.top,l.top=l.bottom,l.bottom=e),l.left>l.right&&(e=l.left,l.left=l.right,l.right=e))):(l.top=Math.min(r.top,a.bottom),l.bottom=Math.max(r.bottom,a.top),l.left=Math.min(r.left,a.right),l.right=Math.max(r.right,a.left)),l.width=l.right-l.left,l.height=l.bottom-l.top;for(var f in l)c[f]=l[f]-d[f];t.edges=this.prepared.edges,t.rect=l,t.deltaRect=c}return this.target.fire(t),t},gestureStart:function(t){return t=new U(this,t,"gesture","start",this.element),t.ds=0,this.gesture.startDistance=this.gesture.prevDistance=t.distance,this.gesture.startAngle=this.gesture.prevAngle=t.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(t),t},gestureMove:function(t){return this.pointerIds.length?(t=new U(this,t,"gesture","move",this.element),t.ds=t.scale-this.gesture.scale,this.target.fire(t),this.gesture.prevAngle=t.angle,this.gesture.prevDistance=t.distance,1/0===t.scale||null===t.scale||void 0===t.scale||isNaN(t.scale)||(this.gesture.scale=t.scale),t):this.prevEvent},pointerHold:function(t,e,n){this.collectEventTargets(t,e,n,"hold")},pointerUp:function(t,e,n,i){var o=this.mouse?0:nt(this.pointerIds,y(t));clearTimeout(this.holdTimers[o]),this.collectEventTargets(t,e,n,"up"),this.collectEventTargets(t,e,n,"tap"),this.pointerEnd(t,e,n,i),this.removePointer(t)},pointerCancel:function(t,e,n,i){var o=this.mouse?0:nt(this.pointerIds,y(t));clearTimeout(this.holdTimers[o]),this.collectEventTargets(t,e,n,"cancel"),this.pointerEnd(t,e,n,i),this.removePointer(t)},ie8Dblclick:function(t,e,n){this.prevTap&&e.clientX===this.prevTap.clientX&&e.clientY===this.prevTap.clientY&&n===this.prevTap.target&&(this.downTargets[0]=n,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(t,e,n,"tap"))},pointerEnd:function(t,e,n,i){var o,s=this.target,a=s&&s.options,r=a&&this.prepared.name&&a[this.prepared.name].inertia;if(o=this.inertiaStatus,this.interacting()){if(o.active&&!o.ending)return;var l=(new Date).getTime(),c=!1,d=!1,p=!1,f=j(s,this.prepared.name)&&a[this.prepared.name].snap.endOnly,m=O(s,this.prepared.name)&&a[this.prepared.name].restrict.endOnly,g=0,v=0,a=this.dragging?"x"===a.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===a.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,d=(c=r&&r.enabled&&"gesture"!==this.prepared.name&&e!==o.startEvent)&&50>l-this.curCoords.timeStamp&&a>r.minSpeed&&a>r.endSpeed;if(c&&!d&&(f||m)&&(r={},r.snap=r.restrict=r,f&&(this.setSnapping(this.curCoords.page,r),r.locked&&(g+=r.dx,v+=r.dy)),m&&(this.setRestriction(this.curCoords.page,r),r.restricted&&(g+=r.dx,v+=r.dy)),g||v)&&(p=!0),d||p)return h(o.upCoords,this.curCoords),this.pointers[0]=o.startEvent=new U(this,e,this.prepared.name,"inertiastart",this.element),o.t0=l,s.fire(o.startEvent),d?(o.vx0=this.pointerDelta.client.vx,o.vy0=this.pointerDelta.client.vy,o.v0=a,this.calcInertia(o),e=u({},this.curCoords.page),s=R(s,this.element),e.x=e.x+o.xe-s.x,e.y=e.y+o.ye-s.y,s={useStatusXY:!0,x:e.x,y:e.y,dx:0,dy:0,snap:null},s.snap=s,g=v=0,f&&(e=this.setSnapping(this.curCoords.page,s),e.locked&&(g+=e.dx,v+=e.dy)),m&&(s=this.setRestriction(this.curCoords.page,s),s.restricted&&(g+=s.dx,v+=s.dy)),o.modifiedXe+=g,o.modifiedYe+=v,o.i=jt(this.boundInertiaFrame)):(o.smoothEnd=!0,o.xe=g,o.ye=v,o.sx=o.sy=0,o.i=jt(this.boundSmoothEndFrame)),void(o.active=!0);(f||m)&&this.pointerMove(t,e,n,i,!0)}this.dragging?(o=new U(this,e,"drag","end",this.element),m=this.getDrop(o,e,this.element),this.dropTarget=m.dropzone,this.dropElement=m.element,m=this.getDropEvents(e,o),m.leave&&this.prevDropTarget.fire(m.leave),m.enter&&this.dropTarget.fire(m.enter),m.drop&&this.dropTarget.fire(m.drop),m.deactivate&&this.fireActiveDrops(m.deactivate),s.fire(o)):this.resizing?(o=new U(this,e,"resize","end",this.element),s.fire(o)):this.gesturing&&(o=new U(this,e,"gesture","end",this.element),s.fire(o)),this.stop(e)},collectDrops:function(t){var e,i=[],o=[];for(t=t||this.element,e=0;e<bt.length;e++)if(bt[e].options.drop.enabled){var s=bt[e],a=s.options.drop.accept;if(!(n(a)&&a!==t||c(a)&&!it(t,a)))for(var a=s.selector?s._context.querySelectorAll(s.selector):[s._element],r=0,l=a.length;r<l;r++){var d=a[r];d!==t&&(i.push(s),o.push(d))}}return{dropzones:i,elements:o}},fireActiveDrops:function(t){var e,n,i,o;for(e=0;e<this.activeDrops.dropzones.length;e++)n=this.activeDrops.dropzones[e],i=this.activeDrops.elements[e],i!==o&&(t.target=i,n.fire(t)),o=i},setActiveDrops:function(t){for(t=this.collectDrops(t,!0),this.activeDrops.dropzones=t.dropzones,this.activeDrops.elements=t.elements,this.activeDrops.rects=[],t=0;t<this.activeDrops.dropzones.length;t++)this.activeDrops.rects[t]=this.activeDrops.dropzones[t].getRect(this.activeDrops.elements[t])},getDrop:function(t,e,n){var i=[];wt&&this.setActiveDrops(n);for(var o=0;o<this.activeDrops.dropzones.length;o++){var s=this.activeDrops.elements[o];i.push(this.activeDrops.dropzones[o].dropCheck(t,e,this.target,n,s,this.activeDrops.rects[o])?s:null)}n=(e=i[0])?0:-1;for(var a,o=[],r=[],s=1;s<i.length;s++)if((t=i[s])&&t!==e)if(e){if(t.parentNode!==t.ownerDocument)if(e.parentNode===t.ownerDocument)e=t,n=s;else{if(!o.length)for(a=e;a.parentNode&&a.parentNode!==a.ownerDocument;)o.unshift(a),a=a.parentNode;if(e instanceof ht&&t instanceof dt&&!(t instanceof ut)){if(t===e.parentNode)continue;a=t.ownerSVGElement}else a=t;for(r=[];a.parentNode!==a.ownerDocument;)r.unshift(a),a=a.parentNode;for(a=0;r[a]&&r[a]===o[a];)a++;for(a=[r[a-1],r[a],o[a]],r=a[0].lastChild;r;){if(r===a[1]){e=t,n=s,o=[];break}if(r===a[2])break;r=r.previousSibling}}}else e=t,n=s;return i=n,{dropzone:this.activeDrops.dropzones[i]||null,element:this.activeDrops.elements[i]||null}},getDropEvents:function(t,e){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(n.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragleave"},e.dragLeave=this.prevDropElement,e.prevDropzone=this.prevDropTarget),this.dropTarget&&(n.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragenter"},e.dragEnter=this.dropElement,e.dropzone=this.dropTarget)),"dragend"===e.type&&this.dropTarget&&(n.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"drop"},e.dropzone=this.dropTarget),"dragstart"===e.type&&(n.activate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropactivate"}),"dragend"===e.type&&(n.deactivate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropdeactivate"}),"dragmove"===e.type&&this.dropTarget&&(n.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,dragmove:e,timeStamp:e.timeStamp,type:"dropmove"},e.dropzone=this.dropTarget),n},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=this.target=this.element=null},stop:function(t){if(this.interacting()){St.stop(),this.matches=[],this.matchElements=[];var e=this.target;e.options.styleCursor&&(e._doc.documentElement.style.cursor=""),t&&a(t.preventDefault)&&this.checkAndPreventDefault(t,e,this.element),this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}for(this.clearTargets(),this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,t=this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;t<this.pointers.length;t++)-1===nt(this.pointerIds,y(this.pointers[t]))&&this.pointers.splice(t,1)},inertiaFrame:function(){var t,e,n=this.inertiaStatus;if(t=this.target.options[this.prepared.name].inertia.resistance,e=(new Date).getTime()/1e3-n.t0,e<n.te){if(e=1-(Math.exp(-t*e)-n.lambda_v0)/n.one_ve_v0,n.modifiedXe===n.xe&&n.modifiedYe===n.ye)n.sx=n.xe*e,n.sy=n.ye*e;else{var i=n.ye,o=n.modifiedYe;t=E(e,0,n.xe,n.modifiedXe),e=E(e,0,i,o),n.sx=t,n.sy=e}this.pointerMove(n.startEvent,n.startEvent),n.i=jt(this.boundInertiaFrame)}else n.ending=!0,n.sx=n.modifiedXe,n.sy=n.modifiedYe,this.pointerMove(n.startEvent,n.startEvent),this.pointerEnd(n.startEvent,n.startEvent),n.active=n.ending=!1},smoothEndFrame:function(){var t=this.inertiaStatus,e=(new Date).getTime()-t.t0,n=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(e<n){var i;i=e/n,t.sx=-t.xe*i*(i-2)+0,e/=n,t.sy=-t.ye*e*(e-2)+0,this.pointerMove(t.startEvent,t.startEvent),t.i=jt(this.boundSmoothEndFrame)}else t.ending=!0,t.sx=t.xe,t.sy=t.ye,this.pointerMove(t.startEvent,t.startEvent),this.pointerEnd(t.startEvent,t.startEvent),t.smoothEnd=t.active=t.ending=!1},addPointer:function(t){var e=y(t),n=this.mouse?0:nt(this.pointerIds,e);return-1===n&&(n=this.pointerIds.length),this.pointerIds[n]=e,this.pointers[n]=t,n},removePointer:function(t){t=y(t),t=this.mouse?0:nt(this.pointerIds,t),-1!==t&&(this.pointers.splice(t,1),this.pointerIds.splice(t,1),this.downTargets.splice(t,1),this.downTimes.splice(t,1),this.holdTimers.splice(t,1))},recordPointer:function(t){var e=this.mouse?0:nt(this.pointerIds,y(t));-1!==e&&(this.pointers[e]=t)},collectEventTargets:function(t,e,i,o){function s(t,e,s){s=at?s.querySelectorAll(e):void 0,t._iEvents[o]&&n(c)&&P(t,c)&&!L(t,c,i)&&A(t,c,i)&&it(c,e,s)&&(r.push(t),l.push(c))}var a=this.mouse?0:nt(this.pointerIds,y(t));if("tap"!==o||!this.pointerWasMoved&&this.downTargets[a]&&this.downTargets[a]===i){for(var r=[],l=[],c=i;c;)K.isSet(c)&&K(c)._iEvents[o]&&(r.push(K(c)),l.push(c)),bt.forEachSelector(s),c=N(c);(r.length||"tap"===o)&&this.firePointers(t,e,i,r,l,o)}},firePointers:function(t,e,n,i,o,s){var a,r,l=this.mouse?0:nt(this.pointerIds,y(t)),d={};for("doubletap"===s?d=t:(p(d,e),e!==t&&p(d,t),d.preventDefault=q,d.stopPropagation=U.prototype.stopPropagation,d.stopImmediatePropagation=U.prototype.stopImmediatePropagation,d.interaction=this,d.timeStamp=(new Date).getTime(),d.originalEvent=e,d.originalPointer=t,d.type=s,d.pointerId=y(t),d.pointerType=this.mouse?"mouse":$t?c(t.pointerType)?t.pointerType:[,,"touch","pen","mouse"][t.pointerType]:"touch"),"tap"===s&&(d.dt=d.timeStamp-this.downTimes[l],a=d.timeStamp-this.tapTime,r=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===d.target&&500>a),d.double=r,this.tapTime=d.timeStamp),t=0;t<i.length&&(d.currentTarget=o[t],d.interactable=i[t],i[t].fire(d),!(d.immediatePropagationStopped||d.propagationStopped&&o[t+1]!==d.currentTarget));t++);r?(i={},u(i,d),i.dt=a,i.type="doubletap",this.collectEventTargets(i,e,n,"doubletap"),this.prevTap=i):"tap"===s&&(this.prevTap=d)},validateSelector:function(t,e,n,i){for(var o=0,s=n.length;o<s;o++){var a=n[o],r=i[o],l=X(a.getAction(t,e,this,r),a);if(l&&z(a,r,l))return this.target=a,this.element=r,l}},setSnapping:function(t,e){var n,i,o,s=this.target.options[this.prepared.name].snap,l=[];e=e||this.snapStatus,e.useStatusXY?i={x:e.x,y:e.y}:(n=R(this.target,this.element),i=u({},t),i.x-=n.x,i.y-=n.y),e.realX=i.x,e.realY=i.y,i.x-=this.inertiaStatus.resumeDx,i.y-=this.inertiaStatus.resumeDy;for(var c=s.targets?s.targets.length:0,d=0;d<this.snapOffsets.length;d++){var p=i.x-this.snapOffsets[d].x,h=i.y-this.snapOffsets[d].y;for(o=0;o<c;o++)(n=a(s.targets[o])?s.targets[o](p,h,this):s.targets[o])&&l.push({x:r(n.x)?n.x+this.snapOffsets[d].x:p,y:r(n.y)?n.y+this.snapOffsets[d].y:h,range:r(n.range)?n.range:s.range})}var s=null,d=!1,f=0,m=0;for(o=h=p=0,c=l.length;o<c;o++){n=l[o];var g=n.range,v=n.x-i.x,b=n.y-i.y,y=mt(v,b),w=y<=g;1/0===g&&d&&1/0!==m&&(w=!1),s&&!(w?d&&1/0!==g?y/g<f/m:1/0===g&&1/0!==m||y<f:!d&&y<f)||(1/0===g&&(w=!0),s=n,f=y,m=g,d=w,p=v,h=b,e.range=g)}return s?(l=e.snappedX!==s.x||e.snappedY!==s.y,e.snappedX=s.x,e.snappedY=s.y):(l=!0,e.snappedX=NaN,e.snappedY=NaN),e.dx=p,e.dy=h,e.changed=l||d&&!e.locked,e.locked=d,e},setRestriction:function(t,e){var i=this.target,o=i&&i.options[this.prepared.name].restrict,s=o&&o.restriction;return s?(e=e||this.restrictStatus,o=o=e.useStatusXY?{x:e.x,y:e.y}:u({},t),e.snap&&e.snap.locked&&(o.x+=e.snap.dx||0,o.y+=e.snap.dy||0),o.x-=this.inertiaStatus.resumeDx,o.y-=this.inertiaStatus.resumeDy,e.dx=0,e.dy=0,e.restricted=!1,c(s)&&(s="parent"===s?N(this.element):"self"===s?i.getRect(this.element):H(this.element,s),!s)?e:(a(s)&&(s=s(o.x,o.y,this.element)),n(s)&&(s=S(s)),(i=s)?"x"in s&&"y"in s?(s=Math.max(Math.min(i.x+i.width-this.restrictOffset.right,o.x),i.x+this.restrictOffset.left),i=Math.max(Math.min(i.y+i.height-this.restrictOffset.bottom,o.y),i.y+this.restrictOffset.top)):(s=Math.max(Math.min(i.right-this.restrictOffset.right,o.x),i.left+this.restrictOffset.left),i=Math.max(Math.min(i.bottom-this.restrictOffset.bottom,o.y),i.top+this.restrictOffset.top)):(s=o.x,i=o.y),e.dx=s-o.x,e.dy=i-o.y,e.changed=e.restrictedX!==s||e.restrictedY!==i,e.restricted=!(!e.dx&&!e.dy),e.restrictedX=s,e.restrictedY=i,e)):e},checkAndPreventDefault:function(t,e,n){if(e=e||this.target){e=e.options;var i=e.preventDefault;"auto"===i&&n&&!/^(input|select|textarea)$/i.test(t.target.nodeName)?/down|start/i.test(t.type)&&"drag"===this.prepared.name&&"xy"!==e.drag.axis||e[this.prepared.name]&&e[this.prepared.name].manualStart&&!this.interacting()||t.preventDefault():"always"===i&&t.preventDefault()}},calcInertia:function(t){var e=this.target.options[this.prepared.name].inertia,n=e.resistance,i=-Math.log(e.endSpeed/t.v0)/n;t.x0=this.prevEvent.pageX,t.y0=this.prevEvent.pageY,t.t0=t.startEvent.timeStamp/1e3,t.sx=t.sy=0,t.modifiedXe=t.xe=(t.vx0-i)/n,t.modifiedYe=t.ye=(t.vy0-i)/n,t.te=i,t.lambda_v0=n/t.v0,t.one_ve_v0=1-e.endSpeed/t.v0},autoScrollMove:function(t){var e;if(e=this.interacting()){e=this.prepared.name;var n=this.target.options;/^resize/.test(e)&&(e="resize"),e=n[e].autoScroll&&n[e].autoScroll.enabled}if(e)if(this.inertiaStatus.active)St.x=St.y=0;else{var o,s=this.target.options[this.prepared.name].autoScroll,a=s.container||x(this.element);i(a)?(o=t.clientX<St.margin,e=t.clientY<St.margin,n=t.clientX>a.innerWidth-St.margin,t=t.clientY>a.innerHeight-St.margin):(a=C(a),o=t.clientX<a.left+St.margin,e=t.clientY<a.top+St.margin,n=t.clientX>a.right-St.margin,t=t.clientY>a.bottom-St.margin),St.x=n?1:o?-1:0,St.y=t?1:e?-1:0,St.isScrolling||(St.margin=s.margin,St.speed=s.speed,St.start(this))}},_updateEventTargets:function(t,e){this._eventTarget=t,this._curEventTarget=e}},U.prototype={preventDefault:e,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var Bt={},Vt="dragStart dragMove resizeStart resizeMove gestureStart gestureMove pointerOver pointerOut pointerHover selectorDown pointerDown pointerMove pointerUp pointerCancel pointerEnd addPointer removePointer recordPointer autoScrollMove".split(" "),Ut=0,qt=Vt.length;Ut<qt;Ut++){var Wt=Vt[Ut];Bt[Wt]=V(Wt)}bt.indexOfElement=function(t,e){e=e||lt;for(var n=0;n<this.length;n++){var i=this[n];if(i.selector===t&&i._context===e||!i.selector&&i._element===t)return n}return-1},bt.get=function(t,e){return this[this.indexOfElement(t,e&&e.context)]},bt.forEachSelector=function(t){for(var e=0;e<this.length;e++){var n=this[e];if(n.selector&&(n=t(n,n.selector,n._context,e,this),void 0!==n))return n}},Q.prototype={setOnEvents:function(t,e){return"drop"===t?(a(e.ondrop)&&(this.ondrop=e.ondrop),a(e.ondropactivate)&&(this.ondropactivate=e.ondropactivate),a(e.ondropdeactivate)&&(this.ondropdeactivate=e.ondropdeactivate),a(e.ondragenter)&&(this.ondragenter=e.ondragenter),a(e.ondragleave)&&(this.ondragleave=e.ondragleave),a(e.ondropmove)&&(this.ondropmove=e.ondropmove)):(t="on"+t,
a(e.onstart)&&(this[t+"start"]=e.onstart),a(e.onmove)&&(this[t+"move"]=e.onmove),a(e.onend)&&(this[t+"end"]=e.onend),a(e.oninertiastart)&&(this[t+"inertiastart"]=e.oninertiastart)),this},draggable:function(t){return s(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.drag.axis=t.axis:null===t.axis&&delete this.options.drag.axis,this):l(t)?(this.options.drag.enabled=t,this):this.options.drag},setPerAction:function(t,e){for(var n in e)n in Ct[t]&&(s(e[n])?(this.options[t][n]=u(this.options[t][n]||{},e[n]),s(Ct.perAction[n])&&"enabled"in Ct.perAction[n]&&(this.options[t][n].enabled=!1!==e[n].enabled)):l(e[n])&&s(Ct.perAction[n])?this.options[t][n].enabled=e[n]:void 0!==e[n]&&(this.options[t][n]=e[n]))},dropzone:function(t){return s(t)?(this.options.drop.enabled=!1!==t.enabled,this.setOnEvents("drop",t),/^(pointer|center)$/.test(t.overlap)?this.options.drop.overlap=t.overlap:r(t.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(this.options.drop.accept=t.accept),"checker"in t&&(this.options.drop.checker=t.checker),this):l(t)?(this.options.drop.enabled=t,this):this.options.drop},dropCheck:function(t,e,n,i,o,s){var a=!1;if(!(s=s||this.getRect(o)))return!!this.options.drop.checker&&this.options.drop.checker(t,e,a,this,o,n,i);var l=this.options.drop.overlap;if("pointer"===l){var c=v(t),a=R(n,i);c.x+=a.x,c.y+=a.y,a=c.x>s.left&&c.x<s.right,c=c.y>s.top&&c.y<s.bottom,a=a&&c}if(c=n.getRect(i),"center"===l)var a=c.left+c.width/2,d=c.top+c.height/2,a=a>=s.left&&a<=s.right&&d>=s.top&&d<=s.bottom;return r(l)&&(a=Math.max(0,Math.min(s.right,c.right)-Math.max(s.left,c.left))*Math.max(0,Math.min(s.bottom,c.bottom)-Math.max(s.top,c.top))/(c.width*c.height)>=l),this.options.drop.checker&&(a=this.options.drop.checker(t,e,a,this,o,n,i)),a},dropChecker:function(t){return a(t)?(this.options.drop.checker=t,this):null===t?(delete this.options.getRect,this):this.options.drop.checker},accept:function(t){return n(t)||d(t)?(this.options.drop.accept=t,this):null===t?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(t){return s(t)?(this.options.resize.enabled=!1!==t.enabled,this.setPerAction("resize",t),this.setOnEvents("resize",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.resize.axis=t.axis:null===t.axis&&(this.options.resize.axis=Ct.resize.axis),l(t.preserveAspectRatio)?this.options.resize.preserveAspectRatio=t.preserveAspectRatio:l(t.square)&&(this.options.resize.square=t.square),this):l(t)?(this.options.resize.enabled=t,this):this.options.resize},squareResize:function(t){return l(t)?(this.options.resize.square=t,this):null===t?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(t){return s(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):l(t)?(this.options.gesture.enabled=t,this):this.options.gesture},autoScroll:function(t){return s(t)?t=u({actions:["drag","resize"]},t):l(t)&&(t={actions:["drag","resize"],enabled:t}),this.setOptions("autoScroll",t)},snap:function(t){return t=this.setOptions("snap",t),t===this?this:t.drag},setOptions:function(t,e){var n,i=e&&o(e.actions)?e.actions:["drag"];if(s(e)||l(e)){for(n=0;n<i.length;n++){var a=/resize/.test(i[n])?"resize":i[n];s(this.options[a])&&(a=this.options[a][t],s(e)?(u(a,e),a.enabled=!1!==e.enabled,"snap"===t&&("grid"===a.mode?a.targets=[K.createSnapGrid(u({offset:a.gridOffset||{x:0,y:0}},a.grid||{}))]:"anchor"===a.mode?a.targets=a.anchors:"path"===a.mode&&(a.targets=a.paths),"elementOrigin"in e&&(a.relativePoints=[e.elementOrigin]))):l(e)&&(a.enabled=e))}return this}for(i={},a=["drag","resize","gesture"],n=0;n<a.length;n++)t in Ct[a[n]]&&(i[a[n]]=this.options[a[n]][t]);return i},inertia:function(t){return t=this.setOptions("inertia",t),t===this?this:t.drag},getAction:function(t,e,n,i){var o=this.defaultActionChecker(t,n,i);return this.options.actionChecker?this.options.actionChecker(t,e,o,this,i,n):o},defaultActionChecker:Y,actionChecker:function(t){return a(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(t){return t=t||this._element,this.selector&&!n(t)&&(t=this._context.querySelector(this.selector)),S(t)},rectChecker:function(t){return a(t)?(this.getRect=t,this):null===t?(delete this.options.getRect,this):this.getRect},styleCursor:function(t){return l(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):l(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault},origin:function(t){return d(t)||s(t)?(this.options.origin=t,this):this.options.origin},deltaSource:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource},restrict:function(t){if(!s(t))return this.setOptions("restrict",t);for(var e,n=["drag","resize","gesture"],i=0;i<n.length;i++){var o=n[i];o in t&&(e=u({actions:[o],restriction:t[o]},t),e=this.setOptions("restrict",e))}return e},context:function(){return this._context},_context:lt,ignoreFrom:function(t){return d(t)||n(t)?(this.options.ignoreFrom=t,this):this.options.ignoreFrom},allowFrom:function(t){return d(t)||n(t)?(this.options.allowFrom=t,this):this.options.allowFrom},element:function(){return this._element},fire:function(t){if(!t||!t.type||-1===nt(Nt,t.type))return this;var e,n,i,o="on"+t.type;if(t.type in this._iEvents)for(e=this._iEvents[t.type],n=0,i=e.length;n<i&&!t.immediatePropagationStopped;n++)e[n](t);if(a(this[o])&&this[o](t),t.type in Pt&&(e=Pt[t.type]))for(n=0,i=e.length;n<i&&!t.immediatePropagationStopped;n++)e[n](t);return this},on:function(t,e,n){var i;if(c(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(i=0;i<t.length;i++)this.on(t[i],e,n);return this}if(s(t)){for(i in t)this.on(i,t[i],e);return this}if("wheel"===t&&(t=Ht),n=!!n,-1!==nt(Nt,t))t in this._iEvents?this._iEvents[t].push(e):this._iEvents[t]=[e];else if(this.selector){if(!xt[t])for(xt[t]={selectors:[],contexts:[],listeners:[]},i=0;i<vt.length;i++)zt.add(vt[i],t,J),zt.add(vt[i],t,G,!0);for(t=xt[t],i=t.selectors.length-1;0<=i&&(t.selectors[i]!==this.selector||t.contexts[i]!==this._context);i--);-1===i&&(i=t.selectors.length,t.selectors.push(this.selector),t.contexts.push(this._context),t.listeners.push([])),t.listeners[i].push([e,n])}else zt.add(this._element,t,e,n);return this},off:function(t,e,n){var i;if(c(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(i=0;i<t.length;i++)this.off(t[i],e,n);return this}if(s(t)){for(var a in t)this.off(a,t[a],e);return this}if(a=-1,n=!!n,"wheel"===t&&(t=Ht),-1!==nt(Nt,t))(n=this._iEvents[t])&&-1!==(a=nt(n,e))&&this._iEvents[t].splice(a,1);else if(this.selector){var r=xt[t],l=!1;if(!r)return this;for(a=r.selectors.length-1;0<=a;a--)if(r.selectors[a]===this.selector&&r.contexts[a]===this._context){var d=r.listeners[a];for(i=d.length-1;0<=i;i--){var u=d[i][1];if(d[i][0]===e&&u===n){d.splice(i,1),d.length||(r.selectors.splice(a,1),r.contexts.splice(a,1),r.listeners.splice(a,1),zt.remove(this._context,t,J),zt.remove(this._context,t,G,!0),r.selectors.length||(xt[t]=null)),l=!0;break}}if(l)break}}else zt.remove(this._element,t,e,n);return this},set:function(t){s(t)||(t={}),this.options=u({},Ct.base);var e,n=["drag","drop","resize","gesture"],i=["draggable","dropzone","resizable","gesturable"],o=u(u({},Ct.perAction),t[a]||{});for(e=0;e<n.length;e++){var a=n[e];this.options[a]=u({},Ct[a]),this.setPerAction(a,o),this[i[e]](t[a])}for(n="accept actionChecker allowFrom deltaSource dropChecker ignoreFrom origin preventDefault rectChecker styleCursor".split(" "),e=0,qt=n.length;e<qt;e++)i=n[e],this.options[i]=Ct.base[i],i in t&&this[i](t[i]);return this},unset:function(){if(zt.remove(this._element,"all"),c(this.selector))for(var t in xt)for(var e=xt[t];0<e.selectors.length;){e.selectors[0]===this.selector&&e.contexts[0]===this._context&&(e.selectors.splice(0,1),e.contexts.splice(0,1),e.listeners.splice(0,1),e.selectors.length||(xt[t]=null)),zt.remove(this._context,t,J),zt.remove(this._context,t,G,!0);break}else zt.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),bt.splice(nt(bt,this),1),K}},Q.prototype.snap=Z(Q.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),Q.prototype.restrict=Z(Q.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),Q.prototype.inertia=Z(Q.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),Q.prototype.autoScroll=Z(Q.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),Q.prototype.squareResize=Z(Q.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square"),Q.prototype.accept=Z(Q.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead"),Q.prototype.dropChecker=Z(Q.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead"),Q.prototype.context=Z(Q.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead"),K.isSet=function(t,e){return-1!==bt.indexOfElement(t,e&&e.context)},K.on=function(t,e,n){if(c(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(var i=0;i<t.length;i++)K.on(t[i],e,n);return K}if(s(t)){for(i in t)K.on(i,t[i],e);return K}return-1!==nt(Nt,t)?Pt[t]?Pt[t].push(e):Pt[t]=[e]:zt.add(lt,t,e,n),K},K.off=function(t,e,n){if(c(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(var i=0;i<t.length;i++)K.off(t[i],e,n);return K}if(s(t)){for(i in t)K.off(i,t[i],e);return K}if(-1===nt(Nt,t))zt.remove(lt,t,e,n);else{var a;t in Pt&&-1!==(a=nt(Pt[t],e))&&Pt[t].splice(a,1)}return K},K.enableDragging=Z(function(t){return null!==t&&void 0!==t?(Mt.drag=t,K):Mt.drag},"interact.enableDragging is deprecated and will soon be removed."),K.enableResizing=Z(function(t){return null!==t&&void 0!==t?(Mt.resize=t,K):Mt.resize},"interact.enableResizing is deprecated and will soon be removed."),K.enableGesturing=Z(function(t){return null!==t&&void 0!==t?(Mt.gesture=t,K):Mt.gesture},"interact.enableGesturing is deprecated and will soon be removed."),K.eventTypes=Nt,K.debug=function(){var t=yt[0]||new F;return{interactions:yt,target:t.target,dragging:t.dragging,resizing:t.resizing,gesturing:t.gesturing,prepared:t.prepared,matches:t.matches,matchElements:t.matchElements,prevCoords:t.prevCoords,startCoords:t.startCoords,pointerIds:t.pointerIds,pointers:t.pointers,addPointer:Bt.addPointer,removePointer:Bt.removePointer,recordPointer:Bt.recordPointer,snap:t.snapStatus,restrict:t.restrictStatus,inertia:t.inertiaStatus,downTime:t.downTimes[0],downEvent:t.downEvent,downPointer:t.downPointer,prevEvent:t.prevEvent,Interactable:Q,interactables:bt,pointerIsDown:t.pointerIsDown,defaultOptions:Ct,defaultActionChecker:Y,actionCursors:Et,dragMove:Bt.dragMove,resizeMove:Bt.resizeMove,gestureMove:Bt.gestureMove,pointerUp:Bt.pointerUp,pointerDown:Bt.pointerDown,pointerMove:Bt.pointerMove,pointerHover:Bt.pointerHover,eventTypes:Nt,events:zt,globalEvents:Pt,delegatedEvents:xt,prefixedPropREs:Ft}},K.getPointerAverage=$,K.getTouchBBox=T,K.getTouchDistance=_,K.getTouchAngle=D,K.getElementRect=S,K.getElementClientRect=C,K.matchesSelector=it,K.closest=H,K.margin=Z(function(t){return r(t)?(Tt=t,K):Tt},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead."),K.supportsTouch=function(){return kt},K.supportsPointerEvent=function(){return $t},K.stop=function(t){for(var e=yt.length-1;0<=e;e--)yt[e].stop(t);return K},K.dynamicDrop=function(t){return l(t)?(wt=t,K):wt},K.pointerMoveTolerance=function(t){return r(t)?(_t=t,this):_t},K.maxInteractions=function(t){return r(t)?(Rt=t,this):Rt},K.createSnapGrid=function(t){return function(e,n){var i=0,o=0;return s(t.offset)&&(i=t.offset.x,o=t.offset.y),{x:Math.round((e-i)/t.x)*t.x+i,y:Math.round((n-o)/t.y)*t.y+o,range:t.range}}},et(lt),It in Element.prototype&&a(Element.prototype[It])||(at=function(t,e,n){n=n||t.parentNode.querySelectorAll(e),e=0;for(var i=n.length;e<i;e++)if(n[e]===t)return!0;return!1}),function(){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)jt=t[n[i]+"RequestAnimationFrame"],Ot=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];jt||(jt=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),o=setTimeout(function(){t(n+i)},i);return e=n+i,o}),Ot||(Ot=function(t){clearTimeout(t)})}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=K),exports.interact=K):"function"==typeof define&&define.amd?define("interact",[],function(){return K}):t.interact=K}}("undefined"==typeof window?void 0:window),function(t){function e(){var t=!1,e=!1;this.stopPropagation=function(){t=!0},this.isPropagationStopped=function(){return t},this.stopImmediatePropagation=function(){e=!0},this.isImmediatePropagationStopped=function(){return e}}function n(){var t=[];this.subscribe=function(e){t.push(e)},this.unsubscribe=function(e){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},this.notify=function(n,i,o){i=i||new e,o=o||this;for(var s,a=0;a<t.length&&!i.isPropagationStopped()&&!i.isImmediatePropagationStopped();a++)s=t[a].call(o,i,n);return s}}function i(){var t=[];this.subscribe=function(e,n){return t.push({event:e,handler:n}),e.subscribe(n),this},this.unsubscribe=function(e,n){for(var i=t.length;i--;)if(t[i].event===e&&t[i].handler===n)return t.splice(i,1),void e.unsubscribe(n);return this},this.unsubscribeAll=function(){for(var e=t.length;e--;)t[e].event.unsubscribe(t[e].handler);return t=[],this}}function o(t,e,n,i){void 0===n&&void 0===i&&(n=t,i=e),this.fromRow=Math.min(t,n),this.fromCell=Math.min(e,i),this.toRow=Math.max(t,n),this.toCell=Math.max(e,i),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(t,e){return t>=this.fromRow&&t<=this.toRow&&e>=this.fromCell&&e<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function s(){this.__nonDataRow=!0}function a(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function r(){this.__groupTotals=!0,this.group=null}function l(){var t=null;this.isActive=function(e){return e?t===e:null!==t},this.activate=function(e){if(e!==t){if(null!==t)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!e.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!e.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";t=e}},this.deactivate=function(e){if(t!==e)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";t=null},this.commitCurrentEdit=function(){return!t||t.commitCurrentEdit()},this.cancelCurrentEdit=function(){return!t||t.cancelCurrentEdit()}}t.extend(!0,window,{Slick:{Event:n,EventData:e,EventHandler:i,Range:o,NonDataRow:s,Group:a,GroupTotals:r,EditorLock:l,GlobalEditorLock:new l}}),a.prototype=new s,a.prototype.equals=function(t){return this.value===t.value&&this.count===t.count&&this.collapsed===t.collapsed},r.prototype=new s}(jQuery),define("slick.core",function(){}),"undefined"==typeof jQuery)throw"SlickGrid requires jquery module to be loaded";if("undefined"==typeof Slick)throw"slick.core.js not loaded";if(function($){function SlickGrid(container,data,columns,options){function init(){if($container=$(container),$container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");cacheCssForHiddenInit(),maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var t=0;t<columns.length;t++){var e=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[e.id]=t,e.minWidth&&e.width<e.minWidth&&(e.width=e.minWidth),e.maxWidth&&e.width>e.maxWidth&&(e.width=e.maxWidth)}editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' />").appendTo($headerScroller),$headers.width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),options.createFooterRow&&($footerRowScroller=$("<div class='slick-footerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$footerRow=$("<div class='slick-footerrow-columns' />").appendTo($footerRowScroller),$footerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScroller),options.showFooterRow||$footerRowScroller.hide()),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(t){return $(t.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll",handleScroll),$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$headerRowScroller.bind("scroll",handleHeaderRowScroll),options.createFooterRow&&$footerRowScroller.bind("scroll",handleFooterRowScroll),$focusSink.add($focusSink2).bind("keydown",handleKeyDown),$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleMouseWheel).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave),restoreCssFromHiddenInit())}function cacheCssForHiddenInit(){$hiddenParents=$container.parents().addBack().not(":visible"),$hiddenParents.each(function(){var t={};for(var e in cssShow)t[e]=this.style[e],this.style[e]=cssShow[e];oldProps.push(t)})}function restoreCssFromHiddenInit(){$hiddenParents.each(function(t){var e=oldProps[t];for(var n in cssShow)this.style[n]=e[n]})}function registerPlugin(t){plugins.unshift(t),t.init(self)}function unregisterPlugin(t){for(var e=plugins.length;e>=0;e--)if(plugins[e]===t){plugins[e].destroy&&plugins[e].destroy(),plugins.splice(e,1);break}}function setSelectionModel(t){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=t,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var t=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),e={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),e}function getHeadersWidth(){for(var t=0,e=0,n=columns.length;e<n;e++){var i=columns[e].width;t+=i}return t+=scrollbarDimensions.width,Math.max(t,viewportW)+1e3}function getCanvasWidth(){for(var t=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,e=0,n=columns.length;n--;)e+=columns[n].width;return options.fullWidthRows?Math.max(e,t):e}function updateCanvasWidth(t){var e=canvasWidth;canvasWidth=getCanvasWidth(),canvasWidth!=e&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),options.createFooterRow&&$footerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width);var n=canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0);$headerRowSpacer.width(n),options.createFooterRow&&$footerRowSpacer.width(n),(canvasWidth!=e||t)&&applyColumnWidths()}function disableSelection(t){t&&t.jquery&&t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);;){var i=2*t;if(n.css("height",i),i>e||n.height()!==i)break;t=i}return n.remove(),t}function bindAncestorScrollEvents(){for(var t=$canvas[0];(t=t.parentNode)!=document.body&&null!=t;)if(t==$viewport[0]||t.scrollWidth!=t.clientWidth||t.scrollHeight!=t.clientHeight){var e=$(t);$boundAncestors=$boundAncestors?$boundAncestors.add(e):e,e.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.unbind("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(t,e,n){if(initialized){var i=getColumnIndex(t);if(null!=i){var o=columns[i],s=$headers.children().eq(i);s&&(void 0!==e&&(columns[i].name=e),void 0!==n&&(columns[i].toolTip=n),trigger(self.onBeforeHeaderCellDestroy,{node:s[0],column:o,grid:self}),s.attr("title",n||"").children().eq(0).html(e),trigger(self.onHeaderCellRendered,{node:s[0],column:o,grid:self}))}}}function getHeaderRow(){return $headerRow[0]}function getFooterRow(){return $footerRow[0]}function getHeaderRowColumn(t){var e=getColumnIndex(t),n=$headerRow.children().eq(e);return n&&n[0]}function getFooterRowColumn(t){var e=getColumnIndex(t),n=$footerRow.children().eq(e);return n&&n[0]}function createColumnHeaders(){function t(){$(this).addClass("ui-state-hover")}function e(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:t,grid:self})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:t,grid:self})}),$headerRow.empty(),options.createFooterRow&&($footerRow.find(".slick-footerrow-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:t})}),$footerRow.empty());for(var n=0;n<columns.length;n++){var i=columns[n],o=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+i.name+"</span>").width(i.width-headerColumnWidthDiff).attr("id",""+uid+i.id).attr("title",i.toolTip||"").data("column",i).addClass(i.headerCssClass||"").appendTo($headers);if((options.enableColumnReorder||i.sortable)&&o.on("mouseenter",t).on("mouseleave",e),i.sortable&&(o.addClass("slick-header-sortable"),o.append("<span class='slick-sort-indicator' />")),trigger(self.onHeaderCellRendered,{node:o[0],column:i,grid:self}),options.showHeaderRow){var s=$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").data("column",i).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:s[0],column:i,grid:self})}if(options.createFooterRow&&options.showFooterRow){var a=$("<div class='ui-state-default slick-footerrow-column l"+n+" r"+n+"'></div>").data("column",i).appendTo($footerRow);trigger(self.onFooterRowCellRendered,{node:a[0],column:i})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(t){if(t.metaKey=t.metaKey||t.ctrlKey,!$(t.target).hasClass("slick-resizable-handle")){var e=$(t.target).closest(".slick-header-column");if(e.length){var n=e.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var i=null,o=0;o<sortColumns.length;o++)if(sortColumns[o].columnId==n.id){i=sortColumns[o],i.sortAsc=!i.sortAsc;break}t.metaKey&&options.multiColumnSort?i&&sortColumns.splice(o,1):((t.shiftKey||t.metaKey)&&options.multiColumnSort||(sortColumns=[]),i?0==sortColumns.length&&sortColumns.push(i):(i={columnId:n.id,sortAsc:n.defaultSortAsc},sortColumns.push(i))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(t){return{sortCol:columns[getColumnIndex(t.columnId)],sortAsc:t.sortAsc}}),grid:self},t):trigger(self.onSort,{multiColumnSort:!1,sortCol:n,sortAsc:i.sortAsc,grid:self},t)}}}})}function setupColumnReorder(){var t=0,e=0,n=document.createElement("div");n.className="interact-placeholder",interact(".slick-header-column").ignoreFrom(".slick-resizable-handle").draggable({inertia:!0,restrict:{restriction:"parent",endOnly:!0,elementRect:{top:0,left:0,bottom:0,right:0}},autoScroll:!0,axis:"x",onstart:function(i){t=0,e=i.target.offsetWidth,$headers.find(".slick-header-column").each(function(t){$(this).data("index",t)}),n.style.height=i.target.offsetHeight+"px",n.style.width=e+"px",$(i.target).after(n).css({position:"absolute",zIndex:1e3,marginLeft:$(i.target).position().left})},onmove:function(e){t+=e.dx,e.target.style.transform="translate3d("+t+"px, -3px, 100px)"},onend:function(i){t=0,e=0,$(i.target).css({position:"relative",zIndex:"",marginLeft:0,transform:"none"}),n.parentNode.removeChild(n);const o=[];$headers.find(".slick-header-column").each(function(t){o.push(columns[$(this).data("index")]),$(this).removeData("index")}),setColumns(o),trigger(self.onColumnsReordered,{grid:self}),setupColumnResize()}}).dropzone({accept:".slick-header-column",ondragenter:function(t){t.target.classList.add("interact-drop-active"),t.relatedTarget.classList.add("interact-can-drop")},ondragleave:function(t){t.target.classList.remove("interact-drop-active"),t.relatedTarget.classList.remove("interact-can-drop")},ondrop:function(e){e.target.classList.remove("interact-drop-active"),e.relatedTarget.classList.remove("interact-can-drop"),$(e.target)[t>0?"after":"before"](e.relatedTarget)}})}function setupColumnResize(){var t,e,n,i;e=$headers.children(),e.find(".slick-resizable-handle").remove(),e.each(function(t,e){columns[t].resizable&&(void 0===n&&(n=t),i=t)}),void 0!==n&&e.each(function(e,o){if(!(e<n||options.forceFitColumns&&e>=i)){t=$(o);const s=$("<div class='slick-resizable-handle' />");if(s.appendTo(o),!t.data("resizable")){const a=columns[e];a.resizable&&(t.data("resizable",!0),interact(o).resizable({preserveAspectRatio:!1,edges:{left:!0,right:!0,bottom:!1,top:!1}}).on("resizestart",function(t){return!!getEditorLock().commitCurrentEdit()&&(a.previousWidth=t.rect.width,void t.target.classList.add("slick-header-column-active"))}).on("resizemove",function(t){var e=t.dx,n=a.width+=e;a.minWidth>0&&a.minWidth>n?n=a.minWidth:a.maxWidth>0&&a.maxWidth<n&&(n=a.maxWidth),a.width=n,options.forceFitColumns&&autosizeColumns(),applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).on("resizeend",function(t){t.target.classList.remove("slick-header-column-active"),invalidateAllRows(),updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{grid:self})}))}}})}function getVBoxDelta(t){var e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],n=0;return $.each(e,function(e,i){n+=parseFloat(t.css(i))||0}),n}function measureCellPaddingAndBorder(){var t,e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=$.fn.jquery.split(".");jQueryNewWidthBehaviour=1==i[0]&&i[1]>=8||i[0]>=2,t=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,"border-box"!=t.css("box-sizing")&&"border-box"!=t.css("-moz-box-sizing")&&"border-box"!=t.css("-webkit-box-sizing")&&($.each(e,function(e,n){headerColumnWidthDiff+=parseFloat(t.css(n))||0}),$.each(n,function(e,n){headerColumnHeightDiff+=parseFloat(t.css(n))||0})),t.remove();var o=$("<div class='slick-row' />").appendTo($canvas);t=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(o),cellWidthDiff=cellHeightDiff=0,"border-box"!=t.css("box-sizing")&&"border-box"!=t.css("-moz-box-sizing")&&"border-box"!=t.css("-webkit-box-sizing")&&($.each(e,function(e,n){cellWidthDiff+=parseFloat(t.css(n))||0}),$.each(n,function(e,n){cellHeightDiff+=parseFloat(t.css(n))||0})),o.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var t=options.rowHeight-cellHeightDiff,e=["."+uid+" .slick-header-column { left: 0; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-footerrow-columns { height:"+options.footerRowHeight+"px; }","."+uid+" .slick-cell { height:"+t+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],n=0;n<columns.length;n++)e.push("."+uid+" .l"+n+" { }"),e.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=e.join(" "):$style[0].appendChild(document.createTextNode(e.join(" ")))}function getColumnCssRules(t){if(!stylesheet){for(var e=document.styleSheets,n=0;n<e.length;n++)if((e[n].ownerNode||e[n].owningElement)==$style[0]){stylesheet=e[n];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];for(var i,o,s=stylesheet.cssRules||stylesheet.rules,n=0;n<s.length;n++){var a=s[n].selectorText;(i=/\.l\d+/.exec(a))?(o=parseInt(i[0].substr(2,i[0].length-2),10),
columnCssRulesL[o]=s[n]):(i=/\.r\d+/.exec(a))&&(o=parseInt(i[0].substr(2,i[0].length-2),10),columnCssRulesR[o]=s[n])}}return{left:columnCssRulesL[t],right:columnCssRulesR[t]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{grid:self});for(var t=plugins.length;t--;)unregisterPlugin(plugins[t]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(t,e,n){return n=n||new Slick.EventData,e=e||{},e.grid=self,t.notify(e,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(t){return columnsById[t]}function autosizeColumns(){var t,e,n,i=[],o=0,s=0,a=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(t=0;t<columns.length;t++)e=columns[t],i.push(e.width),s+=e.width,e.resizable&&(o+=e.width-Math.max(e.minWidth,absoluteColumnMinWidth));for(n=s;s>a&&o;){var r=(s-a)/o;for(t=0;t<columns.length&&s>a;t++){e=columns[t];var l=i[t];if(!(!e.resizable||l<=e.minWidth||l<=absoluteColumnMinWidth)){var c=Math.max(e.minWidth,absoluteColumnMinWidth),d=Math.floor(r*(l-c))||1;d=Math.min(d,l-c),s-=d,o-=d,i[t]-=d}}if(n<=s)break;n=s}for(n=s;s<a;){var u=a/s;for(t=0;t<columns.length&&s<a;t++){e=columns[t];var p,h=i[t];p=!e.resizable||e.maxWidth<=h?0:Math.min(Math.floor(u*h)-h,e.maxWidth-h||1e6)||1,s+=p,i[t]+=s<=a?p:0}if(n>=s)break;n=s}var f=!1;for(t=0;t<columns.length;t++)columns[t].rerenderOnResize&&columns[t].width!=i[t]&&(f=!0),columns[t].width=i[t];applyColumnHeaderWidths(),updateCanvasWidth(!0),f&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized){for(var t,e=0,n=$headers.children("[id]"),i=n.length;e<i;e++)t=$(n[e]),jQueryNewWidthBehaviour?t.outerWidth()!==columns[e].width&&t.outerWidth(columns[e].width):t.width()!==columns[e].width-headerColumnWidthDiff&&t.width(columns[e].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var t,e,n=0,i=0;i<columns.length;i++)t=columns[i].width,e=getColumnCssRules(i),e.left.style.left=n+"px",e.right.style.right=canvasWidth-n-t+"px",n+=columns[i].width}function setSortColumn(t,e){setSortColumns([{columnId:t,sortAsc:e}])}function setSortColumns(t){sortColumns=t;var e=$headers.children();e.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(t,n){null==n.sortAsc&&(n.sortAsc=!0);var i=getColumnIndex(n.columnId);null!=i&&e.eq(i).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(n.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(t,e){selectedRows=[];for(var n={},i=0;i<e.length;i++)for(var o=e[i].fromRow;o<=e[i].toRow;o++){n[o]||(selectedRows.push(o),n[o]={});for(var s=e[i].fromCell;s<=e[i].toCell;s++)canCellBeSelected(o,s)&&(n[o][columns[s].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows(),grid:self},t)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var t=0,e=0,n=columns.length;e<n;e++)columnPosLeft[e]=t,columnPosRight[e]=t+columns[e].width,t+=columns[e].width}function setColumns(t){columns=t,columnsById={};for(var e=0;e<columns.length;e++){var n=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[n.id]=e,n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(t){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==t.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,t),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render())}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(t,e){data=t,invalidateAllRows(),updateRowCount(),e&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow?1:0)}function getDataItem(t){return data.getItem?data.getItem(t):data[t]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(t){options.showTopPanel!=t&&(options.showTopPanel=t,t?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(t){options.showHeaderRow!=t&&(options.showHeaderRow=t,t?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function setFooterRowVisibility(t){options.showFooterRow!=t&&(options.showFooterRow=t,t?$footerRowScroller.slideDown("fast",resizeCanvas):$footerRowScroller.slideUp("fast",resizeCanvas))}function getContainerNode(){return $container.get(0)}function getRowTop(t){return options.rowHeight*t-offset}function getRowFromPosition(t){return Math.floor((t+offset)/options.rowHeight)}function scrollTo(t){t=Math.max(t,0),t=Math.min(t,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var e=offset;page=Math.min(n-1,Math.floor(t/ph)),offset=Math.round(page*cj);var i=t-offset;if(offset!=e){var o=getVisibleRange(i);cleanupRows(o),updateRowPositions()}prevScrollTop!=i&&(vScrollDir=prevScrollTop+e<i+offset?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=i,trigger(self.onViewportChanged,{grid:self}))}function defaultFormatter(t,e,n,i,o){return null==n?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(t,e){var n=data.getItemMetadata&&data.getItemMetadata(t),i=n&&n.columns&&(n.columns[e.id]||n.columns[getColumnIndex(e.id)]);return i&&i.formatter||n&&n.formatter||e.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(e)||options.defaultFormatter}function getEditor(t,e){var n=columns[e],i=data.getItemMetadata&&data.getItemMetadata(t),o=i&&i.columns;return o&&o[n.id]&&void 0!==o[n.id].editor?o[n.id].editor:o&&o[e]&&void 0!==o[e].editor?o[e].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(t,e){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(t,e):t[e.field]}function appendRowHtml(t,e,n,i){var o=getDataItem(e),s=e<i&&!o,a="slick-row"+(s?" loading":"")+(e===activeRow?" active":"")+(e%2==1?" odd":" even");o||(a+=" "+options.addNewRowCssClass);var r=data.getItemMetadata&&data.getItemMetadata(e);r&&r.cssClasses&&(a+=" "+r.cssClasses),t.push("<div class='ui-widget-content "+a+"' style='top:"+getRowTop(e)+"px'>");for(var l,c,d=0,u=columns.length;d<u;d++){if(c=columns[d],l=1,r&&r.columns){var p=r.columns[c.id]||r.columns[d];l=p&&p.colspan||1,"*"===l&&(l=u-d)}if(columnPosRight[Math.min(u-1,d+l-1)]>n.leftPx){if(columnPosLeft[d]>n.rightPx)break;appendCellHtml(t,e,d,l,o)}l>1&&(d+=l-1)}t.push("</div>")}function appendCellHtml(t,e,n,i,o){var s=columns[n],a="slick-cell l"+n+" r"+Math.min(columns.length-1,n+i-1)+(s.cssClass?" "+s.cssClass:"");e===activeRow&&n===activeCell&&(a+=" active");for(var r in cellCssClasses)cellCssClasses[r][e]&&cellCssClasses[r][e][s.id]&&(a+=" "+cellCssClasses[r][e][s.id]);if(t.push("<div class='"+a+"'>"),o){var l=getDataItemValueForColumn(o,s);t.push(getFormatter(e,s)(e,n,l,s,o))}t.push("</div>"),rowsCache[e].cellRenderQueue.push(n),rowsCache[e].cellColSpans[n]=i}function cleanupRows(t){for(var e in rowsCache)(e=parseInt(e,10))!==activeRow&&(e<t.top||e>t.bottom)&&removeRowFromCache(e);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var t in rowsCache)removeRowFromCache(t);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function queuePostProcessedRowForCleanup(t,e,n){postProcessgroupId++;for(var i in e)e.hasOwnProperty(i)&&postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:t.cellNodesByColumnIdx[0|i],columnIdx:0|i,rowIdx:n});postProcessedCleanupQueue.push({actionType:"R",groupId:postProcessgroupId,node:t.rowNode}),$(t.rowNode).detach()}function queuePostProcessedCellForCleanup(t,e,n){postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:t,columnIdx:e,rowIdx:n}),$(t).detach()}function removeRowFromCache(t){var e=rowsCache[t];e&&(rowNodeFromLastMouseWheelEvent===e.rowNode?(e.rowNode.style.display="none",zombieRowNodeFromLastMouseWheelEvent=rowNodeFromLastMouseWheelEvent,zombieRowCacheFromLastMouseWheelEvent=e,zombieRowPostProcessedFromLastMouseWheelEvent=postProcessedRows[t]):options.enableAsyncPostRenderCleanup&&postProcessedRows[t]?queuePostProcessedRowForCleanup(e,postProcessedRows[t],t):$canvas[0].removeChild(e.rowNode),delete rowsCache[t],delete postProcessedRows[t],renderedRows--,counter_rows_removed++)}function invalidateRows(t){var e,n;if(t&&t.length){for(vScrollDir=0,e=0,n=t.length;e<n;e++)currentEditor&&activeRow===t[e]&&makeActiveCellNormal(),rowsCache[t[e]]&&removeRowFromCache(t[e]);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}}function invalidateRow(t){invalidateRows([t])}function updateCell(t,e){var n=getCellNode(t,e);if(n){var i=columns[e],o=getDataItem(t);currentEditor&&activeRow===t&&activeCell===e?currentEditor.loadValue(o):(n.innerHTML=o?getFormatter(t,i)(t,e,getDataItemValueForColumn(o,i),i,o):"",invalidatePostProcessingResults(t))}}function updateRow(t){var e=rowsCache[t];if(e){ensureCellNodesInRowsCache(t);var n=getDataItem(t);for(var i in e.cellNodesByColumnIdx)if(e.cellNodesByColumnIdx.hasOwnProperty(i)){i|=0;var o=columns[i],s=e.cellNodesByColumnIdx[i];t===activeRow&&i===activeCell&&currentEditor?currentEditor.loadValue(n):n?s.innerHTML=getFormatter(t,o)(t,i,getDataItemValueForColumn(n,o),o,n):s.innerHTML=""}invalidatePostProcessingResults(t)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)-(options.createFooterRow&&options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*getDataLengthIncludingAddNew():getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render())}function updateRowCount(){if(initialized){var t=getDataLengthIncludingAddNew(),e=t+(options.leaveSpaceForNewRows?numVisibleRows-1:0),i=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&e*options.rowHeight>viewportH,viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width,makeActiveCellNormal();var o=t-1;for(var s in rowsCache)s>o&&removeRowFromCache(s);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup(),activeCellNode&&activeRow>o&&resetActiveCell();var a=h;th=Math.max(options.rowHeight*e,viewportH-scrollbarDimensions.height),th<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==a&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var r=scrollTop+offset<=th-viewportH;0==th||0==scrollTop?page=offset=0:scrollTo(r?scrollTop+offset:th-viewportH),h!=a&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&i!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(t,e){return null==t&&(t=scrollTop),null==e&&(e=scrollLeft),{top:getRowFromPosition(t),bottom:getRowFromPosition(t+viewportH)+1,leftPx:e,rightPx:e+viewportW}}function getRenderedRange(t,e){var n=getVisibleRange(t,e),i=Math.round(viewportH/options.rowHeight),o=3;return vScrollDir==-1?(n.top-=i,n.bottom+=o):1==vScrollDir?(n.top-=o,n.bottom+=i):(n.top-=o,n.bottom+=o),n.top=Math.max(0,n.top),n.bottom=Math.min(getDataLengthIncludingAddNew()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(t){var e=rowsCache[t];if(e&&e.cellRenderQueue.length)for(var n=e.rowNode.lastChild;e.cellRenderQueue.length;){var i=e.cellRenderQueue.pop();e.cellNodesByColumnIdx[i]=n,n=n.previousSibling}}function cleanUpCells(t,e){var n=0,i=rowsCache[e],o=[];for(var s in i.cellNodesByColumnIdx)if(i.cellNodesByColumnIdx.hasOwnProperty(s)){s|=0;var a=i.cellColSpans[s];(columnPosLeft[s]>t.rightPx||columnPosRight[Math.min(columns.length-1,s+a-1)]<t.leftPx)&&(e==activeRow&&s==activeCell||o.push(s))}var r,l;for(postProcessgroupId++;null!=(r=o.pop());)l=i.cellNodesByColumnIdx[r],options.enableAsyncPostRenderCleanup&&postProcessedRows[e]&&postProcessedRows[e][r]?queuePostProcessedCellForCleanup(l,r,e):i.rowNode.removeChild(l),delete i.cellColSpans[r],delete i.cellNodesByColumnIdx[r],postProcessedRows[e]&&delete postProcessedRows[e][r],n++}function cleanUpAndRenderCells(t){for(var e,n,i,o=[],s=[],a=0,r=t.top,l=t.bottom;r<=l;r++)if(e=rowsCache[r]){ensureCellNodesInRowsCache(r),cleanUpCells(t,r),n=0;var c=data.getItemMetadata&&data.getItemMetadata(r);c=c&&c.columns;for(var d=getDataItem(r),u=0,p=columns.length;u<p&&!(columnPosLeft[u]>t.rightPx);u++)if(null==(i=e.cellColSpans[u])){if(i=1,c){var h=c[columns[u].id]||c[u];i=h&&h.colspan||1,"*"===i&&(i=p-u)}columnPosRight[Math.min(p-1,u+i-1)]>t.leftPx&&(appendCellHtml(o,r,u,i,d),n++),u+=i>1?i-1:0}else u+=i>1?i-1:0;n&&(a+=n,s.push(r))}if(o.length){var f=document.createElement("div");f.innerHTML=o.join("");for(var m,g;null!=(m=s.pop());){e=rowsCache[m];for(var v;null!=(v=e.cellRenderQueue.pop());)g=f.lastChild,e.rowNode.appendChild(g),e.cellNodesByColumnIdx[v]=g}}}function renderRows(t){for(var e=$canvas[0],n=[],i=[],o=!1,s=getDataLength(),a=t.top,r=t.bottom;a<=r;a++)rowsCache[a]||(renderedRows++,i.push(a),rowsCache[a]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,a,t,s),activeCellNode&&activeRow===a&&(o=!0),counter_rows_rendered++);if(i.length){var l=document.createElement("div");l.innerHTML=n.join("");for(var a=0,r=i.length;a<r;a++)rowsCache[i[a]].rowNode=e.appendChild(l.firstChild);o&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function startPostProcessingCleanup(){options.enableAsyncPostRenderCleanup&&(clearTimeout(h_postrenderCleanup),h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay))}function invalidatePostProcessingResults(t){for(var e in postProcessedRows[t])postProcessedRows[t].hasOwnProperty(e)&&(postProcessedRows[t][e]="C");postProcessFromRow=Math.min(postProcessFromRow,t),postProcessToRow=Math.max(postProcessToRow,t),startPostProcessing()}function updateRowPositions(){for(var t in rowsCache)rowsCache[t].rowNode.style.top=getRowTop(t)+"px"}function render(){if(initialized){var t=getVisibleRange(),e=getRenderedRange();cleanupRows(e),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(e),renderRows(e),postProcessFromRow=t.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,t.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}}function handleHeaderRowScroll(){var t=$headerRowScroller[0].scrollLeft;t!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=t)}function handleFooterRowScroll(){var t=$footerRowScroller[0].scrollLeft;t!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=t)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var t=Math.abs(scrollTop-prevScrollTop),e=Math.abs(scrollLeft-prevScrollLeft);if(e&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft,options.createFooterRow&&($footerRowScroller[0].scrollLeft=scrollLeft)),t)if(vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,t<viewportH)scrollTo(scrollTop+offset);else{var i=offset;page=h==viewportH?0:Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),i!=offset&&invalidateAllRows()}(e||t)&&(h_render&&clearTimeout(h_render),(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)&&(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{grid:self}))),trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop,grid:self})}function asyncPostProcessRows(){for(var t=getDataLength();postProcessFromRow<=postProcessToRow;){var e=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,n=rowsCache[e];if(n&&!(e>=t)){postProcessedRows[e]||(postProcessedRows[e]={}),ensureCellNodesInRowsCache(e);for(var i in n.cellNodesByColumnIdx)if(n.cellNodesByColumnIdx.hasOwnProperty(i)){i|=0;var o=columns[i],s=postProcessedRows[e][i];if(o.asyncPostRender&&"R"!==s){var a=n.cellNodesByColumnIdx[i];a&&o.asyncPostRender(a,e,getDataItem(e),o,"C"===s),postProcessedRows[e][i]="R"}}return void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function asyncPostProcessCleanupRows(){if(postProcessedCleanupQueue.length>0){for(var t=postProcessedCleanupQueue[0].groupId;postProcessedCleanupQueue.length>0&&postProcessedCleanupQueue[0].groupId==t;){var e=postProcessedCleanupQueue.shift();if("R"==e.actionType&&$(e.node).remove(),"C"==e.actionType){var n=columns[e.columnIdx];n.asyncPostRenderCleanup&&e.node&&n.asyncPostRenderCleanup(e.node,e.rowIdx,n)}}h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay)}}function updateCellCssStylesOnRenderedRows(t,e){var n,i,o,s;for(var a in rowsCache){if(s=e&&e[a],o=t&&t[a],s)for(i in s)o&&s[i]==o[i]||(n=getCellNode(a,getColumnIndex(i)),n&&$(n).removeClass(s[i]));if(o)for(i in o)s&&s[i]==o[i]||(n=getCellNode(a,getColumnIndex(i)),n&&$(n).addClass(o[i]))}}function addCellCssStyles(t,e){if(cellCssClasses[t])throw"addCellCssStyles: cell CSS hash with key '"+t+"' already exists.";cellCssClasses[t]=e,updateCellCssStylesOnRenderedRows(e,null),trigger(self.onCellCssStylesChanged,{key:t,hash:e,grid:self})}function removeCellCssStyles(t){cellCssClasses[t]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[t]),delete cellCssClasses[t],trigger(self.onCellCssStylesChanged,{key:t,hash:null,grid:self}))}function setCellCssStyles(t,e){var n=cellCssClasses[t];cellCssClasses[t]=e,updateCellCssStylesOnRenderedRows(e,n),trigger(self.onCellCssStylesChanged,{key:t,hash:e,grid:self})}function getCellCssStyles(t){return cellCssClasses[t]}function flashCell(t,e,n){function i(t){t&&setTimeout(function(){o.queue(function(){o.toggleClass(options.cellFlashingCssClass).dequeue(),i(t-1)})},n)}if(n=n||100,rowsCache[t]){var o=$(getCellNode(t,e));i(4)}}function handleMouseWheel(t){var e=$(t.target).closest(".slick-row")[0];e!=rowNodeFromLastMouseWheelEvent&&(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent!=e&&(options.enableAsyncPostRenderCleanup&&zombieRowPostProcessedFromLastMouseWheelEvent?queuePostProcessedRowForCleanup(zombieRowCacheFromLastMouseWheelEvent,zombieRowPostProcessedFromLastMouseWheelEvent):$canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent),zombieRowNodeFromLastMouseWheelEvent=null,zombieRowCacheFromLastMouseWheelEvent=null,zombieRowPostProcessedFromLastMouseWheelEvent=null,options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()),rowNodeFromLastMouseWheelEvent=e)}function handleDragStart(t){var e=$.Event(t.type,t),n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var i=trigger(self.onDragStart,t,e);return!!e.isImmediatePropagationStopped()&&i}function handleDrag(t){var e=$.Event(t.type,t);return trigger(self.onDrag,t,e)}function handleDragEnd(t){trigger(self.onDragEnd,t,$.Event("mousedown"))}function handleKeyDown(t){trigger(self.onKeyDown,{row:activeRow,cell:activeCell,grid:self},t);var e=t.isImmediatePropagationStopped();Slick.keyCode;if(!e)if(t.shiftKey||t.altKey||t.ctrlKey)9!=t.which||!t.shiftKey||t.ctrlKey||t.altKey||(e=navigatePrev());else{if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(t.which)>-1)return;if(27==t.which){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else 34==t.which?(navigatePageDown(),e=!0):33==t.which?(navigatePageUp(),e=!0):37==t.which?e=navigateLeft():39==t.which?e=navigateRight():38==t.which?e=navigateUp():40==t.which?e=navigateDown():9==t.which?e=navigateNext():13==t.which&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),e=!0)}if(e){t.stopPropagation(),t.preventDefault();try{t.originalEvent.keyCode=0}catch(t){}}}function handleClick(t){currentEditor||(t.target!=document.activeElement||$(t.target).hasClass("slick-cell"))&&setFocus();var e=getCellFromEvent(t);!e||null!==currentEditor&&activeRow==e.row&&activeCell==e.cell||(trigger(self.onClick,{row:e.row,cell:e.cell,grid:self},t),t.isImmediatePropagationStopped()||activeCell==e.cell&&activeRow==e.row||!canCellBeActive(e.row,e.cell)||getEditorLock().isActive()&&!getEditorLock().commitCurrentEdit()||(scrollRowIntoView(e.row,!1),setActiveCellInternal(getCellNode(e.row,e.cell))))}function handleContextMenu(t){var e=$(t.target).closest(".slick-cell",$canvas);0!==e.length&&(activeCellNode===e[0]&&null!==currentEditor||trigger(self.onContextMenu,{grid:self},t))}function handleDblClick(t){var e=getCellFromEvent(t);!e||null!==currentEditor&&activeRow==e.row&&activeCell==e.cell||(trigger(self.onDblClick,{row:e.row,cell:e.cell,grid:self},t),t.isImmediatePropagationStopped()||options.editable&&gotoCell(e.row,e.cell,!0))}function handleHeaderMouseEnter(t){trigger(self.onHeaderMouseEnter,{column:$(this).data("column"),grid:self},t)}function handleHeaderMouseLeave(t){trigger(self.onHeaderMouseLeave,{column:$(this).data("column"),grid:self},t)}function handleHeaderContextMenu(t){var e=$(t.target).closest(".slick-header-column",".slick-header-columns"),n=e&&e.data("column");trigger(self.onHeaderContextMenu,{column:n,grid:self},t)}function handleHeaderClick(t){var e=$(t.target).closest(".slick-header-column",".slick-header-columns"),n=e&&e.data("column");n&&trigger(self.onHeaderClick,{column:n,grid:self},t)}function handleMouseEnter(t){trigger(self.onMouseEnter,{grid:self},t)}function handleMouseLeave(t){trigger(self.onMouseLeave,{grid:self},t)}function cellExists(t,e){return!(t<0||t>=getDataLength()||e<0||e>=columns.length)}function getCellFromPoint(t,e){for(var n=getRowFromPosition(e),i=0,o=0,s=0;s<columns.length&&o<t;s++)o+=columns[s].width,i++;return i<0&&(i=0),{row:n,cell:i-1}}function getCellFromNode(t){var e=/l\d+/.exec(t.className);if(!e)throw"getCellFromNode: cannot get cell - "+t.className;return parseInt(e[0].substr(1,e[0].length-1),10)}function getRowFromNode(t){for(var e in rowsCache)if(rowsCache[e].rowNode===t)return 0|e;return null}function getCellFromEvent(t){var e=$(t.target).closest(".slick-cell",$canvas);if(!e.length)return null;var n=getRowFromNode(e[0].parentNode),i=getCellFromNode(e[0]);return null==n||null==i?null:{row:n,cell:i}}function getCellNodeBox(t,e){if(!cellExists(t,e))return null;for(var n=getRowTop(t),i=n+options.rowHeight-1,o=0,s=0;s<e;s++)o+=columns[s].width;var a=o+columns[e].width;return{top:n,left:o,bottom:i,right:a}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){tabbingDirection==-1?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(t,e,n){scrollRowIntoView(t,n);var i=getColspan(t,e),o=columnPosLeft[e],s=columnPosRight[e+(i>1?i-1:0)],a=scrollLeft+viewportW;o<scrollLeft?($viewport.scrollLeft(o),handleScroll(),render()):s>a&&($viewport.scrollLeft(Math.min(o,s-$viewport[0].clientWidth)),handleScroll(),render())}function setActiveCellInternal(t,e){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));var n=activeCellNode!==t;activeCellNode=t,null!=activeCellNode?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),null==e&&(e=activeRow==getDataLength()||options.autoEdit),$(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active"),options.editable&&e&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,n&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}else if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges&&t.removeAllRanges()}}function isCellPotentiallyEditable(t,e){var n=getDataLength();return!(t<n&&!getDataItem(t))&&(!(columns[e].cannotTriggerInsert&&t>=n)&&!!getEditor(t,e))}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor,grid:self}),currentEditor.destroy(),currentEditor=null,activeCellNode){var t=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),t){var e=columns[activeCell],n=getFormatter(activeRow,e);activeCellNode.innerHTML=n(activeRow,activeCell,getDataItemValueForColumn(t,e),e,t,self),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(t){if(activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var e=columns[activeCell],n=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:e,grid:self})===!1)return void setFocus();getEditorLock().activate(editController),$(activeCellNode).addClass("editable");var i=t||getEditor(activeRow,activeCell);t||i.suppressClearOnEdit||(activeCellNode.innerHTML=""),currentEditor=new i({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:e,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),n&&currentEditor.loadValue(n),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(t){var e={top:t.offsetTop,left:t.offsetLeft,bottom:0,right:0,width:$(t).outerWidth(),height:$(t).outerHeight(),visible:!0};e.bottom=e.top+e.height,e.right=e.left+e.width;for(var n=t.offsetParent;(t=t.parentNode)!=document.body&&null!=t;)e.visible&&t.scrollHeight!=t.offsetHeight&&"visible"!=$(t).css("overflowY")&&(e.visible=e.bottom>t.scrollTop&&e.top<t.scrollTop+t.clientHeight),e.visible&&t.scrollWidth!=t.offsetWidth&&"visible"!=$(t).css("overflowX")&&(e.visible=e.right>t.scrollLeft&&e.left<t.scrollLeft+t.clientWidth),e.left-=t.scrollLeft,e.top-=t.scrollTop,t===n&&(e.left+=t.offsetLeft,e.top+=t.offsetTop,n=t.offsetParent),e.bottom=e.top+e.height,e.right=e.left+e.width;return e}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{grid:self}),currentEditor)){var t=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(t.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(t)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell,grid:self}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(t,e){var n=t*options.rowHeight,i=(t+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(t+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(e?n:i),render()):t*options.rowHeight<scrollTop+offset&&(scrollTo(e?i:n),render())}function scrollRowToTop(t){scrollTo(t*options.rowHeight),render()}function scrollPage(t){var e=t*numVisibleRows;if(scrollTo((getRowFromPosition(scrollTop)+e)*options.rowHeight),render(),options.enableCellNavigation&&null!=activeRow){var n=activeRow+e,i=getDataLengthIncludingAddNew();n>=i&&(n=i-1),n<0&&(n=0);for(var o=0,s=null,a=activePosX;o<=activePosX;)canCellBeActive(n,o)&&(s=o),o+=getColspan(n,o);null!==s?(setActiveCellInternal(getCellNode(n,s)),activePosX=a):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function getColspan(t,e){var n=data.getItemMetadata&&data.getItemMetadata(t);if(!n||!n.columns)return 1;var i=n.columns[columns[e].id]||n.columns[e],o=i&&i.colspan;return o="*"===o?columns.length-e:o||1}function findFirstFocusableCell(t){for(var e=0;e<columns.length;){if(canCellBeActive(t,e))return e;e+=getColspan(t,e)}return null}function findLastFocusableCell(t){for(var e=0,n=null;e<columns.length;)canCellBeActive(t,e)&&(n=e),e+=getColspan(t,e);return n}function gotoRight(t,e,n){if(e>=columns.length)return null;do e+=getColspan(t,e);while(e<columns.length&&!canCellBeActive(t,e));return e<columns.length?{row:t,cell:e,posX:e}:null}function gotoLeft(t,e,n){if(e<=0)return null;var i=findFirstFocusableCell(t);if(null===i||i>=e)return null;for(var o,s={row:t,cell:i,posX:i};;){if(o=gotoRight(s.row,s.cell,s.posX),!o)return null;if(o.cell>=e)return s;s=o}}function gotoDown(t,e,n){for(var i,o=getDataLengthIncludingAddNew();;){if(++t>=o)return null;for(i=e=0;e<=n;)i=e,e+=getColspan(t,e);if(canCellBeActive(t,i))return{row:t,cell:i,posX:n}}}function gotoUp(t,e,n){for(var i;;){if(--t<0)return null;for(i=e=0;e<=n;)i=e,e+=getColspan(t,e);if(canCellBeActive(t,i))return{row:t,cell:i,posX:n}}}function gotoNext(t,e,n){if(null==t&&null==e&&(t=e=n=0,canCellBeActive(t,e)))return{row:t,cell:e,posX:e};var i=gotoRight(t,e,n);if(i)return i;for(var o=null,s=getDataLengthIncludingAddNew();++t<s;)if(o=findFirstFocusableCell(t),null!==o)return{row:t,cell:o,posX:o};return null}function gotoPrev(t,e,n){if(null==t&&null==e&&(t=getDataLengthIncludingAddNew()-1,e=n=columns.length-1,canCellBeActive(t,e)))return{row:t,cell:e,posX:e};for(var i,o;!i&&!(i=gotoLeft(t,e,n));){if(--t<0)return null;e=0,o=findLastFocusableCell(t),null!==o&&(i={row:t,cell:o,posX:o})}return i}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down");
}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(t){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&"prev"!=t&&"next"!=t)return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var e={up:-1,down:1,left:-1,right:1,prev:-1,next:1};tabbingDirection=e[t];var n={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},i=n[t],o=i(activeRow,activeCell,activePosX);if(o){var s=o.row==getDataLength();return scrollCellIntoView(o.row,o.cell,!s),setActiveCellInternal(getCellNode(o.row,o.cell)),activePosX=o.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(t,e){return rowsCache[t]?(ensureCellNodesInRowsCache(t),rowsCache[t].cellNodesByColumnIdx[e]):null}function setActiveCell(t,e){initialized&&(t>getDataLength()||t<0||e>=columns.length||e<0||options.enableCellNavigation&&(scrollCellIntoView(t,e,!1),setActiveCellInternal(getCellNode(t,e),!1)))}function canCellBeActive(t,e){if(!options.enableCellNavigation||t>=getDataLengthIncludingAddNew()||t<0||e>=columns.length||e<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(t);if(n&&"boolean"==typeof n.focusable)return n.focusable;var i=n&&n.columns;return i&&i[columns[e].id]&&"boolean"==typeof i[columns[e].id].focusable?i[columns[e].id].focusable:i&&i[e]&&"boolean"==typeof i[e].focusable?i[e].focusable:columns[e].focusable}function canCellBeSelected(t,e){if(t>=getDataLength()||t<0||e>=columns.length||e<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(t);if(n&&"boolean"==typeof n.selectable)return n.selectable;var i=n&&n.columns&&(n.columns[columns[e].id]||n.columns[e]);return i&&"boolean"==typeof i.selectable?i.selectable:columns[e].selectable}function gotoCell(t,e,n){if(initialized&&canCellBeActive(t,e)&&getEditorLock().commitCurrentEdit()){scrollCellIntoView(t,e,!1);var i=getCellNode(t,e);setActiveCellInternal(i,n||t===getDataLength()||options.autoEdit),currentEditor||setFocus()}}function commitCurrentEdit(){var t=getDataItem(activeRow),e=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var i={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(t,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:t,grid:self})},undo:function(){this.editor.applyValue(t,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:t,grid:self})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(t,e,i)):(i.execute(),makeActiveCellNormal())}else{var o={};currentEditor.applyValue(o,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:o,column:e,grid:self})}return!getEditorLock().isActive()}return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:e,grid:self}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(t){for(var e=[],n=columns.length-1,i=0;i<t.length;i++)e.push(new Slick.Range(t[i],0,t[i],n));return e}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(t){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(t))}var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row"},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$footerRow,$footerRowScroller,$footerRowSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,jQueryNewWidthBehaviour=!1,absoluteColumnMinWidth,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,h_postrenderCleanup=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,postProcessedCleanupQueue=[],postProcessgroupId=0,counter_rows_rendered=0,counter_rows_removed=0,rowNodeFromLastMouseWheelEvent,zombieRowNodeFromLastMouseWheelEvent,zombieRowCacheFromLastMouseWheelEvent,zombieRowPostProcessedFromLastMouseWheelEvent,cssShow={position:"absolute",visibility:"hidden",display:"block"},$hiddenParents,oldProps=[];this.debug=function(){var t="";t+="\ncounter_rows_rendered:  "+counter_rows_rendered,t+="\ncounter_rows_removed:  "+counter_rows_removed,t+="\nrenderedRows:  "+renderedRows,t+="\nnumVisibleRows:  "+numVisibleRows,t+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,t+="\nn(umber of pages):  "+n,t+="\n(current) page:  "+page,t+="\npage height (ph):  "+ph,t+="\nvScrollDir:  "+vScrollDir,alert(t)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.2.4",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,navigatePageUp:navigatePageUp,navigatePageDown:navigatePageDown,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,setFooterRowVisibility:setFooterRowVisibility,getFooterRow:getFooterRow,getFooterRowColumn:getFooterRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions,maxSupportedCssHeight}(jQuery),define("slick.grid",["interact","slick.core"],function(){}),function(t){function e(e){function n(){bt=!0}function i(){bt=!1,et()}function o(t){wt=t}function s(t){at=t}function a(t){t=t||0;for(var e,n=t,i=pt.length;n<i;n++){if(e=pt[n][ut],void 0===e)throw"Each data element must implement a unique 'id' property";ft[e]=n}}function r(){for(var t,e=0,n=pt.length;e<n;e++)if(t=pt[e][ut],void 0===t||ft[t]!==e)throw"Each data element must implement a unique 'id' property"}function l(){return pt}function c(t,e){void 0!==e&&(ut=e),pt=Ct=t,ft={},a(),r(),et()}function d(t){void 0!=t.pageSize&&(Rt=t.pageSize,Et=Rt?Math.min(Et,Math.max(0,Math.ceil(Mt/Rt)-1)):0),void 0!=t.pageNum&&(Et=Math.min(t.pageNum,Math.max(0,Math.ceil(Mt/Rt)-1))),Pt.notify(u(),null,ct),et()}function u(){var t=Rt?Math.max(1,Math.ceil(Mt/Rt)):1;return{pageSize:Rt,pageNum:Et,totalRows:Mt,totalPages:t}}function p(t,e){yt=e,st=t,ot=null,e===!1&&pt.reverse(),pt.sort(t),e===!1&&pt.reverse(),ft={},a(),et()}function h(t,e){yt=e,ot=t,st=null;var n=Object.prototype.toString;Object.prototype.toString="function"==typeof t?t:function(){return this[t]},e===!1&&pt.reverse(),pt.sort(),Object.prototype.toString=n,e===!1&&pt.reverse(),ft={},a(),et()}function f(){st?p(st,yt):ot&&h(ot,yt)}function m(t){gt=t,e.inlineFilters&&(rt=X(),lt=J()),et()}function g(){return $t}function v(n){e.groupItemMetadataProvider||(e.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),Tt=[],_t=[],n=n||[],$t=n instanceof Array?n:[n];for(var i=0;i<$t.length;i++){var o=$t[i]=t.extend(!0,{},kt,$t[i]);o.getterIsAFn="function"==typeof o.getter,o.compiledAccumulators=[];for(var s=o.aggregators.length;s--;)o.compiledAccumulators[s]=Y(o.aggregators[s]);_t[i]={}}et()}function b(t,e,n){return null==t?void v([]):void v({getter:t,formatter:e,comparer:n})}function y(t,e){if(!$t.length)throw new Error("At least one grouping must be specified before calling setAggregators().");$t[0].aggregators=t,$t[0].aggregateCollapsed=e,v($t)}function w(t){return pt[t]}function x(t){return ft[t]}function C(){if(!mt){mt={};for(var t=0,e=ht.length;t<e;t++)mt[ht[t][ut]]=t}}function S(t){return C(),mt[t]}function k(t){return pt[ft[t]]}function $(t){var e=[];C();for(var n=0;n<t.length;n++){var i=mt[t[n]];null!=i&&(e[e.length]=i)}return e}function T(t){for(var e=[],n=0;n<t.length;n++)t[n]<ht.length&&(e[e.length]=ht[t[n]][ut]);return e}function _(t,e){if(void 0===ft[t]||t!==e[ut])throw"Invalid or non-matching id";pt[ft[t]]=e,vt||(vt={}),vt[t]=!0,et()}function D(t,e){pt.splice(t,0,e),a(t),et()}function R(t){pt.push(t),a(pt.length-1),et()}function E(t){var e=ft[t];if(void 0===e)throw"Invalid id";delete ft[t],pt.splice(e,1),a(e),et()}function M(){return ht.length}function H(t){return ht[t]}function N(t){var n=ht[t];return void 0===n?null:n.__group?e.groupItemMetadataProvider.getGroupRowMetadata(n):n.__groupTotals?e.groupItemMetadataProvider.getTotalsRowMetadata(n):null}function P(t,e){if(null==t)for(var n=0;n<$t.length;n++)_t[n]={},$t[n].collapsed=e;else _t[t]={},$t[t].collapsed=e;et()}function L(t){P(t,!0)}function A(t){P(t,!1)}function I(t,e,n){_t[t][e]=$t[t].collapsed^n,et()}function j(t){var e=Array.prototype.slice.call(arguments),n=e[0];1==e.length&&n.indexOf(Dt)!=-1?I(n.split(Dt).length-1,n,!0):I(e.length-1,e.join(Dt),!0)}function O(t){var e=Array.prototype.slice.call(arguments),n=e[0];1==e.length&&n.indexOf(Dt)!=-1?I(n.split(Dt).length-1,n,!1):I(e.length-1,e.join(Dt),!1)}function z(){return Tt}function F(t,e){for(var n,i,o,s=[],a=[],r=e?e.level+1:0,l=$t[r],c=0,d=l.predefinedValues.length;c<d;c++)i=l.predefinedValues[c],n=a[i],n||(n=new Slick.Group,n.value=i,n.level=r,n.groupingKey=(e?e.groupingKey+Dt:"")+i,s[s.length]=n,a[i]=n);for(var c=0,d=t.length;c<d;c++)o=t[c],i=l.getterIsAFn?l.getter(o):o[l.getter],n=a[i],n||(n=new Slick.Group,n.value=i,n.level=r,n.groupingKey=(e?e.groupingKey+Dt:"")+i,s[s.length]=n,a[i]=n),n.rows[n.count++]=o;if(r<$t.length-1)for(var c=0;c<s.length;c++)n=s[c],n.groups=F(n.rows,n);return s.sort($t[r].comparer),s}function B(t){for(var e,n=$t[t.level],i=t.level==$t.length,o=new Slick.GroupTotals,s=n.aggregators.length;s--;)e=n.aggregators[s],e.init(),n.compiledAccumulators[s].call(e,!i&&n.aggregateChildGroups?t.groups:t.rows),e.storeResult(o);o.group=t,t.totals=o}function V(t,e){e=e||0;for(var n,i=$t[e],o=t.length;o--;)n=t[o],n.collapsed&&!i.aggregateCollapsed||(n.groups&&V(n.groups,e+1),i.aggregators.length&&(i.aggregateEmpty||n.rows.length||n.groups&&n.groups.length)&&B(n))}function U(t,e){e=e||0;for(var n,i=$t[e],o=i.collapsed,s=_t[e],a=t.length;a--;)n=t[a],n.collapsed=o^s[n.groupingKey],n.title=i.formatter?i.formatter(n):n.value,n.groups&&(U(n.groups,e+1),n.rows=[])}function q(t,e){e=e||0;for(var n,i,o=$t[e],s=[],a=0,r=0,l=t.length;r<l;r++){if(i=t[r],s[a++]=i,!i.collapsed){n=i.groups?q(i.groups,e+1):i.rows;for(var c=0,d=n.length;c<d;c++)s[a++]=n[c]}i.totals&&o.displayTotalsRow&&(!i.collapsed||o.aggregateCollapsed)&&(s[a++]=i.totals)}return s}function W(t){var e=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,n=t.toString().match(e);return{params:n[1].split(","),body:n[2]}}function Y(t){var e=W(t.accumulate),n=new Function("_items","for (var "+e.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+e.params[0]+" = _items[_i]; "+e.body+"}");return n.displayName=n.name="compiledAccumulatorLoop",n}function X(){var t=W(gt),e=t.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,e),n=n.replace(/\$item\$/gi,t.params[0]),n=n.replace(/\$args\$/gi,t.params[1]);var i=new Function("_items,_args",n);return i.displayName=i.name="compiledFilter",i}function J(){var t=W(gt),e=t.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,e),n=n.replace(/\$item\$/gi,t.params[0]),n=n.replace(/\$args\$/gi,t.params[1]);var i=new Function("_items,_args,_cache",n);return i.displayName=i.name="compiledFilterWithCaching",i}function G(t,e){for(var n=[],i=0,o=0,s=t.length;o<s;o++)gt(t[o],e)&&(n[i++]=t[o]);return n}function K(t,e,n){for(var i,o=[],s=0,a=0,r=t.length;a<r;a++)i=t[a],n[a]?o[s++]=i:gt(i,e)&&(o[s++]=i,n[a]=!0);return o}function Q(t){if(gt){var n=e.inlineFilters?rt:G,i=e.inlineFilters?lt:K;wt.isFilterNarrowing?Ct=n(Ct,at):wt.isFilterExpanding?Ct=i(t,at,St):wt.isFilterUnchanged||(Ct=n(t,at))}else Ct=Rt?t:t.concat();var o;return Rt?(Ct.length<Et*Rt&&(Et=Math.floor(Ct.length/Rt)),o=Ct.slice(Rt*Et,Rt*Et+Rt)):o=Ct,{totalRows:Ct.length,rows:o}}function Z(t,e){var n,i,o,s=[],a=0,r=e.length;wt&&wt.ignoreDiffsBefore&&(a=Math.max(0,Math.min(e.length,wt.ignoreDiffsBefore))),wt&&wt.ignoreDiffsAfter&&(r=Math.min(e.length,Math.max(0,wt.ignoreDiffsAfter)));for(var l=a,c=t.length;l<r;l++)l>=c?s[s.length]=l:(n=e[l],i=t[l],($t.length&&(o=n.__nonDataRow||i.__nonDataRow)&&n.__group!==i.__group||n.__group&&!n.equals(i)||o&&(n.__groupTotals||i.__groupTotals)||n[ut]!=i[ut]||vt&&vt[n[ut]])&&(s[s.length]=l));return s}function tt(t){mt=null,wt.isFilterNarrowing==xt.isFilterNarrowing&&wt.isFilterExpanding==xt.isFilterExpanding||(St=[]);var e=Q(t);Mt=e.totalRows;var n=e.rows;Tt=[],$t.length&&(Tt=F(n),Tt.length&&(V(Tt),U(Tt),n=q(Tt)));var i=Z(ht,n);return ht=n,i}function et(){if(!bt){var t=ht.length,e=Mt,n=tt(pt,gt);Rt&&Mt<Et*Rt&&(Et=Math.max(0,Math.ceil(Mt/Rt)-1),n=tt(pt,gt)),vt=null,xt=wt,wt={},e!=Mt&&Pt.notify(u(),null,ct),t!=ht.length&&Ht.notify({previous:t,current:ht.length},null,ct),n.length>0&&Nt.notify({rows:n},null,ct)}}function nt(t,e){function n(){if(s.length>0){i=!0;var n=o.mapIdsToRows(s);e||(s=o.mapRowsToIds(n)),t.setSelectedRows(n),i=!1}}var i,o=this,s=o.mapRowsToIds(t.getSelectedRows());t.onSelectedRowsChanged.subscribe(function(e,n){i||(s=o.mapRowsToIds(t.getSelectedRows()))}),this.onRowsChanged.subscribe(n),this.onRowCountChanged.subscribe(n)}function it(t,e){function n(t){o={};for(var e in t){var n=ht[e][ut];o[n]=t[e]}}function i(){if(o){s=!0,C();var n={};for(var i in o){var a=mt[i];void 0!=a&&(n[a]=o[i])}t.setCellCssStyles(e,n),s=!1}}var o,s;n(t.getCellCssStyles(e)),t.onCellCssStylesChanged.subscribe(function(t,i){s||e==i.key&&i.hash&&n(i.hash)}),this.onRowsChanged.subscribe(i),this.onRowCountChanged.subscribe(i)}var ot,st,at,rt,lt,ct=this,dt={groupItemMetadataProvider:null,inlineFilters:!1},ut="id",pt=[],ht=[],ft={},mt=null,gt=null,vt=null,bt=!1,yt=!0,wt={},xt={},Ct=[],St=[],kt={getter:null,formatter:null,comparer:function(t,e){return t.value-e.value},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0},$t=[],Tt=[],_t=[],Dt=":|:",Rt=0,Et=0,Mt=0,Ht=new Slick.Event,Nt=new Slick.Event,Pt=new Slick.Event;e=t.extend(!0,{},dt,e),t.extend(this,{beginUpdate:n,endUpdate:i,setPagingOptions:d,getPagingInfo:u,getItems:l,setItems:c,setFilter:m,sort:p,fastSort:h,reSort:f,setGrouping:v,getGrouping:g,groupBy:b,setAggregators:y,collapseAllGroups:L,expandAllGroups:A,collapseGroup:j,expandGroup:O,getGroups:z,getIdxById:x,getRowById:S,getItemById:k,getItemByIdx:w,mapRowsToIds:T,mapIdsToRows:$,setRefreshHints:o,setFilterArgs:s,refresh:et,updateItem:_,insertItem:D,addItem:R,deleteItem:E,syncGridSelection:nt,syncGridCellCssStyles:it,getLength:M,getItem:H,getItemMetadata:N,onRowCountChanged:Ht,onRowsChanged:Nt,onPagingInfoChanged:Pt})}function n(t){this.field_=t,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(t){var e=t[this.field_];this.count_++,null!=e&&""!==e&&NaN!==e&&(this.nonNullCount_++,this.sum_+=parseFloat(e))},this.storeResult=function(t){t.avg||(t.avg={}),0!=this.nonNullCount_&&(t.avg[this.field_]=this.sum_/this.nonNullCount_)}}function i(t){this.field_=t,this.init=function(){this.min_=null},this.accumulate=function(t){var e=t[this.field_];null!=e&&""!==e&&NaN!==e&&(null==this.min_||e<this.min_)&&(this.min_=e)},this.storeResult=function(t){t.min||(t.min={}),t.min[this.field_]=this.min_}}function o(t){this.field_=t,this.init=function(){this.max_=null},this.accumulate=function(t){var e=t[this.field_];null!=e&&""!==e&&NaN!==e&&(null==this.max_||e>this.max_)&&(this.max_=e)},this.storeResult=function(t){t.max||(t.max={}),t.max[this.field_]=this.max_}}function s(t){this.field_=t,this.init=function(){this.sum_=null},this.accumulate=function(t){var e=t[this.field_];null!=e&&""!==e&&NaN!==e&&(this.sum_+=parseFloat(e))},this.storeResult=function(t){t.sum||(t.sum={}),t.sum[this.field_]=this.sum_}}t.extend(!0,window,{Slick:{Data:{DataView:e,Aggregators:{Avg:n,Min:i,Max:o,Sum:s}}}})}(jQuery),define("slick.dataview",function(){}),function(t){function e(e){function n(n){v=t.extend(!0,{},x,e),m=n,w.subscribe(m.onActiveCellChanged,o(p)),w.subscribe(m.onKeyDown,o(h)),w.subscribe(m.onClick,o(f))}function i(){w.unsubscribeAll()}function o(t){return function(){g||(g=!0,t.apply(this,arguments),g=!1)}}function s(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n].fromRow;i<=t[n].toRow;i++)e.push(i);return e}function a(t){for(var e=[],n=m.getColumns().length-1,i=0;i<t.length;i++)e.push(new Slick.Range(t[i],0,t[i],n));return e}function r(t,e){var n,i=[];for(n=t;n<=e;n++)i.push(n);for(n=e;n<t;n++)i.push(n);return i}function l(){return s(b)}function c(t){d(a(t))}function d(t){b=t,y.onSelectedRangesChanged.notify(b)}function u(){return b}function p(t,e){v.selectActiveRow&&null!=e.row&&d([new Slick.Range(e.row,0,e.row,m.getColumns().length-1)])}function h(t){var e=m.getActiveCell();if(e&&t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&(38==t.which||40==t.which)){var n=l();n.sort(function(t,e){return t-e}),n.length||(n=[e.row]);var i,o=n[0],s=n[n.length-1];i=40==t.which?e.row<s||o==s?++s:++o:e.row<s?--s:--o,i>=0&&i<m.getDataLength()&&(m.scrollRowIntoView(i),b=a(r(o,s)),d(b)),t.preventDefault(),t.stopPropagation()}}function f(e){var n=m.getCellFromEvent(e);if(!n||!m.canCellBeActive(n.row,n.cell))return!1;var i=s(b),o=t.inArray(n.row,i);if(!(e.ctrlKey||e.shiftKey||e.metaKey))return!1;if(m.getOptions().multiSelect)if(o===-1&&(e.ctrlKey||e.metaKey))i.push(n.row),m.setActiveCell(n.row,n.cell);else if(o!==-1&&(e.ctrlKey||e.metaKey))i=t.grep(i,function(t,e){return t!==n.row}),m.setActiveCell(n.row,n.cell);else if(i.length&&e.shiftKey){var r=i.pop(),l=Math.min(n.row,r),c=Math.max(n.row,r);i=[];for(var u=l;u<=c;u++)u!==r&&i.push(u);i.push(r),m.setActiveCell(n.row,n.cell)}return b=a(i),d(b),e.stopImmediatePropagation(),console.log("setSelectedRanges----------"),!0}var m,g,v,b=[],y=this,w=new Slick.EventHandler,x={selectActiveRow:!0};t.extend(this,{getSelectedRows:l,setSelectedRows:c,getSelectedRanges:u,setSelectedRanges:d,init:n,destroy:i,onSelectedRangesChanged:new Slick.Event})}t.extend(!0,window,{Slick:{RowSelectionModel:e}})}(jQuery),define("slick.rowselectionmodel",function(){}),function(t){function e(e){function n(t){u=t,p.subscribe(u.onSelectedRowsChanged,o).subscribe(u.onClick,a).subscribe(u.onHeaderClick,l).subscribe(u.onKeyDown,s)}function i(){p.unsubscribeAll()}function o(t,e){var n,i,o=u.getSelectedRows(),s={};for(i=0;i<o.length;i++)n=o[i],s[n]=!0,s[n]!==h[n]&&(u.invalidateRow(n),delete h[n]);for(i in h)u.invalidateRow(i);h=s,u.render(),o.length&&o.length==u.getDataLength()?u.updateColumnHeader(m.columnId,"<input type='checkbox' checked='checked'>",m.toolTip):u.updateColumnHeader(m.columnId,"<input type='checkbox'>",m.toolTip)}function s(t,e){32==t.which&&u.getColumns()[e.cell].id===m.columnId&&(u.getEditorLock().isActive()&&!u.getEditorLock().commitCurrentEdit()||r(e.row),t.preventDefault(),t.stopImmediatePropagation())}function a(e,n){if(u.getColumns()[n.cell].id===m.columnId&&(t(e.target).is("label")&&t(e.target).has(":checkbox").length||t(e.target).is(":checkbox"))){if(u.getEditorLock().isActive()&&!u.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();r(n.row),e.stopPropagation(),e.stopImmediatePropagation()}}function r(e){h[e]?u.setSelectedRows(t.grep(u.getSelectedRows(),function(t){return t!=e})):u.setSelectedRows(u.getSelectedRows().concat(e))}function l(e,n){if(n.column.id==m.columnId&&(t(e.target).is("label")&&t(e.target).has(":checkbox").length||t(e.target).is(":checkbox"))){if(u.getEditorLock().isActive()&&!u.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();if(t(e.target).has(":checked").length||t(e.target).is(":checked")){for(var i=[],o=0;o<u.getDataLength();o++)i.push(o);u.setSelectedRows(i)}else u.setSelectedRows([]);e.stopPropagation(),e.stopImmediatePropagation()}}function c(){return{id:m.columnId,name:"<input type='checkbox'>",toolTip:m.toolTip,field:"sel",width:m.width,resizable:!1,sortable:!1,cssClass:m.cssClass,formatter:d}}function d(t,e,n,i,o){return o?h[t]?"<label><input type='checkbox' checked='checked'></label>":"<label><input type='checkbox'></label>":null}var u,p=new Slick.EventHandler,h={},f={columnId:"_checkbox_selector",cssClass:null,toolTip:"Select/Deselect All",width:30},m=t.extend(!0,{},f,e);t.extend(this,{init:n,destroy:i,getColumnDefinition:c})}t.extend(!0,window,{Slick:{CheckboxSelectColumn:e}})}(jQuery),define("slick.checkboxselectcolumn",function(){}),define("view/PagesView",["text!template/pages.html","interact","slick.grid","slick.dataview","slick.rowselectionmodel","slick.checkboxselectcolumn"],function(t,e){function n(){w=[],void 0!=m&&m.destroy()}function i(){n(),a(),l()}function o(){return v&&"/"==v.friendlyURL}function s(t,e){var n=t.entity;n.parent=e,"/"==n.friendlyURL&&(n.expanded=!0),w.push(n),n.hasChildren&&$.each(t.children.list,function(t,e){s(e,n)})}function a(){Heiduc.jsonrpc.pageService.getTree(function(t){null!=t&&(y&&f(t),s(t),r(w))})}function r(t){var e,n=function(t){for(var e=t.parent,n=0;e;)e=e.parent,n++;return n},i=function(t,e,i,o,s){i||(i="[undefined]"),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");var a=20*n(s),r="";return s.hasChildren?s.expanded?r+" <span class='toggle icon collapse' style='margin-left:"+a+"px'></span>&nbsp;"+i:r+" <span class='toggle icon expand' style='margin-left:"+a+"px'></span>&nbsp;"+i:r+"<span class='toggle' style='margin-left:"+a+"px'></span>&nbsp;"+i},o=[{id:"title",name:"Title",field:"title",width:200,cssClass:"cell-title",formatter:i},{id:"friendlyURL",name:"friendlyURL",field:"friendlyURL",minWidth:220},{id:"hasPublishedVersion",name:"hasPublishedVersion",field:"hasPublishedVersion",minWidth:40},{id:"modDate",name:"modDate",field:"modDate",minWidth:160}],s=new Slick.CheckboxSelectColumn({cssClass:"slick-cell-checkboxsel",width:45});o.splice(0,0,s.getColumnDefinition());var a={rowHeight:45,autoEdit:!1,autoHeight:!0,showHeaderRow:!1,enableColumnReorder:!1,enableCellNavigation:!0},r=function(t){if(null!=t.parent)for(var e=t.parent;e;){if(!e.expanded)return!1;e=e.parent}return!0};e=new Slick.Data.DataView,e.beginUpdate(),e.setItems(t),e.setFilter(r),e.endUpdate(),m=new Slick.Grid("#treegrid",e,o,a),m.setSelectionModel(new Slick.RowSelectionModel({selectActiveRow:!0})),m.registerPlugin(s),m.onClick.subscribe(function(t,n){if($(t.target).hasClass("toggle")){var i=e.getItem(n.row);i&&(i.expanded?i.expanded=!1:i.expanded=!0,e.updateItem(i.id,i)),t.stopImmediatePropagation()}}),e.onRowCountChanged.subscribe(function(t,e){m.updateRowCount(),m.render()}),e.onRowsChanged.subscribe(function(t,e){m.invalidateRows(e.rows),m.render()})}function l(){Heiduc.app.user.admin||$("#structuresTab").hide()}function c(t){return""==t.title?messages("title_is_empty"):t.title.indexOf(",")!=-1?messages("pages.coma_not_allowed"):""!=t.url||v&&"/"==v.friendlyURL?t.url.indexOf("/")!=-1?messages("pages.slash_not_allowed"):void 0:messages("pages.url_is_empty")}function d(){var t={id:null==v?"":String(v.id),title:$("#title").val(),url:$("#url").val(),friendlyUrl:o()?"/":g+"/"+$("#url").val()},e=c(t);e?u(e):Heiduc.jsonrpc.pageService.savePage(function(t){"success"==t.result?(Heiduc.info(messages("pages.success_created")),$("#page-dialog").modal("hide"),i()):u(t.message)},Heiduc.javaMap(t))}function u(t){Heiduc.errorMessage("#pageMessages",t)}function p(){b?$("#showTitle").html('<a href="#" onclick="Heiduc.app.pagesView.onShowTitle(false)">'+messages("show_names")+"</a>"):$("#showTitle").html('<a href="#" onclick="Heiduc.app.pagesView.onShowTitle(true)">'+messages("show_titles")+"</a>")}function h(){y?$("#invertOrder").html(messages("restore_order")):$("#invertOrder").html(messages("invert_order"))}function f(t){t.children.list.reverse(),t.hasChildren&&$.each(t.children.list,function(t,e){f(e)})}var m,g=null,v=null,b="names"!=$.cookie("pages.showTitle"),y="true"==$.cookie("pages.invertOrder"),w=[];return Backbone.View.extend({css:["/static/css/jquery.treeview.css","/static/css/pages.css","/static/slickgrid/slick.grid.css","/static/slickgrid/treegrid.css"],el:$("#content"),events:{},initialize:function(){window.interact=e},render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(t,{messages:messages})),Heiduc.initJSONRpc(i),$("#pageForm").submit(function(){return d(),!1}),$("#title").change(this.onTitleChange),h();var e=this;$("#invertOrder").click(function(){e.onInvertOrder(!y)}),$("#pageAdd").click(function(){var t=m.getSelectedRows();if(t.length>1)return Heiduc.error("创建新页面只能选择一个上级目录"),!1;var n="/";1==t.length&&(n=m.getDataItem(t[0]).friendlyURL),e.onPageAdd(n)}),$("#pageEdit").click(function(){var t=m.getSelectedRows();return t.length>1?(Heiduc.error("不支持多个页面同时编辑"),!1):void(1==t.length&&(document.location.href="#page/content/"+m.getDataItem(t[0]).id))}),$("#pageDelete").click(function(){var t=m.getSelectedRows();return t.length>1?(Heiduc.error("不支持多个页面同时删除"),!1):void(1==t.length&&e.onPageRemove(m.getDataItem(t[0]).friendlyURL))}),$("#pageProperty").click(function(){var t=m.getSelectedRows();return t.length>1?(Heiduc.error("不支持多个页面同时编辑"),!1):void(1==t.length&&(document.location.href="#page/"+m.getDataItem(t[0]).id))}),$("#pageTitle").click(function(){var t=m.getSelectedRows();return t.length>1?(Heiduc.error("不支持多个页面同时编辑"),!1):void(1==t.length&&e.onChangeTitle(m.getDataItem(t[0])))}),$("#pagePublish").click(function(){var t=m.getSelectedRows();if(t.length>1)return Heiduc.error("不支持多个页面同时发布"),!1;if(1==t.length){var n=m.getDataItem(t[0]);n.status||e.onPagePublish(n.id)}})},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css),n()},onPageRemove:function(t){"/"!=t&&confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.remove(function(t){Heiduc.showServiceMessages(t),i()},t)},onPageAdd:function(t){$("#ui-dialog-title-page-dialog").text(messages("pages.new_page")),g="/"==t?"":t,$("#page-dialog").modal({show:!0}),$("#parentURL").html(g+"/"),$("#title").val(""),$("#url").val(""),$("#url").removeAttr("disabled"),$("#title").focus(),v=null},onTitleChange:function(){var t=$("#url").val(),e=$("#title").val();""!=t||o()||$("#url").val(Heiduc.urlFromTitle(e))},onInvertOrder:function(t){y=t,h(),y?$.cookie("pages.invertOrder","true",{path:"/",expires:10
}):$.cookie("pages.invertOrder","false",{path:"/",expires:10}),i()},onPagePublish:function(t){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.approve(function(t){Heiduc.showServiceMessages(t),i()},t)},onShowTitle:function(t){b=t,p(),b?$.cookie("pages.showTitle","titles",{path:"/",expires:10}):$.cookie("pages.showTitle","names",{path:"/",expires:10}),i()},onChangeTitle:function(t){v=t,$("#ui-dialog-title-page-dialog").text(messages("pages.change_page")),g="",null!=v.parent&&(g="/"==v.parent.friendlyURL?"":v.parent.friendlyURL),$("#page-dialog").modal({show:!0}),$("#parentURL").html(g+"/"),$("#title").val(v.title),$("#url").val(v.pageFriendlyURL),$("#url").attr("disabled",o()),$("#title").focus()}})}),define("text!template/index.html",[],function(){return'<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/pages.png" />\n\t\t\t        <a href="#pages">\n\t\t\t            <%= messages("index.content_pages") %>\n\t\t\t        </a>\n\t\t\t        <p><%= messages("index.content_pages.description") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n<% if (user.admin) { %>\n<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/templates.png" />\n\t\t\t        <a href="#templates">\n\t\t\t            <%= messages("index.design_templates") %>\n\t\t\t        </a>\n\t\t\t        <p><%= messages("index.design_templates.description") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n<% } %> \n<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/folders.png" />\n\t\t\t        <a href="#folders">\n\t\t\t            <%= messages("index.file_resources_storage") %>\n\t\t\t        </a>\n\t\t\t        <p><%= messages("index.file_resources_storage.description") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n<% if (user.admin) { %>\n<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/config.png" />\n\t\t\t        <a href="#config">\n\t\t\t            <%= messages("index.site_configuration") %>\n\t\t\t        </a>\n\t\t\t        <p><%= messages("index.site_configuration.description") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/plugins.png" />\n\t\t\t        <a href="#plugins"><%= messages("index.plugins") %></a>\n\t\t\t        <p><%= messages("index.plugins.description") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n<% } %> \n'}),define("view/IndexView",["text!template/index.html"],function(t){return console.log("Loading IndexView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(t,{user:Heiduc.app.user,messages:messages}))},remove:function(){this.el.html("")}})}),define("text!template/structures.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-9">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li><a href="#pages"><%= messages("pages") %></a></li>\n\t\t\t\t\t\t\t<li data-toggle="tab" class="active"><a href="#structures"><%= messages("structures") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="home_a" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div id="structures"><img src="/static/images/ajax-loader.gif" /></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t        <div class="form-sep">\n\t\t\t\t\t\t            <input id="addButton" class="btn" type="button" value="<%= messages("add") %>"/>\n\t\t\t\t\t\t            <input id="deleteButton" class="btn" type="button" value="<%= messages("delete") %>"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n'}),define("view/StructuresView",["text!template/structures.html"],function(t){function e(){Heiduc.jsonrpc.structureService.select(function(t){var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(t.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td><a href="#structure/'+n.id+'">'+n.title+"</a></td></tr>"}),$("#structures").html(e+"</table>"),$("#structures tr:even").addClass("even")})}function n(){location.href="#structure"}function i(){var t=new Array;return $("#structures input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.structureService.remove(function(t){Heiduc.showServiceMessages(t),e()},Heiduc.javaList(t)))}return console.log("Loading StructuresView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(t,{messages:messages})),e(),$("#addButton").click(n),$("#deleteButton").click(i)},remove:function(){this.el.html("")}})}),define("text!template/structure.html",[],function(){return'\n\n\n<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("structure") %></a></li>\n\t\t\t\t\t\t    <li><a id="_structureXML" data-toggle="tab" href="#tab-2"><%= messages("structure.as_xml") %></a></li>\n\t\t\t\t\t\t    <li><a data-toggle="tab" href="#tab-3"><%= messages("structure.templates") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-9">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("title") %></label>\n\t\t\t\t\t\t\t\t\t\t\t<input type="text" id="title" class="form-control">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-9">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("fields") %></label>\n\t\t\t\t\t\t\t\t\t\t\t<div id="fields"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-3">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("structure.field_title") %></label>\n\t\t\t\t\t\t\t\t\t\t\t<input type="text" id="fieldTitle" class="form-control">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-3">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("structure.tag_name") %></label>\n\t\t\t\t\t\t\t\t\t\t\t<input type="text" id="fieldName" class="form-control">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-3">\n\t\t\t\t\t\t\t\t\t\t\t<label>Type</label>\n\t\t\t\t\t\t\t\t\t\t\t<select id="fieldType" class="form-control">\n\t\t\t\t\t\t\t\t\t            <option value="TEXT"><%= messages("text") %></option>\n\t\t\t\t\t\t\t\t\t            <option value="TEXTAREA"><%= messages("text_area") %></option>\n\t\t\t\t\t\t\t\t\t            <option value="RESOURCE"><%= messages("resource_link") %></option>\n\t\t\t\t\t\t\t\t\t            <option value="DATE"><%= messages("date") %></option>\n\t\t\t\t\t\t\t\t\t        </select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-3">\n\t\t\t\t\t\t\t\t\t\t\t<label>Action</label>\n\t\t\t\t\t\t\t\t\t\t\t<a id="addField"> <%= messages("add_field") %></a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-sep">\n\t\t\t\t\t\t\t\t\t<input id="saveContinueButton" class="btn" type="button" value="<%= messages("save_continue")%>" />\n\t\t\t\t\t\t\t        <input id="saveButton" class="btn" type="button" value="<%= messages("save")%>" />\n\t\t\t\t\t\t\t        <input id="cancelButton" class="btn" type="button" value="<%= messages("cancel")%>" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-2" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-md-9">\n\t\t\t\t\t\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="autosave"> <%= messages("autosave")%>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-md-9">\n\t\t\t\t\t\t\t\t\t\t<textarea id="xmlContent" rows="20" cols="80"></textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-sep">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-md-9">\n\t\t\t\t\t\t\t\t\t<input id="saveContinueXMLButton" class="btn" type="button" value="<%= messages("save_continue")%>" />\n\t\t\t\t\t\t\t        <input id="saveXMLButton" class="btn" type="button" value="<%= messages("save")%>" />\n\t\t\t\t\t\t\t        <input id="cancelXMLButton" class="btn" type="button" value="<%= messages("cancel")%>" />\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-3" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-md-9">\n\t\t\t\t\t\t\t\t\t\t<div id="templates"><img src="/static/images/ajax-loader.gif" /></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-sep">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-md-9">\n\t\t\t\t\t\t\t\t\t<input id="addTemplateButton" class="btn" type="button" value="<%= messages("add")%>"/>\n        \t\t\t\t\t\t\t<input id="deleteTemplateButton" class="btn" type="button" value="<%= messages("delete")%>"/>\n        \t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n\n\n'}),window.CodeMirror=function(){"use strict";function t(a,c){function d(t){nn.onDragEvent&&nn.onDragEvent(si,T(t))||R(t)}function m(t){return t>=0&&t<_n.size}function g(t){return w(_n,t)}function $(t,e){jn=!0;for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function D(t,e){return t.styles||t.highlight(Sn,t.stateAfter=Je(x(t)),nn.tabSize),t.getContent(nn.tabSize,e,nn.lineWrapping)}function L(t){var e={line:0,ch:0};Ht(e,{line:_n.size-1,ch:g(_n.size-1).text.length},Tt(t),e,e),Nn=!0}function Y(t){var e=[];return _n.iter(0,_n.size,function(t){e.push(t.text)}),e.join(t||"\n")}function Z(t){Math.abs(cn.scrollTop-Bn)>1&&(Bn=wn.scrollTop=cn.scrollTop,ee([]))}function tt(t){nn.fixedGutter&&vn.style.left!=wn.scrollLeft+"px"&&(vn.style.left=wn.scrollLeft+"px"),Math.abs(wn.scrollTop-Bn)>1&&(Bn=wn.scrollTop,cn.scrollTop!=Bn&&(cn.scrollTop=Bn),ee([])),nn.onScroll&&nn.onScroll(si)}function it(t){function e(e){ut&&(wn.draggable=!1),Hn=!1,p(),h(),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(_(e),de(a.line,a.ch,!0),Jt())}function n(t){if("single"==l)return void re(pe(a),t);if(f=pe(f),m=pe(m),"double"==l){var e=ve(t);B(t,f)?re(e.from,m):re(f,e.to)}else"triple"==l&&(B(t,f)?re(m,pe({line:t.line,ch:0})):re(f,pe({line:t.line+1,ch:0})))}function i(t){var e=Ue(t,!0);if(e&&!F(e,u)){kn||Et(),u=e,n(e),Nn=!1;var o=te();(e.line>=o.to||e.line<o.from)&&(d=setTimeout(tn(function(){i(t)}),150))}}function o(t){clearTimeout(d);var e=Ue(t);e&&n(e),_(t),Jt(),Nn=!0,g(),p()}ae(H(t,"shiftKey"));for(var s=E(t);s!=xn;s=s.parentNode)if(s.parentNode==yn&&s!=bn)return;for(var s=E(t);s!=xn;s=s.parentNode)if(s.parentNode==gn)return nn.onGutterClick&&nn.onGutterClick(si,J(gn.childNodes,s)+Yn,t),_(t);var a=Ue(t);switch(M(t)){case 3:return void(at&&qe(t));case 2:return a&&de(a.line,a.ch,!0),setTimeout(Jt,20),void _(t)}if(!a)return void(E(t)==wn&&_(t));kn||Et();var r=+new Date,l="single";if(Mn&&Mn.time>r-400&&F(Mn.pos,a))l="triple",_(t),setTimeout(Jt,20),be(a.line);else if(En&&En.time>r-400&&F(En.pos,a)){l="double",Mn={time:r,pos:a},_(t);var c=ve(a);re(c.from,c.to)}else En={time:r,pos:a};var d,u=a;if(nn.dragDrop&&Ct&&!nn.readOnly&&!F(Fn.from,Fn.to)&&!B(a,Fn.from)&&!B(Fn.to,a)&&"single"==l){ut&&(wn.draggable=!0);var p=N(document,"mouseup",tn(e),!0),h=N(wn,"drop",tn(e),!0);return Hn=!0,void(wn.dragDrop&&wn.dragDrop())}_(t),"single"==l&&de(a.line,a.ch,!0);var f=Fn.from,m=Fn.to,g=N(document,"mousemove",tn(function(t){clearTimeout(d),_(t),rt||M(t)?i(t):o(t)}),!0),p=N(document,"mouseup",tn(o),!0)}function pt(t){for(var e=E(t);e!=xn;e=e.parentNode)if(e.parentNode==gn)return _(t);_(t)}function ht(t){if(!nn.onDragEvent||!nn.onDragEvent(si,T(t))){_(t);var e=Ue(t,!0),n=t.dataTransfer.files;if(e&&!nn.readOnly)if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),s=0,a=function(t,n){var a=new FileReader;a.onload=function(){o[n]=a.result,++s==i&&(e=pe(e),tn(function(){var t=zt(o.join(""),e,e);re(e,t)})())},a.readAsText(t)},r=0;r<i;++r)a(n[r],r);else{if(Hn&&!B(e,Fn.from)&&!B(Fn.to,e))return;try{var o=t.dataTransfer.getData("Text");o&&en(function(){var t=Fn.from,n=Fn.to;re(e,e),Hn&&zt("",t,n),Ft(o),Jt()})}catch(t){}}}}function mt(t){var e=Ut();t.dataTransfer.setData("Text",e),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(U("img"),0,0)}function bt(t,e){if("string"==typeof t&&(t=ot[t],!t))return!1;var n=Rn;try{nn.readOnly&&(Un=!0),e&&(Rn=null),t(si)}catch(t){if(t!=xt)throw t;return!1}finally{Rn=n,Un=!1}return!0}function wt(t){function o(){c=!0}var s=e(nn.keyMap),a=s.auto;clearTimeout(oi),a&&!i(t)&&(oi=setTimeout(function(){e(nn.keyMap)==s&&(nn.keyMap=a.call?a.call(null,si):a)},50));var r=Dt[H(t,"keyCode")],l=!1;if(null==r||t.altGraphKey)return!1;H(t,"altKey")&&(r="Alt-"+r),H(t,yt?"metaKey":"ctrlKey")&&(r="Ctrl-"+r),H(t,yt?"ctrlKey":"metaKey")&&(r="Cmd-"+r);var c=!1;return l=H(t,"shiftKey")?n("Shift-"+r,nn.extraKeys,nn.keyMap,function(t){return bt(t,!0)},o)||n(r,nn.extraKeys,nn.keyMap,function(t){if("string"==typeof t&&/^go[A-Z]/.test(t))return bt(t)},o):n(r,nn.extraKeys,nn.keyMap,bt,o),c&&(l=!1),l&&(_(t),We(),ct&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),l}function St(t,e){var i=n("'"+e+"'",nn.extraKeys,nn.keyMap,function(t){return bt(t,!0)});return i&&(_(t),We()),i}function kt(t){if(kn||Et(),rt&&27==t.keyCode&&(t.returnValue=!1),Zn&&Yt()&&(Zn=!1),!nn.onKeyEvent||!nn.onKeyEvent(si,T(t))){var e=H(t,"keyCode");ae(16==e||H(t,"shiftKey"));var n=wt(t);ft&&(ai=n?e:null,!n&&88==e&&H(t,Q?"metaKey":"ctrlKey")&&Ft(""))}}function $t(t){if(Zn&&Yt(),!nn.onKeyEvent||!nn.onKeyEvent(si,T(t))){var e=H(t,"keyCode"),n=H(t,"charCode");if(ft&&e==ai)return ai=null,void _(t);if(!(ft&&(!t.which||t.which<10)||gt)||!wt(t)){var i=String.fromCharCode(null==n?e:n);nn.electricChars&&Sn.electricChars&&nn.smartIndent&&!nn.readOnly&&Sn.electricChars.indexOf(i)>-1&&setTimeout(tn(function(){we(Fn.to.line,"smart")}),75),St(t,i)||Wt()}}}function Rt(t){nn.onKeyEvent&&nn.onKeyEvent(si,T(t))||16==H(t,"keyCode")&&(Rn=null)}function Et(){"nocursor"!=nn.readOnly&&(kn||(nn.onFocus&&nn.onFocus(si),kn=!0,wn.className.search(/\bCodeMirror-focused\b/)==-1&&(wn.className+=" CodeMirror-focused")),qt(),We())}function Mt(){kn&&(nn.onBlur&&nn.onBlur(si),kn=!1,zn&&tn(function(){zn&&(zn(),zn=null)})(),wn.className=wn.className.replace(" CodeMirror-focused","")),clearInterval(Cn),setTimeout(function(){kn||(Rn=null)},150)}function Ht(t,e,n,i,o){if(!Un){var s=[];if(_n.iter(t.line,e.line+1,function(t){s.push(f(t.text,t.markedSpans))}),ei)for(ei.addChange(t.line,n.length,s);ei.done.length>nn.undoDepth;)ei.done.shift();var a=u(h(s[0]),h(O(s)),t.ch,e.ch,n);At(t,e,a,i,o)}}function Nt(t,e){if(t.length){for(var n=t.pop(),i=[],o=n.length-1;o>=0;o-=1){var s=n[o],a=[],r=s.start+s.added;_n.iter(s.start,r,function(t){a.push(f(t.text,t.markedSpans))}),i.push({start:s.start,added:s.old.length,old:a});var l={line:s.start+s.old.length-1,ch:X(p(O(a)),p(O(s.old)))};At({line:s.start,ch:0},{line:r-1,ch:g(r-1).text.length},s.old,l,l)}Nn=!0,e.push(i)}}function Pt(){Nt(ei.done,ei.undone)}function Lt(){Nt(ei.undone,ei.done)}function At(t,e,n,i,o){function s(t){return t<=Math.min(e.line,e.line+w)?t:t+w}if(!Un){var a=!1,r=Gn.text.length;nn.lineWrapping||_n.iter(t.line,e.line+1,function(t){if(!t.hidden&&t.text.length==r)return a=!0,!0}),(t.line!=e.line||n.length>1)&&(jn=!0);var l=e.line-t.line,c=g(t.line),d=g(e.line),u=O(n);if(0==t.ch&&0==e.ch&&""==p(u)){for(var f=[],m=0,b=n.length-1;m<b;++m)f.push(new v(p(n[m]),h(n[m])));d.update(d.text,h(u)),l&&_n.remove(t.line,l,On),f.length&&_n.insert(t.line,f)}else if(c==d)if(1==n.length)c.update(c.text.slice(0,t.ch)+p(n[0])+c.text.slice(e.ch),h(n[0]));else{for(var f=[],m=1,b=n.length-1;m<b;++m)f.push(new v(p(n[m]),h(n[m])));f.push(new v(p(u)+c.text.slice(e.ch),h(u))),c.update(c.text.slice(0,t.ch)+p(n[0]),h(n[0])),_n.insert(t.line+1,f)}else if(1==n.length)c.update(c.text.slice(0,t.ch)+p(n[0])+d.text.slice(e.ch),h(n[0])),_n.remove(t.line+1,l,On);else{var f=[];c.update(c.text.slice(0,t.ch)+p(n[0]),h(n[0])),d.update(p(u)+d.text.slice(e.ch),h(u));for(var m=1,b=n.length-1;m<b;++m)f.push(new v(p(n[m]),h(n[m])));l>1&&_n.remove(t.line+1,l-1,On),_n.insert(t.line+1,f)}if(nn.lineWrapping){var y=Math.max(5,wn.clientWidth/Fe()-3);_n.iter(t.line,t.line+n.length,function(t){if(!t.hidden){var e=Math.ceil(t.text.length/y)||1;e!=t.height&&$(t,e)}})}else _n.iter(t.line,t.line+n.length,function(t){var e=t.text;!t.hidden&&e.length>r&&(Gn=t,r=e.length,Qn=!0,a=!1)}),a&&(Kn=!0);Dn=Math.min(Dn,t.line),Ke(400);var w=n.length-l-1;if(Ln.push({from:t.line,to:e.line+1,diff:w}),nn.onChange){for(var m=0;m<n.length;++m)"string"!=typeof n[m]&&(n[m]=n[m].text);var x={from:t,to:e,text:n};if(An){for(var C=An;C.next;C=C.next);C.next=x}else An=x}le(pe(i),pe(o),s(Fn.from.line),s(Fn.to.line))}}function It(){var t=_n.height*ze()+2*Be();return.99*t>wn.offsetHeight&&t}function jt(t){var e=It();cn.style.display=e?"block":"none",e?(ln.style.height=yn.style.minHeight=e+"px",cn.style.height=wn.clientHeight+"px",null!=t&&(cn.scrollTop=wn.scrollTop=t,ut&&setTimeout(function(){cn.scrollTop==t&&(cn.scrollTop=t+(t?-1:1),cn.scrollTop=t)},0))):yn.style.minHeight="",bn.style.top=Wn*ze()+"px"}function Ot(){Gn=g(0),Qn=!0;var t=Gn.text.length;_n.iter(1,_n.size,function(e){var n=e.text;!e.hidden&&n.length>t&&(t=n.length,Gn=e)}),Kn=!1}function zt(t,e,n){function i(i){if(B(i,e))return i;if(!B(n,i))return o;var s=i.line+t.length-(n.line-e.line)-1,a=i.ch;return i.line==n.line&&(a+=O(t).length-(n.ch-(n.line==e.line?e.ch:0))),{line:s,ch:a}}e=pe(e),n=n?pe(n):e,t=Tt(t);var o;return Bt(t,e,n,function(t){return o=t,{from:i(Fn.from),to:i(Fn.to)}}),o}function Ft(t,e){Bt(Tt(t),Fn.from,Fn.to,function(t){return"end"==e?{from:t,to:t}:"start"==e?{from:Fn.from,to:Fn.from}:{from:Fn.from,to:t}})}function Bt(t,e,n,i){var o=1==t.length?t[0].length+e.ch:O(t).length,s=i({line:e.line+t.length-1,ch:o});Ht(e,n,t,s.from,s.to)}function Vt(t,e,n){var i=t.line,o=e.line;if(i==o)return g(i).text.slice(t.ch,e.ch);var s=[g(i).text.slice(t.ch)];return _n.iter(i+1,o,function(t){s.push(t.text)}),s.push(g(o).text.slice(0,e.ch)),s.join(n||"\n")}function Ut(t){return Vt(Fn.from,Fn.to,t)}function qt(){Zn||$n.set(nn.pollInterval,function(){Yt(),kn&&qt()})}function Wt(){function t(){var n=Yt();n||e?(Zn=!1,qt()):(e=!0,$n.set(60,t))}var e=!1;Zn=!0,$n.set(20,t)}function Yt(){if(!kn||_t(an)||nn.readOnly)return!1;var t=an.value;if(t==ri)return!1;mi||Qe(),Rn=null;for(var e=0,n=Math.min(ri.length,t.length);e<n&&ri[e]==t[e];)++e;return e<ri.length?Fn.from={line:Fn.from.line,ch:Fn.from.ch-(ri.length-e)}:Vn&&F(Fn.from,Fn.to)&&!qn&&(Fn.to={line:Fn.to.line,ch:Math.min(g(Fn.to.line).text.length,Fn.to.ch+(t.length-e))}),Ft(t.slice(e),"end"),t.length>1e3?an.value=ri="":ri=t,mi||Ze(),qn=!1,!0}function Xt(t){F(Fn.from,Fn.to)?t&&(ri=an.value=""):(ri="",an.value=Ut(),kn&&z(an))}function Jt(){"nocursor"==nn.readOnly||!ct&&document.activeElement==an||an.focus()}function Gt(){var t=Kt();if(Qt(t.x,t.y,t.x,t.yBot),kn){var e=yn.getBoundingClientRect(),n=null;if(t.y+e.top<0?n=!0:t.y+e.top+ze()>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n){var i="none"==pn.style.display;i&&(pn.style.display="",pn.style.left=t.x+"px",pn.style.top=t.y-Wn+"px"),pn.scrollIntoView(n),i&&(pn.style.display="none")}}}function Kt(){var t=Ie(Fn.inverted?Fn.from:Fn.to),e=nn.lineWrapping?Math.min(t.x,mn.offsetWidth):t.x;return{x:e,y:t.y,yBot:t.yBot}}function Qt(t,e,n,i){var o=Zt(t,e,n,i);null!=o.scrollLeft&&(wn.scrollLeft=o.scrollLeft),null!=o.scrollTop&&(cn.scrollTop=wn.scrollTop=o.scrollTop)}function Zt(t,e,n,i){var o=Ve(),s=Be();e+=s,i+=s,t+=o,n+=o;var a=wn.clientHeight,r=cn.scrollTop,l={},c=It()||1/0,d=e<s+10,u=i+s>c-10;e<r?l.scrollTop=d?0:Math.max(0,e):i>r+a&&(l.scrollTop=(u?c:i)-a);var p=wn.clientWidth,h=wn.scrollLeft,f=nn.fixedGutter?vn.clientWidth:0,m=t<f+o+10;return t<h+f||m?(m&&(t=0),l.scrollLeft=Math.max(0,t-10-f)):n>p+h-3&&(l.scrollLeft=n+10-p),l}function te(t){var e=ze(),n=(null!=t?t:cn.scrollTop)-Be(),i=Math.max(0,Math.floor(n/e)),o=Math.ceil((n+wn.clientHeight)/e);return{from:C(_n,i),to:C(_n,o)}}function ee(t,e,n){function i(){var t=dn.firstChild,e=!1;return _n.iter(Yn,Xn,function(n){if(t){if(!n.hidden){var i=Math.round(t.offsetHeight/u)||1;n.height!=i&&($(n,i),jn=e=!0)}t=t.nextSibling}}),e}if(!wn.clientWidth)return void(Yn=Xn=Wn=0);var o=te(n);if(t!==!0&&0==t.length&&o.from>Yn&&o.to<Xn)return void jt(n);var s=Math.max(o.from-100,0),a=Math.min(_n.size,o.to+100);Yn<s&&s-Yn<20&&(s=Yn),Xn>a&&Xn-a<20&&(a=Math.min(_n.size,Xn));for(var r=t===!0?[]:ne([{from:Yn,to:Xn,domStart:0}],t),l=0,c=0;c<r.length;++c){var d=r[c];d.from<s&&(d.domStart+=s-d.from,d.from=s),d.to>a&&(d.to=a),d.from>=d.to?r.splice(c--,1):l+=d.to-d.from}if(l==a-s&&s==Yn&&a==Xn)return void jt(n);r.sort(function(t,e){return t.domStart-e.domStart});var u=ze(),p=vn.style.display;dn.style.display="none",ie(s,a,r),dn.style.display=vn.style.display="";var h=s!=Yn||a!=Xn||Jn!=wn.clientHeight+u;if(h&&(Jn=wn.clientHeight+u),(s!=Yn||a!=Xn&&nn.onViewportChange)&&setTimeout(function(){nn.onViewportChange&&nn.onViewportChange(si,s,a)}),Yn=s,Xn=a,Wn=S(_n,s),Ke(100),dn.childNodes.length!=Xn-Yn)throw new Error("BAD PATCH! "+JSON.stringify(r)+" size="+(Xn-Yn)+" nodes="+dn.childNodes.length);return nn.lineWrapping&&i(),vn.style.display=p,(h||jn)&&oe()&&nn.lineWrapping&&i()&&oe(),jt(n),se(),!e&&nn.onUpdate&&nn.onUpdate(si),!0}function ne(t,e){for(var n=0,i=e.length||0;n<i;++n){for(var o=e[n],s=[],a=o.diff||0,r=0,l=t.length;r<l;++r){var c=t[r];o.to<=c.from&&o.diff?s.push({from:c.from+a,to:c.to+a,domStart:c.domStart}):o.to<=c.from||o.from>=c.to?s.push(c):(o.from>c.from&&s.push({from:c.from,to:o.from,domStart:c.domStart}),o.to<c.to&&s.push({from:o.to+a,to:c.to+a,domStart:c.domStart+(o.to-c.from)}))}t=s}return t}function ie(t,e,n){function i(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}if(n.length){for(var o=0,s=dn.firstChild,a=0;a<n.length;++a){for(var r=n[a];r.domStart>o;)s=i(s),o++;for(var l=0,c=r.to-r.from;l<c;++l)s=s.nextSibling,o++}for(;s;)s=i(s)}else q(dn);var d=n.shift(),s=dn.firstChild,l=t;_n.iter(t,e,function(t){if(d&&d.to==l&&(d=n.shift()),!d||d.from>l){if(t.hidden)var e=U("pre");else{var e=D(t);if(t.className&&(e.className=t.className),t.bgClassName){var i=U("pre"," ",t.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");e=U("div",[i,e],null,"position: relative")}}dn.insertBefore(e,s)}else s=s.nextSibling;++l})}function oe(){if(nn.gutter||nn.lineNumbers){var t=bn.offsetHeight,e=wn.clientHeight;vn.style.height=(t-e<2?e:t)+"px";var n,i=document.createDocumentFragment(),o=Yn;if(_n.iter(Yn,Math.max(Xn,Yn+1),function(t){if(t.hidden)i.appendChild(U("pre"));else{var e=t.gutterMarker,s=nn.lineNumbers?nn.lineNumberFormatter(o+nn.firstLineNumber):null;e&&e.text?s=e.text.replace("%N%",null!=s?s:""):null==s&&(s=" ");var a=i.appendChild(U("pre",null,e&&e.style));a.innerHTML=s;for(var r=1;r<t.height;++r)a.appendChild(U("br")),a.appendChild(document.createTextNode(" "));e||(n=o)}++o}),vn.style.display="none",W(gn,i),null!=n&&nn.lineNumbers){for(var s=gn.childNodes[n-Yn],a=String(_n.size).length,r=I(s.firstChild),l="";r.length+l.length<a;)l+=" ";l&&s.insertBefore(document.createTextNode(l),s.firstChild)}vn.style.display="";var c=Math.abs((parseInt(mn.style.marginLeft)||0)-vn.offsetWidth)>2;return mn.style.marginLeft=vn.offsetWidth+"px",jn=!1,c}}function se(){var t=F(Fn.from,Fn.to),e=Ie(Fn.from,!0),n=t?e:Ie(Fn.to,!0),i=Fn.inverted?e:n,o=ze(),s=A(xn),a=A(dn);if(rn.style.top=Math.max(0,Math.min(wn.offsetHeight,i.y+a.top-s.top))+"px",rn.style.left=Math.max(0,Math.min(wn.offsetWidth,i.x+a.left-s.left))+"px",t||nn.showCursorWhenSelecting?(pn.style.top=i.y+"px",pn.style.left=(nn.lineWrapping?Math.min(i.x,mn.offsetWidth):i.x)+"px",pn.style.display=""):pn.style.display="none",t)un.style.display="none";else{var r=e.y==n.y,l=document.createDocumentFragment(),c=mn.clientWidth||mn.offsetWidth,d=mn.clientHeight||mn.offsetHeight,u=function(t,e,n,i){var o=dt?"width: "+(n?c-n-t:c)+"px":"right: "+(n-1)+"px";l.appendChild(U("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; "+o+"; height: "+i+"px"))};if(Fn.from.ch&&e.y>=0){var p=r?c-n.x:0;u(e.x,e.y,p,o)}var h=Math.max(0,e.y+(Fn.from.ch?o:0)),f=Math.min(n.y,d)-h;f>.2*o&&u(0,h,0,f),r&&Fn.from.ch||!(n.y<d-.5*o)||u(0,n.y,c-n.x,o),W(un,l),un.style.display=""}}function ae(t){Rn=t?Rn||(Fn.inverted?Fn.to:Fn.from):null}function re(t,e){var n=Rn&&pe(Rn);n&&(B(n,t)?t=n:B(e,n)&&(e=n)),le(t,e),Pn=!0}function le(t,e,n,i){if(ti=null,null==n&&(n=Fn.from.line,i=Fn.to.line),!F(Fn.from,t)||!F(Fn.to,e)){if(B(e,t)){var o=e;e=t,t=o}if(t.line!=n){var s=ce(t,n,Fn.from.ch);s?t=s:Pe(t.line,!1)}if(e.line!=i&&(e=ce(e,i,Fn.to.ch)),F(t,e)?Fn.inverted=!1:F(t,Fn.to)?Fn.inverted=!1:F(e,Fn.from)&&(Fn.inverted=!0),nn.autoClearEmptyLines&&F(Fn.from,Fn.to)){var a=Fn.inverted?t:e;if(a.line!=Fn.from.line&&Fn.from.line<_n.size){var r=g(Fn.from.line);/^\s+$/.test(r.text)&&setTimeout(tn(function(){if(r.parent&&/^\s+$/.test(r.text)){var t=x(r);zt("",{line:t,ch:0},{line:t,ch:r.text.length})}},10))}}Fn.from=t,Fn.to=e,In=!0}}function ce(t,e,n){function i(e){for(var i=t.line+e,o=1==e?_n.size:-1;i!=o;){var a=g(i);if(!a.hidden){var r=t.ch;return(s||r>n||r>a.text.length)&&(r=a.text.length),{line:i,ch:r}}i+=e}}var o=g(t.line),s=t.ch==o.text.length&&t.ch!=n;return o.hidden?t.line>=e?i(1)||i(-1):i(-1)||i(1):t}function de(t,e,n){var i=pe({line:t,ch:e||0});(n?re:le)(i,i)}function ue(t){return Math.max(0,Math.min(t,_n.size-1))}function pe(t){if(t.line<0)return{line:0,ch:0};if(t.line>=_n.size)return{line:_n.size-1,ch:g(_n.size-1).text.length};var e=t.ch,n=g(t.line).text.length;return null==e||e>n?{line:t.line,ch:n}:e<0?{line:t.line,ch:0}:t}function he(t,e){function n(){for(var e=s+t,n=t<0?-1:_n.size;e!=n;e+=t){var i=g(e);if(!i.hidden)return s=e,r=i,!0}}function i(e){if(a==(t<0?0:r.text.length)){if(e||!n())return!1;a=t<0?r.text.length:0}else a+=t;return!0}var o=Fn.inverted?Fn.from:Fn.to,s=o.line,a=o.ch,r=g(s);if("char"==e)i();else if("column"==e)i(!0);else if("word"==e)for(var l=!1;!(t<0)||i();){if(G(r.text.charAt(a)))l=!0;else if(l){t<0&&(t=1,i());break}if(t>0&&!i())break}return{line:s,ch:a}}function fe(t,e){var n=t<0?Fn.from:Fn.to;(Rn||F(Fn.from,Fn.to))&&(n=he(t,e)),de(n.line,n.ch,!0)}function me(t,e){F(Fn.from,Fn.to)?t<0?zt("",he(t,e),Fn.to):zt("",Fn.from,he(t,e)):zt("",Fn.from,Fn.to),Pn=!0}function ge(t,e){var n=Ie(Fn.inverted?Fn.from:Fn.to,!0);if(null!=ti&&(n.x=ti),"page"==e)var i=Math.min(wn.clientHeight,window.innerHeight||document.documentElement.clientHeight),o=je(n.x,n.y+i*t);else if("line"==e)var s=ze(),o=je(n.x,n.y+.5*s+t*s);"page"==e&&(cn.scrollTop+=Ie(o,!0).y-n.y),de(o.line,o.ch,!0),ti=n.x}function ve(t){var e=g(t.line).text,n=t.ch,i=t.ch;if(e){t.after===!1||i==e.length?--n:++i;for(var o=e.charAt(n),s=G(o)?G:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&G(t)};n>0&&s(e.charAt(n-1));)--n;for(;i<e.length&&s(e.charAt(i));)++i}return{from:{line:t.line,ch:n},to:{line:t.line,ch:i}}}function be(t){re({line:t,ch:0},pe({line:t+1,ch:0}))}function ye(t){if(F(Fn.from,Fn.to))return we(Fn.from.line,t);for(var e=Fn.to.line-(Fn.to.ch?0:1),n=Fn.from.line;n<=e;++n)we(n,t)}function we(t,e){if(e||(e="add"),"smart"==e)if(Sn.indent)var n=Je(t);else e="prev";var i,o=g(t),s=o.indentation(nn.tabSize),a=o.text.match(/^\s*/)[0];"smart"==e&&(i=Sn.indent(n,o.text.slice(a.length),o.text),i==xt&&(e="prev")),"prev"==e?i=t?g(t-1).indentation(nn.tabSize):0:"add"==e?i=s+nn.indentUnit:"subtract"==e&&(i=s-nn.indentUnit),i=Math.max(0,i);var r="",l=0;if(nn.indentWithTabs)for(var c=Math.floor(i/nn.tabSize);c;--c)l+=nn.tabSize,r+="\t";l<i&&(r+=j(i-l)),r!=a&&zt(r,{line:t,ch:0},{line:t,ch:a.length}),o.stateAfter=null}function xe(){Sn=t.getMode(nn,nn.mode),_n.iter(0,_n.size,function(t){t.stateAfter=null}),Dn=0,Ke(100)}function Ce(){var t=nn.gutter||nn.lineNumbers;vn.style.display=t?"":"none",t?jn=!0:dn.parentNode.style.marginLeft=0}function Se(t,e){if(nn.lineWrapping){xn.className+=" CodeMirror-wrap";var n=wn.clientWidth/Fe()-3;_n.iter(0,_n.size,function(t){if(!t.hidden){var e=Math.ceil(t.text.length/n)||1;1!=e&&$(t,e)}}),mn.style.minWidth=hn.style.left=""}else xn.className=xn.className.replace(" CodeMirror-wrap",""),Ot(),_n.iter(0,_n.size,function(t){1==t.height||t.hidden||$(t,1)});Ln.push({from:0,to:_n.size})}function ke(){wn.className=wn.className.replace(/\s*cm-s-\S+/g,"")+nn.theme.replace(/(^|\s)\s*/g," cm-s-")}function $e(){var t=st[nn.keyMap].style;xn.className=xn.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function Te(t,e){this.lines=[],this.type=t,e&&(this.style=e)}function _e(t,e,n,i){t=pe(t),e=pe(e);var o=new Te("range",n);if(i)for(var s in i)i.hasOwnProperty(s)&&(o[s]=i[s]);var a=t.line;return _n.iter(a,e.line+1,function(n){var i={from:a==t.line?t.ch:null,to:a==e.line?e.ch:null,marker:o};n.markedSpans=(n.markedSpans||[]).concat([i]),o.lines.push(n),++a}),Ln.push({from:t.line,to:e.line+1}),o}function De(t){t=pe(t);var e=new Te("bookmark"),n=g(t.line);ei.addChange(t.line,1,[f(n.text,n.markedSpans)],!0);var i={from:t.ch,to:t.ch,marker:e};return n.markedSpans=(n.markedSpans||[]).concat([i]),e.lines.push(n),e}function Re(t){t=pe(t);var e=[],n=g(t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&e.push(o.marker)}return e}function Ee(t,e,n){return"number"==typeof t&&(t=g(ue(t))),t.gutterMarker={text:e,style:n},jn=!0,t}function Me(t){"number"==typeof t&&(t=g(ue(t))),t.gutterMarker=null,jn=!0}function He(t,e){var n=t,i=t;return"number"==typeof t?i=g(ue(t)):n=x(t),null==n?null:e(i,n)?(Ln.push({from:n,to:n+1}),i):null}function Ne(t,e,n){return He(t,function(t){if(t.className!=e||t.bgClassName!=n)return t.className=e,t.bgClassName=n,!0})}function Pe(t,e){return He(t,function(t,n){if(t.hidden!=e){t.hidden=e,nn.lineWrapping||(e&&t.text.length==Gn.text.length?Kn=!0:!e&&t.text.length>Gn.text.length&&(Gn=t,Kn=!1)),$(t,e?0:1);var i=Fn.from.line,o=Fn.to.line;if(e&&(i==n||o==n)){var s=i==n?ce({line:i,ch:0},i,0):Fn.from,a=o==n?ce({line:o,ch:0},o,0):Fn.to;if(!a)return;le(s,a)}return jn=!0}})}function Le(t){if("number"==typeof t){if(!m(t))return null;var e=t;if(t=g(t),!t)return null}else{var e=x(t);if(null==e)return null}var n=t.gutterMarker;return{line:e,handle:t,text:t.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:t.className,bgClass:t.bgClassName}}function Ae(t,e){
if(0==e)return{top:0,left:0};var n=D(t,e);W(fn,n);var i=n.anchor,o=i.offsetTop,s=i.offsetLeft;if(rt&&0==o&&0==s){var a=U("span","x");i.parentNode.insertBefore(a,i.nextSibling),o=a.offsetTop}return{top:o,left:s}}function Ie(t,e){var n,i=ze(),o=i*(S(_n,t.line)-(e?Wn:0));if(0==t.ch)n=0;else{var s=Ae(g(t.line),t.ch);n=s.left,nn.lineWrapping&&(o+=Math.max(0,s.top))}return{x:n,y:o,yBot:o+i}}function je(t,e){function n(t){var e=Ae(r,t);if(c){var n=Math.round(e.top/i);return p=n!=d,Math.max(0,e.left+(n-d)*wn.clientWidth)}return e.left}var i=ze(),o=Fe(),s=Wn+Math.floor(e/i);if(s<0)return{line:0,ch:0};var a=C(_n,s);if(a>=_n.size)return{line:_n.size-1,ch:g(_n.size-1).text.length};var r=g(a),l=r.text,c=nn.lineWrapping,d=c?s-S(_n,a):0;if(t<=0&&0==d)return{line:a,ch:0};for(var u,p=!1,h=0,f=0,m=l.length,v=Math.min(m,Math.ceil((t+d*wn.clientWidth*.9)/o));;){var b=n(v);if(!(b<=t&&v<m)){u=b,m=v;break}v=Math.min(m,Math.ceil(1.2*v))}if(t>u)return{line:a,ch:m};for(v=Math.floor(.8*m),b=n(v),b<t&&(h=v,f=b);;){if(m-h<=1){var y=t-f<u-t;return{line:a,ch:y?h:m,after:y}}var w=Math.ceil((h+m)/2),x=n(w);x>t?(m=w,u=x,p&&(u+=1e3)):(h=w,f=x)}}function Oe(t){var e=Ie(t,!0),n=A(mn);return{x:n.left+e.x,y:n.top+e.y,yBot:n.top+e.yBot}}function ze(){if(null==di){di=U("pre");for(var t=0;t<49;++t)di.appendChild(document.createTextNode("x")),di.appendChild(U("br"));di.appendChild(document.createTextNode("x"))}var e=dn.clientHeight;return e==ci?li:(ci=e,W(fn,di.cloneNode(!0)),li=fn.firstChild.offsetHeight/50||1,q(fn),li)}function Fe(){if(wn.clientWidth==hi)return ui;hi=wn.clientWidth;var t=U("span","x"),e=U("pre",[t]);return W(fn,e),ui=t.offsetWidth||10}function Be(){return mn.offsetTop}function Ve(){return mn.offsetLeft}function Ue(t,e){var n,i,o=A(wn,!0);try{n=t.clientX,i=t.clientY}catch(t){return null}if(!e&&(n-o.left>wn.clientWidth||i-o.top>wn.clientHeight))return null;var s=A(mn,!0);return je(n-s.left,i-s.top)}function qe(t){function e(){if(rn.style.position="relative",an.style.cssText=o,ct&&(cn.scrollTop=i),qt(),null!=an.selectionStart){clearTimeout(pi);var t=an.value=" "+(F(Fn.from,Fn.to)?"":an.value),e=0;ri=" ",an.selectionStart=1,an.selectionEnd=t.length,pi=setTimeout(function t(){" "==ri&&0==an.selectionStart?tn(ot.selectAll)(si):e++<10?pi=setTimeout(t,500):Xt()},200)}}var n=Ue(t),i=cn.scrollTop;if(n&&!ft){(F(Fn.from,Fn.to)||B(n,Fn.from)||!B(n,Fn.to))&&tn(de)(n.line,n.ch);var o=an.style.cssText;if(rn.style.position="absolute",an.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Jt(),Xt(!0),F(Fn.from,Fn.to)&&(an.value=ri=" "),at){R(t);var s=N(window,"mouseup",function(){s(),setTimeout(e,20)},!0)}else setTimeout(e,50)}}function We(){clearInterval(Cn);var t=!0;pn.style.visibility="",Cn=setInterval(function(){pn.style.visibility=(t=!t)?"":"hidden"},nn.cursorBlinkRate)}function Ye(t){function e(t,e,n){if(t.text)for(var i,o=t.styles,s=a?0:t.text.length-1,l=a?0:o.length-2,c=a?o.length:-2;l!=c;l+=2*r){var d=o[l];if(o[l+1]==p){for(var u=a?0:d.length-1,m=a?d.length:-1;u!=m;u+=r,s+=r)if(s>=e&&s<n&&f.test(i=d.charAt(u))){var g=fi[i];if(">"==g.charAt(1)==a)h.push(i);else{if(h.pop()!=g.charAt(0))return{pos:s,match:!1};if(!h.length)return{pos:s,match:!0}}}}else s+=r*d.length}}var n=Fn.inverted?Fn.from:Fn.to,i=g(n.line),o=n.ch-1,s=o>=0&&fi[i.text.charAt(o)]||fi[i.text.charAt(++o)];if(s){for(var a=(s.charAt(0),">"==s.charAt(1)),r=a?1:-1,l=i.styles,c=o+1,d=0,u=l.length;d<u;d+=2)if((c-=l[d].length)<=0){var p=l[d+1];break}for(var h=[i.text.charAt(o)],f=/[(){}[\]]/,d=n.line,u=a?Math.min(d+100,_n.size):Math.max(-1,d-100);d!=u;d+=r){var i=g(d),m=d==n.line,v=e(i,m&&a?o+1:0,m&&!a?o:i.text.length);if(v)break}v||(v={pos:null,match:!1});var p=v.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",b=_e({line:n.line,ch:o},{line:n.line,ch:o+1},p),y=null!=v.pos&&_e({line:d,ch:v.pos},{line:d,ch:v.pos+1},p),w=tn(function(){b.clear(),y&&y.clear()});t?setTimeout(w,800):zn=w}}function Xe(t){for(var e,n,i=t,o=t-40;i>o;--i){if(0==i)return 0;var s=g(i-1);if(s.stateAfter)return i;var a=s.indentation(nn.tabSize);(null==n||e>a)&&(n=i-1,e=a)}return n}function Je(t){var e=Xe(t),n=e&&g(e-1).stateAfter;return n=n?o(Sn,n):s(Sn),_n.iter(e,t,function(i){i.process(Sn,n,nn.tabSize),i.stateAfter=e==t-1||e%5==0?o(Sn,n):null}),n}function Ge(){if(!(Dn>=Xn)){var t=+new Date+nn.workTime,e=o(Sn,Je(Dn)),n=Dn;_n.iter(Dn,Xn,function(n){if(Dn>=Yn?(n.highlight(Sn,e,nn.tabSize),n.stateAfter=o(Sn,e)):(n.process(Sn,e,nn.tabSize),n.stateAfter=Dn%5==0?o(Sn,e):null),++Dn,+new Date>t)return Ke(nn.workDelay),!0}),Xn>n&&Dn>=Yn&&tn(function(){Ln.push({from:n,to:Dn})})()}}function Ke(t){Dn<Xn&&Tn.set(t,Ge)}function Qe(){Nn=Pn=An=null,Ln=[],In=!1,On=[]}function Ze(){if(Kn&&Ot(),Qn&&!nn.lineWrapping){var t=hn.offsetWidth,e=Ae(Gn,Gn.text.length).left;lt||(hn.style.left=e+"px",mn.style.minWidth=e+t+"px"),Qn=!1}var n,i;if(In){var o=Kt();n=Zt(o.x,o.y,o.x,o.yBot)}(Ln.length||n&&null!=n.scrollTop)&&(i=ee(Ln,!0,n&&n.scrollTop)),i||(In&&se(),jn&&oe()),n&&Gt(),In&&We(),kn&&(Nn===!0||Nn!==!1&&In)&&Xt(Pn),In&&nn.matchBrackets&&setTimeout(tn(function(){zn&&(zn(),zn=null),F(Fn.from,Fn.to)&&Ye(!1)}),20);var s=In,a=On;An&&nn.onChange&&si&&nn.onChange(si,An),s&&nn.onCursorActivity&&nn.onCursorActivity(si);for(var r=0;r<a.length;++r)a[r](si);i&&nn.onUpdate&&nn.onUpdate(si)}function tn(t){return function(){mi++||Qe();try{var e=t.apply(this,arguments)}finally{--mi||Ze()}return e}}function en(t){ei.startCompound();try{return t()}finally{ei.endCompound()}}var nn={},on=t.defaults;for(var sn in on)on.hasOwnProperty(sn)&&(nn[sn]=(c&&c.hasOwnProperty(sn)?c:on)[sn]);var an=U("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");an.setAttribute("wrap","off"),an.setAttribute("autocorrect","off"),an.setAttribute("autocapitalize","off");var rn=U("div",[an],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),ln=U("div",null,"CodeMirror-scrollbar-inner"),cn=U("div",[ln],"CodeMirror-scrollbar"),dn=U("div"),un=U("div",null,null,"position: relative; z-index: -1"),pn=U("pre"," ","CodeMirror-cursor"),hn=U("pre"," ","CodeMirror-cursor","visibility: hidden"),fn=U("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),mn=U("div",[fn,pn,hn,un,dn],null,"position: relative; z-index: 0"),gn=U("div",null,"CodeMirror-gutter-text"),vn=U("div",[gn],"CodeMirror-gutter"),bn=U("div",[vn,U("div",[mn],"CodeMirror-lines")],null,"position: relative"),yn=U("div",[bn],null,"position: relative"),wn=U("div",[yn],"CodeMirror-scroll");wn.setAttribute("tabIndex","-1");var xn=U("div",[rn,cn,wn],"CodeMirror"+(nn.lineWrapping?" CodeMirror-wrap":""));a.appendChild?a.appendChild(xn):a(xn),ke(),$e(),K&&(an.style.width="0px"),ut||(wn.draggable=!0),mn.style.outline="none",null!=nn.tabindex&&(an.tabIndex=nn.tabindex),nn.autofocus&&Jt(),nn.gutter||nn.lineNumbers||(vn.style.display="none"),gt&&(rn.style.height="1px",rn.style.position="absolute"),vt?(cn.style.zIndex=-2,cn.style.visibility="hidden"):lt&&(cn.style.minWidth="18px");var Cn,Sn,kn,$n=new P,Tn=new P,_n=new y([new b([new v("")])]),Dn=0;xe();var Rn,En,Mn,Hn,Nn,Pn,Ln,An,In,jn,On,zn,Fn={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Bn=0,Vn=!1,Un=!1,qn=!1,Wn=0,Yn=0,Xn=0,Jn=0,Gn=g(0),Kn=!1,Qn=!0,Zn=!1,ti=null;tn(function(){L(nn.value||""),Nn=!1})();var ei=new k;N(wn,"mousedown",tn(it)),N(wn,"dblclick",tn(pt)),N(mn,"selectstart",_),at||N(wn,"contextmenu",qe),N(wn,"scroll",tt),N(cn,"scroll",Z),N(cn,"mousedown",function(){kn&&setTimeout(Jt,0)});var ni=N(window,"resize",function(){xn.parentNode?ee(!0):ni()},!0);N(an,"keyup",tn(Rt)),N(an,"input",Wt),N(an,"keydown",tn(kt)),N(an,"keypress",tn($t)),N(an,"focus",Et),N(an,"blur",Mt),nn.dragDrop&&(N(wn,"dragstart",mt),N(wn,"dragenter",d),N(wn,"dragover",d),N(wn,"drop",tn(ht))),N(wn,"paste",function(){Jt(),Wt()}),N(an,"paste",function(){qn=!0,Wt()}),N(an,"cut",tn(function(){nn.readOnly||Ft("")})),gt&&N(yn,"mouseup",function(){document.activeElement==an&&an.blur(),Jt()});var ii;try{ii=document.activeElement==an}catch(t){}ii||nn.autofocus?setTimeout(Et,20):Mt();var oi,si=xn.CodeMirror={getValue:Y,setValue:tn(L),getSelection:Ut,replaceSelection:tn(Ft),focus:function(){window.focus(),Jt(),Et(),Wt()},setOption:function(t,e){var n=nn[t];nn[t]=e,"mode"==t||"indentUnit"==t?xe():"readOnly"==t&&"nocursor"==e?(Mt(),an.blur()):"readOnly"!=t||e?"theme"==t?ke():"lineWrapping"==t&&n!=e?tn(Se)():"tabSize"==t?ee(!0):"keyMap"==t?$e():"tabindex"==t?an.tabIndex=e:"showCursorWhenSelecting"==t&&se():Xt(!0),"lineNumbers"!=t&&"gutter"!=t&&"firstLineNumber"!=t&&"theme"!=t&&"lineNumberFormatter"!=t||(Ce(),ee(!0))},getOption:function(t){return nn[t]},getMode:function(){return Sn},undo:tn(Pt),redo:tn(Lt),indentLine:tn(function(t,e){"string"!=typeof e&&(e=null==e?nn.smartIndent?"smart":"prev":e?"add":"subtract"),m(t)&&we(t,e)}),indentSelection:tn(ye),historySize:function(){return{undo:ei.done.length,redo:ei.undone.length}},clearHistory:function(){ei=new k},setHistory:function(t){ei=new k,ei.done=t.done,ei.undone=t.undone},getHistory:function(){function t(t){for(var e,n=0,i=[];n<t.length;++n){i.push(e=[]);for(var o=0,s=t[n];o<s.length;++o){var a=[],r=s[o];e.push({start:r.start,added:r.added,old:a});for(var l=0;l<r.old.length;++l)a.push(p(r.old[l]))}}return i}return{done:t(ei.done),undone:t(ei.undone)}},matchBrackets:tn(function(){Ye(!0)}),getTokenAt:tn(function(t){return t=pe(t),g(t.line).getTokenAt(Sn,Je(t.line),nn.tabSize,t.ch)}),getStateAfter:function(t){return t=ue(null==t?_n.size-1:t),Je(t+1)},cursorCoords:function(t,e){return null==t&&(t=Fn.inverted),this.charCoords(t?Fn.from:Fn.to,e)},charCoords:function(t,e){return t=pe(t),"local"==e?Ie(t,!1):"div"==e?Ie(t,!0):Oe(t)},coordsChar:function(t){var e=A(mn);return je(t.x-e.left,t.y-e.top)},defaultTextHeight:function(){return ze()},markText:tn(_e),setBookmark:De,findMarksAt:Re,setMarker:tn(Ee),clearMarker:tn(Me),setLineClass:tn(Ne),hideLine:tn(function(t){return Pe(t,!0)}),showLine:tn(function(t){return Pe(t,!1)}),onDeleteLine:function(t,e){if("number"==typeof t){if(!m(t))return null;t=g(t)}return(t.handlers||(t.handlers=[])).push(e),t},lineInfo:Le,getViewport:function(){return{from:Yn,to:Xn}},addWidget:function(t,e,n,i,o){t=Ie(pe(t));var s=t.yBot,a=t.x;if(e.style.position="absolute",yn.appendChild(e),"over"==i)s=t.y;else if("near"==i){var r=Math.max(wn.offsetHeight,_n.height*ze()),l=Math.max(yn.clientWidth,mn.clientWidth)-Ve();t.yBot+e.offsetHeight>r&&t.y>e.offsetHeight&&(s=t.y-e.offsetHeight),a+e.offsetWidth>l&&(a=l-e.offsetWidth)}e.style.top=s+Be()+"px",e.style.left=e.style.right="","right"==o?(a=yn.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(yn.clientWidth-e.offsetWidth)/2),e.style.left=a+Ve()+"px"),n&&Qt(a,s,a+e.offsetWidth,s+e.offsetHeight)},lineCount:function(){return _n.size},clipPos:pe,getCursor:function(t){return null!=t&&"head"!=t||(t=Fn.inverted),"anchor"==t&&(t=!Fn.inverted),"end"==t&&(t=!1),V(t?Fn.from:Fn.to)},somethingSelected:function(){return!F(Fn.from,Fn.to)},setCursor:tn(function(t,e,n){null==e&&"number"==typeof t.line?de(t.line,t.ch,n):de(t,e,n)}),setSelection:tn(function(t,e,n){(n?re:le)(pe(t),pe(e||t))}),getLine:function(t){if(m(t))return g(t).text},getLineHandle:function(t){if(m(t))return g(t)},setLine:tn(function(t,e){m(t)&&zt(e,{line:t,ch:0},{line:t,ch:g(t).text.length})}),removeLine:tn(function(t){m(t)&&zt("",{line:t,ch:0},pe({line:t+1,ch:0}))}),replaceRange:tn(zt),getRange:function(t,e,n){return Vt(pe(t),pe(e),n)},triggerOnKeyDown:tn(kt),execCommand:function(t){return ot[t](si)},moveH:tn(fe),deleteH:tn(me),moveV:tn(ge),toggleOverwrite:function(){Vn?(Vn=!1,pn.className=pn.className.replace(" CodeMirror-overwrite","")):(Vn=!0,pn.className+=" CodeMirror-overwrite")},posFromIndex:function(t){var e,n=0;return _n.iter(0,_n.size,function(i){var o=i.text.length+1;return o>t?(e=t,!0):(t-=o,void++n)}),pe({line:n,ch:e})},indexFromPos:function(t){if(t.line<0||t.ch<0)return 0;var e=t.ch;return _n.iter(0,t.line,function(t){e+=t.text.length+1}),e},scrollTo:function(t,e){null!=t&&(wn.scrollLeft=t),null!=e&&(cn.scrollTop=wn.scrollTop=e),ee([])},getScrollInfo:function(){return{x:wn.scrollLeft,y:cn.scrollTop,height:cn.scrollHeight,width:wn.scrollWidth}},scrollIntoView:function(t){var e=Ie(t?pe(t):Fn.inverted?Fn.from:Fn.to);Qt(e.x,e.y,e.x,e.yBot)},setSize:function(t,e){function n(t){return t=String(t),/^\d+$/.test(t)?t+"px":t}null!=t&&(xn.style.width=n(t)),null!=e&&(wn.style.height=n(e)),si.refresh()},operation:function(t){return tn(t)()},compoundChange:function(t){return en(t)},refresh:function(){ee(!0,null,Bn),cn.scrollHeight>Bn&&(cn.scrollTop=Bn)},getInputField:function(){return an},getWrapperElement:function(){return xn},getScrollerElement:function(){return wn},getGutterElement:function(){return vn}},ai=null,ri="";Te.prototype.clear=tn(function(){for(var t,e,n=0;n<this.lines.length;++n){var i=this.lines[n],o=r(i.markedSpans,this);null!=o.from&&(t=x(i)),null!=o.to&&(e=x(i)),i.markedSpans=l(i.markedSpans,o)}null!=t&&Ln.push({from:t,to:e+1}),this.lines.length=0,this.explicitlyCleared=!0}),Te.prototype.find=function(){for(var t,e,n=0;n<this.lines.length;++n){var i=this.lines[n],o=r(i.markedSpans,this);if(null!=o.from||null!=o.to){var s=x(i);null!=o.from&&(t={line:s,ch:o.from}),null!=o.to&&(e={line:s,ch:o.to})}}return"bookmark"==this.type?t:t&&{from:t,to:e}};var li,ci,di,ui,pi,hi=0,fi={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},mi=0;for(var gi in et)et.propertyIsEnumerable(gi)&&!si.propertyIsEnumerable(gi)&&(si[gi]=et[gi]);for(var vi=0;vi<nt.length;++vi)nt[vi](si);return si}function e(t){return"string"==typeof t?st[t]:t}function n(t,n,i,o,s){function a(n){n=e(n);var i=n[t];if(i===!1)return s&&s(),!0;if(null!=i&&o(i))return!0;if(n.nofallthrough)return s&&s(),!0;var r=n.fallthrough;if(null==r)return!1;if("[object Array]"!=Object.prototype.toString.call(r))return a(r);for(var l=0,c=r.length;l<c;++l)if(a(r[l]))return!0;return!1}return!(!n||!a(n))||a(i)}function i(t){var e=Dt[H(t,"keyCode")];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function o(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var o=e[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function s(t,e,n){return!t.startState||t.startState(e,n)}function a(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8}function r(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function l(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function c(t,e,n){if(t)for(var i,o=0;o<t.length;++o){var s=t[o],a=s.marker,r=null==s.from||(a.inclusiveLeft?s.from<=e:s.from<e);if(r||"bookmark"==a.type&&s.from==e&&s.from!=n){var l=null==s.to||(a.inclusiveRight?s.to>=e:s.to>e);(i||(i=[])).push({from:s.from,to:l?null:s.to,marker:a})}}return i}function d(t,e){if(t)for(var n,i=0;i<t.length;++i){var o=t[i],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||"bookmark"==s.type&&o.from==e){var r=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(n||(n=[])).push({from:r?null:o.from-e,to:null==o.to?null:o.to-e,marker:s})}}return n}function u(t,e,n,i,o){if(!t&&!e)return o;var s=c(t,n),a=d(e,i),l=1==o.length,u=O(o).length+(l?n:0);if(s)for(var p=0;p<s.length;++p){var h=s[p];if(null==h.to){var m=r(a,h.marker);m?l&&(h.to=null==m.to?null:m.to+u):h.to=n}}if(a)for(var p=0;p<a.length;++p){var h=a[p];if(null!=h.to&&(h.to+=u),null==h.from){var m=r(s,h.marker);m||(h.from=u,l&&(s||(s=[])).push(h))}else h.from+=u,l&&(s||(s=[])).push(h)}var g=[f(o[0],s)];if(!l){var v,b=o.length-2;if(b>0&&s)for(var p=0;p<s.length;++p)null==s[p].to&&(v||(v=[])).push({from:null,to:null,marker:s[p].marker});for(var p=0;p<b;++p)g.push(f(o[p+1],v));g.push(f(O(o),a))}return g}function p(t){return"string"==typeof t?t:t.text}function h(t){if("string"==typeof t)return null;for(var e=t.markedSpans,n=null,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?n||(n=e.slice(0,i)):n&&n.push(e[i]);return n?n.length?n:null:e}function f(t,e){return e?{text:t,markedSpans:e}:t}function m(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n){var i=e[n].marker.lines,o=J(i,t);i.splice(o,1)}t.markedSpans=null}}function g(t,e){if(e){for(var n=0;n<e.length;++n){e[n].marker.lines.push(t)}t.markedSpans=e}}function v(t,e){this.text=t,this.height=1,g(this,e)}function b(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;e<n;++e)t[e].parent=this,i+=t[e].height;this.height=i}function y(t){this.children=t;for(var e=0,n=0,i=0,o=t.length;i<o;++i){var s=t[i];e+=s.chunkSize(),n+=s.height,s.parent=this}this.size=e,this.height=n,this.parent=null}function w(t,e){for(;!t.lines;)for(var n=0;;++n){var i=t.children[n],o=i.chunkSize();if(e<o){t=i;break}e-=o}return t.lines[e]}function x(t){if(null==t.parent)return null;for(var e=t.parent,n=J(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var o=0;i.children[o]!=e;++o)n+=i.children[o].chunkSize();return n}function C(t,e){var n=0;t:do{for(var i=0,o=t.children.length;i<o;++i){var s=t.children[i],a=s.height;if(e<a){t=s;continue t}e-=a,n+=s.chunkSize()}return n}while(!t.lines);for(var i=0,o=t.lines.length;i<o;++i){var r=t.lines[i],l=r.height;if(e<l)break;e-=l}return n+i}function S(t,e){var n=0;t:do{for(var i=0,o=t.children.length;i<o;++i){var s=t.children[i],a=s.chunkSize();if(e<a){t=s;continue t}e-=a,n+=s.height}return n}while(!t.lines);for(var i=0;i<e;++i)n+=t.lines[i].height;return n}function k(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function $(){R(this)}function T(t){return t.stop||(t.stop=$),t}function _(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function D(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function R(t){_(t),D(t)}function E(t){return t.target||t.srcElement}function M(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Q&&t.ctrlKey&&1==e&&(e=3),e}function H(t,e){var n=t.override&&t.override.hasOwnProperty(e);return n?t.override[e]:t[e]}function N(t,e,n,i){if("function"==typeof t.addEventListener){if(t.addEventListener(e,n,!1),i)return function(){t.removeEventListener(e,n,!1)}}else{var o=function(t){n(t||window.event)};if(t.attachEvent("on"+e,o),i)return function(){t.detachEvent("on"+e,o)}}}function P(){this.id=null}function L(t,e,n){null==e&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));for(var i=0,o=0;i<e;++i)"\t"==t.charAt(i)?o+=n-o%n:++o;return o}function A(t,e){try{var n=t.getBoundingClientRect();n={top:n.top,left:n.left}}catch(t){n={top:0,left:0}}if(!e)if(null==window.pageYOffset){var i=document.documentElement||document.body.parentNode;null==i.scrollTop&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n}function I(t){return t.textContent||t.innerText||t.nodeValue||""}function j(t){for(;kt.length<=t;)kt.push(O(kt)+" ");return kt[t]}function O(t){return t[t.length-1]}function z(t){K?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function F(t,e){return t.line==e.line&&t.ch==e.ch}function B(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function V(t){return{line:t.line,ch:t.ch}}function U(t,e,n,i){var o=document.createElement(t);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof e)Y(o,e);else if(e)for(var s=0;s<e.length;++s)o.appendChild(e[s]);return o}function q(t){return t.innerHTML="",t}function W(t,e){q(t).appendChild(e)}function Y(t,e){ct?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function X(t,e){if(!e)return 0;if(!t)return e.length;for(var n=t.length,i=e.length;n>=0&&i>=0&&t.charAt(n)==e.charAt(i);--n,--i);return i+1}function J(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;++n)if(t[n]==e)return n;return-1}function G(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||$t.test(t))}t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,showCursorWhenSelecting:!1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(t){return t}};var K=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Q=K||/Mac/.test(navigator.platform),Z=(/Win/.test(navigator.platform),t.modes={}),tt=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var i=2;i<arguments.length;++i)n.dependencies.push(arguments[i])}Z[e]=n},t.defineMIME=function(t,e){tt[t]=e},t.resolveMode=function(e){if("string"==typeof e&&tt.hasOwnProperty(e))e=tt[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),i=Z[n.name];if(!i)return t.getMode(e,"text/plain");var o=i(e,n);if(it.hasOwnProperty(n.name)){var s=it[n.name];for(var a in s)s.hasOwnProperty(a)&&(o.hasOwnProperty(a)&&(o["_"+a]=o[a]),o[a]=s[a])}return o.name=n.name,o},t.listModes=function(){var t=[];for(var e in Z)Z.propertyIsEnumerable(e)&&t.push(e);return t},t.listMIMEs=function(){var t=[];for(var e in tt)tt.propertyIsEnumerable(e)&&t.push({mime:e,mode:tt[e]});return t};var et=t.extensions={};t.defineExtension=function(t,e){et[t]=e};var nt=[];t.defineInitHook=function(t){nt.push(t)};var it=t.modeExtensions={};t.extendMode=function(t,e){var n=it.hasOwnProperty(t)?it[t]:it[t]={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i])};var ot=t.commands={selectAll:function(t){t.setSelection({line:0,ch:0},{line:t.lineCount()-1})},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),i=!F(e,n);i||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,i?n:{line:e.line}):t.replaceRange("",e,{line:e.line+1,ch:0})},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",{line:e,ch:0},{line:e})},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.setCursor(0,0,!0)},goDocEnd:function(t){t.setSelection({line:t.lineCount()-1},null,!0)},goLineStart:function(t){t.setCursor(t.getCursor().line,0,!0)},goLineStartSmart:function(t){var e=t.getCursor(),n=t.getLine(e.line),i=Math.max(0,n.search(/\S/));t.setCursor(e.line,e.ch<=i&&e.ch?0:i,!0)},goLineEnd:function(t){t.setSelection({line:t.getCursor().line},null,!0)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goWordRight:function(t){t.moveH(1,"word")},delCharLeft:function(t){t.deleteH(-1,"char")},delCharRight:function(t){t.deleteH(1,"char")},delWordLeft:function(t){t.deleteH(-1,"word")},delWordRight:function(t){t.deleteH(1,"word")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t","end")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("\t","end")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),{line:e.line,ch:e.ch-1},{line:e.line,ch:e.ch+1})},newlineAndIndent:function(t){t.replaceSelection("\n","end"),t.indentLine(t.getCursor().line)},toggleOverwrite:function(t){t.toggleOverwrite()}},st=t.keyMap={};st.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},st.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},st.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},st.default=Q?st.macDefault:st.pcDefault,st.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.isModifierKey=i,t.fromTextArea=function(e,n){function i(){e.value=l.getValue()}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),null==n.autofocus){var o=document.body;try{o=document.activeElement}catch(t){}n.autofocus=o==e||null!=e.getAttribute("autofocus")&&o==document.body}if(e.form){var s=N(e.form,"submit",i,!0),a=e.form,r=a.submit;e.form.submit=function t(){i(),a.submit=r,a.submit(),a.submit=t}}e.style.display="none";var l=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return l.save=i,l.getTextArea=function(){return e},l.toTextArea=function(){i(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(s(),"function"==typeof e.form.submit&&(e.form.submit=r))},l};var at=/gecko\/\d/i.test(navigator.userAgent),rt=/MSIE \d/.test(navigator.userAgent),lt=/MSIE [1-7]\b/.test(navigator.userAgent),ct=/MSIE [1-8]\b/.test(navigator.userAgent),dt=rt&&5==document.documentMode,ut=/WebKit\//.test(navigator.userAgent),pt=ut&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ht=/Chrome\//.test(navigator.userAgent),ft=/Opera\//.test(navigator.userAgent),mt=/Apple Computer/.test(navigator.vendor),gt=/KHTML\//.test(navigator.userAgent),vt=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent),bt=ft&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);bt&&(bt=Number(bt[1]));var yt=Q&&(pt||ft&&(null==bt||bt<12.11));t.copyState=o,t.startState=s,t.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);e=n.state,t=n.mode}return n||{mode:t,state:e}},a.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));if(n)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return L(this.string,this.start,this.tabSize)},indentation:function(){return L(this.string,null,this.tabSize)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&e!==!1&&(this.pos+=i[0].length),i)}var o=function(t){return n?t.toLowerCase():t};if(o(this.string).indexOf(o(t),this.pos)==this.pos)return e!==!1&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=a;var wt=" ";at||rt&&!lt?wt="​":ft&&(wt=""),v.prototype={update:function(t,e){this.text=t,this.stateAfter=this.styles=null,m(this),g(this,e)},highlight:function(t,e,n){var i=new a(this.text,n),o=this.styles||(this.styles=[]),s=o.length=0;for(""==this.text&&t.blankLine&&t.blankLine(e);!i.eol();){var r=t.token(i,e),l=i.current();if(i.start=i.pos,s&&o[s-1]==r?o[s-2]+=l:l&&(o[s++]=l,o[s++]=r),i.pos>5e3){o[s++]=this.text.slice(i.pos),o[s++]=null;break}}},process:function(t,e,n){var i=new a(this.text,n);for(""==this.text&&t.blankLine&&t.blankLine(e);!i.eol()&&i.pos<=5e3;)t.token(i,e),i.start=i.pos},getTokenAt:function(t,e,n,i){for(var o=this.text,s=new a(o,n);s.pos<i&&!s.eol();){s.start=s.pos;var r=t.token(s,e)}return{start:s.start,end:s.pos,string:s.current(),className:r||null,state:e}},indentation:function(t){return L(this.text,null,t)},getContent:function(t,e,n){function i(e,n,i){if(n){if(s&&rt&&" "==n.charAt(0)&&(n=" "+n.slice(1)),s=!1,r.test(n))for(var o=document.createDocumentFragment(),l=0;;){r.lastIndex=l;var c=r.exec(n),d=c?c.index-l:n.length-l;if(d&&(o.appendChild(document.createTextNode(n.slice(l,l+d))),a+=d),!c)break;if(l+=d+1,"\t"==c[0]){var u=t-a%t;o.appendChild(U("span",j(u),"cm-tab")),a+=u}else{var p=U("span","•","cm-invalidchar");p.title="\\u"+c[0].charCodeAt(0).toString(16),o.appendChild(p),a+=1}}else{a+=n.length;var o=document.createTextNode(n)}i?e.appendChild(U("span",[o],i)):e.appendChild(o)}}function o(t){return t?"cm-"+t.replace(/ +/g," cm-"):null}var s=!0,a=0,r=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,l=U("pre"),c=i;if(null!=e){var d=0,u=l.anchor=U("span");c=function(t,o,s){var a=o.length;if(e>=d&&e<d+a){var r=e-d;if(r&&(i(t,o.slice(0,r),s),n)){var l=o.slice(r-1,r+1);St.test(l)?t.appendChild(U("wbr")):!lt&&/\w\w/.test(l)&&t.appendChild(document.createTextNode("‍"))}t.appendChild(u),i(u,ft?o.slice(r,r+1):o.slice(r),s),ft&&i(t,o.slice(r+1),s),e--,d+=a}else d+=a,i(t,o,s),d==e&&d==m?(Y(u,wt),t.appendChild(u)):d>e+10&&/\s/.test(o)&&(c=function(){})}}var p=this.styles,h=this.text,f=this.markedSpans,m=h.length;if(h||null!=e)if(f&&f.length){f.sort(function(t,e){return t.from-e.from});for(var g,v=0,b=0,y="",w=f[0].from||0,x=[],C=0,S=function(){for(var t;C<f.length&&((t=f[C]).from==v||null==t.from);)"range"==t.marker.type&&x.push(t),++C;w=C<f.length?f[C].from:1/0;for(var e=0;e<x.length;++e){var n=x[e].to;null==n&&(n=1/0),n==v?x.splice(e--,1):w=Math.min(n,w)}};v<m;){w==v&&S();for(var k=Math.min(m,w);;){if(y){for(var $=v+y.length,T=g,_=0;_<x.length;++_){var D=x[_];T=(T?T+" ":"")+D.marker.style,D.marker.endStyle&&D.to===Math.min($,k)&&(T+=" "+D.marker.endStyle),D.marker.startStyle&&D.from===v&&(T+=" "+D.marker.startStyle)}if(c(l,$>k?y.slice(0,k-v):y,T),$>=k){y=y.slice(k-v),v=k;break}v=$}y=p[b++],g=o(p[b++])}}}else for(var b=0,R=0;R<m;b+=2){var E=p[b],g=p[b+1],M=E.length;R+M>m&&(E=E.slice(0,m-R)),R+=M,c(l,E,o(g))}else c(l," ");return l},cleanUp:function(){this.parent=null,m(this)}},b.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e,n){for(var i=t,o=t+e;i<o;++i){var s=this.lines[i];if(this.height-=s.height,s.cleanUp(),s.handlers)for(var a=0;a<s.handlers.length;++a)n.push(s.handlers[a])}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertHeight:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));
for(var i=0,o=e.length;i<o;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},y.prototype={chunkSize:function(){return this.size},remove:function(t,e,n){this.size-=e;for(var i=0;i<this.children.length;++i){var o=this.children[i],s=o.chunkSize();if(t<s){var a=Math.min(e,s-t),r=o.height;if(o.remove(t,a,n),this.height-=r-o.height,s==a&&(this.children.splice(i--,1),o.parent=null),0==(e-=a))break;t=0}else t-=s}if(this.size-e<25){var l=[];this.collapse(l),this.children=[new b(l)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;e<n;++e)this.children[e].collapse(t)},insert:function(t,e){for(var n=0,i=0,o=e.length;i<o;++i)n+=e[i].height;this.insertHeight(t,e,n)},insertHeight:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,o=this.children.length;i<o;++i){var s=this.children[i],a=s.chunkSize();if(t<=a){if(s.insertHeight(t,e,n),s.lines&&s.lines.length>50){for(;s.lines.length>50;){var r=s.lines.splice(s.lines.length-25,25),l=new b(r);s.height-=l.height,this.children.splice(i+1,0,l),l.parent=this}this.maybeSpill()}break}t-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new y(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=J(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var o=new y(t.children);o.parent=t,t.children=[o,n],t=o}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iter:function(t,e,n){this.iterN(t,e-t,n)},iterN:function(t,e,n){for(var i=0,o=this.children.length;i<o;++i){var s=this.children[i],a=s.chunkSize();if(t<a){var r=Math.min(e,a-t);if(s.iterN(t,r,n))return!0;if(0==(e-=r))break;t=0}else t-=a}}},k.prototype={addChange:function(t,e,n){this.undone.length=0;var i=+new Date,o=O(this.done),s=o&&O(o),a=i-this.time;if(o&&!this.closed&&this.compound)o.push({start:t,added:e,old:n});else if(a>400||!s||this.closed||s.start>t+n.length||s.start+s.added<t)this.done.push([{start:t,added:e,old:n}]),this.closed=!1;else{for(var r=Math.max(0,s.start-t),l=Math.max(0,t+n.length-(s.start+s.added)),c=r;c>0;--c)s.old.unshift(n[c-1]);for(var c=l;c>0;--c)s.old.push(n[n.length-c]);r&&(s.start=t),s.added+=e-(n.length-r-l)}this.time=i},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},t.e_stop=R,t.e_preventDefault=_,t.e_stopPropagation=D,t.connect=N,P.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}};var xt=t.Pass={toString:function(){return"CodeMirror.Pass"}},Ct=function(){if(ct)return!1;var t=U("div");return"draggable"in t||"dragDrop"in t}(),St=(function(){var t=U("textarea");return t.value="foo\nbar",t.value.indexOf("\r")>-1?"\r\n":"\n"}(),/^$/);at?St=/$'/:mt?St=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:ht&&(St=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var kt=[""],$t=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,Tt=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var o=t.indexOf("\n",e);o==-1&&(o=t.length);var s=t.slice(e,"\r"==t.charAt(o-1)?o-1:o),a=s.indexOf("\r");a!=-1?(n.push(s.slice(0,a)),e+=a+1):(n.push(s),e=o+1)}return n}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=Tt;var _t=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)};t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Dt={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return t.keyNames=Dt,function(){for(var t=0;t<10;t++)Dt[t+48]=String(t);for(var t=65;t<=90;t++)Dt[t]=String.fromCharCode(t);for(var t=1;t<=12;t++)Dt[t+111]=Dt[t+63235]="F"+t}(),t.version="2.38 +",t}(),define("cm",function(){}),CodeMirror.defineMode("css",function(t){function e(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=!0;return e}function n(t,e){return l=e,t}function i(t,e){var i=t.next();if("@"==i)return t.eatWhile(/[\w\\\-]/),n("def",t.current());if("/"==i&&t.eat("*"))return e.tokenize=o,o(t,e);if("<"==i&&t.eat("!"))return e.tokenize=s,s(t,e);if("="==i)n(null,"compare");else{if(("~"==i||"|"==i)&&t.eat("="))return n(null,"compare");if('"'==i||"'"==i)return e.tokenize=a(i),e.tokenize(t,e);if("#"==i)return t.eatWhile(/[\w\\\-]/),n("atom","hash");if("!"==i)return t.match(/^\s*\w*/),n("keyword","important");if(/\d/.test(i))return t.eatWhile(/[\w.%]/),n("number","unit");if("-"!==i)return/[,+>*\/]/.test(i)?n(null,"select-op"):"."==i&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?n("qualifier",l):":"==i?n("operator",i):/[;{}\[\]\(\)]/.test(i)?n(null,i):"u"==i&&t.match("rl(")?(t.backUp(1),e.tokenize=r,n("property","variable")):(t.eatWhile(/[\w\\\-]/),n("property","variable"));if(/\d/.test(t.peek()))return t.eatWhile(/[\w.%]/),n("number","unit");if(t.match(/^[^-]+-/))return n("meta",l)}}function o(t,e){for(var o,s=!1;null!=(o=t.next());){if(s&&"/"==o){e.tokenize=i;break}s="*"==o}return n("comment","comment")}function s(t,e){for(var o,s=0;null!=(o=t.next());){if(s>=2&&">"==o){e.tokenize=i;break}s="-"==o?s+1:0}return n("comment","comment")}function a(t,e){return function(o,s){for(var a,r=!1;null!=(a=o.next())&&(a!=t||r);)r=!r&&"\\"==a;return r||(e&&o.backUp(1),s.tokenize=i),n("string","string")}}function r(t,e){return t.next(),t.match(/\s*[\"\']/,!1)?e.tokenize=i:e.tokenize=a(")",!0),n(null,"(")}var l,c=t.indentUnit,d=e(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),u=e(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),p=e(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),h=e(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),f=e(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","navy","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small","yellow"]);return{startState:function(t){return{tokenize:i,baseIndent:t||0,stack:[]}},token:function(t,e){if(e.tokenize==i&&t.eatSpace())return null;var n=e.tokenize(t,e),o=e.stack[e.stack.length-1];return"property"==n?"propertyValue"==o?n=f[t.current()]?"string-2":h[t.current()]?"keyword":"variable-2":"rule"==o?p[t.current()]||(n+=" error"):o&&"@media{"!=o?"@media"==o?n=d[t.current()]?"attribute":/^(only|not)$/i.test(t.current())?"keyword":"and"==t.current().toLowerCase()?"error":u[t.current()]?"error":"attribute error":"@mediaType"==o?n=d[t.current()]?"attribute":"and"==t.current().toLowerCase()?"operator":/^(only|not)$/i.test(t.current())?"error":(u[t.current()],"error"):"@mediaType("==o?p[t.current()]||(d[t.current()]?n="error":"and"==t.current().toLowerCase()?n="operator":/^(only|not)$/i.test(t.current())?n="error":n+=" error"):n="error":n="tag":"atom"==n?o&&"@media{"!=o?"propertyValue"==o?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())||(n+=" error"):n="error":n="builtin":"@media"==o&&"{"==l&&(n="error"),"{"==l?"@media"==o||"@mediaType"==o?(e.stack.pop(),e.stack[e.stack.length-1]="@media{"):e.stack.push("rule"):"}"==l?(e.stack.pop(),"propertyValue"==o&&e.stack.pop()):"@media"==l?e.stack.push("@media"):"@media"==o&&/\b(keyword|attribute)\b/.test(n)?e.stack.push("@mediaType"):"@mediaType"==o&&","==t.current()?e.stack.pop():"@mediaType"==o&&"("==l?e.stack.push("@mediaType("):"@mediaType("==o&&")"==l?e.stack.pop():"rule"==o&&":"==l?e.stack.push("propertyValue"):"propertyValue"==o&&";"==l&&e.stack.pop(),n},indent:function(t,e){var n=t.stack.length;return/^\}/.test(e)&&(n-="propertyValue"==t.stack[t.stack.length-1]?2:1),t.baseIndent+n*c},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css"),define("cm-css",["cm"],function(){}),CodeMirror.defineMode("javascript",function(t,e){function n(t,e,n){return e.tokenize=n,n(t,e)}function i(t,e){for(var n,i=!1;null!=(n=t.next());){if(n==e&&!i)return!1;i=!i&&"\\"==n}return i}function o(t,e,n){return j=t,O=n,e}function s(t,e){var s=t.next();if('"'==s||"'"==s)return n(t,e,a(s));if(/[\[\]{}\(\),;\:\.]/.test(s))return o(s);if("0"==s&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),o("number","number");if(/\d/.test(s)||"-"==s&&t.eat(/\d/))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),o("number","number");if("/"==s)return t.eat("*")?n(t,e,r):t.eat("/")?(t.skipToEnd(),o("comment","comment")):"operator"==e.lastType||"keyword c"==e.lastType||/^[\[{}\(,;:]$/.test(e.lastType)?(i(t,"/"),t.eatWhile(/[gimy]/),o("regexp","string-2")):(t.eatWhile(U),o("operator",null,t.current()));if("#"==s)return t.skipToEnd(),o("error","error");if(U.test(s))return t.eatWhile(U),o("operator",null,t.current());t.eatWhile(/[\w\$_]/);var l=t.current(),c=V.propertyIsEnumerable(l)&&V[l];return c&&"."!=e.lastType?o(c.type,c.style,l):o("variable","variable",l)}function a(t){return function(e,n){return i(e,t)||(n.tokenize=s),o("string","string")}}function r(t,e){for(var n,i=!1;n=t.next();){if("/"==n&&i){e.tokenize=s;break}i="*"==n}return o("comment","comment")}function l(t,e,n,i,o,s){this.indented=t,this.column=e,this.type=n,this.prev=o,this.info=s,null!=i&&(this.align=i)}function c(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0}function d(t,e,n,i,o){var s=t.cc;for(W.state=t,W.stream=o,W.marked=null,W.cc=s,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var a=s.length?s.pop():F?w:y;if(a(n,i)){for(;s.length&&s[s.length-1].lex;)s.pop()();return W.marked?W.marked:"variable"==n&&c(t,i)?"variable-2":e}}}function u(){for(var t=arguments.length-1;t>=0;t--)W.cc.push(arguments[t])}function p(){return u.apply(null,arguments),!0}function h(t){function e(e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}var n=W.state;if(n.context){if(W.marked="def",e(n.localVars))return;n.localVars={name:t,next:n.localVars}}else{if(e(n.globalVars))return;n.globalVars={name:t,next:n.globalVars}}}function f(){W.state.context={prev:W.state.context,vars:W.state.localVars},W.state.localVars=Y}function m(){W.state.localVars=W.state.context.vars,W.state.context=W.state.context.prev}function g(t,e){var n=function(){var n=W.state;n.lexical=new l(n.indented,W.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function v(){var t=W.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function b(t){return function(e){return e==t?p():";"==t?u():p(arguments.callee)}}function y(t){return"var"==t?p(g("vardef"),E,b(";"),v):"keyword a"==t?p(g("form"),w,y,v):"keyword b"==t?p(g("form"),y,v):"{"==t?p(g("}"),_,v):";"==t?p():"function"==t?p(A):"for"==t?p(g("form"),b("("),g(")"),H,b(")"),v,y,v):"variable"==t?p(g("stat"),S):"switch"==t?p(g("form"),w,g("}","switch"),b("{"),_,v,v):"case"==t?p(w,b(":")):"default"==t?p(b(":")):"catch"==t?p(g("form"),f,b("("),I,b(")"),y,v,m):u(g("stat"),w,b(";"),v)}function w(t){return q.hasOwnProperty(t)?p(C):"function"==t?p(A):"keyword c"==t?p(x):"("==t?p(g(")"),x,b(")"),v,C):"operator"==t?p(w):"["==t?p(g("]"),T(w,"]"),v,C):"{"==t?p(g("}"),T($,"}"),v,C):p()}function x(t){return t.match(/[;\}\)\],]/)?u():u(w)}function C(t,e){if("operator"==t&&/\+\+|--/.test(e))return p(C);if("operator"==t&&"?"==e)return p(w,b(":"),w);if(";"!=t)return"("==t?p(g(")"),T(w,")"),v,C):"."==t?p(k,C):"["==t?p(g("]"),w,b("]"),v,C):void 0}function S(t){return":"==t?p(v,y):u(C,b(";"),v)}function k(t){if("variable"==t)return W.marked="property",p()}function $(t){if("variable"==t&&(W.marked="property"),q.hasOwnProperty(t))return p(b(":"),w)}function T(t,e){function n(i){return","==i?p(t,n):i==e?p():p(b(e))}return function(i){return i==e?p():u(t,n)}}function _(t){return"}"==t?p():u(y,_)}function D(t){return":"==t?p(R):u()}function R(t){return"variable"==t?(W.marked="variable-3",p()):u()}function E(t,e){return"variable"==t?(h(e),B?p(D,M):p(M)):u()}function M(t,e){return"="==e?p(w,M):","==t?p(E):void 0}function H(t){return"var"==t?p(E,b(";"),P):p(";"==t?P:"variable"==t?N:P)}function N(t,e){return"in"==e?p(w):p(C,P)}function P(t,e){return";"==t?p(L):"in"==e?p(w):p(w,b(";"),L)}function L(t){")"!=t&&p(w)}function A(t,e){return"variable"==t?(h(e),p(A)):"("==t?p(g(")"),f,T(I,")"),v,y,m):void 0}function I(t,e){if("variable"==t)return h(e),B?p(D):p()}var j,O,z=t.indentUnit,F=e.json,B=e.typescript,V=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),i=t("keyword c"),o=t("operator"),s={type:"atom",style:"atom"},a={if:e,while:e,with:e,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:i,delete:i,throw:i,var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s};if(B){var r={type:"variable",style:"variable-3"},l={interface:t("interface"),class:t("class"),extends:t("extends"),constructor:t("constructor"),public:t("public"),private:t("private"),protected:t("protected"),static:t("static"),super:t("super"),string:r,number:r,bool:r,any:r};for(var c in l)a[c]=l[c]}return a}(),U=/[+\-*&%=<>!?|]/,q={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},W={state:null,column:null,marked:null,cc:null},Y={name:"this",next:{name:"arguments"}};return v.lex=!0,{startState:function(t){return{tokenize:s,lastType:null,cc:[],lexical:new l((t||0)-z,0,"block",!1),localVars:e.localVars,globalVars:e.globalVars,context:e.localVars&&{vars:e.localVars},indented:0}},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation()),t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==j?n:(e.lastType=j,d(e,n,j,O,t))},indent:function(t,e){if(t.tokenize==r)return CodeMirror.Pass;if(t.tokenize!=s)return 0;var n=e&&e.charAt(0),i=t.lexical;"stat"==i.type&&"}"==n&&(i=i.prev);var o=i.type,a=n==o;return"vardef"==o?i.indented+("operator"==t.lastType||","==t.lastType?4:0):"form"==o&&"{"==n?i.indented:"form"==o?i.indented+z:"stat"==o?i.indented+("operator"==t.lastType||","==t.lastType?z:0):"switch"!=i.info||a?i.align?i.column+(a?0:1):i.indented+(a?0:z):i.indented+(/^(?:case|default)\b/.test(e)?z:2*z)},electricChars:":{}",jsonMode:F}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),define("cm-js",["cm"],function(){}),CodeMirror.defineMode("xml",function(t,e){function n(t,e){function n(n){return e.tokenize=n,n(t,e)}var o=t.next();if("<"==o){if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?n(s("atom","]]>")):null:t.match("--")?n(s("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(a(1))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),e.tokenize=s("meta","?>"),"meta";var r=t.eat("/");y="";for(var l;l=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)y+=l;return y?(w=r?"closeTag":"openTag",e.tokenize=i,"tag"):"error"}if("&"==o){var c;return c=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),c?"atom":"error"}return t.eatWhile(/[^&<]/),null}function i(t,e){var i=t.next();return">"==i||"/"==i&&t.eat(">")?(e.tokenize=n,w=">"==i?"endTag":"selfcloseTag","tag"):"="==i?(w="equals",null):/[\'\"]/.test(i)?(e.tokenize=o(i),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function o(t){return function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=i;break}return"string"}}function s(t,e){return function(i,o){for(;!i.eol();){if(i.match(e)){o.tokenize=n;break}i.next()}return t}}function a(t){return function(e,i){for(var o;null!=(o=e.next());){if("<"==o)return i.tokenize=a(t+1),i.tokenize(e,i);if(">"==o){if(1==t){i.tokenize=n;break}return i.tokenize=a(t-1),i.tokenize(e,i)}}return"meta"}}function r(){for(var t=arguments.length-1;t>=0;t--)x.cc.push(arguments[t])}function l(){return r.apply(null,arguments),!0}function c(t,e){var n=k.doNotIndent.hasOwnProperty(t)||x.context&&x.context.noIndent;x.context={prev:x.context,tagName:t,indent:x.indented,startOfLine:e,noIndent:n}}function d(){x.context&&(x.context=x.context.prev)}function u(t){if("openTag"==t)return x.tagName=y,l(m,p(x.startOfLine));if("closeTag"==t){var e=!1;return x.context?x.context.tagName!=y&&(k.implicitlyClosed.hasOwnProperty(x.context.tagName.toLowerCase())&&d(),e=!x.context||x.context.tagName!=y):e=!0,e&&(C="error"),l(h(e))}return l()}function p(t){return function(e){return"selfcloseTag"==e||"endTag"==e&&k.autoSelfClosers.hasOwnProperty(x.tagName.toLowerCase())?(f(x.tagName.toLowerCase()),l()):"endTag"==e?(f(x.tagName.toLowerCase()),c(x.tagName,t),l()):l()}}function h(t){return function(e){return t&&(C="error"),"endTag"==e?(d(),l()):(C="error",l(arguments.callee))}}function f(t){for(var e;;){if(!x.context)return;if(e=x.context.tagName.toLowerCase(),!k.contextGrabbers.hasOwnProperty(e)||!k.contextGrabbers[e].hasOwnProperty(t))return;d()}}function m(t){return"word"==t?(C="attribute",l(g,m)):"endTag"==t||"selfcloseTag"==t?r():(C="error",l(m))}function g(t){return"equals"==t?l(v,m):(k.allowMissing?"word"==t&&(C="attribute"):C="error","endTag"==t||"selfcloseTag"==t?r():l())}function v(t){return"string"==t?l(b):"word"==t&&k.allowUnquoted?(C="string",l()):(C="error","endTag"==t||"selfCloseTag"==t?r():l())}function b(t){return"string"==t?l(b):r()}var y,w,x,C,S=t.indentUnit,k=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},$=e.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(t,e){if(t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;C=w=y=null;var n=e.tokenize(t,e);if(e.type=w,(n||w)&&"comment"!=n)for(x=e;;){var i=e.cc.pop()||u;if(i(w||n))break}return e.startOfLine=!1,C||n},indent:function(t,e,o){var s=t.context;if(t.tokenize!=i&&t.tokenize!=n||s&&s.noIndent)return o?o.match(/^(\s*)/)[0].length:0;if($&&/<!\[CDATA\[/.test(e))return 0;for(s&&/^<\//.test(e)&&(s=s.prev);s&&!s.startOfLine;)s=s.prev;return s?s.indent+S:0},electricChars:"/",configuration:e.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),define("cm-xml",["cm"],function(){}),CodeMirror.defineMode("htmlmixed",function(t){function e(t,e){var n=s.token(t,e.htmlState);return/(?:^|\s)tag(?:\s|$)/.test(n)&&">"==t.current()&&e.htmlState.context&&(/^script$/i.test(e.htmlState.context.tagName)?(e.token=i,e.localState=a.startState(s.indent(e.htmlState,""))):/^style$/i.test(e.htmlState.context.tagName)&&(e.token=o,e.localState=r.startState(s.indent(e.htmlState,"")))),n}function n(t,e,n){var i,o=t.current(),s=o.search(e);return s>-1?t.backUp(o.length-s):(i=o.match(/<\/?$/))&&(t.backUp(o.length),t.match(e,!1)||t.match(o[0])),n}function i(t,i){return t.match(/^<\/\s*script\s*>/i,!1)?(i.token=e,i.localState=null,e(t,i)):n(t,/<\/\s*script\s*>/,a.token(t,i.localState))}function o(t,i){return t.match(/^<\/\s*style\s*>/i,!1)?(i.token=e,i.localState=null,e(t,i)):n(t,/<\/\s*style\s*>/,r.token(t,i.localState))}var s=CodeMirror.getMode(t,{name:"xml",htmlMode:!0}),a=CodeMirror.getMode(t,"javascript"),r=CodeMirror.getMode(t,"css");return{startState:function(){var t=s.startState();return{token:e,localState:null,mode:"html",htmlState:t}},copyState:function(t){if(t.localState)var e=CodeMirror.copyState(t.token==o?r:a,t.localState);return{token:t.token,localState:e,mode:t.mode,htmlState:CodeMirror.copyState(s,t.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(t,n){return t.token==e||/^\s*<\//.test(n)?s.indent(t.htmlState,n):t.token==i?a.indent(t.localState,n):r.indent(t.localState,n)},electricChars:"/{}:",innerMode:function(t){var n=t.token==e?s:t.token==i?a:r;return{state:t.localState||t.htmlState,mode:n}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),define("cm-html",["cm"],function(){}),define("view/StructureView",["text!template/structure.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(t){
function e(){c(),f(),k()}function n(){p(!0)}function i(){p(!1)}function o(){"null"!=H&&""==L&&(L=setInterval(a,1e3*Heiduc.AUTOSAVE_TIMEOUT))}function s(){""!=L&&(clearInterval(L),L="")}function a(){p(!0)}function r(){return $("#autosave:checked").length>0}function l(){r()?o():s()}function c(){P=""!=H,P||(N=null,d()),Heiduc.jsonrpc.structureService.getById(function(t){N=t,d()},H)}function d(){null!=N?($("#title").val(N.title),$("#xmlContent").val(N.content)):($("#title").val(""),$("#xmlContent").val("")),j=CodeMirror.fromTextArea(document.getElementById("xmlContent"),{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"xml"}),j.focus(),$(j.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),j.refresh()}function u(){location.href="#structures"}function p(t){j.save();var e=Heiduc.javaMap({id:H,title:$("#title").val(),content:$("#xmlContent").val()});Heiduc.jsonrpc.structureService.save(function(e){"success"==e.result?(Heiduc.info(messages("structure.success_save")),t?P||(H=e.message,c(),k()):location.href="#structures"):Heiduc.showServiceMessages(e)},e)}function h(){var t=$("#fieldName").val(),e=$("#fieldTitle").val();""==t&&$("#fieldName").val(Heiduc.nameFromTitle(e))}function f(){P&&Heiduc.jsonrpc.structureService.getFields(function(t){A=t.list,g()},H)}function m(t){return"TEXT"==t?messages("text"):"TEXTAREA"==t?messages("text_area"):"RESOURCE"==t?messages("resource_link"):"DATE"==t?messages("date"):"Unknown"}function g(){var t='<table class="table"><tr><th>'+messages("title")+"</th><th>"+messages("structure.tag_name")+"</th><th>"+messages("type")+"</th><th></th></tr>";$.each(A,function(e,n){t+="<tr><td>"+n.title+"</td><td>"+n.name+"</td><td>"+m(n.type)+'</td><td><a href="#" onclick="Heiduc.app.structureView.onFieldRemove('+e+')"><img src="/static/images/02_x.png"/></a> <a href="#" onclick="Heiduc.app.structureView.onFieldUp('+e+')"><img src="/static/images/02_up.png"/></a> <a href="#" onclick="Heiduc.app.structureView.onFieldDown('+e+')"><img src="/static/images/02_down.png"/></a> </td></tr>'}),$("#fields").html(t+"</table>"),$("#fields tr:even").addClass("even")}function v(t){var e=!0;return""==t.name?(Heiduc.error(messages("structure.field_tag_name_empty")),e=!1):$(A,function(n,i){i.name==t.name&&(Heiduc.error(messages("structure.field_exists")),e=!1)}),Heiduc.isValidIdentifier(t.name)||(Heiduc.error(messages("structure.field_tag_name")+" "+t.name+" "+messages("structure.must_valid_identifier")),e=!1),""==t.title&&(Heiduc.error(messages("structure.field_title_empty")),e=!1),e}function b(){$("#fieldTitle").focus();var t={title:Heiduc.strip($("#fieldTitle").val()),name:Heiduc.strip($("#fieldName").val()),type:$("#fieldType").val()};v(t)&&(A.push(t),g(),$("#fieldTitle").val("").focus(),$("#fieldName").val(""),Heiduc.info(messages("structure.field_success_add")))}function y(t,e){var n=A[t];A[t]=A[e],A[e]=n}function w(){var t="<structure>\n";return $.each(A,function(e,n){t+="  <field>\n    <title>"+n.title+"</title>\n    <name>"+n.name+"</name>\n    <type>"+n.type+"</type>\n  </field>\n"}),t+"</structure>"}function x(){S(!1)}function C(){S(!0)}function S(t){j.setValue(w()),p(t)}function k(){P&&Heiduc.jsonrpc.structureTemplateService.selectByStructure(function(t){I=t.list,T()},H)}function T(){var t='<table class="table"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th><th>"+messages("type")+"</th></tr>";$.each(I,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"></td><td><a href="#structureTemplate/'+n.id+'">'+n.title+"</a></td><td>"+n.name+"</td><td>"+D(n.typeString)+"</td></tr>"}),$("#templates").html(t+"</table>"),$("#templates tr:even").addClass("even")}function D(t){return"VELOCITY"==t?"Velocity":"XSLT"==t?"XSLT":"Undefined"}function R(){location.href="#addStructureTemplate/"+H}function E(){var t=new Array;return $("#templates input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.structureTemplateService.remove(function(t){Heiduc.showServiceMessages(t),k()},Heiduc.javaList(t)))}function M(t){"_structureXML"===t.target.id?(r()&&o(),j&&(j.focus(),$(j.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),j.refresh())):s()}console.log("Loading StructureView.js");var H="",N="",P=!1,L="",A=[],I=[],j=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(t,{messages:messages})),e(),$('a[data-toggle="tab"]').on("shown.bs.tab",M),$("#autosave").change(l),$("#saveContinueXMLButton").click(n),$("#saveXMLButton").click(i),$("#cancelXMLButton").click(u),$("#saveContinueButton").click(C),$("#saveButton").click(x),$("#cancelButton").click(u),$("#addField").click(b),$("#addTemplateButton").click(R),$("#deleteTemplateButton").click(E),$("#fieldTitle").change(h)},setId:function(t){H=t,P=""!=H,P||(N="",A=[],I=[])},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},onFieldUp:function(t){0!=t&&(y(t,t-1),g())},onFieldDown:function(t){t+1>=A.length||(y(t,t+1),g())},onFieldRemove:function(t){confirm(messages("are_you_sure"))&&(A.splice(t,1),g())}})}),define("text!template/structureTemplate.html",[],function(){return'\n<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#home_a"><%= messages("structureTemplate.title") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="home_a" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div class="form-row">\n        <label><%= messages("title") %></label>\n        <input id="title" type="text" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("name") %></label>\n        <input id="name" type="text" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("structureTemplate.content") %></label>\n        <input id="autosave" type="checkbox" /> <label for="autosave"><%= messages("autosave") %></label>\n    </div>    \n    <div class="form-row">\n        <textarea id="vcontent" rows="20" cols="80"></textarea>\n    </div>\n    <div class="form-row">\n        <label><%= messages("structureTemplate.head_content") %></label>\n    </div>    \n    <div class="form-row">\n        <textarea id="headContent" rows="8" cols="80"></textarea>\n    </div>\n    <div class="form-sep">\n        <input id="saveContinueButton" class="btn btn-primary" type="button" value="<%= messages("save_continue") %>" />\n        <input id="saveButton" type="button" class="btn btn-default" value="<%= messages("save") %>" />\n        <input id="cancelButton" type="button" class="btn btn-default" value="<%= messages("cancel") %>" />\n    </div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}),define("view/StructureTemplateView",["text!template/structureTemplate.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(t){function e(){if(!g){var t=$("#name").val(),e=$("#title").val();""==t&&$("#name").val(Heiduc.urlFromTitle(e))}}function n(){p(!0)}function i(){p(!1)}function o(){"null"!=h&&""==v&&(v=setInterval(a,1e3*Heiduc.AUTOSAVE_TIMEOUT))}function s(){""!=v&&(clearInterval(v),v="")}function a(){p(!0)}function r(){$("#autosave:checked").length>0?o():s()}function l(){g=""!=h,g?Heiduc.jsonrpc.structureTemplateService.getById(function(t){m=t,g&&(f=m.structureId),c()},h):(m=null,c())}function c(){null!=m?($("#name").val(m.name),$("#title").val(m.title),$("#vcontent").val(m.content),$("#headContent").val(m.headContent)):($("#name").val(""),$("#title").val(""),$("#vcontent").val(""),$("#headContent").val("")),b?b.refresh():b=d("vcontent"),y?y.refresh():y=d("headContent")}function d(t){var e=CodeMirror.fromTextArea(document.getElementById(t),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"});return $(e.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),e}function u(){location.href="#structure/"+f}function p(t){b&&b.save(),y&&y.save();var e=Heiduc.javaMap({id:h,name:Heiduc.strip($("#name").val()),title:Heiduc.strip($("#title").val()),type:"VELOCITY",structureId:String(f),content:$("#vcontent").val(),headContent:$("#headContent").val()});Heiduc.jsonrpc.structureTemplateService.save(function(e){"success"==e.result?(Heiduc.info(messages("structureTemplate.success_save")),t?g||(h=e.message,l()):u()):Heiduc.showServiceMessages(e)},e)}console.log("Loading StructureTemplateView.js");var h="",f="",m="",g=""!=h,v="",b=null,y=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),b=null,y=null,this.el.html(_.template(t,{messages:messages})),l(),$("#autosave").change(r),$("#saveContinueButton").click(n),$("#saveButton").click(i),$("#cancelButton").click(u),$("#title").change(e)},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},create:function(t){h="",f=t,m="",g=""!=h},edit:function(t){h=t,f="",m="",g=""!=h}})}),define("text!template/templates.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("templates") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="home-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div id="templates"><img src="/static/images/ajax-loader.gif" /></div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t        <div class="form-sep">\n\t\t\t\t\t\t            <input id="addButton" class="btn" type="button" value="<%= messages("add")%>" />\n\t\t\t\t\t\t\t        <input id="deleteButton" class="btn" type="button" value="<%= messages("delete")%>" />\n\t\t\t\t\t\t\t        <input id="exportButton" class="btn" type="button" value="<%= messages("export")%>" />\n\t\t\t\t\t\t\t        <input id="importButton" class="btn" type="button" value="<%= messages("import")%>" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("templates.import_themes")%></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n\t\t    <%= messages("file_upload")%>:\n\t\t    <input type="hidden" name="fileType" value="import" />\n\t\t    <input type="file" name="uploadFile" />\n\t\t    <div class="modal-footer">\n\t\t        <input type="submit" class="btn btn-primary" value="<%= messages("send")%>" />\n\t\t        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n\t\t    </div>    \n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window")%></h4>\n      </div>\n      <div class="modal-body">\n      \t<p class="message"></p>\n\t    <div class="buttons-dlg">\n\t        <input id="okButton" type="button" value="OK" />\n\t    </div>\n\t    <div class="modal-footer">\n\t        <button type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n\t        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n\t    </div>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_window")%></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="exportForm">\n\t\t    <p><%= messages("templates.export_info")%></p>\n\t\t    <div id="exportInfo" class="form-row"></div>    \n\t\t    <div id="timer" class="form-row"></div>\n\t\t    <div class="modal-footer">\n\t\t        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n\t\t    </div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="structures-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_structures")%></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="structuresForm">\n\t\t    <p><%= messages("templates.structures_info")%></p>\n\t\t    <div id="structures"></div>    \n\t\t    <div class="modal-footer">\n\t\t        <input type="submit" class="btn btn-primary" value="<%= messages("export")%>" />\n\t\t        <input data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel")%>" />\n\t\t    </div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n'}),function(t){function e(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}t.fn.ajaxSubmit=function(n){function i(e){for(var i=new FormData,o=0;o<e.length;o++)"file"!=e[o].type&&i.append(e[o].name,e[o].value);if(l.find("input:file:enabled").each(function(){var e=t(this).attr("name"),n=this.files;if(e)for(var o=0;o<n.length;o++)i.append(e,n[o])}),n.extraData)for(var s in n.extraData)i.append(s,n.extraData[s]);n.data=null;var a=t.extend(!0,{},t.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:"POST"});a.data=null;var r=a.beforeSend;a.beforeSend=function(t,e){e.data=i,t.upload&&(t.upload.onprogress=function(t){e.progress(t.position,t.total)}),r&&r.call(e,t,n)},t.ajax(a)}function o(i){function o(t){var e=t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document;return e}function a(){function n(){try{var t=o(m).readyState;e("state = "+t),"uninitialized"==t.toLowerCase()&&setTimeout(n,50)}catch(t){e("Server abort: ",t," (",t.name,")"),r(k),w&&clearTimeout(w),w=void 0}}var i=l.attr("target"),a=l.attr("action");x.setAttribute("target",h),s||x.setAttribute("method","POST"),a!=u.url&&x.setAttribute("action",u.url),u.skipEncodingOverride||s&&!/post/i.test(s)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(w=setTimeout(function(){y=!0,r(S)},u.timeout));var c=[];try{if(u.extraData)for(var d in u.extraData)c.push(t('<input type="hidden" name="'+d+'">').attr("value",u.extraData[d]).appendTo(x)[0]);u.iframeTarget||(f.appendTo("body"),m.attachEvent?m.attachEvent("onload",r):m.addEventListener("load",r,!1)),setTimeout(n,15),x.submit()}finally{x.setAttribute("action",a),i?x.setAttribute("target",i):l.removeAttr("target"),t(c).remove()}}function r(n){if(!g.aborted&&!R){try{D=o(m)}catch(t){e("cannot access response document: ",t),n=k}if(n===S&&g)return void g.abort("timeout");if(n==k&&g)return void g.abort("server abort");if(D&&D.location.href!=u.iframeSrc||y){m.detachEvent?m.detachEvent("onload",r):m.removeEventListener("load",r,!1);var i,s="success";try{if(y)throw"timeout";var a="xml"==u.dataType||D.XMLDocument||t.isXMLDoc(D);if(e("isXml="+a),!a&&window.opera&&(null==D.body||""==D.body.innerHTML)&&--E)return e("requeing onLoad callback, DOM not available"),void setTimeout(r,250);var l=D.body?D.body:D.documentElement;g.responseText=l?l.innerHTML:null,g.responseXML=D.XMLDocument?D.XMLDocument:D,a&&(u.dataType="xml"),g.getResponseHeader=function(t){var e={"content-type":u.dataType};return e[t]},l&&(g.status=Number(l.getAttribute("status"))||g.status,g.statusText=l.getAttribute("statusText")||g.statusText);var c=(u.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||u.textarea){var h=D.getElementsByTagName("textarea")[0];if(h)g.responseText=h.value,g.status=Number(h.getAttribute("status"))||g.status,g.statusText=h.getAttribute("statusText")||g.statusText;else if(d){var v=D.getElementsByTagName("pre")[0],b=D.getElementsByTagName("body")[0];v?g.responseText=v.textContent?v.textContent:v.innerText:b&&(g.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"!=c||g.responseXML||null==g.responseText||(g.responseXML=M(g.responseText));try{_=N(g,c,u)}catch(t){s="parsererror",g.error=i=t||s}}catch(t){e("error caught: ",t),s="error",g.error=i=t||s}g.aborted&&(e("upload aborted"),s=null),g.status&&(s=g.status>=200&&g.status<300||304===g.status?"success":"error"),"success"===s?(u.success&&u.success.call(u.context,_,"success",g),p&&t.event.trigger("ajaxSuccess",[g,u])):s&&(void 0==i&&(i=g.statusText),u.error&&u.error.call(u.context,g,s,i),p&&t.event.trigger("ajaxError",[g,u,i])),p&&t.event.trigger("ajaxComplete",[g,u]),p&&!--t.active&&t.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,g,s),R=!0,u.timeout&&clearTimeout(w),setTimeout(function(){u.iframeTarget||f.remove(),g.responseXML=null},100)}}}var c,d,u,p,h,f,m,g,v,b,y,w,x=l[0],C=!!t.fn.prop;if(i)if(C)for(d=0;d<i.length;d++)c=t(x[i[d].name]),c.prop("disabled",!1);else for(d=0;d<i.length;d++)c=t(x[i[d].name]),c.removeAttr("disabled");if(t(":input[name=submit],:input[id=submit]",x).length)return void alert('Error: Form elements must not have name or id of "submit".');if(u=t.extend(!0,{},t.ajaxSettings,n),u.context=u.context||u,h="jqFormIO"+(new Date).getTime(),u.iframeTarget?(f=t(u.iframeTarget),b=f.attr("name"),null==b?f.attr("name",h):h=b):(f=t('<iframe name="'+h+'" src="'+u.iframeSrc+'" />'),f.css({position:"absolute",top:"-1000px",left:"-1000px"})),m=f[0],g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var i="timeout"===n?"timeout":"aborted";e("aborting upload... "+i),this.aborted=1,f.attr("src",u.iframeSrc),g.error=i,u.error&&u.error.call(u.context,g,i,n),p&&t.event.trigger("ajaxError",[g,u,i]),u.complete&&u.complete.call(u.context,g,i)}},p=u.global,p&&!t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[g,u]),u.beforeSend&&u.beforeSend.call(u.context,g,u)===!1)return void(u.global&&t.active--);if(!g.aborted){v=x.clk,v&&(b=v.name,b&&!v.disabled&&(u.extraData=u.extraData||{},u.extraData[b]=v.value,"image"==v.type&&(u.extraData[b+".x"]=x.clk_x,u.extraData[b+".y"]=x.clk_y)));var S=1,k=2,$=t("meta[name=csrf-token]").attr("content"),T=t("meta[name=csrf-param]").attr("content");T&&$&&(u.extraData=u.extraData||{},u.extraData[T]=$),u.forceSync?a():setTimeout(a,10);var _,D,R,E=50,M=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},H=t.parseJSON||function(t){return window.eval("("+t+")")},N=function(e,n,i){var o=e.getResponseHeader("content-type")||"",s="xml"===n||!n&&o.indexOf("xml")>=0,a=s?e.responseXML:e.responseText;return s&&"parsererror"===a.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&o.indexOf("json")>=0?a=H(a):("script"===n||!n&&o.indexOf("javascript")>=0)&&t.globalEval(a)),a}}}if(!this.length)return e("ajaxSubmit: skipping submit process - no element selected"),this;var s,a,r,l=this;"function"==typeof n&&(n={success:n}),s=this.attr("method"),a=this.attr("action"),r="string"==typeof a?t.trim(a):"",r=r||window.location.href||"",r&&(r=(r.match(/^([^#]+)/)||[])[1]),n=t.extend(!0,{url:r,success:t.ajaxSettings.success,type:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var c={};if(this.trigger("form-pre-serialize",[this,n,c]),c.veto)return e("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return e("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=n.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var u,p=this.formToArray(n.semantic);if(n.data&&(n.extraData=n.data,u=t.param(n.data,d)),n.beforeSubmit&&n.beforeSubmit(p,this,n)===!1)return e("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,n,c]),c.veto)return e("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var h=t.param(p,d);u&&(h=h?h+"&"+u:u),"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+h,n.data=null):n.data=h;var f=[];if(n.resetForm&&f.push(function(){l.resetForm()}),n.clearForm&&f.push(function(){l.clearForm(n.includeHidden)}),!n.dataType&&n.target){var m=n.success||function(){};f.push(function(e){var i=n.replaceTarget?"replaceWith":"html";t(n.target)[i](e).each(m,arguments)})}else n.success&&f.push(n.success);n.success=function(t,e,i){for(var o=n.context||n,s=0,a=f.length;s<a;s++)f[s].apply(o,[t,e,i||l,l])};var g=t("input:file:enabled[value]",this),v=g.length>0,b="multipart/form-data",y=l.attr("enctype")==b||l.attr("encoding")==b,w=!!(v&&g.get(0).files&&window.FormData);e("fileAPI :"+w);var x=(v||y)&&!w;return n.iframe!==!1&&(n.iframe||x)?n.closeKeepAlive?t.get(n.closeKeepAlive,function(){o(p)}):o(p):(v||y)&&w?(n.progress=n.progress||t.noop,i(p)):t.ajax(n),this.trigger("form-submit-notify",[this,n]),this},t.fn.ajaxForm=function(n){if(0===this.length){var i={s:this.selector,c:this.context};return!t.isReady&&i.s?(e("DOM not ready, queuing ajaxForm"),t(function(){t(i.s,i.c).ajaxForm(n)}),this):(e("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.isDefaultPrevented()||(e.preventDefault(),t(this).ajaxSubmit(n))}).bind("click.form-plugin",function(e){var n=e.target,i=t(n);if(!i.is(":submit,input:image")){var o=i.closest(":submit");if(0==o.length)return;n=o[0]}var s=this;if(s.clk=n,"image"==n.type)if(void 0!=e.offsetX)s.clk_x=e.offsetX,s.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var a=i.offset();s.clk_x=e.pageX-a.left,s.clk_y=e.pageY-a.top}else s.clk_x=e.pageX-n.offsetLeft,s.clk_y=e.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)})},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e){var n=[];if(0===this.length)return n;var i=this[0],o=e?i.getElementsByTagName("*"):i.elements;if(!o)return n;var s,a,r,l,c,d,u;for(s=0,d=o.length;s<d;s++)if(c=o[s],r=c.name)if(e&&i.clk&&"image"==c.type)c.disabled||i.clk!=c||(n.push({name:r,value:t(c).val(),type:c.type}),n.push({name:r+".x",value:i.clk_x},{name:r+".y",value:i.clk_y}));else if(l=t.fieldValue(c,!0),l&&l.constructor==Array)for(a=0,u=l.length;a<u;a++)n.push({name:r,value:l[a]});else null!==l&&"undefined"!=typeof l&&n.push({name:r,value:l,type:c.type});if(!e&&i.clk){var p=t(i.clk),h=p[0];r=h.name,r&&!h.disabled&&"image"==h.type&&(n.push({name:r,value:p.val()}),n.push({name:r+".x",value:i.clk_x},{name:r+".y",value:i.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var i=this.name;if(i){var o=t.fieldValue(this,e);if(o&&o.constructor==Array)for(var s=0,a=o.length;s<a;s++)n.push({name:i,value:o[s]});else null!==o&&"undefined"!=typeof o&&n.push({name:this.name,value:o})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,o=this.length;i<o;i++){var s=this[i],a=t.fieldValue(s,e);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?t.merge(n,a):n.push(a))}return n},t.fieldValue=function(e,n){var i=e.name,o=e.type,s=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!e.checked||("submit"==o||"image"==o)&&e.form&&e.form.clk!=e||"select"==s&&e.selectedIndex==-1))return null;if("select"==s){var a=e.selectedIndex;if(a<0)return null;for(var r=[],l=e.options,c="select-one"==o,d=c?a+1:l.length,u=c?a:0;u<d;u++){var p=l[u];if(p.selected){var h=p.value;if(h||(h=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),c)return h;r.push(h)}}return r}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(t){var e=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,i=this.tagName.toLowerCase();e.test(n)||"textarea"==i||t&&/hidden/.test(n)?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==i&&(this.selectedIndex=-1)})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}(jQuery),define("jquery.form",["jquery"],function(){}),define("view/TemplatesView",["text!template/templates.html","jquery.form"],function(t){function e(){a(),r()}function n(t){var e=t.split("::"),n=e[1],i=e[2];i="success"==n?messages("templates.success_import"):messages("error")+". "+i,$("#afterUpload-dialog .message").text(i),$("#afterUpload-dialog").modal({show:!0})}function i(){$("#import-dialog").modal({show:!0})}function o(){}function s(){e()}function a(){Heiduc.jsonrpc.templateService.getTemplates(function(t){var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(t.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td><a href="#template/'+n.id+'">'+n.title+"</a></td></tr>"}),$("#templates").html(e+"</table>"),$("#templates tr:even").addClass("even")})}function r(){Heiduc.jsonrpc.structureService.select(function(t){var e='<table class="table"><tr><th></th><th>'+messages("title")+"</th></tr>";$.each(t.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'" /></td><td>'+n.title+"</td></tr>"}),$("#structures").html(e+"</table>"),$("#structures tr:even").addClass("even")})}function l(){location.href="#template"}function c(){var t=new Array;return $("#templates input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.templateService.deleteTemplates(function(t){Heiduc.showServiceMessages(t),a()},Heiduc.javaList(t)))}function d(){$("#structures input:checked").each(function(){this.checked=!1}),$("#structures-dialog").modal({show:!0})}function u(){v=0,h();var t=[],e=[];return $("#templates input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):($("#structures input:checked").each(function(){e.push(this.value)}),$("#export-dialog").modal({show:!0}),void Heiduc.jsonrpc.configService.startExportThemeTask(function(t){"success"==t.result?($("#templates input:checked").each(function(){this.checked=!1}),b=t.message,Heiduc.infoMessage("#exportInfo",messages("creating_export_file")),m=setInterval(p,1e4),g=setInterval(h,1e3)):Heiduc.showServiceMessages(t)},Heiduc.javaList(t),Heiduc.javaList(e)))}function p(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(t){t&&(clearInterval(m),clearInterval(g),$("#export-dialog").dialog("close"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+b)},"theme")}function h(){$("#timer").html(v++ +" "+messages("sec")+".")}function f(){clearInterval(m),clearInterval(g)}console.log("Loading TemplatesView.js");var m=null,g=null,v=0,b=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(t,{messages:messages})),$("#upload").ajaxForm(n),e(),$("#addButton").click(l),$("#deleteButton").click(c),$("#exportButton").click(d),$("#exportCancelButton").click(f),$("#importButton").click(i),$("#importCancelButton").click(o),$("#okButton").click(s),$("#structuresForm").submit(function(){return u(),!1}),$("#structuresCancelButton").click(function(){})},remove:function(){this.el.html("")}})}),define("text!template/template.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#"><%= messages("template") %></a></li>\n\t\t\t\t\t\t\t<li><a id="resources" href="#"><%= messages("resources") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<form id="templateForm">\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("title") %></label>\n\t\t\t\t\t\t\t        \t\t<input id="title" class="form-control" type="text" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("url_name") %></label>\n\t\t\t\t\t\t\t        \t\t<input id="url" class="form-control" type="text" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t    <div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t\t\t\t\t\t<input id="autosave" type="checkbox" id="enableCkeditor" value=""> <%= messages("autosave") %>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t    <div class="form-row">\n\t\t\t\t\t\t\t        <textarea id="tcontent" class="form-control" cols="80" rows="20"></textarea>\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t    \t<input id="saveContinueButton" class="btn btn-primary" type="button" value="<%= messages("save_continue") %>" />\n\t\t\t\t\t\t\t        <input id="saveButton" class="btn btn-default" type="submit" value="<%= messages("save") %>" />\n\t\t\t\t\t\t\t        <input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n';
}),function(t){t.extend(t.fn,{swapClass:function(t,e){var n=this.filter("."+t);return this.filter("."+e).removeClass(e).addClass(t),n.removeClass(t).addClass(e),this},replaceClass:function(t,e){return this.filter("."+t).removeClass(t).addClass(e).end()},hoverClass:function(e){return e=e||"hover",this.hover(function(){t(this).addClass(e)},function(){t(this).removeClass(e)})},heightToggle:function(t,e){t?this.animate({height:"toggle"},t,e):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),e&&e.apply(this,arguments)})},heightHide:function(t,e){t?this.animate({height:"hide"},t,e):(this.hide(),e&&this.each(e))},prepareBranches:function(t){return t.prerendered||(this.filter(":last-child:not(ul)").addClass(e.last),this.filter((t.collapsed?"":"."+e.closed)+":not(."+e.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(n,i){if(this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(e){this==e.target&&i.apply(t(this).next())}).add(t("a",this)).hoverClass(),!n.prerendered){this.filter(":has(>ul:hidden)").addClass(e.expandable).replaceClass(e.last,e.lastExpandable),this.not(":has(>ul:hidden)").addClass(e.collapsable).replaceClass(e.last,e.lastCollapsable);var o=this.find("div."+e.hitarea);o.length||(o=this.prepend('<div class="'+e.hitarea+'"/>').find("div."+e.hitarea)),o.removeClass().addClass(e.hitarea).each(function(){var e="";t.each(t(this).parent().attr("class").split(" "),function(){e+=this+"-hitarea "}),t(this).addClass(e)})}this.find("div."+e.hitarea).click(i)},treeview:function(n){function i(n,i){function s(i){return function(){return o.apply(t("div."+e.hitarea,n).filter(function(){return!i||t(this).parent("."+i).length})),!1}}t("a:eq(0)",i).click(s(e.collapsable)),t("a:eq(1)",i).click(s(e.expandable)),t("a:eq(2)",i).click(s())}function o(){t(this).parent().find(">.hitarea").swapClass(e.collapsableHitarea,e.expandableHitarea).swapClass(e.lastCollapsableHitarea,e.lastExpandableHitarea).end().swapClass(e.collapsable,e.expandable).swapClass(e.lastCollapsable,e.lastExpandable).find(">ul").heightToggle(n.animated,n.toggle),n.unique&&t(this).parent().siblings().find(">.hitarea").replaceClass(e.collapsableHitarea,e.expandableHitarea).replaceClass(e.lastCollapsableHitarea,e.lastExpandableHitarea).end().replaceClass(e.collapsable,e.expandable).replaceClass(e.lastCollapsable,e.lastExpandable).find(">ul").heightHide(n.animated,n.toggle)}function s(){var e=[];l.each(function(n,i){e[n]=t(i).is(":has(>ul:visible)")?1:0}),t.cookie(n.cookieId,e.join(""),n.cookieOptions)}function a(){var e=t.cookie(n.cookieId);if(e){var i=e.split("");l.each(function(e,n){t(n).find(">ul")[parseInt(i[e])?"show":"hide"]()})}}if(n=t.extend({cookieId:"treeview"},n),n.toggle){var r=n.toggle;n.toggle=function(){return r.apply(t(this).parent()[0],arguments)}}this.data("toggler",o),this.addClass("treeview");var l=this.find("li").prepareBranches(n);switch(n.persist){case"cookie":var c=n.toggle;n.toggle=function(){s(),c&&c.apply(this,arguments)},a();break;case"location":var d=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(d.length){var u=d.addClass("selected").parents("ul, li").add(d.next()).show();n.prerendered&&u.filter("li").swapClass(e.collapsable,e.expandable).swapClass(e.lastCollapsable,e.lastExpandable).find(">.hitarea").swapClass(e.collapsableHitarea,e.expandableHitarea).swapClass(e.lastCollapsableHitarea,e.lastExpandableHitarea)}}return l.applyClasses(n,o),n.control&&(i(this,n.control),t(n.control).show()),this}}),t.treeview={};var e=t.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}}(jQuery),define("jquery.treeview",["jquery"],function(){}),define("view/TemplateView",["text!template/template.html","jquery.treeview","cm","cm-css","cm-js","cm-xml","cm-html"],function(t){function e(){l()}function n(){u(!0)}function i(){u(!1)}function o(){"null"!=h&&""==g&&(g=setInterval(a,1e3*Heiduc.AUTOSAVE_TIMEOUT))}function s(){""!=g&&(clearInterval(g),g="")}function a(){v&&v.save();var t=$("#tcontent").val();Heiduc.jsonrpc.templateService.updateContent(function(t){if("success"==t.result){var e=new Date;Heiduc.info(t.message+" "+e)}else Heiduc.error(t.message)},h,t)}function r(){$("#autosave:checked").length>0?o():s()}function l(){m=""!=h,m||(f=null),Heiduc.jsonrpc.templateService.getTemplate(function(t){f=t,c()},h)}function c(){null!=f?($("#title").val(f.title),$("#url").val(f.url),$("#tcontent").val(f.content)):($("#title").val(""),$("#url").val(""),$("#tcontent").val("")),v=CodeMirror.fromTextArea(document.getElementById("tcontent"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),v.focus(),$(v.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),v.refresh()}function d(){location.href="#templates"}function u(t){v&&v.save();var e=Heiduc.javaMap({id:h,title:$("#title").val(),url:$("#url").val(),content:$("#tcontent").val()});Heiduc.jsonrpc.templateService.saveTemplate(function(e){"success"==e.result?(Heiduc.info(messages("template.success_save")),t?m||(h=e.message,l()):location.href="#templates"):Heiduc.showServiceMessages(e)},e)}function p(){$.cookie("folderReturnPath","#template/"+f.id,{path:"/",expires:10}),Heiduc.jsonrpc.folderService.createFolderByPath(function(t){location.href="#folder/"+t.id},"/theme/"+f.url)}console.log("Loading TemplateView.js");var h="",f="",m=""!=h,g="",v=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/jquery.treeview.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(t,{messages:messages})),e(),$("#autosave").change(r),$("#saveContinueButton").click(n),$("#templateForm").submit(function(){return i(),!1}),$("#cancelButton").click(d),$("#resources").click(p)},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},create:function(){h="",f="",m=""!=h},edit:function(t){h=t,f="",m=""!=h}})}),define("text!template/page/page.html",[],function(){return'\n<div class="row">\n\t<div class="col-lg-9">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-heading">\n\t\t\t\t<a href="#pages"><%= messages("content") %>:</a>\n\t\t\t\t<a id="rootPage">/</a> \n        \t\t<span id="crumbs"></span>\n\t\t\t</div>\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li><a href="#page/<%= id %>"><%= messages("page") %></a></li>\n\t\t\t\t\t\t\t<li><a href="#page/content/<%= id %>"><%= messages("content") %></a></li>\n\t\t\t\t\t\t\t<li><a href="#page/children/<%= id %>"><%= messages("page.children_pages") %></a></li>\n\t\t\t\t\t\t\t<li><a href="#page/comments/<%= id %>"><%= messages("comments") %></a></li>\n\t\t\t\t\t\t\t<li><a href="#page/security/<%= id %>"><%= messages("security") %></a></li>\n\t\t\t\t\t\t\t<li><a href="#page/resources/<%= id %>"><%= messages("resources") %></a></li>\n\t\t\t\t\t\t\t<li><a href="#page/attributes/<%= id %>"><%= messages("attributes") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="col-lg-3">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-heading">History</div>\n\t\t\t<div class="panel-body">\n\t\t\t\t<div id="versions">\n\t\t\t    <div class="vertical-buttons-panel"> </div>      \n\t\t\t    <a id="addVersionLink" class="button ui-state-default ui-corner-all" \n\t\t\t        href="#">\n\t\t\t        <span class="ui-icon ui-icon-plus"></span> <%= messages("add_version") %>\n\t\t\t    </a>\n\t\t\t    <div id="auditData">\n\t\t\t        <div><%= messages("page.state") %>: <span id="pageState"> </span></div>\n\t\t\t        <div><%= messages("page.user_created") %>: <span id="pageCreateUser"> </span></div>\n\t\t\t        <div><%= messages("creation_date") %>: <span id="pageCreateDate"> </span></div>\n\t\t\t        <div><%= messages("page.user_modified") %>: <span id="pageModUser"> </span></div>\n\t\t\t        <div><%= messages("modify_date") %>: <span id="pageModDate"> </span></div>\n\t\t\t    </div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="modal fade" id="version-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("page.version_title") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="versionForm">\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("page.version_title") %></label>\n\t\t        <input id="version-title" type="text" />        \n\t\t    </div>\n\t\t    <div class="modal-footer">\n\t\t        <input id="versionSaveButton" class="btn btn-primary" type="submit" \n\t\t            value="<%= messages("send") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="versionCancelButton" type="button" \n\t\t            value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n'}),define("view/page/context",[],function(){return{pageRequest:null,page:null,pages:{},pageId:"",pageParentUrl:"",editMode:!0,currentLanguage:"",isDefault:!1,loadData:function(){alert("Load data was not initialized!")}}}),define("text!template/page/content.html",[],function(){return'<form id="pageForm">\n\t<div class="form-group">\n\t\t<label class="checkbox-inline">\n\t\t\t<input type="checkbox" id="autosave"> <%= messages("autosave") %>\n\t\t</label>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("page.friendly_url") %></label>\n\t\t\t\t<div id="friendlyUrlDiv" class="input-group">\n\t\t\t\t\t<span class="input-group-addon" id="parentFriendlyUrl"><%= messages("page.friendly_url") %></span>\n\t\t\t\t\t<input class="form-control"  id="friendlyUrl" type="text">\n\t\t\t\t\t<span class="input-group-addon" id="friendlyUrlSpan"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n\t\t\t\t <label><%= messages("page.select_language") %></label> \n        \t\t<select id="language" class="form-control"></select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label><%= messages("title") %></label>\n\t\t\t\t<input type="text" id="titleLocal" class="form-control">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group" id="editorButtons">\n\t\t <a id="ckedit" href="#" ></a>\n\t</div>\n\t<div class="form-group" id="page-content">\n\t</div>\n\t<div class="form-sep">\n\t\t<label class="checkbox-inline" id="approveOnContentSaveDiv">\n\t\t\t<input type="checkbox" id="approveOnContentSave" value=""> <%= messages("page.approve_save") %>\n\t\t</label>\n\t\t<div class="form-sep">\n\t\t<input id="saveContinueContentButton" type="button" class="btn" value="<%= messages("save_continue") %>"/>\n\t\t<input id="saveContentButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n\t\t<input id="contentPreviewButton" type="button" class="btn" value="<%= messages("preview") %>"/>\n\t\t<input id="approveButton" type="button" class="btn" value="<%= messages("approve") %>"/>\n\t\t<input id="restoreButton" type="button" class="btn" value="<%= messages("restore") %>"/>\n\t\t<input id="resetCacheButton" type="button" class="btn" value="<%= messages("page.reset_cache") %>"/>\n\t\t<input id="contentCancelButton" type="button" class="btn" value="<%= messages("cancel") %>"/>\n\t\t</div>\n\t</div>\n</form>\n\n<div class="modal fade" id="restore-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("page.restore_content") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="restoreForm">\n\t\t    <div class="form-row">\n\t\t        <input name="page" type="radio" value="home" checked="checked"/> \n\t\t            <%= messages("home_page") %> <br/>        \n\t\t        <input name="page" type="radio" value="login" /> \n\t\t            <%= messages("login_page") %> <br/>        \n\t\t        <input name="page" type="radio" value="search" /> \n\t\t            <%= messages("search_page") %>         \n\t\t    </div>\n\t\t    <div class="modal-footer">\n\t\t        <input id="restoreSaveButton" class="btn btn-primary" type="submit" value="OK" />\n\t\t    \t<button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n\t\t    </div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="file-upload" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folder.upload_file") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n\t        <%= messages("file_upload") %>:\n\t        <input type="hidden" name="fileType" value="resource" />\n\t        <input type="hidden" name="folderId" />\n\t        <input type="file" name="uploadFile" multiple="true" />\n\t        <div class="buttons-dlg">\n\t            <input type="submit" value="<%= messages("send") %>" />\n\t            <input id="fileUploadCancelButton" type="button" \n\t                value="<%= messages("cancel") %>" />\n\t        </div>\n\t        <div class="modal-footer">\n\t        \t<input type="submit" class="btn btn-primary" value="<%= messages("send") %>" />\n\t            <input id="fileUploadCancelButton" class="btn btn-primary" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n    \t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n\n\t'}),define("view/page/version",["view/page/context"],function(t){function e(){$("#addVersionLink").click(s),$("#versionCancelButton").click(r),$("#versionForm").submit(function(){return a(),!1})}function n(){Heiduc.jsonrpc.pageService.getPageRequest(function(e){t.pageRequest=e,t.page=t.pageRequest.page,i()},t.pageId,t.pageParentUrl)}function i(){var e=t.pageRequest.versions;d=[],t.pages={},$.each(e.list,function(e,n){t.pages[String(n.version)]=n,d.push(String(n.version))}),d.sort();var n="";$.each(d,function(e,i){var o=t.pages[i];n+="<div>",n+=t.pageId!=o.id?'<a class="select btn btn-default btn-sm"               title="'+o.versionTitle+'"               data-version="'+i+'">Version '+i+"</a>":'<a class="select btn btn-default btn-sm" title="'+o.versionTitle+'" data-version="'+i+'"                ><span class="ui-icon ui-icon-triangle-1-e"></span>                Version '+i+"</a>",d.length>1&&(n+='<img class="delete button" src="/static/images/delete-16.png" data-version="'+i+'"/></div>')}),$("#versions .vertical-buttons-panel").html(n),$("#versions a.select").click(function(){l($(this).attr("data-version"))}),$("#versions img.delete").click(function(){o($(this).attr("data-version"))})}function o(e){if(confirm(messages("are_you_sure"))){var i=t.pages[e];Heiduc.jsonrpc.pageService.deletePageVersion(function(i){if(e==String(t.page.version))if(1==d.length)location.href="#pages";else{var o=d[0];o=0==d.indexOf(e)?d[1]:d[d.indexOf(e)-1],t.pageId=t.pages[o].id,t.loadData()}else n()},i.id)}}function s(){$("#version-dialog").modal({show:!0}),$("#version-title").val("")}function a(){Heiduc.jsonrpc.pageService.addVersion(function(e){"success"==e.result?(t.pageId=e.message,t.loadData(),Heiduc.info(messages("page.version_success_add"))):Heiduc.showServiceMessages(e),$("#version-dialog").modal({show:!1})},t.page.friendlyURL,$("#version-title").val())}function r(){}function l(e){var n=t.pages[e];t.pageId=n.id,t.loadData()}function c(){$("#pageState").html("EDIT"==t.page.stateString?messages("edit"):messages("approved")),$("#pageCreateDate").html(t.page.createDateTimeString),$("#pageModDate").html(t.page.modDateTimeString),$("#pageCreateUser").html(t.page.createUserEmail),$("#pageModUser").html(t.page.modUserEmail)}var d=[];return{initVersionDialog:e,loadVersions:i,showAuditInfo:c}}),define("view/page/breadcrumbs",["view/page/context"],function(t){function e(){var e=t.pageParentUrl;e=t.pageRequest.page.friendlyURL;var i="",o=e.substr(1).split("/");if(o.length>0){var s="";$.each(o,function(e,n){s+="/"+n,i+=o.length-1==e&&t.editMode?" "+o[o.length-1]:' <a data-url="'+s+'">'+n+"</a> /"})}$("#crumbs").html(i),$("#crumbs a").click(function(){var t=$(this).attr("data-url");t&&n(t)}),$("#rootPage").click(function(){n("/")})}function n(t){Heiduc.jsonrpc.pageService.getPageByUrl(function(t){location.href="#page/content/"+t.id},t)}return{breadcrumbsShow:e}}),define("view/page/ContentView",["text!template/page/content.html","view/page/context","view/page/version","view/page/breadcrumbs","jquery.form","cm","cm-css","cm-js","cm-xml","cm-html"],function(t,e,n,i){function o(){e.loadData=s,e.editMode=""!=e.pageId,Heiduc.initJSONRpc(s),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#autosave").change(v),$("#language").change(w),$("#saveContinueContentButton").click(function(){d(!0)}),$("#pageForm").submit(function(){return d(!1),!1}),$("#contentPreviewButton").click(b),$("#approveButton").click(C),$("#restoreButton").click(H),$("#contentCancelButton").click(y),$("ul.nav-tabs li:nth-child(2)").addClass("active"),$("#restoreForm").submit(function(){return N(),!1}),$("#resetCacheButton").click(A),$("#upload").ajaxForm({beforeSubmit:F,success:z}),$("#fileUploadCancelButton").click(O)}function s(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,J=!e.pageRequest.config.enableCkeditor||e.pageRequest.page.wikiProcessing||!e.page.enableCkeditor;var n=e.pageRequest.page.wikiProcessing?' <a href="http://en.wikipedia.org/wiki/Help:Wiki_markup" target="blank">Wiki syntax</a>':"";J?$("#ckedit").text(messages("page.edit_ckeditor")).click(L):$("#ckedit").text(messages("page.edit_textarea")).click(P),$("#editorButtons").append(n),l(),r(),i.breadcrumbsShow()},e.pageId,e.pageParentUrl)}function a(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,e.editMode=null!=e.pageId,r()},e.pageId,e.pageParentUrl)}function r(){e.pageId=null==e.page.id?"":String(e.page.id),e.pageParentUrl=e.page.parentUrl,n.loadVersions(),R(),c(),S(),x()}function l(){var t=e.pageRequest.languages;U={};var n="";$.each(t.list,function(t,e){U[e.code]=e,n+='<option value="'+e.code+'" >'+e.title+"</option>"}),$("#language").html(n)}function c(){var t="/"==e.pageParentUrl?"":"/";""==e.page.parentUrl||null==e.page.parentUrl?($("#friendlyUrl").hide(),$("#friendlyUrl").val(""),$("#parentFriendlyUrl").html("/")):($("#friendlyUrl").show(),$("#friendlyUrl").val(e.page.pageFriendlyURL),$("#parentFriendlyUrl").html(e.page.parentFriendlyURL+t)),e.pageRequest.children.list.length>0&&($("#parentFriendlyUrl").hide(),$("#friendlyUrl").hide(),$("#friendlyUrlSpan").html(e.page.friendlyURL)),$("#pageState").html("EDIT"==e.page.stateString?messages("edit"):messages("approved")),$("#pageCreateDate").html(e.page.createDateTimeString),$("#pageModDate").html(e.page.modDateTimeString),$("#pageCreateUser").html(e.page.createUserEmail),$("#pageModUser").html(e.page.modUserEmail),null!=e.page.id?($(".pageTab").show(),$(".childrenTab").show(),$(".commentsTab").show(),$(".securityTab").show(),$("#pagePreview").show(),$("#versions").show()):($(".pageTab").hide(),$(".childrenTab").hide(),$(".commentsTab").hide(),$(".securityTab").hide(),$("#pagePreview").hide(),$("#versions").hide()),k(),I()}function d(t){var n=Heiduc.javaMap({id:e.pageId,friendlyUrl:$("#parentFriendlyUrl").text()+$("#friendlyUrl").val(),titles:M(),content:f(),approve:String($("#approveOnPageSave:checked, #approveOnContentSave:checked").size()>0),languageCode:e.currentLanguage});Heiduc.jsonrpc.pageService.savePage(function(e){"success"==e.result?(Heiduc.info(messages("page.success_save")),t?a():location.href="#pages"):Heiduc.showServiceMessages(e)},n)}function u(){e.editMode&&""==W&&(W=setInterval(p,1e3*Heiduc.AUTOSAVE_TIMEOUT))}function p(){d(!0)}function h(){""!=W&&(clearInterval(W),W="")}function f(){if(!e.editMode)return"";if(e.page.simple)return J?(q.save(),$("#pcontent").val()):q.getData();if(e.page.structured){var t='<?xml version="1.0" encoding="utf-8"?>\n<content>\n';return $.each(e.pageRequest.structureFields.list,function(e,n){if("TEXT"!=n.type&&"DATE"!=n.type&&"RESOURCE"!=n.type||(t+="<"+n.name+"><![CDATA["+$("#field"+n.name).val()+"]]></"+n.name+">\n"),"TEXTAREA"==n.type){var i="";J?(Y[n.name].save(),i=$("#field"+n.name).val()):i=Y[n.name].getData(),t+="<"+n.name+"><![CDATA["+i.replace("]]>","]]]")+"]]></"+n.name+">\n"}}),t+"</content>"}}function m(t){if(t="undefined"==typeof t?"":t,e.page.simple&&(J?q.setValue(t):q.setData(t)),e.page.structured){var n=$.xmlDOM(t,function(e){t&&Heiduc.error(messages("page.parsing_error")+" "+e)});$.each(e.pageRequest.structureFields.list,function(t,e){"TEXT"!=e.type&&"DATE"!=e.type&&"RESOURCE"!=e.type||$(n).find(e.name).each(function(){$("#field"+e.name).val($(this).text())}),"TEXTAREA"==e.type&&$(n).find(e.name).each(function(){J?Y[e.name].setValue($(this).text()):Y[e.name].setData($(this).text())})})}}function g(){return B[e.currentLanguage]!=f()}function v(){$("#autosave:checked").length>0?u():h()}function b(){var t=e.page.friendlyURL+"?language="+e.currentLanguage+"&version="+e.page.version;window.open(t,"preview")}function y(){location.href="#pages"}function w(){!g()||confirm(messages("are_you_sure_changes_lost"))?(e.currentLanguage=$("#language").val(),void 0==B[e.currentLanguage]&&(B[e.currentLanguage]=""),m(B[e.currentLanguage]),$("#titleLocal").val(E())):$("#language").val(e.currentLanguage)}function x(){if(null!=e.pageRequest.contents){var t=e.pageRequest.contents;B={},$.each(t.list,function(t,e){B[e.languageCode]=e.content}),e.currentLanguage||(void 0!=U[Heiduc.ENGLISH_CODE]?e.currentLanguage=Heiduc.ENGLISH_CODE:e.currentLanguage=t.list[0].languageCode),$("#language").val(e.currentLanguage),m(B[e.currentLanguage]),$("#titleLocal").val(Heiduc.unescapeHtml(E()))}else m("")}function C(){Heiduc.jsonrpc.pageService.approve(function(t){Heiduc.showServiceMessages(t),s()},e.pageId)}function S(){var t=e.pageRequest.pagePermission;t.publishGranted?($("#approveButton").show(),$("#approveOnPageSaveDiv").show(),$("#approveOnContentSaveDiv").show()):($("#approveButton").hide(),$("#approveOnPageSaveDiv").hide(),$("#approveOnContentSaveDiv").hide()),t.changeGranted?($("#pageSaveButton").show(),$("#saveContinueContentButton").show(),$("#saveContentButton").show()):($("#pageSaveButton").hide(),$("#saveContinueContentButton").hide(),$("#saveContentButton").hide()),t.admin&&e.editMode?$(".securityTab").show():$(".securityTab").hide(),I()}function k(){if($.each(CKEDITOR.instances,function(t,e){CKEDITOR.remove(e)}),e.page.simple&&($("#page-content").html('<textarea id="pcontent" rows="20" cols="80"></textarea>'),J?(q=CodeMirror.fromTextArea(document.getElementById("pcontent"),{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"htmlmixed"}),q.focus(),$(q.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver")):q=CKEDITOR.replace("pcontent",{height:350,width:"auto",filebrowserUploadUrl:"/cms/upload",filebrowserBrowseUrl:"fileBrowser.html",toolbar:"Heiduc"})),e.page.structured){var t="";$.each(e.pageRequest.structureFields.list,function(e,n){t+='<div><div class="label">'+n.title+":</div>","TEXT"==n.type&&(t+='<input id="field'+n.name+'" size="80"/>'),"TEXTAREA"==n.type&&(t+='<textarea cols="80" rows="20" id="field'+n.name+'"></textarea>'),"DATE"==n.type&&(t+='<input id="field'+n.name+'" class="datepicker" size="8" />'),"RESOURCE"==n.type&&(t+='<input id="field'+n.name+'" size="80"/> <a class="browse" data-name="field'+n.name+'">'+messages("browse")+'</a> <a class="upload" data-name="field'+n.name+'">'+messages("upload")+"</a>"),t+="</div>"}),$("#page-content").html(t),$("#page-content .browse").click(function(){T($(this).attr("data-name")),X=$(this).attr("data-name"),window.open("fileBrowser.html?mode=page")}),$("#page-content .upload").click(function(){j($(this).attr("data-name"))}),$(".datepicker").datepicker({dateFormat:"dd.mm.yy"}),Y={},$.each(e.pageRequest.structureFields.list,function(t,e){if("TEXTAREA"==e.type&&!Y[e.name])if(J){var n=document.getElementById("field"+e.name);Y[e.name]=CodeMirror.fromTextArea(n,{lineNumbers:!0,lineWrapping:!0,theme:"eclipse",mode:"htmlmixed"}),$(Y[e.name].getScrollerElement()).css("border","1px solid silver")}else Y[e.name]=CKEDITOR.replace("field"+e.name,{height:150,width:"auto",filebrowserUploadUrl:"/cms/upload",filebrowserBrowseUrl:"fileBrowser.html",toolbar:"Heiduc"})})}}function T(t){X=t,$.cookie("fileBrowserPath","/page"+e.page.friendlyURL,{path:"/",expires:10}),window.open("fileBrowser.html?mode=page")}function D(t){$("#"+X).val(t)}function R(){V=e.page.titles.map}function E(){return void 0==V[e.currentLanguage]?"":V[e.currentLanguage]}function M(){if(!e.editMode)return"{"+Heiduc.ENGLISH_CODE+':"'+Heiduc.escapeHtml($("#title").val())+'"}';V[e.currentLanguage]=$("#titleLocal").val();var t="{",n=0;return $.each(V,function(e,i){var o=0==n++?"":",";t+=o+e+':"'+Heiduc.escapeHtml(i)+'"'}),t+"}"}function H(){$("#restore-dialog").modal({show:!0})}function N(){var t=$("input[name=page]:checked").val();Heiduc.jsonrpc.pageService.restore(function(t){Heiduc.showServiceMessages(t),"success"==t.result&&($("#restore-dialog").modal("hide"),s())},e.pageId,t,e.currentLanguage)}function P(){J=!0,$("#ckedit").text(messages("page.edit_ckeditor")).click(L),k(),m(B[e.currentLanguage])}function L(){J=!1,$("#ckedit").text(messages("page.edit_textarea")).click(P),k(),m(B[e.currentLanguage])}function A(){e.editMode&&Heiduc.jsonrpc.pageService.resetCache(function(t){Heiduc.showServiceMessages(t)},e.page.friendlyURL)}function I(){e.page.friendlyURL.endsWith("/_default")&&(e.isDefault=!0,$(".securityTab, .commentsTab, .childrenTab, #approveOnContentSaveDiv, #contentPreviewButton, #versions, #resetCacheButton, #restoreButton, #approveButton, #friendlyUrlDiv").hide())}function j(t){X=t,$("#file-upload input[name=folderId]").val(e.pageRequest.folderId),$("#file-upload").modal({show:!0})}function O(){}function z(t){var e=t.split("::"),n=e[1],i=e[2];"success"==n?Heiduc.info(messages("folder.file_success_upload")):Heiduc.error(messages("folder.error_during_upload")+" "+i),$("#file-upload").modal({show:!1})}function F(t,n,i){var o=Heiduc.getFileName($("#file-upload input[name=uploadFile]").val()),s="/file/page"+e.page.friendlyURL+"/"+o;$("#"+X).val(s)}console.log("Loading ContentView.js");var B=null,V=null,U=null,q=null,W="",Y=null,X="",J=!1;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(t),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),o()},remove:function(){this.el.html("")},setResource:function(t){D(t)}})}),define("text!template/page/index.html",[],function(){return'<form id="pageForm">\n\t<div id="titleDiv" class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label><%= messages("title") %></label>\n\t\t\t\t<input type="text" id="title" class="form-control">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("page.friendly_url") %></label>\n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<span class="input-group-addon" id="parentFriendlyUrl"><%= messages("page.friendly_url") %></span>\n\t\t\t\t\t<input class="form-control"  id="friendlyUrl" type="text">\n\t\t\t\t\t<span class="input-group-addon" id="friendlyUrlSpan"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("template") %></label>\n\t\t\t\t<select id="templates" class="form-control"></select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input id="restful" type="checkbox" /><%= messages("restful") %>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label><%= messages("page.publication_date") %></label>\n\t\t\t\t<div class="form-inline">\n\t\t\t\t\t<input class="form-control datepicker" id="publishDate" type="text">\n\t\t\t\t\t<input class="form-control"  id="publishTime" type="text">\n\t\t\t\t\t-\n\t\t\t\t\t<input class="form-control datepicker" id="endPublishDate" type="text">\n\t\t\t\t\t<input class="form-control" id="endPublishTime" type="text">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label></label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="commentsEnabled"> <%= messages("enable_comments") %>\n\t\t\t\t</label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="searchable" value=""> <%= messages("page.include_search") %>\n\t\t\t\t</label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="velocityProcessing" value=""> <%= messages("page.velocity_processing") %>\n\t\t\t\t</label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="wikiProcessing" value=""> <%= messages("page.wiki_processing") %>\n\t\t\t\t</label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="phpProcessing" value=""> <%= messages("page.php_processing") %>\n\t\t\t\t</label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="enableCkeditor" value=""> <%= messages("config.enable_ckeditor") %>\n\t\t\t\t</label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="skipPostProcessing" value=""> <%= messages("page.skip_postprocessing") %>\n\t\t\t\t</label>\n\t\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input id="cached" type="checkbox" /><%= messages("page.cache_enabled") %>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div id="dependenciesDiv" class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label><%= messages("cache_dependencies") %></label>\n\t\t\t\t<input class="form-control" id="dependencies" type="text">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("tags") %></label>\n\t\t\t\t<div class="input-group">\n\t\t\t\t\t<a id="addTag" href="#"><%= messages("add_tag") %></a>\n\t\t\t    \t<span id="tags"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("page.type") %></label>\n\t\t\t\t<select id="pageType" class="form-control">\n\t\t\t        <option value="SIMPLE"><%= messages("simple") %></option>\n\t\t\t        <option value="STRUCTURED"><%= messages("structured") %></option>\n\t\t\t    </select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div id="structuredControls" class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("structure") %></label>\n\t\t\t\t<select id="structure" class="form-control"></select>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("page.structure_template") %></label>\n    \t\t\t<select id="structureTemplate" class="form-control"></select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="form-group">\n\t\t <a id="metadata" href="#" ><%= messages("page.metadata") %></a>\n\t\t <div id="meta" class="row" style="display:none;">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label><%= messages("page.meta_keywords") %></label>\n    \t\t\t<textarea id="keywords" class="form-control"></textarea>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="col-lg-12">\n\t\t\t    <label><%= messages("page.meta_description") %></label>\n\t\t\t    <textarea id="description" class="form-control"></textarea>\n\t\t\t</div>\n\t\t\t<div class="col-lg-12">\n\t\t\t    <label><%= messages("page.head_content") %></label>\n\t\t\t    <textarea id="headHtml" class="form-control"></textarea>\n\t\t\t</div>\n\t\t\t<div class="col-lg-12">\n\t\t\t    <label><%= messages("content_type") %></label>\n\t\t\t    <input id="contentType" type="text"  class="form-control" />\n\t\t\t</div>\n\t\t</div>\n\t\t \n\t</div>\n\t<div class="form-sep">\n\t\t<label class="checkbox-inline">\n\t\t\t<input type="checkbox" id="approveOnPageSave" value=""> <%= messages("page.approve_save") %>\n\t\t</label>\n\t\t<div class="form-sep">\n\t\t<input id="pageSaveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n\t\t<button id="pagePreview" class="btn"><%= messages("preview") %></button>\n\t\t<button id="pageCancelButton" class="btn"><%= messages("cancel") %></button>\n\t\t</div>\n\t</div>\n</form>\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\n<div class="modal fade" id="tag-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("select_tag") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<ul id="tagTree"></ul>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n';
}),define("view/page/IndexView",["text!template/page/index.html","view/page/context","view/page/version","view/page/breadcrumbs","jquery.treeview"],function(t,e,n,i){function o(){e.loadData=s,e.editMode=""!=e.pageId,$(".datepicker").datepicker({todayHighlight:!0}),Heiduc.initJSONRpc(s),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#title").change(f),$("#pageType").change(m),$("#structure").change(x),$("#pageForm").submit(function(){return h(),!1}),$("#pagePreview").click(g),$("#pageCancelButton").click(v),$("#approveButton").click(b),$("ul.nav-tabs li:nth-child(1)").addClass("active"),$("#metadata").click(function(){$("#meta").toggle()}),$("#addTag").click(T),$("#cached").click(function(){$("#dependenciesDiv").toggle()})}function s(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,c(),w(),l(),i.breadcrumbsShow()},e.pageId,e.pageParentUrl)}function a(){null!=e.page&&e.page.friendlyURL.endsWith("/_default")&&(e.isDefault=!0,$(".securityTab, .commentsTab, .childrenTab, #approveOnPageSaveDiv, #pagePreview, #versions, #tagsDiv").hide(),$("#title, #friendlyUrl").attr("disabled",!0))}function r(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,e.editMode=null!=e.pageId,l()},e.pageId,e.pageParentUrl)}function l(){e.editMode?(e.pageId=String(e.page.id),e.pageParentUrl=e.page.parentUrl,n.loadVersions(),S(),k(),H()):e.pages[1]=e.page,d(),y()}function c(){var t=e.pageRequest.templates,n="";$.each(t.list,function(t,e){n+='<option value="'+e.id+'">'+e.title+"</option>"}),$("#templates").html(n),null!=e.page.id?$("#templates").val(e.page.template):$("#templates").val($.cookie("page_template"))}function d(){var t="/"==e.pageParentUrl?"":"/";$("#title").val(e.page.title),$("#titleDiv").hide(),""==e.page.parentUrl||null==e.page.parentUrl?($("#friendlyUrl").hide(),$("#friendlyUrl").val(""),$("#parentFriendlyUrl").html("/")):($("#friendlyUrl").show(),$("#friendlyUrl").val(e.page.pageFriendlyURL),$("#parentFriendlyUrl").html(e.page.parentFriendlyURL+t)),e.pageRequest.children.list.length>0&&($("#parentFriendlyUrl").hide(),$("#friendlyUrl").hide(),$("#friendlyUrlSpan").html(e.page.friendlyURL)),$("#pageType").val(e.page.pageTypeString),$("#publishDate").val(e.page.publishDateString),$("#publishTime").val(e.page.publishTimeString),$("#endPublishDate").val(e.page.endPublishDateString),$("#endPublishTime").val(e.page.endPublishTimeString),$("#commentsEnabled").each(function(){this.checked=e.page.commentsEnabled}),$("#searchable").each(function(){this.checked=e.page.searchable}),$("#velocityProcessing").each(function(){this.checked=e.page.velocityProcessing}),$("#wikiProcessing").each(function(){this.checked=e.page.wikiProcessing}),$("#phpProcessing").each(function(){this.checked=e.page.PHPProcessing}),$("#enableCkeditor").each(function(){this.checked=e.page.enableCkeditor}),$("#skipPostProcessing").each(function(){this.checked=e.page.skipPostProcessing}),$("#cached").each(function(){this.checked=e.page.cached}),$("#restful").each(function(){this.checked=e.page.restful}),$("#templates").val(e.page.template),$("#pageState").html("EDIT"==e.page.stateString?messages("edit"):messages("approved")),$("#pageCreateDate").html(e.page.createDateTimeString),$("#pageModDate").html(e.page.modDateTimeString),$("#pageCreateUser").html(e.page.createUserEmail),$("#pageModUser").html(e.page.modUserEmail),$("#keywords").val(e.page.keywords),$("#description").val(e.page.description),$("#headHtml").val(e.page.headHtml),$("#dependencies").val(e.pageRequest.dependencies),$("#contentType").val(e.page.contentType),e.page.cached?$("#dependenciesDiv").show():$("#dependenciesDiv").hide(),null!=e.page.id?($(".contentTab").show(),$(".childrenTab").show(),$(".commentsTab").show(),$(".securityTab").show(),$("#pagePreview").show(),$("#versions").show(),$("#tagsDiv").show()):($(".contentTab").hide(),$(".childrenTab").hide(),$(".commentsTab").hide(),$(".securityTab").hide(),$("#pagePreview").hide(),$("#versions").hide(),$("#tagsDiv").hide()),a(),m()}function u(){return Heiduc.strip($("#publishDate").val())+" "+Heiduc.strip($("#publishTime").val())+":00"}function p(){return $("#endPublishDate").val()?Heiduc.strip($("#endPublishDate").val())+" "+Heiduc.strip($("#endPublishTime").val())+":00":""}function h(){var t=Heiduc.javaMap({id:e.pageId,titles:C(),friendlyUrl:$("#parentFriendlyUrl").text()+$("#friendlyUrl").val(),publishDate:u(),endPublishDate:p(),commentsEnabled:String($("#commentsEnabled:checked").size()>0),searchable:String($("#searchable:checked").size()>0),velocityProcessing:String($("#velocityProcessing:checked").size()>0),wikiProcessing:String($("#wikiProcessing:checked").size()>0),phpProcessing:String($("#phpProcessing:checked").size()>0),enableCkeditor:String($("#enableCkeditor:checked").size()>0),skipPostProcessing:String($("#skipPostProcessing:checked").size()>0),cached:String($("#cached:checked").size()>0),restful:String($("#restful:checked").size()>0),template:$("#templates option:selected").val(),approve:String($("#approveOnPageSave:checked, #approveOnContentSave:checked").size()>0),pageType:$("#pageType").val(),structureId:$("#structure").val(),structureTemplateId:$("#structureTemplate").val(),keywords:$("#keywords").val(),description:$("#description").val(),dependencies:$("#dependencies").val(),contentType:$("#contentType").val(),headHtml:$("#headHtml").val()});$.cookie("page_template",t.map.template,{path:"/",expires:10}),Heiduc.jsonrpc.pageService.savePage(function(t){"success"==t.result?(e.editMode&&(location.href="#pages"),e.pageId=t.message,Heiduc.info(messages("page.success_save")),location.href="#page/content/"+e.pageId):Heiduc.showServiceMessages(t)},t)}function f(){if(!e.editMode){var t=$("#friendlyUrl").val(),n=$("#title").val();""==t&&$("#friendlyUrl").val(Heiduc.urlFromTitle(n))}}function m(){"SIMPLE"==$("#pageType").val()&&$("#structuredControls").hide(),"STRUCTURED"==$("#pageType").val()&&($("#structuredControls").show(),null!=e.page&&$("#structure").val(e.page.structureId),x())}function g(){var t=e.page.friendlyURL+"?language="+e.currentLanguage+"&version="+e.page.version;window.open(t,"preview")}function v(){location.href="#pages"}function b(){Heiduc.jsonrpc.pageService.approve(function(t){Heiduc.showServiceMessages(t),r()},e.pageId)}function y(){var t=e.pageRequest.pagePermission;t.publishGranted?($("#approveButton").show(),$("#approveOnPageSaveDiv").show()):($("#approveButton").hide(),$("#approveOnPageSaveDiv").hide()),t.changeGranted?$("#pageSaveButton").show():$("#pageSaveButton").hide(),t.admin&&e.editMode?$(".securityTab").show():$(".securityTab").hide(),a()}function w(){var t="";$.each(e.pageRequest.structures.list,function(e,n){var i=0==e?'selected="selected"':"";t+="<option "+i+' value="'+n.id+'">'+n.title+"</option>"}),$("#structure").html(t)}function x(){var t=$("#structure").val();Heiduc.jsonrpc.structureTemplateService.selectByStructure(function(t){var n="";$.each(t.list,function(t,e){var i=0==t?'selected="selected"':"";n+="<option "+i+' value="'+e.id+'">'+e.title+"</option>"}),$("#structureTemplate").html(n),null!=e.page&&$("#structureTemplate").val(e.page.structureTemplateId)},t)}function C(){if(!e.editMode)return'{en:"'+$("#title").val()+'"}'}function S(){var t=e.pageRequest.languages;languages={};$.each(t.list,function(t,e){languages[e.code]=e})}function k(){if(e.editMode){var t=e.pageRequest.contents,n={};e.pageRequest.pagePermission.allLanguages?n=languages:$.each(e.pageRequest.pagePermission.languagesList.list,function(t,e){n[e]=languages[e]}),void 0!=n[Heiduc.ENGLISH_CODE]?e.currentLanguage=Heiduc.ENGLISH_CODE:e.currentLanguage=t.list[0].languageCode}}function T(){Heiduc.jsonrpc.tagService.getTree(function(t){$("#tagTree").html(D(t.list)),$("#tagTree li > a").click(function(){var t=$(this).attr("data-id");t&&E(t)}),$("#tagTree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"tagTree"}),$("#tag-dialog").modal({show:!0})})}function D(t){var e="";return $.each(t,function(t,n){e+=R(n)}),e}function R(t){var e='<li><a data-id="'+t.entity.id+'">'+t.entity.name+"</a>";return t.children.list.length>0&&(e+="<ul>",$.each(t.children.list,function(t,n){e+=R(n)}),e+="</ul>"),e+"</li>"}function E(t){Heiduc.jsonrpc.tagService.addTag(function(t){Heiduc.showServiceMessages(t),$("#tag-dialog").modal({show:!1}),M()},e.page.friendlyURL,t)}function M(){Heiduc.jsonrpc.pageService.getPageTags(function(t){e.pageRequest.tags=t,H()},e.page.friendlyURL)}function H(){var t="";$.each(e.pageRequest.tags.list,function(e,n){t+='<span class="tag">'+n.name+' <a data-id="'+n.id+'"><img src="/static/images/02_x.png"/></a></span>'}),$("#tags").html(t),$("#tags .tag > a").click(function(){var t=$(this).attr("data-id");t&&N(t)})}function N(t){Heiduc.jsonrpc.tagService.removeTag(function(t){Heiduc.showServiceMessages(t),M()},e.page.friendlyURL,t)}console.log("Loading IndexView.js");return Backbone.View.extend({css:"/static/css/jquery.treeview.css",el:$("#tab-1"),tmpl:_.template(t),render:function(){Heiduc.addCSSFile(this.css),this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),o()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/page/children.html",[],function(){return'\n\n<div id="children"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addChildButton" type="button" value="<%= messages("add_child_page") %>" />\n    <input class="btn btn-default" id="deleteChildButton" type="button" value="<%= messages("delete_pages") %>" />\n    <input class="btn btn-default" id="defaultSettingsButton" type="button" value="<%= messages("default_settings") %>" />\n</div>    \n\n\n<div class="modal fade" id="page-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("pages.new_page") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="pageForm">\n      \t\t<div class="form-group">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-lg-12">\n\t\t        \t\t<label><%= messages("pages.page_title") %></label>\n\t\t        \t\t<input id="title" type="text" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-lg-12">\n\t\t        \t\t<label><%= messages("pages.page_url") %></label>\n\t\t        \t\t<span id="parentURL"></span>\n\t\t        \t\t<input id="url" type="text"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t    <div id="pageMessages"></div>\n\t\t    \n\t\t    <div class="modal-footer">\n\t\t        <button id="cancelDlgButton" type="button" class="btn btn-default" data-dismiss="modal"><%= messages("cancel") %></button>\n\t\t        <button type="submit" class="btn btn-primary"><%= messages("save") %></button>\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n'}),define("view/page/ChildrenView",["text!template/page/children.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(t,e,n,i){function o(){e.loadData=s,Heiduc.initJSONRpc(s),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#addChildButton").click(c),$("#deleteChildButton").click(d),$("#defaultSettingsButton").click(m),$("ul.nav-tabs li:nth-child(3)").addClass("active"),$("#cancelDlgButton").click(g),$("#pageForm").submit(function(){return y(),!1}),$("#title").change(v)}function s(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,a(),i.breadcrumbsShow()},e.pageId,e.pageParentUrl)}function a(){e.editMode?(pageId=String(e.page.id),pageParentUrl=e.page.parentUrl,l(),n.loadVersions(),n.showAuditInfo()):pages[1]=e.page,u()}function r(){Heiduc.jsonrpc.pageService.getChildren(function(t){e.pageRequest.children=t,l()},e.page.friendlyURL)}function l(){C=e.pageRequest.children.list;var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("page.friendly_url")+"</th><th></th></tr>";$.each(C,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#page/content/'+n.id+'">'+n.title+"</a></td><td>"+n.friendlyURL+'</td>\t\t\t<td><a class="pageup" data-n="'+e+'"><img src="/static/images/02_up.png"/></a>\t        <a class="pagedown" data-n="'+e+'"><img src="/static/images/02_down.png"/></a>\t        </td></tr>'}),$("#children").html(t+"</table>"),$("#children tr:even").addClass("even"),$("a.pageup").click(function(){p(Number($(this).attr("data-n")))}),$("a.pagedown").click(function(){h(Number($(this).attr("data-n")))})}function c(){$("#ui-dialog-title-page-dialog").text(messages("pages.new_page")),x="/"==e.page.friendlyURL?"":e.page.friendlyURL,$("#page-dialog").modal({show:!0}),$("#parentURL").html(x+"/"),$("#title").val(""),$("#url").val(""),$("#title").focus()}function d(){var t=[];return $("#children input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageService.deletePages(function(t){Heiduc.showServiceMessages(t),r()},Heiduc.javaList(t)))}function u(){var t=e.pageRequest.pagePermission;t.changeGranted?($("#addChildButton").show(),$("#deleteChildButton").show()):($("#addChildButton").hide(),$("#deleteChildButton").hide()),t.admin&&e.editMode?$(".securityTab").show():$(".securityTab").hide()}function p(t){t-1>=0&&(Heiduc.jsonrpc.pageService.moveUp(function(t){},C[t].id),C[t].sortIndex--,C[t-1].sortIndex++,f(t,t-1),r())}function h(t){t+1<C.length&&(Heiduc.jsonrpc.pageService.moveDown(function(t){},C[t].id),C[t+1].sortIndex--,C[t].sortIndex++,f(t,t+1),r())}function f(t,e){var n=C[e];C[e]=C[t],C[t]=n}function m(){Heiduc.jsonrpc.pageService.getPageDefaultSettings(function(t){location.href="#page/"+t.id},e.page.friendlyURL)}function g(){}function v(){var t=$("#url").val(),e=$("#title").val();""==t&&$("#url").val(Heiduc.urlFromTitle(e))}function b(t){return""==t.title?messages("title_is_empty"):t.title.indexOf(",")!=-1?messages("pages.coma_not_allowed"):""==t.url?messages("pages.url_is_empty"):t.url.indexOf("/")!=-1?messages("pages.slash_not_allowed"):void 0}function y(){var t={id:"",title:$("#title").val(),url:$("#url").val(),friendlyUrl:x+"/"+$("#url").val()},e=b(t);e?w(e):Heiduc.jsonrpc.pageService.savePage(function(t){"success"==t.result?(Heiduc.info(messages("pages.success_created")),location.href="#page/content/"+t.message):w(t.message)},Heiduc.javaMap(t))}function w(t){Heiduc.errorMessage("#pageMessages",t)}console.log("Loading ChildrenView.js");var x=null,C=null;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(t),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),o()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/page/comments.html",[],function(){return'\n<div id="comments"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="enableCommentsButton" type="button" \n        value="<%= messages("enable_comments") %>" />\n    <input class="btn btn-default" id="disableCommentsButton" type="button" \n        value="<%= messages("disable_comments") %>" />\n    <input class="btn btn-default" id="deleteCommentsButton" type="button" \n        value="<%= messages("delete_comments") %>" />\n</div>    \n'}),define("view/page/CommentsView",["text!template/page/comments.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(t,e,n,i){function o(){e.loadData=s,e.editMode=""!=e.pageId,Heiduc.initJSONRpc(s),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#enableCommentsButton").click(l),$("#disableCommentsButton").click(c),$("#deleteCommentsButton").click(d),$("ul.nav-tabs li:nth-child(4)").addClass("active")}function s(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,a(),i.breadcrumbsShow()},e.pageId,e.pageParentUrl)}function a(){e.editMode?(e.pageId=String(e.page.id),e.pageParentUrl=e.page.parentUrl,n.loadVersions(),r(),n.showAuditInfo()):e.pages[1]=e.page,u()}function r(){var t=e.pageRequest.comments,n='<table class="table table-striped"><tr><th></th><th>'+messages("state")+"</th><th>"+messages("name")+"</th><th>"+messages("content")+"</th></tr>";$.each(t.list,function(t,e){var i=e.disabled?messages("disabled"):messages("enabled");n+='<tr><td><input type="checkbox" value="'+e.id+'"/></td><td>'+i+"</a></td><td>"+e.name+"</td><td>"+e.content+"</td></tr>"}),$("#comments").html(n+"</table>"),$("#comments tr:even").addClass("even")}function l(){var t=[];return $("#comments input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void Heiduc.jsonrpc.commentService.enableComments(function(t){Heiduc.showServiceMessages(t),s()},Heiduc.javaList(t))}function c(){var t=[];return $("#comments input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void Heiduc.jsonrpc.commentService.disableComments(function(t){Heiduc.showServiceMessages(t),s()},Heiduc.javaList(t))}function d(){var t=[];return $("#comments input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.commentService.deleteComments(function(t){Heiduc.showServiceMessages(t),s()},Heiduc.javaList(t)))}function u(){var t=e.pageRequest.pagePermission;t.changeGranted?($("#enableCommentsButton").show(),$("#disableCommentsButton").show(),$("#deleteCommentsButton").show()):($("#enableCommentsButton").hide(),$("#disableCommentsButton").hide(),$("#deleteCommentsButton").hide()),t.admin&&e.editMode?$(".securityTab").show():$(".securityTab").hide()}return console.log("Loading CommentsView.js"),Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(t),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),o()},remove:function(){this.el.html("")}})}),define("text!template/page/security.html",[],function(){return'  \n<div id="permissions"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addPermissionButton" type="button" \n        value="<%= messages("add_permission") %>" />\n    <input class="btn btn-default" id="deletePermissionButton" type="button" \n        value="<%= messages("delete_permission") %>" />\n</div>    \n\n<div class="modal fade" id="permission-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("permission_details") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="permissionForm">\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("group") %></label>\n\t\t        <select id="groupSelect"></select>\n\t\t        <span id="groupName"></span>        \n\t\t    </div>\n\t\t    <div id="permissionList" class="form-row">\n\t\t        <fieldset>\n\t\t            <legend><%= messages("permission") %></legend>\n\t\t            <input type="radio" name="permission" value="DENIED"/> <%= messages("denied") %> <br />\n\t\t            <input type="radio" name="permission" value="READ" /> <%= messages("read") %> <br />\n\t\t            <input type="radio" name="permission" value="WRITE" /> <%= messages("read_write") %> <br />\n\t\t            <input type="radio" name="permission" value="PUBLISH" /> <%= messages("read_write_publish") %> <br />\n\t\t            <input type="radio" name="permission" value="ADMIN" /> <%= messages("read_write_publish_grant") %> <br />\n\t\t        </fieldset>        \n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("page.all_languages") %></label>\n\t\t        <input id="allLanguages" type="checkbox" checked="checked" />\n\t\t    </div>    \n\t\t    <div id ="permLanguages" class="form-row" style="display:none"> </div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-primary" id="permissionSaveButton" type="submit" \n\t\t            value="<%= messages("save") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="permissionCancelButton" type="button" \n\t\t            value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n'}),define("view/page/SecurityView",["text!template/page/security.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(t,e,n,i){function o(){e.loadData=s,e.editMode=""!=e.pageId,Heiduc.initJSONRpc(s),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),n.initVersionDialog(),$("#addPermissionButton").click(g),$("#deletePermissionButton").click(v),$("#permissionForm").submit(function(){return m(),!1}),$("#permissionCancelButton").click(b),$("#allLanguages").change(y),$("ul.nav-tabs li:nth-child(5)").addClass("active")}function s(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){e.pageRequest=t,e.page=e.pageRequest.page,r(),a(),i.breadcrumbsShow()},e.pageId,e.pageParentUrl)}function a(){e.editMode?(e.pageId=String(e.page.id),e.pageParentUrl=e.page.parentUrl,n.loadVersions(),d(),u()):e.pages[1]=e.page,w()}function r(){var t=e.pageRequest.languages;k={};$.each(t.list,function(t,e){k[e.code]=e}),p()}function l(t){return"DENIED"==t?messages("denied"):"READ"==t?messages("read"):"WRITE"==t?messages("read_write"):"PUBLISH"==t?messages("read_write_publish"):"ADMIN"==t?messages("read_write_publish_grant"):void 0}function c(){Heiduc.jsonrpc.contentPermissionService.selectByUrl(function(t){e.pageRequest.permissions=t,d()},e.page.friendlyURL)}function d(){var t=e.pageRequest.permissions;C=Heiduc.idMap(t.list);var n='<table class="table table-striped"><tr><th></th><th>'+messages("group")+"</th><th>"+messages("permission")+"</th><th>"+messages("languages")+"</th></tr>";$.each(C,function(t,e){var i="",o=e.group.name;e.inherited||(i='<input type="checkbox" value="'+e.id+'">',o='<a data-id="'+e.id+'"> '+e.group.name+"</a>");var s=e.allLanguages?messages("page.all_languages"):e.languages;n+="<tr><td>"+i+"</td><td>"+o+"</td><td>"+l(e.permission)+"</td><td>"+s+"</td></tr>"}),$("#permissions").html(n+"</table>"),$("#permissions tr:even").addClass("even"),$("#permissions a").click(function(){var t=$(this).attr("data-id");t&&h(t)})}function u(){var t=e.pageRequest.groups;S=Heiduc.idMap(t.list);var n="";$.each(S,function(t,e){n+='<option value="'+e.id+'">'+e.name+"</option>"}),$("#groupSelect").html(n)}function p(){var t="<fieldset><legend>"+messages("languages")+"</legend>";$.each(k,function(e,n){t+='<input type="checkbox" value="'+n.code+'" /> '+n.title+"<br />"}),$("#permLanguages").html(t+"</fieldset>")}function h(t){x=C[t],f(),$("#permission-dialog").modal({show:!0})}function f(){if($("#permission-dialog input[type=radio]").removeAttr("checked"),$("#allLanguages").attr("checked","checked"),$("#permLanguages").hide(),null==x)$("#permission-dialog input[value=READ]").attr("checked","checked"),$("#groupSelect").show(),$("#groupName").hide();else if($("#permissionList input[value="+x.permission+"]").attr("checked","checked"),$("#groupSelect").hide(),$("#groupName").show(),$("#groupName").text(x.group.name),!x.allLanguages){$("#allLanguages").removeAttr("checked"),$("#permLanguages").show();var t=x.languages.split(",");$("#permLanguages input").removeAttr("checked"),$.each(t,function(t,e){$("#permLanguages input[value="+e+"]").attr("checked","checked")})}}function m(){var t="";$("#permLanguages input:checked").each(function(){t+=(""==t?"":",")+this.value});var n={url:e.page.friendlyURL,groupId:null==x?$("#groupSelect").val():String(x.group.id),permission:$("#permissionList input:checked")[0].value,languages:$("#allLanguages")[0].checked?"":t};Heiduc.jsonrpc.contentPermissionService.save(function(t){Heiduc.showServiceMessages(t),"success"==t.result&&c()},Heiduc.javaMap(n))}function g(){x=null,f(),$("#permission-dialog").modal({show:!0})}function v(){var t=[];return $("#permissions input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.contentPermissionService.remove(function(t){Heiduc.showServiceMessages(t),c()},Heiduc.javaList(t)))}function b(){}function y(){this.checked?$("#permLanguages").hide():$("#permLanguages").show()}function w(){var t=e.pageRequest.pagePermission;t.admin&&e.editMode?$(".securityTab").show():$(".securityTab").hide()}console.log("Loading SecurityView.js");var x=null,C=null,S=null,k={};return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(t),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),o()},remove:function(){this.el.html("")}})}),define("text!template/page/attributes.html",[],function(){return'\n<div id="attributes"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" \n        value="<%= messages("add_attribute") %>" />\n    <input class="btn btn-default" id="deleteButton" type="button" \n        value="<%= messages("delete_attribute") %>" />\n</div>    \n\n<div class="modal fade" id="attribute-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      \t  <form id="attributeForm">\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("name") %></label>\n\t\t        <input id="name" type="text"/>\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("title") %></label>\n\t\t        <input id="title" type="text"/>\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("default_value") %></label>\n\t\t        <input id="defaultValue" type="text"/>\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("inherited") %></label>\n\t\t        <input type="checkbox" id="inherited" />\n\t\t    </div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="attrValue-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="attrValueForm">\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("name") %></label>\n\t\t        <span id="attrName" />\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("language") %></label>\n\t\t        <select id="language"/>\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("value") %></label>\n\t\t        <input id="value" type="text"/>\n\t\t    </div>\n\t\t    <div id="applyChildren" class="form-row">\n\t\t        <label><%= messages("page.apply_children") %></label>\n\t\t        <input type="checkbox" id="attrInherited" />\n\t\t    </div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-primary" id="saveValueButton" type="submit" value="<%= messages("save") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="cancelValueButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>'}),define("view/page/AttributesView",["text!template/page/attributes.html","view/page/context","view/page/version","view/page/breadcrumbs"],function(attributesHtml,ctx,version,breadcrumbs){function postRender(){ctx.loadData=loadData,ctx.editMode=""!=ctx.pageId,Heiduc.initJSONRpc(loadData),$("a.button").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),version.initVersionDialog(),$("#addButton").click(onAdd),$("#cancelButton").click(function(){}),$("#cancelValueButton").click(function(){}),$("#attributeForm").submit(function(){return onSave(),!1}),$("#attrValueForm").submit(function(){return onSaveValue(),!1}),$("#deleteButton").click(onDelete),$("#language").change(onLanguageChange),$("ul.nav-tabs li:nth-child(7)").addClass("active")}function loadData(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){ctx.pageRequest=t,ctx.page=ctx.pageRequest.page,loadPage(),breadcrumbs.breadcrumbsShow()},ctx.pageId,ctx.pageParentUrl)}function callLoadPage(){Heiduc.jsonrpc.pageService.getPageRequest(function(t){ctx.pageRequest=t,ctx.page=ctx.pageRequest.page,ctx.editMode=null!=ctx.pageId,loadPage()},ctx.pageId,ctx.pageParentUrl)}function loadPage(){ctx.editMode?(ctx.pageId=String(ctx.page.id),ctx.pageParentUrl=ctx.page.parentUrl,version.loadVersions(),loadLanguages(),version.showAuditInfo(),attrValues=ctx.page.attributes?eval("("+ctx.page.attributes+")"):{},loadAttributes()):ctx.pages[1]=ctx.page,loadPagePermission()}function loadLanguages(){var t=ctx.pageRequest.languages;languages={};var e="";$.each(t.list,function(t,n){languages[n.code]=n,e+='<option value="'+n.code+'" >'+n.title+"</option>"}),$("#language").html(e),$("#language").val(Heiduc.ENGLISH_CODE)}function loadPagePermission(){var t=ctx.pageRequest.pagePermission;t.changeGranted?($("#enableCommentsButton").show(),$("#disableCommentsButton").show(),$("#deleteCommentsButton").show()):($("#enableCommentsButton").hide(),$("#disableCommentsButton").hide(),$("#deleteCommentsButton").hide()),t.admin&&ctx.editMode?$(".securityTab").show():$(".securityTab").hide()}function loadAttributes(){Heiduc.jsonrpc.pageAttributeService.getByPage(function(t){attributes=t.list,showAttributes()},ctx.page.friendlyURL)}function showAttributes(){var t='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("value")+"</th><th>"+messages("inherited")+"</th></tr>";$.each(attributes,function(e,n){attributesMap[n.name]=n;var i=n.inherited?messages("inherited"):"";t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a data-name="'+n.name+'">'+n.name+"</a></td><td>"+getAttributeValue(n.name,Heiduc.ENGLISH_CODE)+"</td><td>"+i+"</td></tr>"}),$("#attributes").html(t+"</table>"),$("#attributes tr:even").addClass("even"),$("#attributes a").click(function(){var t=$(this).attr("data-name");t&&onEditValue(t)})}function onAdd(){$("#name").val(""),$("#title").val(""),$("#defaultValue").val(""),$("#inherited").each(function(){this.checked=!1}),$("#attribute-dialog").modal({show:!0})}function onDelete(){var t=[];return $("#attributes input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pageAttributeService.remove(function(t){Heiduc.showServiceMessages(t),
loadData()},Heiduc.javaList(t),ctx.page.id))}function onSave(){var t={id:null==attrDef?"":String(attrDef.id),url:ctx.page.friendlyURL,name:$("#name").val(),title:$("#title").val(),inherited:String($("#inherited:checked").size()>0),defaultValue:$("#defaultValue").val()};Heiduc.jsonrpc.pageAttributeService.save(function(e){"success"==e.result?(Heiduc.info(messages("page.success_save")),loadData(),t.inherited=$("#inherited:checked").size()>0,attributesMap[t.name]=t,t.inherited&&t.defaultValue?loadData():onEditValue(t.name)):Heiduc.showServiceMessages(e)},Heiduc.javaMap(t))}function getAttributeValue(t,e){return attrValues[t]&&attrValues[t][e]?attrValues[t][e]:""}function onEditValue(t){$("#attrValue-dialog").modal({show:!0}),$("#attrName").html(t),$("#attrInherited").each(function(){this.checked=!1}),attributesMap[t].inherited?$("#applyChildren").show():$("#applyChildren").hide();var e=getAttributeValue(t,$("#language").val());!e&&attributesMap[t].defaultValue&&confirm(messages("page.use_default_value"))&&(e=attributesMap[t].defaultValue),$("#value").val(e),$("#language").val(Heiduc.ENGLISH_CODE)}function checkPageAttrValue(t,e){void 0==attrValues[t]&&(attrValues[t]={}),void 0==attrValues[t][e]&&(attrValues[t][e]="")}function setPageAttrValue(t,e,n){checkPageAttrValue(t,e),attrValues[t][e]=n}function getPageAttrValue(t,e){return checkPageAttrValue(t,e),attrValues[t][e]}function onLanguageChange(){var t=$("#attrName").text(),e=$("#language").val(),n=getPageAttrValue(t,e);!n&&attributesMap[t].defaultValue&&confirm(messages("page.use_default_value"))&&(n=attributesMap[t].defaultValue),$("#value").val(n)}function onSaveValue(){var t=$("#attrName").text(),e=$("#language").val(),n=$("#value").val();setPageAttrValue(t,e,n),Heiduc.jsonrpc.pageService.saveAttribute(function(t){"success"==t.result?(Heiduc.info(messages("success")),loadData()):Heiduc.showServiceMessages(t)},ctx.page.id,t,n,e,$("#attrInherited:checked").size()>0)}console.log("Loading AttributesView.js");var attrDef=null,attributes=null,attributesMap={},attrValues={},languages=null;return Backbone.View.extend({el:$("#tab-1"),tmpl:_.template(attributesHtml),render:function(){this.el=$("#tab-1"),this.el.html(this.tmpl({messages:messages})),postRender()},remove:function(){this.el.html("")}})}),define("view/page/PageRouter",["view/page/context","view/page/ContentView","view/page/IndexView","view/page/ChildrenView","view/page/CommentsView","view/page/SecurityView","view/page/AttributesView"],function(t,e,n,i,o,s,a){return console.log("Loading PageRouter.js"),Backbone.Router.extend({pageView:null,currentView:null,contentView:new e,indexView:new n,childrenView:new i,commentsView:new o,securityView:new s,attributesView:new a,initialize:function(t){this.pageView=t.view},show:function(t){Heiduc.app.currentView!=this.pageView&&Heiduc.app.show(this.pageView),this.currentView&&(this.currentView.remove(),this.currentView=null),$("ul.nav-tabs li").removeClass("active"),t.render(),this.currentView=t},routes:{"page/children/:id":"children","page/comments/:id":"comments","page/security/:id":"security","page/attributes/:id":"attributes","page/resources/:id":"resources"},showCmd:function(e){"editContent"==e&&this.editContent(t.pageId),"editPage"==e&&this.editPage(t.pageId)},editContent:function(e){t.pageId=e,this.show(this.contentView)},editPage:function(e){t.pageId=e,this.show(this.indexView)},children:function(e){t.pageId=e,this.show(this.childrenView)},comments:function(e){t.pageId=e,this.show(this.commentsView)},security:function(e){t.pageId=e,this.show(this.securityView)},attributes:function(e){t.pageId=e,this.show(this.attributesView)},resources:function(e){Heiduc.jsonrpc.pageService.getPageRequest(function(n){t.pageRequest=n,t.pageId=e,t.page=t.pageRequest.page,Heiduc.jsonrpc.folderService.createFolderByPath(function(e){jQuery.cookie("folderReturnPath","#page/content/"+t.pageId,{path:"/",expires:10}),location.href="#folder/"+e.id},"/page"+t.page.friendlyURL)},e,"")}})}),define("view/page/PageView",["text!template/page/page.html","view/page/PageRouter","view/page/context"],function(t,e,n){return console.log("Loading PageView.js"),Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/page.css"],el:$("#content"),tmpl:_.template(t),viewCmd:null,router:null,initialize:function(){this.router=new e({view:this})},render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages,id:n.pageId})),this.router.showCmd(this.viewCmd)},remove:function(){this.router.currentView&&this.router.currentView.remove(),this.el.html(""),Heiduc.removeCSSFiles(this.css)},editContent:function(t){n.pageId=t,this.viewCmd="editContent"},editPage:function(t){n.pageId=t,this.viewCmd="editPage"},setResource:function(t){this.router.contentView.setResource(t)}})}),define("text!template/profile.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-heading"><%= messages("profile.title") %></div>\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label><%= messages("profile.username") %></label>\n\t\t\t\t\t\t<input type="text" name="name" id="name" class="form-control"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label><%= messages("profile.user_email") %></label>\n\t\t\t\t\t\t<input disabled="disabled" type="text" name="email" id="email" class="form-control">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label><%= messages("password") %></label>\n\t\t\t\t\t\t<input type="password" name="password1" id="password1" class="form-control">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label><%= messages("profile.retype_password") %></label>\n\t\t\t\t\t\t<input type="password" name="password2" id="password1" class="form-control">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label><%= messages("profile.timezone") %></label>\n\t\t\t\t\t\t<select id="timezone" class="form-control"></select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-sep">\n\t\t\t\t\t\t<input class="btn btn-primary" id="saveButton" type="button" value="<%= messages("save") %>" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n'}),define("view/ProfileView",["text!template/profile.html"],function(t){function e(){Heiduc.initJSONRpc(n),$("#saveButton").click(s)}function n(){Heiduc.jsonrpc.userService.getTimezones(function(t){l=t.list,a(),i()})}function i(){Heiduc.jsonrpc.userService.getLoggedIn(function(t){r=t,$("#name").val(r.name),$("#email").val(r.email),$("#password1").val(""),$("#password2").val(""),$("#timezone").val(r.timezone)})}function o(){var t=$("#password1").val(),e=$("#password2").val();return!t&&!e||t==e}function s(){var t="";if(!o())return void Heiduc.error(messages("profile.password_dont_match"));t=$("#password1").val();var e={id:String(r.id),name:$("#name").val(),timezone:$("#timezone").val(),password:t};Heiduc.jsonrpc.userService.save(function(t){Heiduc.showServiceMessages(t)},Heiduc.javaMap(e))}function a(){var t="";$.each(l,function(e,n){t+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(t)}console.log("Loading ProfileView.js");var r=null,l=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("text!template/plugins/index.html",[],function(){return'\n<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/config.png" />\n\t\t\t        <a href="#plugins/config"><%= messages("plugins.config") %></a>\n\t\t\t        <p><%= messages("plugins.config_info") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/form.png" />\n\t\t\t        <a href="#plugins/forms"><%= messages("forms") %></a>\n\t\t\t        <p><%= messages("plugins.forms_info") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n<div class="row">\n\t\t<div class="col-md-12">\n\t\t\t<div class="panel panel-default">\n\t\t\t\t<div class="panel-body">\n\t\t\t        <img src="/static/images/seo_urls.png" />\n\t\t\t        <a href="#plugins/seo-urls"><%= messages("plugins.seo_urls") %></a>\n\t\t\t        <p><%= messages("plugins.seo_urls_info") %></p>\n\t\t\t    </div>\n\t\t    </div>\n\t\t</div>\n</div>\n\n\n'}),define("view/plugins/PluginsView",["text!template/plugins/index.html"],function(t){return console.log("Loading PluginsView.js"),Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(t,{messages:messages}))},remove:function(){this.el.html("")}})}),define("text!template/plugins/plugin.html",[],function(){return'\n<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" id="plugin-title" href="#tab-1"><%= messages("plugin") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div class="row">\n\t\t                            <div class="col-lg-6">\n\t\t                            \t<div id="properties"></div>\n\t\t\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t\t\t        <input id="saveButton"class="btn btn-primary" type="button" value="<%= messages("save") %>" />\n\t\t\t\t\t\t\t\t\t        <input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t\t\t    </div>\n\t\t                            </div>\n\t                            </div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n\n'}),define("view/plugins/PluginView",["text!template/plugins/plugin.html"],function(t){function e(){Heiduc.initJSONRpc(n),$("#cancelButton").click(s),$("#saveButton").click(d)}function n(){i(),o()}function i(){Heiduc.jsonrpc.pluginService.getById(function(t){u=t,$("#plugin-title").text(u.name+" "+messages("plugin.config")),r()},pluginId)}function o(){Heiduc.jsonrpc.pluginService.getProperties(function(t){p=t.list,r()},pluginId)}function s(){location.href="#plugins"}function a(t){return null==t?"":t}function r(){if(null!=u&&null!=p){var t="",e=l();$.each(p,function(n,i){var o=a(e[i.name.toLowerCase()]?e[i.name.toLowerCase()]:i.defaultValue),s=Heiduc.message(i.title);"String"!=i.type&&"Integer"!=i.type||(t+='<div class="form-group"><label>'+s+'</label><input class="form-control" id="property-'+i.name+'" value="'+Heiduc.escapeHtml(o)+'"/></div>'),"Date"==i.type&&(t+='<div class="form-group"><label>'+s+'</label><input class="form-control" id="property-'+i.name+'"/></div>'),"Boolean"==i.type&&(t+='<div class="form-group"><label>'+s+'</label><input class="form-control" type="checkbox" id="property-'+i.name+'"/></div>'),"Text"==i.type&&(t+='<div class="form-group"><label>'+s+'</label><textarea id="property-'+i.name+'"  class="form-control">'+o+"</textarea></div>")}),$("#properties").html(t),$.each(p,function(t,n){var i="#property-"+n.name,o=e[n.name.toLowerCase()]?e[n.name.toLowerCase()]:"";if("Date"==n.type&&(o&&$(i).val(o),$(i).datepicker({dateFormat:"dd.mm.yy"})),"Boolean"==n.type){var s="true"==o;$(i).each(function(){this.checked=s})}})}}function l(){var t={};if(""!=u.configData){var e=$.xmlDOM(u.configData,function(t){Heiduc.error(messages("plugin.parsing_error")+" "+t)});$(e).find("plugin-config").children().each(function(){t[this.tagName.toLowerCase()]=$(this).text()})}return t}function c(t){$.each(p,function(e,n){var i=t[n.name];if("Integer"==n.type&&NaN==parseInt(i))return messages("plugin.integer_expected")+" "+n.name})}function d(){var t={},e="<plugin-config>\n";$.each(p,function(n,i){var o="#property-"+i.name;"String"!=i.type&&"Integer"!=i.type&&"Date"!=i.type&&"Text"!=i.type||(t[i.name]=$(o).val(),e+="<"+i.name+">"+Heiduc.escapeHtml(t[i.name])+"</"+i.name+">\n"),"Boolean"==i.type&&(t[i.name]=String($(o+":checked").size()>0),e+="<"+i.name+">"+t[i.name]+"</"+i.name+">\n")}),e+="</plugin-config>\n";var n=c(t);n?Heiduc.error(n):Heiduc.jsonrpc.pluginService.savePluginConfig(function(t){Heiduc.showServiceMessages(t)},Number(pluginId),e)}console.log("Loading PluginView.js");var u=null,p=null;return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")},setPluginId:function(t){pluginId=t}})}),define("text!template/plugins/config.html",[],function(){return'\n<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("plugins") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div id="plugins"></div>\n\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t        <input class="btn btn-primary" id="installButton" type="button" value="<%= messages("install_update") %>" />\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("install") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n\t\t    <%= messages("file_upload") %>:\n\t\t    <input type="hidden" name="fileType" value="plugin" />\n\t\t    <input type="file" name="uploadFile" />\n\t\t    <div class="modal-footer">\n\t\t        <input type="submit" class="btn btn-default" value="<%= messages("send") %>" />\n\t\t        <input id="importCancelButton" class="btn btn-default" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>    \n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window") %></h4>\n      </div>\n      <div class="modal-body">\n\t\t    <p class="message"></p>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-default" id="okButton" type="submit" value="OK" />\n\t\t    </div>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n\n'}),define("view/plugins/ConfigView",["text!template/plugins/config.html","jquery.form"],function(t){function e(){Heiduc.initJSONRpc(n),$("#upload").ajaxForm(r),$("#installButton").click(s),$("#importCancelButton").click(a),$("#okButton").click(l)}function n(){i()}function i(){Heiduc.jsonrpc.pluginService.select(function(t){d=t.list,o()})}function o(){var t='<table class="table table-striped"><th>'+messages("title")+"</th>\t       <th>"+messages("name")+"</th><th>"+messages("version")+"</th><th>"+messages("description")+"</th><th>"+messages("website")+"</th><th>"+messages("state")+"</th><th></th></tr>";$.each(d,function(e,n){var i="#plugin/"+n.id;n.configURL&&(i="#addons/"+n.name);var o=n.disabled?messages("disabled"):messages("enabled"),s=n.disabled?Heiduc.message(n.title):'<a href="'+i+'">'+Heiduc.message(n.title)+"</a>";t+="<tr><td>"+s+"</td><td>"+n.name+"</td><td>"+n.version+"</td><td>"+Heiduc.message(n.description)+"</td><td>"+n.website+"</td><td>"+o+'</td><td><a title="Uninstall" class="removeLink" data-index="'+e+'"><img src="/static/images/02_x.png"/></a></td></tr>'}),$("#plugins").html(t+"</table>"),$("#plugins tr:even").addClass("even"),$("#plugins .removeLink").click(function(){c(Number($(this).attr("data-index")))})}function s(){$("#import-dialog").modal({show:!0})}function a(){$("#import-dialog").modal("hide")}function r(t){var e=t.split("::"),n=e[1],i=e[2];i="success"==n?messages("plugins.success_install"):messages("error")+". "+i,$("#import-dialog").modal("hide"),$("#afterUpload-dialog .message").text(i),$("#afterUpload-dialog").modal("show")}function l(){location.reload()}function c(t){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.pluginService.remove(function(e){Heiduc.showServiceMessages(e),"success"==e.result&&(d.splice(t,1),o())},d[t].id)}console.log("Loading ConfigView.js");var d="";return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("text!template/plugins/forms.html",[],function(){return'\n<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("forms") %></a></li>\n\t\t\t\t\t\t\t<li><a id="_config" data-toggle="tab" href="#tab-2"><%= messages("config") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div id="forms"> </div>\n\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t        <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n\t\t\t\t\t\t\t        <input class="btn btn-default" id="deleteButton" type="button" value="<%= messages("delete") %>" />\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-2" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("forms.form_template") %></label>\n\t\t\t\t\t\t\t\t    <div>\n\t\t\t\t\t\t\t\t        <a id="restoreFormTemplateLink" ><%= messages("restore_default") %></a>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t    <div>\n\t\t\t\t\t\t\t\t        <textarea id="formTemplate" rows="20" cols="80"></textarea>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("forms.letter_template") %></label>\n\t\t\t\t\t\t\t\t    <div>\n\t\t\t\t\t\t\t\t        <a id="restoreFormLetterLink" ><%= messages("restore_default") %></a>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t    <div>\n\t\t\t\t\t\t\t\t        <textarea id="letterTemplate" rows="20" cols="80"></textarea>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="buttons">\n\t\t\t\t\t\t\t\t    <input id="saveButton" type="button" value="<%= messages("save") %>" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n\n\n'}),define("view/plugins/FormsView",["text!template/plugins/forms.html","cm-css","cm-js","cm-xml","cm-html"],function(t){function e(){$('a[data-toggle="tab"]').on("shown.bs.tab",n),Heiduc.initJSONRpc(i),$("#addButton").click(s),$("#deleteButton").click(a),$("#restoreFormTemplateLink").click(c),$("#restoreFormLetterLink").click(d),$("#saveButton").click(l)}function n(t){"_config"===t.target.id&&(p.refresh(),h.refresh())}function i(){o(),r()}function o(){Heiduc.jsonrpc.formService.select(function(t){var e='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th><th>"+messages("email")+"</th></tr>";$.each(t.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#plugins/form/'+n.id+'">'+n.title+"</a></td><td>"+n.name+"</td><td>"+n.email+"</td></tr>"}),$("#forms").html(e+"</table>"),$("#forms tr:even").addClass("even")})}function s(){location.href="#plugins/form"}function a(){var t=[];return $("#forms input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.deleteForm(function(t){Heiduc.showServiceMessages(t),o()},Heiduc.javaList(t)))}function r(){Heiduc.jsonrpc.formService.getFormConfig(function(t){u=t,$("#formTemplate").val(t.formTemplate),$("#letterTemplate").val(t.letterTemplate),p=CodeMirror.fromTextArea(document.getElementById("formTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),$(p.getScrollerElement()).css("border","1px solid silver"),h=CodeMirror.fromTextArea(document.getElementById("letterTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),$(h.getScrollerElement()).css("border","1px solid silver")})}function l(){p.save(),h.save();var t=Heiduc.javaMap({formTemplate:$("#formTemplate").val(),letterTemplate:$("#letterTemplate").val()});Heiduc.jsonrpc.formService.saveFormConfig(function(t){Heiduc.showServiceMessages(t)},t)}function c(){Heiduc.jsonrpc.formService.restoreFormTemplate(function(t){Heiduc.showServiceMessages(t),$(".CodeMirror").remove(),r()})}function d(){Heiduc.jsonrpc.formService.restoreFormLetter(function(t){Heiduc.showServiceMessages(t),$(".CodeMirror").remove(),r()})}console.log("Loading FormsView.js");var u="",p=null,h=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#content"),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/plugins/form.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("form") %></a></li>\n\t\t\t\t\t\t\t<li><a data-toggle="tab" href="#tab-2"><%= messages("fields") %></a></li>\n\t\t\t\t\t\t\t<li><a data-toggle="tab" href="#tab-3"><%= messages("saved_data") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<form id="form">\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("title") %></label>\n\t\t\t\t\t\t\t\t    <input id="title" type="text" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("form.unique_name") %></label>\n\t\t\t\t\t\t\t\t    <input id="name" type="text" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("form.email") %></label>\n\t\t\t\t\t\t\t\t    <input id="email" type="text" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("letter_subject") %></label>\n\t\t\t\t\t\t\t\t    <input id="letterSubject" type="text" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("form.send_title") %></label>\n\t\t\t\t\t\t\t\t    <input id="sendButtonTitle" type="text"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("form.reset_title") %></label>\n\t\t\t\t\t\t\t\t    <input id="resetButtonTitle" type="text"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("form.show_reset") %></label>\n\t\t\t\t\t\t\t\t    <input id="showResetButton" type="checkbox"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("enable_captcha") %></label>\n\t\t\t\t\t\t\t\t    <input id="enableCaptcha" type="checkbox"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-row">\n\t\t\t\t\t\t\t\t    <label><%= messages("enable_save") %></label>\n\t\t\t\t\t\t\t\t    <input id="enableSave" type="checkbox"/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="buttons">\n\t\t\t\t\t\t\t\t    <input id="saveButton" type="submit" value="<%= messages("save") %>" />\n\t\t\t\t\t\t\t\t    <input id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-2" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div id="fieldsTable"> </div>\n\t\t\t\t\t\t\t    <div class="buttons">\n\t\t\t\t\t\t\t        <input id="addFieldButton" type="button" value="<%= messages("add_field") %>" />\n\t\t\t\t\t\t\t        <input id="deleteFieldButton" type="button" value="<%= messages("delete_fields") %>" />\n\t\t\t\t\t\t\t    </div>    \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-3" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div id="dataTable"></div>\n\t\t\t\t\t\t\t    <div class="buttons">\n\t\t\t\t\t\t\t        <input id="deleteDataButton" type="button" value="<%= messages("delete") %>" />\n\t\t\t\t\t\t\t    </div> \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div id="field-dialog" style="display:none" title="<%= messages("form.field_details") %>">\n<form id="fieldForm">\n    <div id="field-messages" class="messages"> </div>\n    <div class="form-row">\n        <label><%= messages("title") %></label>\n        <input type="text" name="field.title" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("form.unique_name") %></label>\n        <input type="text" name="field.name" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("form.field_type") %></label>\n        <select id="fieldType" name="field.fieldType">\n            <option value="TEXT">Text</option>\n            <option value="CHECKBOX">Checkbox</option>\n            <option value="RADIO">Radiobox</option>\n            <option value="PASSWORD">Password</option>\n            <option value="LISTBOX">Listbox</option>\n            <option value="FILE">File upload</option>\n        </select>\n    </div>\n    <div class="form-row" id="field-width">\n        <label><%= messages("form.width_chars") %></label>\n        <input type="text" name="field.width" />\n    </div>\n    <div class="form-row" id="field-height">\n        <label><%= messages("form.height_chars") %></label>\n        <input type="text" name="field.height" />\n    </div>\n    <div class="form-row">\n        <label><%= messages("mandatory") %></label>\n        <input type="checkbox" name="field.mandatory" />\n    </div>\n    <div class="form-row" id="field-values">\n        <label><%= messages("values") %></label>\n        <textarea name="field.values"></textarea>\n    </div>\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("default_value") %></label>\n        <input type="text" name="field.defaultValue"/>\n    </div>\n    <div id="regexDiv">\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("form.regex_code") %></label>\n        <input type="text" name="field.regex"/>\n    </div>\n    <div class="form-row" id="field-defaultValue">\n        <label><%= messages("form.regex_message") %></label>\n        <select id="language"></select> \n        <input type="text" name="field.regexMessage"/>\n    </div>\n    </div>\n    <div class="buttons-dlg">\n        <input id="saveAndAddButton" type="submit" value="<%= messages("save_add") %>" />\n        <input id="fieldSaveButton" type="button" value="<%= messages("save") %>" />\n        <input id="fieldCancelButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n</form>\n</div>\n\n<div id="formData-dialog" style="display:none" title="<%= messages("form.form_data") %>">\n<form id="formDataForm">\n    <div id="formData"></div>\n    <div class="buttons-dlg">\n        <input id="formDataSendButton" type="button" value="<%= messages("send") %>" />\n        <input id="formDataCancelButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n</form>\n</div>\n'}),define("view/plugins/FormView",["text!template/plugins/form.html"],function(t){function e(){V=""!=z,Heiduc.initJSONRpc(n),$("#title").change(S),$("#language").change(H),$('input[name="field.regexMessage"]').change(M),$("#form").submit(function(){return x(),!1}),$("#cancelButton").click(C),$("#addFieldButton").click(r),$("#deleteFieldButton").click(b),$("#fieldType").change(d),$("#fieldForm").submit(function(){return y(),!1}),$("#fieldSaveButton").click(function(){c(!0)}),$("#fieldCancelButton").click(l),$('input[name="field.title"]').change(k),$("#deleteDataButton").click(I),$("#formDataCancelButton").click(function(){$("#formData-dialog").dialog("close")}),$("#formDataSendButton").click(O)}function n(){w(),o(),i()}function i(){Heiduc.jsonrpc.languageService.select(function(t){var e="";$.each(t.list,function(t,n){B[n.code]=n,e+='<option value="'+n.code+'">'+n.title+"</option>"}),$("#language").html(e)})}function o(){""!=z&&Heiduc.jsonrpc.fieldService.getByForm(function(t,e){q=t.list,s()},z)}function s(){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th><th>"+messages("type")+"</th><th></th></tr>";$.each(q,function(e,n){t+='<tr>\t\t\t\t<td><input type="checkbox" name="item'+e+'" value="'+n.id+'"/></td>\t\t\t\t<td><a class="fieldEdit" data-id="'+n.id+'">'+n.title+"</a></td>\t\t\t\t<td>"+n.name+"</td>\t\t\t\t<td>"+a(n.fieldType)+'</td>\t\t\t\t<td><a class="fieldUp" data-index="'+e+'"><img src="/static/images/02_up.png"/></a>\t\t\t\t    <a class="fieldDown" data-index="'+e+'"><img src="/static/images/02_down.png"/></a>\t\t\t\t</td>\t\t\t\t</tr>'}),$("#fieldsTable").html(t+"</table>"),$("#fieldsTable tr:even").addClass("even"),$("#fieldsTable .fieldEdit").click(function(){v($(this).attr("data-id"))}),$("#fieldsTable .fieldUp").click(function(){T($(this).attr("data-index"))}),$("#fieldsTable .fieldDown").click(function(){D($(this).attr("data-index"))})}function a(t){return"TEXT"==t?"Text":"CHECKBOX"==t?"Checkbox":"RADIO"==t?"Radiobox":"PASSWORD"==t?"Password":"LISTBOX"==t?"Listbox":"FILE"==t?"File upload":"undefined"}function r(){U=null,p(),$("#field-dialog").dialog("open")}function l(){$("#field-dialog").dialog("close")}function c(t){var e=h(),n=f(e);0==n.length?Heiduc.jsonrpc.fieldService.updateField(function(e,n){"success"==e.result?(t&&$("#field-dialog").dialog("close"),o()):m(e.messages.list)},e):m(n)}function d(){u()}function u(){var t=$('select[name="field.fieldType"]').val();"TEXT"==t&&($("#field-values").hide(),$("#field-height").show(),$("#field-width").show(),$("#field-defaultValue").show(),$("#regexDiv").show()),"LISTBOX"==t&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),"CHECKBOX"==t&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),"RADIO"==t&&($("#field-values").show(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),
$("#regexDiv").hide()),"PASSWORD"==t&&($("#field-values").hide(),$("#field-height").hide(),$("#field-width").show(),$("#field-defaultValue").hide(),$("#regexDiv").hide()),"FILE"==t&&($("#field-values").hide(),$("#field-height").hide(),$("#field-width").hide(),$("#field-defaultValue").hide(),$("#regexDiv").hide())}function p(){null==U?(W={},$('input[name="field.name"]').val(""),$('input[name="field.title"]').val(""),$('select[name="field.fieldType"]').val("TEXT"),$('textarea[name="field.values"]').val(""),$('input[name="field.defaultValue"]').val(""),$('input[name="field.height"]').val("1"),$('input[name="field.width"]').val("20"),$('input[name="field.mandatory"]')[0].checked=!1,$('input[name="field.regex"]').val(""),$('input[name="field.regexMessage"]').val("")):($('input[name="field.name"]').val(U.name),$('input[name="field.title"]').val(U.title),$('select[name="field.fieldType"]').val(U.fieldType),$('textarea[name="field.values"]').val(U.values),$('input[name="field.defaultValue"]').val(U.defaultValue),$('input[name="field.height"]').val(U.height),$('input[name="field.width"]').val(U.width),$('input[name="field.mandatory"]')[0].checked=U.optional,$('input[name="field.regex"]').val(U.regex),$('input[name="field.regexMessage"]').val(E())),u(),g()}function h(){var t=null!=U?U.index:null==q?0:q.length;return Heiduc.javaMap({id:null!=U?String(U.id):null,formId:z,name:$('input[name="field.name"]').val(),title:$('input[name="field.title"]').val(),fieldType:$('select[name="field.fieldType"]').val(),values:$('textarea[name="field.values"]').val(),defaultValue:$('input[name="field.defaultValue"]').val(),height:$('input[name="field.height"]').val(),width:$('input[name="field.width"]').val(),index:String(t),regex:$('input[name="field.regex"]').val(),regexMessage:N(),mandatory:String($('input[name="field.mandatory"]:checked').size()>0)})}function f(t){var e=new Array;""==t.map.name&&e.push(messages("name_is_empty")),""==t.map.title&&e.push(messages("title_is_empty"));var n=Number(t.map.height);"TEXT"==t.map.fieldType&&n<=0&&e.push(messages("form.height_zero_error"));var i=Number(t.map.width);return"TEXT"==t.map.fieldType&&i<=0&&e.push(messages("form.width_zero_error")),e}function m(t){Heiduc.errorMessages("#field-messages",t)}function g(){$("#field-messages").html("")}function v(t){g(),Heiduc.jsonrpc.fieldService.getById(function(t){U=t,P(),p(),$("#field-dialog").dialog("open")},t)}function b(){var t=new Array;return $("input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.fieldService.remove(function(e){"success"==e.result?(Heiduc.info(t.length+" "+messages("form.success_field_delete")+"."),o()):Heiduc.showServiceMessages(e)},Heiduc.javaList(t)))}function y(){c(!1),r()}function w(){Heiduc.jsonrpc.formService.getForm(function(t){F=t,L(),null!=t?($("#title").val(t.title),$("#name").val(t.name),$("#email").val(t.email),$("#letterSubject").val(t.letterSubject),$("#sendButtonTitle").val(t.sendButtonTitle),$("#resetButtonTitle").val(t.resetButtonTitle),$("#showResetButton").each(function(){this.checked=t.showResetButton}),$("#enableCaptcha").each(function(){this.checked=t.enableCaptcha}),$("#enableSave").each(function(){this.checked=t.enableSave}),$(".fieldsTab").show()):($("#title").val(""),$("#name").val(""),$("#email").val(""),$("#letterSubject").val(""),$("#sendButtonTitle").val(""),$("#resetButtonTitle").val(""),$("#showResetButton").each(function(){this.checked=!1}),$("#enableCaptcha").each(function(){this.checked=!1}),$("#enableSave").each(function(){this.checked=!1}),$(".fieldsTab").hide())},z)}function x(){var t=Heiduc.javaMap({id:z,title:$("#title").val(),name:$("#name").val(),email:$("#email").val(),letterSubject:$("#letterSubject").val(),sendButtonTitle:$("#sendButtonTitle").val(),resetButtonTitle:$("#resetButtonTitle").val(),showResetButton:String($("#showResetButton:checked").size()>0),enableCaptcha:String($("#enableCaptcha:checked").size()>0),enableSave:String($("#enableSave:checked").size()>0)});Heiduc.jsonrpc.formService.saveForm(function(t){"success"==t.result?V?location.href="#plugins/forms":(z=t.message,V=!0,n(),Heiduc.info(messages("form.success_create"))):Heiduc.showServiceMessages(t)},t)}function C(){location.href="#plugins/forms"}function S(){if(!V){var t=$("#name").val(),e=$("#title").val();""==t&&$("#name").val(Heiduc.urlFromTitle(e))}}function k(){if(null==U){var t=$('input[name="field.name"]').val(),e=$('input[name="field.title"]').val();""==t&&$('input[name="field.name"]').val(Heiduc.urlFromTitle(e))}}function T(t){t-1>=0&&(Heiduc.jsonrpc.fieldService.moveUp(function(t){},z,q[t].id),q[t].index--,q[t-1].index++,R(t,t-1),s())}function D(t){t+1<q.length&&(Heiduc.jsonrpc.fieldService.moveDown(function(t){},z,q[t].id),q[t+1].index--,q[t].index++,R(t,t+1),s())}function R(t,e){var n=q[e];q[e]=q[t],q[t]=n}function E(){return W[$("#language").val()]?W[$("#language").val()]:""}function M(){W[$("#language").val()]=$('input[name="field.regexMessage"]').val()}function H(){$('input[name="field.regexMessage"]').val(W[$("#language").val()])}function N(){var t="",e=0;return $.each(W,function(n,i){t+=(0==e++?"":"::")+n+i}),t}function P(){U.regexMessage?$.each(U.regexMessage.split("::"),function(t,e){var n=e.substr(0,2),i=e.substr(2);W[n]=i}):W={}}function L(){null==F?(Y=[],A()):Heiduc.jsonrpc.formService.getFormData(function(t){Y=t.list,A()},F.id)}function A(){var t='<table class="table table-striped"><tr><th></th><th>'+messages("ip_address")+"</th><th>"+messages("date")+"</th></tr>";$.each(Y,function(e,n){t+='<tr><td><input type="checkbox" name="item'+e+'" value="'+n.id+'"/></td><td>'+n.ipAddress+'</td><td><a class="showForm" data-index="'+e+'">'+new Date(n.modDate.time).toLocaleString()+"</a></td></tr>"}),$("#dataTable").html(t+"</table>"),$("#dataTable tr:even").addClass("even"),$("#dataTable a.showForm").click(function(){j($(this).attr("data-index"))})}function I(){var t=new Array;return $("#dataTable input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.removeData(function(e){"success"==e.result?(Heiduc.info(t.length+" "+messages("form.success_records_delete")+"."),n()):Heiduc.showServiceMessages(e)},Heiduc.javaList(t)))}function j(t){X=t;var e=Y[t],n='<table class="table table-striped"><tr><th>'+messages("name")+"</th><th>"+messages("value")+"</th></tr>";$.each(e.values.map,function(t,e){var i=e;if(0==i.indexOf("/file/form")){var o=i.split("/"),s=o[o.length-1];i='<a href="'+i+'">'+s+"</a>"}n+="<tr><td>"+t+"</td><td>"+i+"</td></tr>"}),$("#formData").html(n+"</table>"),$("#formData tr:even").addClass("even"),$("#formData-dialog").dialog("open")}function O(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.formService.sendFormLetter(function(t){Heiduc.showServiceMessages(t)},Y[X].id)}console.log("Loading FormView.js");var z="",F=null,B={},V=""!=z,U=null,q=null,W={},Y=null,X=0;return Backbone.View.extend({css:"/static/css/form.css",el:$("#content"),tmpl:_.template(t),render:function(){Heiduc.addCSSFile(this.css),this.el.html(this.tmpl({messages:messages})),e()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)},setId:function(t){z=t}})}),define("text!template/plugins/seo-urls.html",[],function(){return'\n<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("plugins.seo_urls") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<div id="urls"><img src="/static/images/ajax-loader.gif" /></div>\n\n\t\t\t\t\t\t\t\t<div class="form-sep">\n\t\t\t\t\t\t\t\t    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n\t\t\t\t\t\t\t\t    <input class="btn btn-default" id="removeButton" type="button" value="<%= messages("remove") %>" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="modal fade" id="url-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("seo_urls.details") %></h4>\n      </div>\n      <div class="modal-body">\n      \t\n      \t<form id="seoForm">\n\t\t    <div id="url-messages" class="messages"> </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("seo_urls.from_link") %></label>\n\t\t        <input id="fromLink" type="text" />\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("seo_urls.to_link") %></label>\n\t\t        <input id="toLink" type="text" />\n\t\t    </div>\n\t\t    <div class="modal-footer">\n\t\t        <input id="saveAndAddButton" class="btn btn-default" type="button" value="<%= messages("save_add") %>" />\n\t\t        <input id="saveDlgButton" class="btn btn-default" type="submit" value="<%= messages("save") %>" />\n\t\t        <input id="cancelDlgButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n'}),define("view/plugins/SeoUrlsView",["text!template/plugins/seo-urls.html"],function(t){function e(){Heiduc.initJSONRpc(n),$("#addButton").click(o),$("#removeButton").click(a),$("#saveAndAddButton").click(r),$("#seoForm").submit(function(){return c(!0),!1}),$("#cancelDlgButton").click(d)}function n(){Heiduc.jsonrpc.seoUrlService.select(function(t){var e='<table class="table table-striped"><tr><th></th><th>'+messages("from")+"</th><th>"+messages("to")+"</th></tr>";$.each(t.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a data-id="'+n.id+'">'+n.fromLink+"</a></td><td>"+n.toLink+"</td></tr>"}),$("#urls").html(e+"</table>"),$("#urls tr:even").addClass("even"),$("#urls a").click(function(){i($(this).attr("data-id"))})})}function i(t){u(),Heiduc.jsonrpc.seoUrlService.getById(function(t){h=t,s(),$("#url-dialog").modal({show:!0})},t)}function o(){h=null,s(),$("#url-dialog").modal({show:!0})}function s(){u(),null==h?($("#fromLink").val(""),$("#toLink").val("")):($("#fromLink").val(h.fromLink),$("#toLink").val(h.toLink))}function a(){var t=new Array;return $("#urls input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.seoUrlService.remove(function(t){Heiduc.showServiceMessages(t),n()},Heiduc.javaList(t)))}function r(){c(!1,!0)}function l(t){var e=new Array;return""==t.fromLink&&e.push(messages("seo_urls.from_link_empty")),""==t.toLink&&e.push(messages("seo_urls.to_link_empty")),e}function c(t,e){var i={id:null!=h?String(h.id):"",fromLink:$("#fromLink").val(),toLink:$("#toLink").val()},s=l(i);0==s.length?Heiduc.jsonrpc.seoUrlService.save(function(i){"success"==i.result?(t&&$("#url-dialog").modal("hide"),n(),e&&o()):p(i.messages.list)},Heiduc.javaMap(i)):p(s)}function d(){$("#url-dialog").modal("hide")}function u(){$("#url-messages").html("")}function p(t){Heiduc.errorMessages("#url-messages",t)}console.log("Loading SeoUrlsView.js");var h=null;return Backbone.View.extend({css:"/static/css/form.css",el:$("#content"),render:function(){Heiduc.addCSSFile(this.css),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("view/plugins/AddonsView",[],function(){function t(){Heiduc.jsonrpc.pluginService.getByName(function(t){n=t;var e="/file/plugins/"+n.name+"/"+n.configURL;$("#addons").load(e)},e.split("/")[0])}console.log("Loading AddonsView.js");var e=null,n=null,i='<div id="addons" class="row"></div>';return Backbone.View.extend({el:$("#content"),render:function(){this.el.html(_.template(i,{messages:messages})),t()},remove:function(){this.el.html("")},setAddonsId:function(t){e=t}})}),define("text!template/config/config.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs">\n\t\t\t\t\t\t\t<li><a href="#config"><%= messages("config.title") %></a></li>\n\t\t\t\t\t\t    <li><a href="#config/comments"><%= messages("comments") %></a></li>\n\t\t\t\t\t\t    <li><a href="#config/languages"><%= messages("languages") %></a></li>\n\t\t\t\t\t\t    <li><a href="#config/messages"><%= messages("message_bundle") %></a></li>\n\t\t\t\t\t\t    <li><a href="#config/users"><%= messages("users") %></a>\n\t\t\t\t\t\t    <li><a href="#config/groups"><%= messages("groups") %></a></li>\n\t\t\t\t\t\t    <li><a href="#config/tags"><%= messages("tags") %></a></li>\n\t\t\t\t\t\t    <li><a href="#config/attributes"><%= messages("attributes") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="modal fade" id="import-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.import_site") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n\t\t    <%= messages("file_upload") %>:\n\t\t    <input type="hidden" name="fileType" value="import" />\n\t\t    <input type="file" name="uploadFile" />\n\t\t    <div class="modal-footer">\n\t\t    \t<input type="submit" class="btn btn-default" value="<%= messages("send") %>" />\n\t\t        <input id="importCancelButton" data-dismiss="modal" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>    \n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="afterUpload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("status_window") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="okForm">\n\t\t    <p class="message"></p>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-default" id="okButton" type="submit" value="OK" />\n\t\t    </div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("export_window") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="exportForm">\n\t\t    <div class="form-row">\n\t\t    <input type="radio" name="exportType" value="full" />\n\t\t        <%= messages("config.full_export") %> <br/>\n\t\t    <input type="radio" name="exportType" value="site" checked="checked"/>\n\t\t        <%= messages("config.export_site") %> <br/>\n\t\t    <input type="radio" name="exportType" value="resources"/>\n\t\t        <%= messages("resources") %> <br/>\n\t\t    </div>\n\t\t    <div id="exportInfo" class="form-row"></div>    \n\t\t    <div id="timer" class="form-row"></div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-default" id="exportDialogButton" type="submit" value="<%= messages("export") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="exportCancelButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="stat-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("stat") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<div class="form-row">\n\t    \t<label><%= messages("pages") %>:</label>\n\t    \t<span id="statPages"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("stat.page_permissions") %>:</label>\n\t    \t<span id="statPagePermissions"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("structures") %>:</label>\n\t    \t<span id="statStructures"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("stat.structure_templates") %>:</label>\n\t    \t<span id="statStructureTemplates"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("templates") %>:</label>\n\t    \t<span id="statTemplates"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("folders") %>:</label>\n\t    \t<span id="statFolders"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("stat.folder_permissions") %>:</label>\n\t    \t<span id="statFolderPermissions"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("files") %>:</label>\n\t    \t<span id="statFiles"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("languages") %>:</label>\n\t    \t<span id="statLanguages"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("messages") %>:</label>\n\t    \t<span id="statMessages"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("users") %>:</label>\n\t    \t<span id="statUsers"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("groups") %>:</label>\n\t    \t<span id="statGroups"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><%= messages("tags") %>:</label>\n\t    \t<span id="statTags"></span>\n\t    </div>\n\t    <div class="form-row">\n\t    \t<label><b><%= messages("stat.total") %>:</b></label>\n\t    \t<span id="statTotal" style="font-weight:bold;"></span>\n\t    </div>\n\t    <div class="modal-footer">\n\t        <input class="btn btn-default" id="statOKButton" data-dismiss="modal" type="button" value="OK" />\n\t    </div>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n'}),define("text!template/config/index.html",[],function(){return'<form id="configForm">\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n        \t\t<label><%= messages("site_domain") %></label>\n        \t\t<input id="siteDomain" type="text"  class="form-control"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label></label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t<input type="checkbox" id="enableCkeditor" value=""> <%= messages("config.enable_ckeditor") %>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label></label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input id="enableRecaptcha" type="checkbox"/> <%= messages("config.enable_recaptcha") %>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div id="recaptcha" class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("config.recaptcha_public_key") %></label>\n        \t\t<input id="recaptchaPublicKey" type="text" class="form-control" />\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n        \t\t<label><%= messages("config.recaptcha_private_key") %></label>\n        \t\t<input id="recaptchaPrivateKey" type="text"  class="form-control"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label><%= messages("config.edit_extension") %></label>\n        \t\t<input id="editExt" class="form-control" type="text" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("config.login_url") %></label>\n        \t\t<input id="siteUserLoginUrl" class="form-control" type="text" />\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n        \t\t<label><%= messages("config.404_url") %></label>\n        \t\t<input id="site404Url" class="form-control" type="text" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("profile.timezone") %></label>\n        \t\t<select id="timezone" class="form-control"></select>\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n        \t\t<label><%= messages("page.select_language") %></label>\n        \t\t<select id="language" class="form-control"></select>\n        \t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label></label>\n\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t<input type="checkbox" id="enablePicasa" value=""> <%= messages("config.enable_picasa") %>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div id="picasa" class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label>Picasa <%= messages("user_email") %></label>\n        \t\t<input id="picasaUser" class="form-control" type="text" />\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n        \t\t<label>Picasa <%= messages("password") %></label>\n        \t\t<input id="picasaPassword" class="form-control" type="password" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-6">\n        \t\t<label>Google Analytics ID</label>\n        \t\t<input id="googleAnalyticsId" type="text"  class="form-control"/>\n\t\t\t</div>\n\t\t\t<div class="col-lg-6">\n\t\t\t\t<label><%= messages("config.db_version") %></label>\n\t\t\t\t<span id="version" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<label><%= messages("config.site_owner_email") %></label>\n        \t\t<input id="siteEmail" type="text"  class="form-control"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-sep">\n\t\t<input id="saveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n\t\t<input id="exportButton" type="button" class="btn" value="<%= messages("export") %>"/>\n\t\t<input id="importButton" type="button" class="btn" value="<%= messages("import") %>"/>\n\t\t<input id="reindexButton" type="button" class="btn" value="<%= messages("config.create_search_index") %>"/>\n\t\t<input id="resetButton" type="button" class="btn" value="<%= messages("reset") %>"/>\n\t\t<input id="loadDefaultSiteButton" type="button" class="btn" value="<%= messages("config.load_default_site") %>"/>\n\t\t<input id="cacheResetButton" type="button" class="btn" value="<%= messages("config.cache_reset") %>"/>\n\t\t<input id="statButton" type="button" class="btn" value="<%= messages("stat") %>"/>\n\t</div>\n\t\n\t\n</form>'}),define("view/config/IndexView",["text!template/config/index.html"],function(t){function e(){$("#upload").ajaxForm(c),Heiduc.initJSONRpc(n),$("#enableRecaptcha").click(r),$("#configForm").submit(function(){return m(),!1}),$("#exportButton").click(g),$("#importButton").click(d),$("#importCancelButton").click(u),$("#resetButton").click(x),$("#cacheResetButton").click(S),$("#reindexButton").click(C),$("#loadDefaultSiteButton").click(k),$("#okForm").submit(function(){return p(),!1}),$("#exportForm").submit(function(){return b(),!1}),$("#exportCancelButton").click(v),$("ul.nav-tabs li:nth-child(1)").addClass("active"),$("#enablePicasa").click(l),$("#statButton").click(T)}function n(){h(),i(),o()}function i(){Heiduc.jsonrpc.userService.getTimezones(function(t){P=t.list,s()})}function o(){Heiduc.jsonrpc.languageService.select(function(t){L=t.list,a()})}function s(){var t="";$.each(P,function(e,n){t+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(t),$("#timezone").val(D.defaultTimezone)}function a(){var t="";$.each(L,function(e,n){t+='<option value="'+n.code+'" >'+n.title+"</option>"}),$("#language").html(t),$("#language").val(D.defaultLanguage)}function r(){var t=$("#enableRecaptcha:checked").size()>0;t?$("#recaptcha").show():$("#recaptcha").hide()}function l(){var t=$("#enablePicasa:checked").size()>0;t?$("#picasa").show():$("#picasa").hide()}function c(t){var e=t.split("::"),n=e[1],i=e[2];i="success"==n?messages("config.saved_for_import"):messages("error")+". "+i,$("#import-dialog").modal("hide"),$("#afterUpload-dialog .message").text(i),$("#afterUpload-dialog").modal({show:!0})}function d(){$("#import-dialog").modal({show:!0})}function u(){$("#import-dialog").modal("hide")}function p(){$("#afterUpload-dialog").modal("hide"),n()}function h(){Heiduc.jsonrpc.configService.getConfig(function(t){D=t,f()})}function f(){$("#version").html(D.version),$("#googleAnalyticsId").val(D.googleAnalyticsId),$("#siteEmail").val(D.siteEmail),$("#siteDomain").val(D.siteDomain),$("#enableRecaptcha").each(function(){this.checked=D.enableRecaptcha}),$("#recaptchaPublicKey").val(D.recaptchaPublicKey),$("#recaptchaPrivateKey").val(D.recaptchaPrivateKey),r(),$("#editExt").val(D.editExt),$("#siteUserLoginUrl").val(D.siteUserLoginUrl),$("#site404Url").val(D.site404Url),$("#enablePicasa").each(function(){this.checked=D.enablePicasa}),$("#enableCkeditor").each(function(){this.checked=D.enableCkeditor}),$("#picasaUser").val(D.picasaUser),$("#picasaPassword").val(D.picasaPassword),l()}function m(){var t=Heiduc.javaMap({googleAnalyticsId:$("#googleAnalyticsId").val(),siteEmail:$("#siteEmail").val(),siteDomain:$("#siteDomain").val(),enableRecaptcha:String($("#enableRecaptcha:checked").size()>0),recaptchaPublicKey:$("#recaptchaPublicKey").val(),recaptchaPrivateKey:$("#recaptchaPrivateKey").val(),enablePicasa:String($("#enablePicasa:checked").size()>0),enableCkeditor:String($("#enableCkeditor:checked").size()>0),picasaUser:$("#picasaUser").val(),picasaPassword:$("#picasaPassword").val(),editExt:$("#editExt").val(),defaultTimezone:$("#timezone").val(),defaultLanguage:$("#language").val(),siteUserLoginUrl:$("#siteUserLoginUrl").val(),site404Url:$("#site404Url").val()});Heiduc.jsonrpc.configService.saveConfig(function(t){Heiduc.showServiceMessages(t)},t)}function g(){$("#export-dialog").modal({show:!0})}function v(){clearInterval(R),clearInterval(E)}function b(){$("#exportDialogButton").attr("disabled",!0),M=0,w(),N=$("input[name=exportType]:checked").val(),Heiduc.jsonrpc.configService.startExportTask(function(t){"success"==t.result?(H=t.message,Heiduc.info(messages("creating_export_file")),R=setInterval(y,1e4),E=setInterval(w,1e3)):Heiduc.showServiceMessages(t)},N)}function y(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(t){t&&(clearInterval(R),clearInterval(E),$("#export-dialog").modal("hide"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+H)},N)}function w(){$("#timer").html(M++ +" sec.")}function x(){confirm(messages("config.reset_warning1"))&&confirm(messages("config.reset_warning2"))&&Heiduc.jsonrpc.configService.reset(function(t){Heiduc.showServiceMessages(t),"success"==t.result&&(location.href="/")})}function C(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.reindex(function(t){Heiduc.showServiceMessages(t)})}function S(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.cacheReset(function(t){Heiduc.showServiceMessages(t)})}function k(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.loadDefaultSite(function(t){Heiduc.showServiceMessages(t)})}function T(){Heiduc.jsonrpc.configService.getSiteStat(function(t){$("#statPages").text(t.pages),$("#statPagePermissions").text(t.pagePermissions),$("#statStructures").text(t.structures),$("#statStructureTemplates").text(t.structureTemplates),$("#statTemplates").text(t.templates),$("#statFolders").text(t.folders),$("#statFolderPermissions").text(t.folderPermissions),$("#statFiles").text(t.files),$("#statLanguages").text(t.languages),$("#statMessages").text(t.messages),$("#statUsers").text(t.users),$("#statGroups").text(t.groups),$("#statTags").text(t.tags),$("#statTotal").text(t.total),$("#stat-dialog").modal({show:!0})})}console.log("Loading IndexView.js");var D="",R=null,E=null,M=0,H=null,N=null,P=null,L=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("text!template/config/comments.html",[],function(){return'\n<form id="commentsForm">\n\t\n\t<div class="form-group">\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n        \t\t<label><%= messages("config.comments_email") %></label>\n        \t\t<input id="commentsEmail" type="text"  class="form-control"/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row">\n\t\t\t<div class="col-lg-12">\n        \t\t<label><%= messages("config.comments_template") %></label>\n        \t\t<textarea id="commentsTemplate" class="form-control" cols="80" rows="20"></textarea>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<div class="form-sep">\n\t\t<input id="commentsSaveButton" type="submit" class="btn btn-primary" value="<%= messages("save") %>"/>\n\t\t<button id="restoreButton" class="btn"><%= messages("restore_default") %></button>\n\t\t</div>\n\t</div>\n\n</form>\n\n\n'}),define("view/config/CommentsView",["text!template/config/comments.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(t){function e(){Heiduc.initJSONRpc(n),$("#commentsForm").submit(function(){return s(),!1}),$("#restoreButton").click(a),$("ul.nav-tabs li:nth-child(2)").addClass("active")}function n(){i()}function i(){Heiduc.jsonrpc.configService.getConfig(function(t){r=t,o()})}function o(){$("#commentsEmail").val(r.commentsEmail),$("#commentsTemplate").val(r.commentsTemplate),l=CodeMirror.fromTextArea(document.getElementById("commentsTemplate"),{lineNumbers:!0,theme:"eclipse",mode:"htmlmixed"}),l.focus(),$(l.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),l.refresh()}function s(){l.save();var t=Heiduc.javaMap({commentsEmail:$("#commentsEmail").val(),commentsTemplate:$("#commentsTemplate").val()});Heiduc.jsonrpc.configService.saveConfig(function(t){Heiduc.showServiceMessages(t)},t)}function a(){Heiduc.jsonrpc.configService.restoreCommentsTemplate(function(t){Heiduc.showServiceMessages(t),i()})}console.log("Loading CommentsView.js");var r="",l=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css"],el:$("#tab-1"),render:function(){Heiduc.addCSSFiles(this.css),this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css);
}})}),define("text!template/config/languages.html",[],function(){return'<div id="languages"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addLanguageButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeLanguageButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="language-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.site_language") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="languageForm">\n\t\t    <div id="pageMessages"></div>\n\t\t    <div id="languageSelection" style="padding-bottom: 10px;">\n        <input id="selectFromListRadio" type="radio" name="select" \n            checked="checked" /> <%= messages("select_from_list") %>\n        <input id="notInListRadio" type="radio" name="select" />\n            <%= messages("config.not_in_list") %> \n    </div>        \n    <div id="listed-language">\n        <select id="selectLanguage"></select>\n    </div>\n    <div id="not-listed-language" style="display:none">\n    <div class="form-row">\n        <label><%= messages("language") %> <a href="http://ftp.ics.uci.edu/pub/ietf/http/related/iso639.txt">iso639</a> 2 letter code</label>\n        <input id="languageCode" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("title") %></label>\n        <input id="languageTitle" type="text"/>\n    </div>\n    </div>\n    <div class="modal-footer">\n        <input class="btn btn-primary" id="languageSaveButton" type="submit" value="<%= messages("save") %>" />\n        <input class="btn btn-default" id="languageCancelButton" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n    </div>\n  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/LanguagesView",["text!template/config/languages.html"],function(t){function e(){Heiduc.initJSONRpc(n),u(),$("#selectFromListRadio").click(function(){p(!0)}),$("#notInListRadio").click(function(){p(!1)}),$("#languageForm").submit(function(){return r(),!1}),$("#selectLanguage").change(h),$("#languageCancelButton").click(l),$("#addLanguageButton").click(i),$("#removeLanguageButton").click(o),$("ul.nav-tabs li:nth-child(3)").addClass("active")}function n(){c()}function i(){f=null,$("#language-dialog").modal({show:!0}),$("#languageSelection").show(),$("#listed-language").show(),$("#not-listed-language").hide(),$("#language-dialog .messages").html("")}function o(){var t=[];return $("#languages input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.languageService.remove(function(t){Heiduc.info(t.message),c()},Heiduc.javaList(t)))}function s(t){Heiduc.errorMessages("#language-dialog .messages",t)}function a(t){var e=[];return""==t.code&&e.push(messages("config.code_is_empty")),""==t.title&&e.push(messages("title_is_empty")),e}function r(){var t={id:null!=f?String(f.id):"",code:$("#languageCode").val(),title:$("#languageTitle").val()},e=a(t);0==e.length?Heiduc.jsonrpc.languageService.save(function(t){"success"==t.result?($("#language-dialog").dialog("close"),c()):s(t.messages.list)},Heiduc.javaMap(t)):s(e)}function l(){}function c(){Heiduc.jsonrpc.languageService.select(function(t){m=t.list;var e='<table class="table table-striped"><tr><th></th><th>'+messages("code")+"</th><th>"+messages("title")+"</th></tr>";$.each(t.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+n.code+'</td><td>\t                <a data-id="'+n.id+'">'+n.title+"</a></td></tr>"}),$("#languages").html(e+"</table>"),$("#languages tr:even").addClass("even"),$("#languages a").click(function(){var t=$(this).attr("data-id");t&&d(t)})})}function d(t){Heiduc.jsonrpc.languageService.getById(function(t){f=t,$("#languageCode").val(t.code),$("#languageTitle").val(t.title),$("#language-dialog").dialog("open"),$("#languageSelection").hide(),$("#listed-language").hide(),$("#not-listed-language").show(),$("#language-dialog .messages").html("")},t)}function u(){var t="";for(var e in g)t+='<option value="'+e+'">'+g[e]+"</option>\n";$("#selectLanguage").html(t),$("#selectLanguage").val("ru"),h()}function p(t){t?($("#listed-language").show(),$("#not-listed-language").hide()):($("#listed-language").hide(),$("#not-listed-language").show())}function h(){var t=$("#selectLanguage").val();$("#languageCode").val(t),$("#languageTitle").val(g[t])}console.log("Loading LanguagesView.js");var f=null,m=null,g={aa:"Afar",ab:"Abkhazian",af:"Afrikaans",am:"Amharic",ar:"Arabic",as:"Assamese",ay:"Aymara",az:"Azerbaijani",ba:"Bashkir",be:"Byelorussian",bg:"Bulgarian",bh:"Bihari",bi:"Bislama",bn:"Bengali; Bangla",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan",co:"Corsican",cs:"Czech",cy:"Welsh",da:"Danish",de:"German",dz:"Bhutani",el:"Greek",en:"English",eo:"Esperanto",es:"Spanish",et:"Estonian",eu:"Basque",fa:"Persian",fi:"Finnish",fj:"Fiji",fo:"Faroese",fr:"French",fy:"Frisian",ga:"Irish",gd:"Scots Gaelic",gl:"Galician",gn:"Guarani",gu:"Gujarati",ha:"Hausa",he:"Hebrew (formerly iw)",hi:"Hindi",hr:"Croatian",hu:"Hungarian",hy:"Armenian",ia:"Interlingua",id:"Indonesian (formerly in)",ie:"Interlingue",ik:"Inupiak",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jw:"Javanese",ka:"Georgian",kk:"Kazakh",kl:"Greenlandic",km:"Cambodian",kn:"Kannada",ko:"Korean",ks:"Kashmiri",ku:"Kurdish",ky:"Kirghiz",la:"Latin",ln:"Lingala",lo:"Laothian",lt:"Lithuanian",lv:"Latvian, Lettish",mg:"Malagasy",mi:"Maori",mk:"Macedonian",ml:"Malayalam",mn:"Mongolian",mo:"Moldavian",mr:"Marathi",ms:"Malay",mt:"Maltese",my:"Burmese",na:"Nauru",ne:"Nepali",nl:"Dutch",no:"Norwegian",oc:"Occitan",om:"(Afan) Oromo",or:"Oriya",pa:"Punjabi",pl:"Polish",ps:"Pashto, Pushto",pt:"Portuguese",qu:"Quechua",rm:"Rhaeto-Romance",rn:"Kirundi",ro:"Romanian",ru:"Russian",rw:"Kinyarwanda",sa:"Sanskrit",sd:"Sindhi",sg:"Sangho",sh:"Serbo-Croatian",si:"Sinhalese",sk:"Slovak",sl:"Slovenian",sm:"Samoan",sn:"Shona",so:"Somali",sq:"Albanian",sr:"Serbian",ss:"Siswati",st:"Sesotho",su:"Sundanese",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",tk:"Turkmen",tl:"Tagalog",tn:"Setswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",vi:"Vietnamese",vo:"Volapuk",wo:"Wolof",xh:"Xhosa",yi:"Yiddish (formerly ji)",yo:"Yoruba",za:"Zhuang","zh-CN":"Simplified Chinese","zh-TW":"Traditional Chinese",zu:"Zulu"};return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("text!template/config/messages.html",[],function(){return'\n<div id="messageBundle"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addMessageButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeMessageButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="message-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.localized_message") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="messageForm">\n\t\t    <div class="messages"> </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("config.message_code") %></label>\n\t\t        <input id="messageCode" type="text"/>\n\t\t    </div>\n\t\t    <div id="messagesInput"> </div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-primary" id="saveMessageDlgButton" type="submit" value="<%= messages("save") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="cancelMessageDlgButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>'}),define("view/config/MessagesView",["text!template/config/messages.html"],function(t){function e(){Heiduc.initJSONRpc(n),$("#addMessageButton").click(o),$("#removeMessageButton").click(s),$("#messageForm").submit(function(){return l(),!1}),$("#cancelMessageDlgButton").click(c),$("ul.nav-tabs li:nth-child(4)").addClass("active")}function n(){i()}function i(){Heiduc.jsonrpc.languageService.select(function(t){p=t.list,a()})}function o(){u();var t="";$.each(p,function(e,n){t+='<div class="form-row"><label>'+n.title+'</label><input type="text" id="message_'+n.code+'" /></div>'}),$("#messageCode").val(""),$("#messagesInput").html(t),$("#message-dialog").modal({show:!0})}function s(){var t=[];return $("#messageBundle input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.messageService.remove(function(t){Heiduc.info(t.message),a()},Heiduc.javaList(t)))}function a(){Heiduc.jsonrpc.messageService.select(function(t){var e='<table class="table table-striped"><tr><th></th><th>'+messages("code")+"</th>";$.each(p,function(t,n){e+="<th>"+n.title+"</th>"}),e+="</tr>",$.each(t.list,function(t,n){e+='<tr><td><input type="checkbox" value="'+n.code+'"/></td>\t                <td><a data-code="'+n.code+'">'+n.code+"</a></td>",$.each(p,function(t,i){e+="<td>"+n.values.map[i.code]+"</td>"}),e+="</tr>"}),$("#messageBundle").html(e+"</table>"),$("#messageBundle tr:even").addClass("even"),$("#messageBundle td a").click(function(){var t=$(this).attr("data-code");t&&r(t)})})}function r(t){Heiduc.jsonrpc.messageService.selectByCode(function(e){o(),$("#messageCode").val(t),$.each(e.list,function(t,e){$("#message_"+e.languageCode).val(e.value)})},t)}function l(){var t={code:$("#messageCode").val()};$.each(p,function(e,n){t[n.code]=$("#message_"+n.code).val()}),Heiduc.jsonrpc.messageService.save(function(t){"success"==t.result?a():d(t.messages.list)},Heiduc.javaMap(t))}function c(){}function d(t){Heiduc.errorMessages("#message-dialog .messages",t)}function u(){$("#message-dialog .messages").html()}console.log("Loading MessagesView.js");var p=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("text!template/config/users.html",[],function(){return'<div id="users"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addUserButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeUserButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="user-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.user_details") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="userForm">\n    <div class="messages"> </div>\n    <div class="form-row">\n        <label><%= messages("user_name") %></label>\n        <input id="userName" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("user_email") %></label>\n        <input id="userEmail" type="text"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("user_role") %></label>\n        <select id="userRole">\n            <option value="SITE_USER" selected="selected"><%= messages("site_user") %></option>\n            <option value="USER"><%= messages("user") %></option>\n            <option value="ADMIN"><%= messages("administrator") %></option>\n        </select>\n    </div>\n    <div class="form-row">\n        <label><%= messages("password") %></label>\n        <input id="userPassword1" type="password"/>\n    </div>\n    <div class="form-row">\n        <label><%= messages("retype_password") %></label>\n        <input id="userPassword2" type="password"/>\n    </div>\n    <div class="form-row">\n         <label><%= messages("profile.timezone") %></label>\n         <select id="timezone"></select>\n    </div>    \n    <div class="modal-footer">\n        <input class="btn btn-primary" id="userSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n        <input class="btn btn-default" id="userDisableDlgButton" type="button" value="<%= messages("disable") %>" />\n        <input class="btn btn-default" data-dismiss="modal" id="userCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n    </div>\n  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/UsersView",["text!template/config/users.html"],function(t){function e(){Heiduc.initJSONRpc(n),$("#addUserButton").click(i),$("#removeUserButton").click(o),$("#userForm").submit(function(){return d(),!1}),$("#userCancelDlgButton").click(u),$("#userDisableDlgButton").click(h),$("ul.nav-tabs li:nth-child(5)").addClass("active")}function n(){Heiduc.jsonrpc.userService.getTimezones(function(t){timezones=t.list,f(),s()})}function i(){m=null,l(),$("#user-dialog").modal({show:!0})}function o(){var t=[];return $("#users input:checked").each(function(){t.push(String(this.value))}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.userService.remove(function(t){Heiduc.info(t.message),s()},Heiduc.javaList(t)))}function s(){Heiduc.jsonrpc.userService.select(function(t){var e='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("email")+"</th><th>"+messages("role")+"</th><th>"+messages("access")+"</th></tr>";$.each(t.list,function(t,n){var i=n.disabled?messages("disabled"):messages("enabled");e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+n.name+'</td><td>\t                <a data-id="'+n.id+'">'+n.email+"</a></td><td>"+a(n.role)+"</td><td>"+i+"</td></tr>"}),$("#users").html(e+"</table>"),$("#users tr:even").addClass("even"),$("#users a").click(function(){var t=$(this).attr("data-id");t&&r(t)})})}function a(t){return"ADMIN"==t?messages("administrator"):"USER"==t?messages("user"):"SITE_USER"==t?messages("site_user"):void 0}function r(t){Heiduc.jsonrpc.userService.getById(function(t){m=t,l(),$("#user-dialog").modal({show:!0})},t)}function l(){null==m?($("#userName").val(""),$("#userEmail").val(""),$("#userEmail").removeAttr("disabled"),$("#userRole").val(""),$("#userDisableDlgButton").hide()):($("#userName").val(m.name),$("#userEmail").val(m.email),$("#userEmail").attr("disabled",!0),$("#userRole").val(m.roleString),$("#timezone").val(m.timezone),$("#userDisableDlgButton").val(m.disabled?messages("enable"):messages("disable")).show()),$("#userPassword1").val(""),$("#userPassword2").val(""),$("#user-dialog .messages").html("")}function c(t){var e=[];return""==t.email&&e.push(messages("email_is_empty")),t.password1!=t.password2&&e.push(messages("config.passwords_dont_match")),e}function d(){var t={id:null!=m?String(m.id):"",name:$("#userName").val(),email:$("#userEmail").val(),role:$("#userRole").val(),timezone:$("#timezone").val(),password:$("#userPassword1").val(),password1:$("#userPassword1").val(),password2:$("#userPassword2").val()},e=c(t);0==e.length?Heiduc.jsonrpc.userService.save(function(t){"success"==t.result?(Heiduc.info(t.message),s()):p(t.messages.list)},Heiduc.javaMap(t)):p(e)}function u(){}function p(t){Heiduc.errorMessages("#user-dialog .messages",t)}function h(){Heiduc.jsonrpc.userService.disable(function(t){Heiduc.showServiceMessages(t),s()},m.id,!m.disabled)}function f(){var t="";$.each(timezones,function(e,n){t+='<option value="'+n+'">'+n+"</option>"}),$("#timezone").html(t)}console.log("Loading UsersView.js");var m=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("text!template/config/groups.html",[],function(){return'\n<div id="groups"> </div>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addGroupButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeGroupButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="group-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.group_details") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="groupForm">\n\t\t    <div class="messages"> </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("config.group_name") %></label>\n\t\t        <input id="groupName" type="text"/>\n\t\t    </div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-primary" id="groupSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="groupCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n<div class="modal fade" id="user-group-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.group_users") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="userGroupForm">\n\t\t    <div id="groupUsers"> </div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-primary" id="userGroupSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="userGroupCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n'}),define("view/config/GroupsView",["text!template/config/groups.html"],function(t){function e(){Heiduc.initJSONRpc(n),$("#addGroupButton").click(o),$("#removeGroupButton").click(s),$("#groupForm").submit(function(){return c(),!1}),$("#groupCancelDlgButton").click(d),$("#userGroupForm").submit(function(){return f(),!1}),$("#userGroupCancelDlgButton").click(h),$("ul.nav-tabs li:nth-child(6)").addClass("active")}function n(){i()}function i(){Heiduc.jsonrpc.groupService.select(function(t){g=Heiduc.idMap(t.list);var e='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("users")+"</th></tr>";$.each(t.list,function(t,n){if("guests"!=n.name){var i=messages("add_users");n.users.list.length>0&&(i="",$.each(n.users.list,function(t,e){i+=(0==t?"":", ")+e.name}));var o='<a class="groupEdit" data-id="'+n.id+'">'+n.name+"</a>",s='<a class="userGroupEdit" data-id="'+n.id+'">'+i+"</a>";e+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td>'+o+"</td><td>"+s+"</td></tr>"}}),$("#groups").html(e+"</table>"),$("#groups tr:even").addClass("even"),$("#groups .groupEdit").click(function(){a($(this).attr("data-id"))}),$("#groups .userGroupEdit").click(function(){p($(this).attr("data-id"))})})}function o(){m=null,r(),$("#group-dialog").modal({show:!0})}function s(){var t=[];return $("#groups input:checked").each(function(){t.push(String(this.value))}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.groupService.remove(function(t){Heiduc.info(t.message),i()},Heiduc.javaList(t)))}function a(t){Heiduc.jsonrpc.groupService.getById(function(t){m=t,r(),$("#group-dialog").modal({show:!0})},t)}function r(){null==m?$("#groupName").val(""):$("#groupName").val(m.name),$("#group-dialog .messages").html("")}function l(t){var e=[];return""==t.name&&e.push(messages("name_is_empty")),e}function c(){var t={id:null!=m?String(m.id):"",name:$("#groupName").val()},e=l(t);0==e.length?Heiduc.jsonrpc.groupService.save(function(t){"success"==t.result?(Heiduc.info(t.message),i()):u(t.messages.list)},Heiduc.javaMap(t)):u(e)}function d(){}function u(t){Heiduc.errorMessages("#group-dialog .messages",t)}function p(t){m=g[t],Heiduc.jsonrpc.userService.select(function(t){v=Heiduc.idMap(t.list);var e=Heiduc.idMap(m.users.list),n="";$.each(v,function(t,i){var o="";void 0!=e[i.id]&&(o='checked = "checked"'),n+='<div class="form-row"><input type="checkbox" '+o+' value="'+i.id+'"> '+i.name+"</div>"}),$("#groupUsers").html(n),$("#user-group-dialog").modal({show:!0})})}function h(){}function f(){var t=[];$("#user-group-dialog input:checked").each(function(){t.push(this.value)}),Heiduc.jsonrpc.groupService.setGroupUsers(function(t){Heiduc.showServiceMessages(t),i()},m.id,Heiduc.javaList(t))}console.log("Loading GroupsView.js");var m=null,g=null,v=null;return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("text!template/config/tags.html",[],function(){return'\n<ul id="tags"></ul>\n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n</div>\n\n<div class="modal fade" id="tag-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("config.tag_details") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="tagForm">\n\t\t    <div class="messages"> </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("title") %></label>\n\t\t        <input id="title" type="text"/>\n\t\t    </div>\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("config.tag_name") %></label>\n\t\t        <input id="tagName" type="text"/>\n\t\t    </div>\n\t\t    <div id="pages"></div>\n\t\t    <div class="modal-footer">\n\t\t        <input class="btn btn-primary" id="tagSaveDlgButton" type="submit" value="<%= messages("save") %>" />\n\t\t        <input class="btn btn-default"  id="tagDeleteDlgButton" type="button" value="<%= messages("delete") %>" />\n\t\t        <input class="btn btn-default" data-dismiss="modal" id="tagCancelDlgButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>'}),define("view/config/TagsView",["text!template/config/tags.html","jquery.treeview"],function(t){function e(){Heiduc.initJSONRpc(n),$("#addButton").click(function(){i("")}),$("#tagForm").submit(function(){return p(),!1}),$("#tagCancelDlgButton").click(h),$("#tagDeleteDlgButton").click(g),$("ul.nav-tabs li:nth-child(7)").addClass("active"),$("#title").change(b)}function n(){o()}function i(t){w=t,y=null,l(),$("#tag-dialog").modal({show:!0})}function o(){Heiduc.jsonrpc.tagService.getTree(function(t){$("#tags").html(s(t.list)),$("#tags .tagEdit").click(function(){r($(this).attr("data-id"))}),$("#tags .addTag").click(function(){i($(this).attr("data-id"))}),$("#tags").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"tagTree"})})}function s(t){var e="";return $.each(t,function(t,n){e+=a(n)}),e}function a(t){var e='<li><a class="tagEdit" data-id="'+t.entity.id+'">'+t.entity.name+'</a> <a class="addTag" title="'+messages("add_child")+'" data-id="'+t.entity.id+'">+</a>';return t.children.list.length>0&&(e+="<ul>",$.each(t.children.list,function(t,n){e+=a(n)}),e+="</ul>"),e+"</li>"}function r(t){Heiduc.jsonrpc.tagService.getById(function(t){y=t,w=y.parent,l(),$("#tag-dialog").modal({show:!0})},t)}function l(){null==y?($("#tagName").val(""),$("#title").val(""),$("#pages").html("")):($("#tagName").val(y.name),$("#title").val(y.title),c()),$("#tag-dialog .messages").html("")}function c(){Heiduc.jsonrpc.tagService.getPages(function(t){x=t.list,d()},y.id)}function d(){if($("#pages").html(""),x.length>0){var t="";$.each(x,function(e,n){t+='<span class="tag">'+n.title+' <a data-id="'+e+'"><img src="/static/images/02_x.png" /></a></span>'}),$("#pages").html(t),$("#pages a").click(function(){v($(this).attr("data-id"))})}}function u(t){var e=[];return""==t.name&&e.push(messages("config.tag_is_empty")),e}function p(){var t={id:null!=y?String(y.id):"",parent:null==w?"":String(w),name:$("#tagName").val(),title:$("#title").val()},e=u(t);0==e.length?Heiduc.jsonrpc.tagService.save(function(t){"success"==t.result?(Heiduc.info(t.message),o()):f(t.message)},Heiduc.javaMap(t)):m(e)}function h(){}function f(t){Heiduc.errorMessage("#tag-dialog .messages",t)}function m(t){Heiduc.errorMessages("#tag-dialog .messages",t)}function g(){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.tagService.remove(function(t){Heiduc.showServiceMessages(t),o()},y.id)}function v(t){confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.tagService.removeTag(function(e){Heiduc.showServiceMessages(e),x.splice(t,1),d()},x[t].friendlyURL,y.id)}function b(){if(null==y){var t=$("#tagName").val(),e=$("#title").val();""==t&&$("#tagName").val(Heiduc.urlFromTitle(e))}}console.log("Loading TagsView.js");var y=null,w=null,x=null;return Backbone.View.extend({css:"/static/css/jquery.treeview.css",el:$("#tab-1"),render:function(){Heiduc.addCSSFile(this.css),this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/config/attributes.html",[],function(){return'\n<div id="attributes"></div>\n  \n<div class="form-sep">\n    <input class="btn btn-primary" id="addButton" type="button" value="<%= messages("add") %>" />\n    <input class="btn btn-default" id="removeButton" type="button" value="<%= messages("remove") %>" />\n</div>\n\n<div class="modal fade" id="attribute-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("attribute") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="attributeForm">\n\t    <div class="form-row">\n\t        <label><%= messages("name") %></label>\n\t        <input id="name" type="text"/>\n\t    </div>\n\t    <div class="form-row">\n\t        <label><%= messages("value") %></label>\n\t        <input id="value" type="text" size="40"/>\n\t    </div>\n\t    <div class="modal-footer">\n\t        <input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n\t        <input class="btn btn-default" data-dismiss="modal" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n\t    </div>\n\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>'}),define("view/config/AttributesView",["text!template/config/attributes.html"],function(t){function e(){$("ul.nav-tabs li:nth-child(8)").addClass("active"),Heiduc.initJSONRpc(n),$("#addButton").click(s),$("#cancelButton").click(function(){}),$("#attributeForm").submit(function(){return r(),!1}),$("#removeButton").click(l)}function n(){i()}function i(){Heiduc.jsonrpc.configService.getConfig(function(t){c=t,o()})}function o(){var t='<table class="table table-striped"><tr><th></th><th>'+messages("name")+"</th><th>"+messages("value")+"</th></tr>";$.each(c.attributes.map,function(e,n){t+='<tr><td><input type="checkbox" value="'+e+'"/></td><td><a data-name="'+e+'">'+e+"</a></td><td>"+n+"</td></tr>"}),$("#attributes").html(t+"</table>"),$("#attributes tr:even").addClass("even"),$("#attributes a").click(function(){a($(this).attr("data-name"))})}function s(){$("#attribute-dialog").modal({show:!0}),$("#name").val(""),$("#value").val("")}function a(t){$("#attribute-dialog").modal({show:!0}),$("#name").val(t),$("#value").val(c.attributes.map[t])}function r(){var t=$("#name").val(),e=$("#value").val();Heiduc.jsonrpc.configService.saveAttribute(function(t){Heiduc.showServiceMessages(t),n()},t,e)}function l(){var t=[];return $("#attributes input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.configService.removeAttributes(function(t){Heiduc.info(t.message),n()},Heiduc.javaList(t)))}console.log("Loading AttributesView.js");var c="";return Backbone.View.extend({el:$("#tab-1"),render:function(){this.el=$("#tab-1"),this.el.html(_.template(t,{messages:messages})),e()},remove:function(){this.el.html("")}})}),define("view/config/ConfigRouter",["view/config/IndexView","view/config/CommentsView","view/config/LanguagesView","view/config/MessagesView","view/config/UsersView","view/config/GroupsView","view/config/TagsView","view/config/AttributesView"],function(t,e,n,i,o,s,a,r){return console.log("Loading ConfigRouter.js"),Backbone.Router.extend({configView:null,currentView:null,indexView:new t,commentsView:new e,languagesView:new n,messagesView:new i,usersView:new o,groupsView:new s,tagsView:new a,attributesView:new r,initialize:function(t){this.configView=t.view},show:function(t){Heiduc.app.currentView!=this.configView&&Heiduc.app.show(this.configView),this.currentView&&(this.currentView.remove(),this.currentView=null),$("ul.nav-tabs li").removeClass("active"),t.render(),this.currentView=t},routes:{"config/comments":"comments","config/languages":"languages","config/messages":"messages","config/users":"users","config/groups":"groups","config/tags":"tags","config/attributes":"attributes"},index:function(){this.show(this.indexView)},comments:function(){this.show(this.commentsView)},languages:function(){this.show(this.languagesView)},messages:function(){this.show(this.messagesView)},users:function(){this.show(this.usersView)},groups:function(){this.show(this.groupsView)},tags:function(){this.show(this.tagsView)},attributes:function(){this.show(this.attributesView)}})}),define("view/config/ConfigView",["text!template/config/config.html","view/config/ConfigRouter","jquery.form"],function(t,e){return console.log("Loading ConfigView.js"),Backbone.View.extend({css:"/static/css/config.css",el:$("#content"),tmpl:_.template(t),viewCmd:null,router:null,initialize:function(){this.router=new e({view:this})},render:function(){Heiduc.addCSSFile(this.css),this.el.html(this.tmpl({messages:messages})),this.router.index()},remove:function(){this.router.currentView&&this.router.currentView.remove(),this.el.html(""),Heiduc.removeCSSFile(this.css)}})}),define("text!template/folders.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-heading"><a href="#folders"><%= messages("resources") %>:</a> / <span id="crumbs"></span> </div>\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("folders") %></a></li>\n\t\t\t\t\t\t    <li><a data-toggle="tab" href="#tab-2">Picasa</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<p id="folder-location"></p>\n    \t\t\t\t\t\t\t<ul id="folders-tree"><img src="/static/images/ajax-loader.gif" /></ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-2" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div id="albums"><img src="/static/images/ajax-loader.gif" /></div>\n\t\t\t\t\t\t\t    <div class="clear">\n\t\t\t\t\t\t\t        <a id="createAlbumLink"><%= messages("folders.create_album") %></a>\n\t\t\t\t\t\t\t    </div> \n\t\t\t\t\t\t\t    <div id="albumDetails">\n\t\t\t\t\t\t\t        <hr class="clear picasa-hr" />\n\t\t\t\t\t\t\t        <p class="album-name">\n\t\t\t\t\t\t\t            Album : <span id="album-location"></span>\n\t\t\t\t\t\t\t            <a id="deleteAlbumLink"><%= messages("folders.delete_album") %></a>\n\t\t\t\t\t\t\t        </p>\n\t\t\t\t\t\t\t        <div id="photos"></div>\n\t\t\t\t\t\t\t        <div class="clear">\n\t\t\t\t\t\t\t            <a id="uploadPhotoLink"><%= messages("folders.upload_image") %></a>\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t    </div> \n\t\t\t\t\t\t\t    <div class="clear"></div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>    \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="modal fade" id="album-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folders.new_album") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="albumForm">\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("folders.album_title") %></label>\n\t\t        <input id="title"/>\n\t\t    </div>\n\t\t    <div id="albumMessages"></div>\n\t\t    <div class="buttons-dlg">\n\t\t        <input type="submit" value="<%= messages("save") %>" />\n\t\t        <input id="cancelAlbumButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>  \n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="upload-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folders.upload_image") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n\t\t    <input type="hidden" name="fileType" value="picasa" />\n\t\t    <input type="hidden" name="albumId" />\n\t\t    <input type="file" name="uploadFile" />\n\t\t    <div class="buttons-dlg">\n\t\t        <input type="submit" value="<%= messages("upload") %>" />\n\t\t        <input id="uploadCancelButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>    \n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n\n';
}),define("view/FoldersView",["text!template/folders.html","jquery.form","jquery.treeview"],function(t){function e(){Heiduc.initJSONRpc(n),$.cookie("folderReturnPath",null,{path:"/",expires:10})}function n(){Heiduc.jsonrpc.folderService.getTree(function(t){$("#folders-tree").html(i(t)),$("#folders-tree").treeview({animated:"fast",collapsed:!0,unique:!0,persist:"cookie",cookieId:"folderTree"})})}function i(t){var e='<li><a href="#folder/'+t.entity.id+'">'+t.entity.title+'</a> <a title="'+messages("add_child")+'" href="#addFolder/'+t.entity.id+'">+</a>';return t.children.list.length>0&&(e+="<ul>",$.each(t.children.list,function(t,n){e+=i(n)}),e+="</ul>"),e+"</li>"}function o(){$("#upload").ajaxForm(v),Heiduc.initJSONRpc(s),$("#createAlbumLink").click(p),$("#deleteAlbumLink").click(f),$("#uploadPhotoLink").click(g),$("#albumForm").submit(function(){return h(),!1}),$("#cancelAlbumButton").click(function(){$("#album-dialog").dialog("close")}),$("#uploadAlbumButton").click(function(){$("#upload-dialog").dialog("close")}),$("#uploadCancelButton").click(function(){$("#upload-dialog").dialog("close")})}function s(){Heiduc.jsonrpc.configService.getConfig(function(t){b=t,b.enablePicasa?a():($("#albums").html(messages("folders.picasa_not_enabled")),$("#createAlbumLink").hide())})}function a(){Heiduc.jsonrpc.picasaService.selectAlbums(function(t){y=t.list,r()})}function r(){var t="";$.each(y,function(e,n){var i="";$.each(n.categories.list,function(t,e){i+=e+" "}),t+='<a class="album" data-i="'+e+'"><img src="/static/images/Photos.png" /><p>'+n.title+" "+i+"</p></a>"}),$("#albums").html(t),$("#albums a.album").click(function(){l($(this).attr("data-i"))})}function l(t){x=y[t],c()}function c(){$("#album-location").text(x.title),Heiduc.jsonrpc.picasaService.selectPhotos(function(t){w=t.list,d()},x.id)}function d(){$("#albumDetails").show();var t="";$.each(w,function(e,n){var i="";$.each(n.categories.list,function(t,e){i+=e+" "}),t+='<div class="photo"><img class="remove" src="/static/images/02_x.png" data-i="'+e+'" /><a data-i="'+e+'"><img src="'+n.thumbnailURL+'" /><p>'+n.title+"<br/>"+i+"</p></a></div>"}),$("#photos").html(t),$("#photos img.remove").click(function(){m($(this).attr("data-i"))}),$("#photos a").click(function(){u($(this).attr("data-i"))})}function u(t){window.open(w[t].URL,"preview")}function p(){$("#album-dialog").dialog("open")}function h(){var t=$("#title").val();return t?void Heiduc.jsonrpc.picasaService.addAlbum(function(t){"success"==t.result?($("#album-dialog").dialog("close"),a()):Heiduc.errorMessage("#albumMessages",t.message)},t):void Heiduc.errorMessage("#albumMessages",messages("title_is_empty"))}function f(){confirm(messages("folders.you_delete_album")+" "+x.title+". "+messages("are_you_sure"))&&Heiduc.jsonrpc.picasaService.removeAlbum(function(t){"success"==t.result&&(a(),$("#albumDetails").hide()),Heiduc.showServiceMessages(t)},x.id)}function m(t){photo=w[t],confirm(messages("folders.you_delete_photo")+" "+photo.title+". "+messages("are_you_sure"))&&Heiduc.jsonrpc.picasaService.removePhoto(function(t){"success"==t.result&&c(),Heiduc.showServiceMessages(t)},x.id,photo.id)}function g(){$("#upload-dialog input[name=albumId]").val(x.id),$("#upload-dialog").dialog("open")}function v(t){var e=t.split("::"),n=e[1],i=e[2];"success"==n?(Heiduc.info("Success."),setTimeout(c,3e3)):(i=messages("error")+". "+i,Heiduc.error(i)),$("#upload-dialog").dialog("close")}console.log("Loading FoldersView.js");var b=null,y=null,w=null,x=null;return Backbone.View.extend({css:["/static/css/jquery.treeview.css","/static/css/picasa.css"],el:$("#content"),tmpl:_.template(t),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages})),e(),o()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)}})}),define("text!template/folder.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-heading"><a href="#folders"><%= messages("resources") %>:</a> / <span id="crumbs"></span> </div>\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("folder") %></a></li>\n\t\t\t\t\t\t    <li><a data-toggle="tab" href="#tab-2"><%= messages("files") %></a></li>\n\t\t\t\t\t\t    <li><a data-toggle="tab" href="#tab-3"><%= messages("subfolders") %></a></li>\n\t\t\t\t\t\t    <li><a data-toggle="tab" href="#tab-4"><%= messages("security") %></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<form id="folderForm">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("title") %></label>\n\t\t\t\t\t\t\t        \t\t<input id="title" class="form-control" type="text" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("folder.name_for_url") %></label>\n\t\t\t\t\t\t\t        \t\t<input id="name" class="form-control" type="text" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class="form-sep">\n\t\t\t\t\t\t\t\t\t<input class="btn btn-primary" id="saveButton" type="submit" value="<%= messages("save") %>" />\n\t\t\t\t\t\t\t\t    <input class="btn btn-default" id="cancelButton" type="button" value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t\t    <input class="btn btn-default" id="exportButton" type="button" value="<%= messages("export") %>" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-2" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div id="filesTable"> </div>\n\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t        <input class="btn btn-primary" id="createFileButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("create_file") %>" />\n\t\t\t\t\t\t\t        <input class="btn btn-default" id="uploadButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("upload_file") %>" />\n\t\t\t\t\t\t\t        <input class="btn btn-default" id="deleteFilesButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("delete_files") %>" />\n\t\t\t\t\t\t\t        <input class="btn btn-default" id="fileCancelButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-3" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div id="children"> </div>\n\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t        <input class="btn btn-primary" id="addChildButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("folder.add_child_folder") %>" />\n\t\t\t\t\t\t\t        <input class="btn btn-default" id="deleteFoldersButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("folder.delete_folders") %>" />\n\t\t\t\t\t\t\t        <input class="btn btn-default" id="folderCancelButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t    </div>    \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-4" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<div id="permissions"> </div>\n\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t        <input class="btn btn-primary" id="addPermissionButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("add_permission") %>" />\n\t\t\t\t\t\t\t        <input class="btn btn-default" id="deletePermissionButton" type="button" \n\t\t\t\t\t\t\t            value="<%= messages("delete_permission") %>" />\n\t\t\t\t\t\t\t    </div>    \n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="modal fade" id="file-upload" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("folder.upload_file") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="upload" action="/cms/upload" method="post" enctype="multipart/form-data">\n\t    \t<%= messages("file_upload") %>:\n\t    \t<input type="hidden" name="fileType" value="resource" />\n\t    \t<input type="hidden" name="folderId" />\n\t    \t<input type="file" name="uploadFile" multiple="true" />\n\t\t    <div class="modal-footer">\n\t    \t    <input type="submit" class="btn btn-primary" value="<%= messages("send") %>" />\n\t        \t<input class="btn btn-default" data-dismiss="modal" id="fileUploadCancelButton" type="button" \n\t            \tvalue="<%= messages("cancel") %>" />\n\t    \t</div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="permission-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%= messages("permission_details") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="permissionForm">\n\t\t    <div class="form-row">\n\t\t        <label><%= messages("group") %></label>\n\t\t        <select id="groupSelect"></select>\n\t\t        <span id="groupName"></span>        \n\t\t    </div>\n\t\t    <div id="permissionList" class="form-row">\n\t\t        <fieldset>\n\t\t            <legend><%= messages("permission") %></legend>\n\t\t            <input type="radio" name="permission" value="DENIED"/> <%= messages("denied") %> <br />\n\t\t            <input type="radio" name="permission" value="READ" /> <%= messages("read") %> <br />\n\t\t            <input type="radio" name="permission" value="WRITE" /> <%= messages("read_write") %> <br />\n\t\t        </fieldset>        \n\t\t    </div>\n\t\t    <div class="modal-footer">\n\t\t        <input id="permissionSaveButton" class="btn btn-primary" type="submit" value="<%= messages("save") %>" />\n\t\t        <input id="permissionCancelButton" class="btn btn-default" data-dismiss="modal" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t</form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n<div class="modal fade" id="export-dialog" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><<%= messages("folder.export_window") %></h4>\n      </div>\n      <div class="modal-body">\n      \t<form id="exportForm">\n\t\t    <p><%= messages("folder.export_window_info") %></p>\n\t\t    <div id="exportInfo" class="form-row"></div>    \n\t\t    <div id="timer" class="form-row"></div>\n\t\t    <div class="buttons-dlg">\n\t\t        <input id="exportCancelButton" type="button" value="<%= messages("cancel") %>" />\n\t\t    </div>\n\t\t  </form>\n      </div>\t\n    </div>\n  </div>\n</div>\n\n\n'}),define("view/FolderView",["text!template/folder.html","jquery.form"],function(t){function e(){B=""!=j,$("#upload").ajaxForm(a),Heiduc.initJSONRpc(n),$("#title").change(p),$("#folderForm").submit(function(){return m(),!1}),$("#cancelButton").click(g),$("#exportButton").click(v),$("#exportCancelButton").click(A),$("#createFileButton").click(u),$("#uploadButton").click(s),$("#deleteFilesButton").click(d),$("#fileCancelButton").click(g),$("#addChildButton").click(w),$("#deleteFoldersButton").click(C),$("#folderCancelButton").click(g),$("#addPermissionButton").click(H),$("#deletePermissionButton").click(N),$("#permissionForm").submit(function(){return M(),!1}),$("#permissionCancelButton").click(P),$("#file-upload input[name=folderId]").val(j)}function n(){Heiduc.jsonrpc.folderService.getFolderRequest(function(t){V=t,i(),D(),I(),B?(k(V.permissions),f(),l(),$(".filesTab").show(),$(".childrenTab").show(),F.root?($("#saveButton").attr("disabled","disabled"),$("#title").attr("disabled","disabled"),$("#name").attr("disabled","disabled")):($("#saveButton").removeAttr("disabled"),$("#title").removeAttr("disabled"),$("#name").removeAttr("disabled"))):($(".filesTab").hide(),$(".childrenTab").hide())},j,O)}function i(){F=V.folder,B&&(O=String(F.parent)),o(),L()}function o(){B?($("#title").val(F.title),$("#name").val(F.name)):($("#title").val(""),$("#name").val(""))}function s(){$("#file-upload").modal({show:!0})}function a(t){var e=t.split("::"),n=e[1],i=e[2];"success"==n?(Heiduc.info(messages("folder.file_success_upload")),r()):Heiduc.error(messages("folder.error_during_upload")+" "+i),$("#file-upload").modal({show:!1})}function r(){Heiduc.jsonrpc.fileService.getByFolder(function(t){V.files=t,l()},j)}function l(){z=V.files;var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("filename")+"</th><th>"+messages("mimetype")+"</th><th>"+messages("size")+"</th></tr>";$.each(z.list,function(e,n){t+='<tr>\t<td><input type="checkbox" name="item'+e+'" value="'+n.id+'"/></td>\t<td><a href="#file/'+n.id+'">'+n.title+"</a></td>\t<td>"+n.filename+"</td>\t<td>"+n.mimeType+"</td>\t<td>"+n.size+" "+messages("bytes")+"</td></tr>"}),t+="</table>",$("#filesTable").html(t),$("#filesTable tr:even").addClass("even")}function c(){var t=[];return $("#filesTable input[type=checkbox]:checked").each(function(){t.push(this.value)}),t}function d(){var t=Heiduc.javaList(c());return 0==t.list.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.fileService.deleteFiles(function(t){"success"==t.result?(r(),Heiduc.info(messages("folder.files_success_delete"))):Heiduc.error(messages("folder.error_deleting_files")+" "+t.messsage)},t))}function u(){location.href="#addFile/"+j}function p(){if(!B){var t=$("#name").val(),e=$("#title").val();""==t&&$("#name").val(Heiduc.urlFromTitle(e))}}function h(){Heiduc.jsonrpc.folderService.getByParent(function(t){V.children=t,f()},j)}function f(){if(B){var t='<table class="table table-striped"><tr><th></th><th>'+messages("title")+"</th><th>"+messages("name")+"</th></tr>";$.each(V.children.list,function(e,n){t+='<tr><td><input type="checkbox" value="'+n.id+'"/></td><td><a href="#folder/'+n.id+'">'+n.title+"</td><td>"+n.name+"</td></tr>"}),$("#children").html(t+"</table>"),$("#children tr:even").addClass("even")}}function m(){var t=Heiduc.javaMap({id:j,parent:O,name:$("#name").val(),title:$("#title").val()});Heiduc.jsonrpc.folderService.saveFolder(function(t){"success"==t.result?(Heiduc.info(messages("folder.success_save")),""==j&&(j=t.message,B=!0,$('#file-upload input[name="folderId"]').val(j),n())):Heiduc.showServiceMessages(t)},t)}function g(){$.cookie("folderReturnPath")?location.href=$.cookie("folderReturnPath"):location.href="#folders"}function v(){Y=0,y(),$("#export-dialog").modal({show:!0}),Heiduc.jsonrpc.configService.startExportFolderTask(function(t){"success"==t.result?(X=t.message,Heiduc.infoMessage("#exportInfo",messages("creating_export_file")),q=setInterval(b,1e4),W=setInterval(y,1e3)):Heiduc.showServiceMessages(t)},F.id)}function b(){Heiduc.jsonrpc.configService.isExportTaskFinished(function(t){t&&(clearInterval(q),clearInterval(W),$("#export-dialog").dialog("close"),$("#exportDialogButton").attr("disabled",!1),location.href="/file/tmp/"+X)},"folder")}function y(){$("#timer").html(Y++ +" "+messages("sec")+".")}function w(){location.href="#addFolder/"+j}function x(){var t=[];return $("#children input[type=checkbox]:checked").each(function(){t.push(this.value)}),t}function C(){var t=Heiduc.javaList(x());return 0==t.list.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.folderService.deleteFolder(function(t){"success"==t.result?(h(),Heiduc.info(messages("folder.success_delete"))):Heiduc.error(messages("folder.error_deleting")+" "+t.messsage)},t))}function S(t){return"DENIED"==t?messages("denied"):"READ"==t?messages("read"):"WRITE"==t?messages("read_write"):"ADMIN"==t?messages("read_write_grant"):void 0}function k(t){U=Heiduc.idMap(t.list);var e='<table class="table table-striped"><tr><th></th><th>'+messages("group")+"</th><th>"+messages("permission")+"</th></tr>";$.each(U,function(t,n){var i="",o=n.group.name;n.inherited||(i='<input type="checkbox" value="'+n.id+'">',o='<a data-id="'+n.id+'"> '+n.group.name+"</a>"),e+="<tr><td>"+i+"</td><td>"+o+"</td><td>"+S(n.permission)+"</td></tr>"}),$("#permissions").html(e+"</table>"),$("#permissions tr:even").addClass("even"),$("#permissions a").click(function(){R($(this).attr("data-id"))})}function T(){Heiduc.jsonrpc.folderPermissionService.selectByFolder(function(t){k(t)},j)}function D(){var t=V.groups;groups=Heiduc.idMap(t.list);var e="";$.each(groups,function(t,n){e+='<option value="'+n.id+'">'+n.name+"</option>"}),$("#groupSelect").html(e)}function R(t){permission=U[t],E(),$("#permission-dialog").modal({show:!0})}function E(){$("#permission-dialog input[type=radio]").removeAttr("checked"),null==permission?($("#permission-dialog input[value=READ]").attr("checked","checked"),$("#groupSelect").show(),$("#groupName").hide()):($("#permissionList input[value="+permission.permission+"]").attr("checked","checked"),$("#groupSelect").hide(),$("#groupName").show(),$("#groupName").text(permission.group.name))}function M(){var t={folderId:j,groupId:null==permission?$("#groupSelect").val():String(permission.group.id),permission:$("#permissionList input:checked")[0].value};Heiduc.jsonrpc.folderPermissionService.save(function(t){Heiduc.showServiceMessages(t),"success"==t.result&&T()},Heiduc.javaMap(t))}function H(){permission=null,E(),$("#permission-dialog").modal({show:!0})}function N(){var t=[];return $("#permissions input:checked").each(function(){t.push(this.value)}),0==t.length?void Heiduc.info(messages("nothing_selected")):void(confirm(messages("are_you_sure"))&&Heiduc.jsonrpc.folderPermissionService.remove(function(t){Heiduc.showServiceMessages(t),T()},Heiduc.javaList(t)))}function P(){}function L(){var t=V.folderPermission;t.changeGranted?($("#saveButton").show(),$("#createFileButton").show(),$("#uploadButton").show(),$("#deleteFilesButton").show(),$("#addChildButton").show(),$("#deleteFoldersButton").show()):($("#saveButton").hide(),$("#createFileButton").hide(),$("#uploadButton").hide(),$("#deleteFilesButton").hide(),$("#addChildButton").hide(),$("#deleteFoldersButton").hide()),t.admin&&B?$(".securityTab").show():$(".securityTab").hide()}function A(){clearInterval(q),clearInterval(W)}function I(){var t="",e=V.parent;$.each(V.ancestors.list,function(e,n){var i="/"==n.name?"file":n.name;t+='<a href="#folder/'+n.id+'">'+i+"</a> / "}),t+=B?" "+("/"==F.name?"file":F.name):'<a href="#folder/'+e.id+'">'+e.name+"</a>",$("#crumbs").html(t)}console.log("Loading FolderView.js");var j=null,O=null,z="",F=null,B=""!=j,V=null,U=null,q=null,W=null,Y=0,X=null;return Backbone.View.extend({el:$("#content"),tmpl:_.template(t),render:function(){this.el.html(this.tmpl({messages:messages})),e()},remove:function(){this.el.html("")},setFolderId:function(t){j=t},setFolderParentId:function(t){O=t}})}),define("text!template/file.html",[],function(){return'<div class="row">\n\t<div class="col-lg-12">\n\t\t<div class="panel panel-default">\n\t\t\t<div class="panel-body">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<ul class="nav nav-tabs" id="tabs_a">\n\t\t\t\t\t\t\t<li class="active"><a data-toggle="tab" href="#tab-1"><%= messages("file") %></a></li>\n\t\t\t\t\t\t\t<li class ="contentTab"><a id= "_fileContent" data-toggle= "tab" href= "#tab-2" ><%= messages("content")%></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="tab-content" id="tabs_content_a">\n\t\t\t\t\t\t\t<div id="tab-1" class="tab-pane fade in active">\n\t\t\t\t\t\t\t\t<form id="fileForm">\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("title") %></label>\n\t\t\t\t\t\t\t\t        \t\t<input id="title" class="form-control" type="text" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("name") %></label>\n\t\t\t\t\t\t\t\t        \t\t<input id="name" class="form-control" type="text" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("content_type") %></label>\n\t\t\t\t\t\t\t\t        \t\t<span id="mimeType"> </span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("size") %></label>\n\t\t\t\t\t\t\t\t        \t\t<span id="size"> </span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label><%= messages("external_link") %></label>\n\t\t\t\t\t\t\t\t        \t\t<span id="fileLink"> </span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t\t\t        \t\t<span id="download"> </span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="imageContent" style="float:left;margin-left: 20px;"> </div>\n\t\t\t\t\t\t\t\t\t<div class="form-sep">\n\t\t\t\t\t\t\t\t\t\t<input id="saveButton" class="btn btn-primary" type="submit" value="<%= messages("save") %>" />\n\t\t\t\t\t\t\t\t    \t<input id="cancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</form>\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="tab-2" class="tab-pane fade">\n\t\t\t\t\t\t\t\t<form id="contentForm">\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t        \t\t<span id="filename"></span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t\t\t\t\t\t\t<label class="checkbox-inline">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input id="autosave" type="checkbox" id="enablePicasa" value=""> <%= messages("autosave") %>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t\t\t\t\t\t\t<textarea id="fileContent" rows="20" cols="80"></textarea>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t    <div class="form-sep">\n\t\t\t\t\t\t\t\t        <input id="saveContentButton" class="btn btn-primary" type="submit" value="<%= messages("save_continue") %>" />\n\t\t\t\t\t\t\t\t        <input id="contentCancelButton" class="btn btn-default" type="button" value="<%= messages("cancel") %>" />\n\t\t\t\t\t\t\t\t    </div>    \n\t\t\t\t\t\t\t  </form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\n'}),define("view/FileView",["text!template/file.html","cm","cm-css","cm-js","cm-xml","cm-html"],function(t){function e(){m=""!=p,$('a[data-toggle="tab"]').on("shown.bs.tab",n),Heiduc.initJSONRpc(r),$("#fileForm").submit(function(){return d(),!1}),$("#cancelButton").click(u),$("#autosave").change(a),$("#contentForm").submit(function(){return s(),!1}),$("#contentCancelButton").click(u)}function n(t,e){"_fileContent"===t.target.id?(i(),v&&(v.focus(),$(v.getScrollerElement()).css("height",.6*$(window).height()+"px").css("border","1px solid silver"),v.refresh())):o()}function i(){"null"!=p&&$("#autosave:checked").length>0&&""==g&&(g=setInterval(s,1e3*Heiduc.AUTOSAVE_TIMEOUT))}function o(){""!=g&&(clearInterval(g),g="")}function s(){v&&v.save();var t=$("textarea").val();Heiduc.jsonrpc.fileService.updateContent(function(t){if("success"==t.result){var e=new Date;Heiduc.info(t.message+" "+e)}else Heiduc.error(t.message)},p,t)}function a(){$("#autosave:checked").length>0?i():o()}function r(){Heiduc.jsonrpc.fileService.getFile(function(t){f=t,m&&(h=f.folderId),c()},p)}function l(t){var e="html";"text/css"==f.mimeType&&(e="css"),"text/xml"==f.mimeType&&(e="xml"),"text/html"==f.mimeType&&(e="htmlmixed"),f.mimeType.indexOf("javascript")!=-1&&(e="javascript"),v=CodeMirror.fromTextArea(document.getElementById("fileContent"),{lineNumbers:!0,theme:"eclipse",mode:e})}function c(){m?($("#filename").html(f.name),$("#title").val(f.title),$("#name").val(f.name),$("#fileEditDiv").show(),$("#mimeType").html(f.mimeType),$("#size").html(f.size),$("#fileLink").html(f.link),$("#download").html('<a href="'+f.link+'">'+messages("download")+"</a>"),f.textFile?($(".contentTab").show(),$("#fileContent").val(f.content),l(f.mimetype)):$(".contentTab").hide(),f.imageFile?$("#imageContent").html('<img src="'+f.link+'" />'):$("#imageContent").html("")):($("#filename").html(""),$("#title").val(""),$("#name").val(""),$("#fileEditDiv").hide(),$(".contentTab").hide(),$("#imageContent").html(""))}function d(){var t=Heiduc.javaMap({id:p,folderId:String(h),title:$("#title").val(),name:$("#name").val()});Heiduc.jsonrpc.fileService.saveFile(function(t){Heiduc.showServiceMessages(t),"success"==t.result&&(location.href="#file/"+t.data)},t)}function u(){location.href="#folder/"+h}console.log("Loading FileView.js");var p=null,h=null,f="",m=""!=p,g="",v=null;return Backbone.View.extend({css:["/static/js/codemirror/codemirror.css","/static/js/codemirror/eclipse.css","/static/css/file.css"],el:$("#content"),tmpl:_.template(t),render:function(){Heiduc.addCSSFiles(this.css),this.el.html(this.tmpl({messages:messages})),e()},remove:function(){this.el.html(""),Heiduc.removeCSSFiles(this.css)},setFileId:function(t){p=t},setFolderId:function(t){h=t}})}),define("text!template/topbar.html",[],function(){return'<!-- HEADER -->\n<nav class="header-navbar">\n    <div class="navbar-header clearfix">\n\t<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mini-navbar-collapse">\n\t    <span class="sr-only">Toggle navigation</span>\n\t    <i class="fa fa-plus"></i>\n\t</a>\n\t\n\t<a class="logo pull-left" href="#">\n\t    <img src="/static/assets/img/logo.png" width="110" alt="Heiduc Logo">\n\t</a>\n\t\n\t<a class="sidebar-switch pull-right"><span class="icon fa"></span></a>\n    </div>\n  \n    <div class="collapse navbar-collapse" id="mini-navbar-collapse">\n\t<form class="navbar-form navbar-left" role="search">\n\t    <div class="input-group input-group-sm">\n\t\t<input type="text" class="form-control" placeholder="Search">\n\t\t<span class="input-group-btn">\n\t\t    <button class="btn" type="button"><i class="fa fa-search"></i></button>\n\t\t</span>\n\t    </div>\n\t</form>\n\t\n\t<ul class="nav navbar-nav navbar-right">\n\t\t<li>\n\t\t\t<%= locale %>\n\t\t</li>\n\t\t<li><a href="#">\n\t\t<i class="fa fa-lock"></i>\n\t\t<span>Locked</span>\n\t    </a></li>\n\t    <li class="turn-off"><a href="#logout">\n\t\t<i class="fa fa-power-off"></i>\n\t\t<span><%= messages("logout") %></span>\n\t    </a></li>\n\t</ul>\n    </div><!-- navbar-collapse -->\n</nav>\n<!-- HEADER -->\n\n'}),define("text!template/sidebar.html",[],function(){return'<!-- side navigation -->\n<aside class="sidebar affix" role="complementary">\n\t<div class="sidebar-user">\n\t\t<div class="media sidebar-padding">\n\t\t\t<div class="media-left media-middle">\n\t\t\t\t<img src="/static/images/guy.jpg" alt="person" style="width: 60px" class="img-circle">\n\t\t\t</div>\n\t\t\t<div class="media-body media-middle">\n\t\t\t\t<a href="#profile" class="h4 margin-none"><%= Heiduc.app.user.name %></a>\n\t\t\t\t<ul class="list-unstyled list-inline margin-none">\n\t\t\t\t\t<li><a href="#profile"><i class="fa fa-user"></i><%= Heiduc.app.user.email %></a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<!-- Wrapper Reqired by Nicescroll (start scroll from here) -->\n\t<div class="nicescroll">\n\t\t<div class="wrapper" style="margin-bottom: 140px; overflow-y: hidden; outline: none;" tabindex="0">\n\t\t\t<ul class="nav nav-sidebar" id="sidebar-menu">\n                <h4 class="sidebar-headline">管理</h4>\n                <li class="active"><a href="#index"><i class="fa fa-dashboard"></i> Dashboard <span class="sr-only">(current)</span></a></li>\n\t\t\t\t<li><a href="#pages"><i class="fa fa-pencil-square"></i> <%= messages("content") %></a></li>\n\t\t\t\t<% if (Heiduc.app.user.admin) { %>\n                <li><a href="#templates"><i class="fa fa-files-o"></i> <%= messages("templates") %></a></li>\n                <% } %>      \n                <li><a href="#folders"><i class="fa fa-archive"></i> <%= messages("resources") %></a></li>\n                <% if (Heiduc.app.user.admin) { %>\n                <li><a href="#config"><i class="fa fa-cogs"></i><%= messages("configuration") %></a></li>\n\t\t\t\t<% } %>\n\t\t\t</ul>\n\t\t\t<ul class="nav nav-sidebar">\n                <h4 class="sidebar-headline">功能</h4>\n                <%= plugins %>\n\t\t\t</ul>\n\t\t\t<% if (Heiduc.app.user.admin) { %>\n\t\t\t<h4 class="sidebar-headline">支持</h4>\n\n\t\t\t<ul class="nav nav-sidebar">\n\t\t\t\t<li class="submenu">\n\t\t\t\t\t<a href="#plugins"><i class="fa fa-puzzle-piece"></i><%= messages("plugins") %></a>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><a href="#plugins/config"><%= messages("plugins.config") %></a></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href="#plugins/forms">\n\t\t\t\t\t\t\t\t<%= messages("forms") %><!--  &nbsp;<span class="label label-primary">1468</span> -->\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li><a href="#plugins/seo-urls"><%= messages("plugins.seo_urls") %> </a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<% } %>\n\t\t</div>\n\t</aside>\n\n'}),define("app",["view/LoginView","view/PagesView","view/IndexView","view/StructuresView","view/StructureView","view/StructureTemplateView","view/TemplatesView","view/TemplateView","view/page/PageView","view/ProfileView","view/plugins/PluginsView","view/plugins/PluginView","view/plugins/ConfigView","view/plugins/FormsView","view/plugins/FormView","view/plugins/SeoUrlsView","view/plugins/AddonsView","view/config/ConfigView","view/FoldersView","view/FolderView","view/FileView","text!template/topbar.html","text!template/locale.html","text!template/sidebar.html"],function(t,e,n,i,o,s,a,r,l,c,d,u,p,h,f,m,g,v,b,y,w,x,C,S){return Backbone.Router.extend({
initialize:function(){function t(){var t=$(window).innerHeight();$(".main").css("min-height",t)}this.bind("login",this.login,this),Heiduc.loggedIn?this.login():this.currentView=this.loginView.render(),$("#topbar, #main_wrapper").fadeIn(),$("#main_wrapper").append('<!-- FOOTER --><footer id="footer" role="contentinfo">Copyright &copy; 2015 Heiduc Inc.</footer><!-- FOOTER -->'),t(),$(window).on("resize",function(){t()})},currentView:null,indexView:new n,loginView:new t,pagesView:new e,structuresView:new i,structureView:new o,structureTemplateView:new s,templatesView:new a,templateView:new r,pageView:new l,profileView:new c,pluginsView:new d,pluginView:new u,pluginsConfigView:new p,pluginsFormsView:new h,pluginsFormView:new f,pluginsSeoUrlsView:new m,pluginsAddonsView:new g,configView:new v,foldersView:new b,folderView:new y,fileView:new w,routes:{index:"index",pages:"pages","page/content/:id":"editContent","page/:id":"editPage",structures:"structures",structure:"addStructure","structure/:id":"editStructure","addStructureTemplate/:id":"addStructureTemplate","structureTemplate/:id":"structureTemplate",profile:"profile",logout:"logout",plugins:"plugins","plugins/config":"pluginsConfig","plugins/forms":"pluginsForms","plugins/form":"pluginsFormNew","plugins/form/:id":"pluginsFormEdit","plugins/seo-urls":"pluginsSeoUrls","plugin/:id":"plugin","addons/*path":"pluginsAddons",templates:"templates",template:"createTemplate","template/:id":"editTemplate",config:"config",folders:"folders","folder/:id":"editFolder","addFolder/:id":"addFolder","file/:id":"editFile","addFile/:id":"addFile"},show:function(t){this.currentView&&(this.currentView.remove(),this.currentView=null),this.currentView=t,t.render()},pages:function(){this.show(this.pagesView)},index:function(){this.show(this.indexView)},structures:function(){this.show(this.structuresView)},addStructure:function(){this.structureView.setId(""),this.show(this.structureView)},editStructure:function(t){this.structureView.setId(t),this.show(this.structureView)},addStructureTemplate:function(t){this.structureTemplateView.create(t),this.show(this.structureTemplateView)},structureTemplate:function(t){this.structureTemplateView.edit(t),this.show(this.structureTemplateView)},templates:function(){this.show(this.templatesView)},createTemplate:function(){this.templateView.create(),this.show(this.templateView)},editTemplate:function(t){this.templateView.edit(t),this.show(this.templateView)},editContent:function(t){this.pageView.editContent(t),this.show(this.pageView)},editPage:function(t){this.pageView.editPage(t),this.show(this.pageView)},profile:function(t){this.show(this.profileView)},plugins:function(){this.show(this.pluginsView)},pluginsConfig:function(){this.show(this.pluginsConfigView)},pluginsForms:function(){this.show(this.pluginsFormsView)},pluginsFormNew:function(){this.pluginsFormView.setId(""),this.show(this.pluginsFormView)},pluginsFormEdit:function(t){this.pluginsFormView.setId(t),this.show(this.pluginsFormView)},pluginsSeoUrls:function(){this.show(this.pluginsSeoUrlsView)},pluginsAddons:function(t){this.pluginsAddonsView.setAddonsId(t),this.show(this.pluginsAddonsView)},config:function(){this.show(this.configView)},folders:function(){this.show(this.foldersView)},editFolder:function(t){this.folderView.setFolderId(t),this.folderView.setFolderParentId(""),this.show(this.folderView)},addFolder:function(t){this.folderView.setFolderId(""),this.folderView.setFolderParentId(t),this.show(this.folderView)},editFile:function(t){this.fileView.setFileId(t),this.fileView.setFolderId(""),this.show(this.fileView)},addFile:function(t){this.fileView.setFileId(""),this.fileView.setFolderId(t),this.show(this.fileView)},logout:function(){Heiduc.jsonrpc.loginFrontService.logout(function(t,e){Heiduc.serviceFailed(e)||("success"==t.result?location.href="/cms":Heiduc.showServiceMessages(t))})},plugin:function(t){this.pluginView.setPluginId(t),this.show(this.pluginView)},login:function(){Heiduc.jsonrpcInitialized=!1,Heiduc.createJSONRpc(),Heiduc.initJSONRpcSystem(Heiduc.initBackServices);var t=this;Heiduc.initJSONRpc(function(){try{Heiduc.jsonrpc.userService.getLoggedIn(function(e){Heiduc.app.user=e;var n=_.template(C,{messages:messages});$("#topbar").html(_.template(x,{locale:n,Heiduc:Heiduc,messages:messages})),t.renderSide(),Backbone.history.start()||Heiduc.app.navigate("index",!0)})}catch(t){alert(t)}})},renderSide:function(){try{Heiduc.jsonrpc.pluginService.select(function(t){plugins=t.list;var e="";$.each(plugins,function(t,n){var i="#plugin/"+n.id;n.configURL&&(i="#addons/"+n.name);var o=null==n.role?[]:n.role.split(",");return!!(Heiduc.app.user.user&&$.inArray("ALL",o)<0&&$.inArray("USER",o)<0)||void(e+='<li><a href="'+i+'">'+Heiduc.message(n.title)+"</a></li>\r\n")}),$("#topbar").after(_.template(S,{Heiduc:Heiduc,messages:messages,plugins:e})),$(".sidebar .nicescroll .wrapper").niceScroll({scrollspeed:26,cursorcolor:"#429eee",cursorborder:0,horizrailenabled:!1,railoffset:{left:-1}}),$(".nav-sidebar .submenu > a").on("click",function(t){t.preventDefault();var e=$(this).closest(".sidebar"),n=e.find(".submenu .in");n.collapse("hide"),$(this).next("ul").show().collapse("show"),n.hide(),$(this).hasClass("open")&&$(this).removeClass("open"),e.find("a.open").removeClass("open"),$(this).addClass("open")}),$("sidebar").find(".collapse").on("shown.bs.collapse",function(){$(".sidebar").getNiceScroll().show().onResize()}),$(".sidebar-switch").on("click",function(){parseInt($(window).width())<1169?($(".wrapper").removeClass("sidebar-toggle"),$(".wrapper").toggleClass("sidebar-toggle-sm")):parseInt($(window).width())>1170&&$(".wrapper").toggleClass("sidebar-toggle")}),$(window).on("resize",function(){$(window).width()>1169?$(".wrapper").removeClass("sidebar-toggle-sm"):$(window).width()<1170&&$(".wrapper").removeClass("sidebar-toggle")})})}catch(t){alert(t)}},pluginRouter:{navigate:function(t,e){hashStrip=/^#*/;var n=window.location.hash,i=(n||"").replace(hashStrip,"");return t.routes instanceof Object&&t.routes.hasOwnProperty(i)&&(t.navigate("loader"),t.navigate(i,e),t.route("addons/*path","pluginsAddons",function(t){Heiduc.app.pluginsAddons(t)})),t}}})}),function(t,e,n){function i(t){return t}function o(t){return s(decodeURIComponent(t.replace(r," ")))}function s(t){return 0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),t}function a(t){return l.json?JSON.parse(t):t}var r=/\+/g,l=t.cookie=function(s,r,c){if(r!==n){if(c=t.extend({},l.defaults,c),null===r&&(c.expires=-1),"number"==typeof c.expires){var d=c.expires,u=c.expires=new Date;u.setDate(u.getDate()+d)}return r=l.json?JSON.stringify(r):String(r),e.cookie=[encodeURIComponent(s),"=",l.raw?r:encodeURIComponent(r),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var p=l.raw?i:o,h=e.cookie.split("; "),f=s?null:{},m=0,g=h.length;m<g;m++){var v=h[m].split("="),b=p(v.shift()),y=p(v.join("="));if(s&&s===b){f=a(y);break}s||(f[b]=a(y))}return f};l.defaults={},t.removeCookie=function(e,n){return null!==t.cookie(e)&&(t.cookie(e,null,n),!0)}}(jQuery,document),define("jquery.cookie",["jquery"],function(){}),function(t){void 0==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}),t.xmlDOM=function(e,n){try{var i=(new DOMParser).parseFromString(e,"text/xml");if(!t.isXMLDoc(i))throw"Unable to parse XML";var o=t("parsererror",i);if(1==o.length)throw"Error: "+t(i).text()}catch(e){var s=void 0==e.name?e:e.name+": "+e.message;return t.isFunction(n)?n(s):t(document).trigger("xmlParseError",[s]),t([])}return t(i)}}(jQuery),define("jquery.xmldom",["jquery"],function(){}),function(t){function e(e,n){throw t.extend(e,n),e}function n(t){var e=[];if(f.call(t)!==l)return o;for(var n=0,i=t.length;n<i;n++)e[n]=t[n].jqote_id;return e.length?e.sort().join(".").replace(/(\b\d+\b)\.(?:\1(\.|$))+/g,"$1$2"):o}function i(e,n){var i=[],n=n||p,s=f.call(e);if(s===d)return e.jqote_id?[e]:o;if(s!==l)return[t.jqotec(e,n)];if(s===l)for(var a=0,r=e.length;a<r;a++)return i.length?i:o}var o=!1,s="UndefinedTemplateError",a="TemplateCompilationError",r="TemplateExecutionError",l="[object Array]",c="[object String]",d="[object Function]",u=1,p="%",h=/^[^<]*(<[\w\W]+>)[^>]*$/,f=Object.prototype.toString;t.fn.extend({jqote:function(e,n){var e=f.call(e)===l?e:[e],i="";return this.each(function(o){for(var s=t.jqotec(this,n),a=0;a<e.length;a++)i+=s.call(e[a],o,a,e,s)}),i}}),t.each({app:"append",pre:"prepend",sub:"html"},function(e,o){t.fn["jqote"+e]=function(s,a,r){var l,c,d=t.jqote(s,a,r),u=h.test(d)?t:function(e){return t(document.createTextNode(e))};return(l=n(i(s)))&&(c=new RegExp("(^|\\.)"+l.split(".").join("\\.(.*)?")+"(\\.|$)")),this.each(function(){var n=u(d);t(this)[o](n),(3===n[0].nodeType?t(this):n).trigger("jqote."+e,[n,c])})}}),t.extend({jqote:function(t,n,a){var r="",c=i(t);c===o&&e(new Error("Empty or undefined template passed to $.jqote"),{type:s}),n=f.call(n)!==l?[n]:n;for(var d=0,u=c.length;d<u;d++)for(var p=0;p<n.length;p++)r+=c[d].call(n[p],d,p,n,c[d]);return r},jqotec:function(n,i){var o,l,d,i=i||p,m=f.call(n);if(m===c&&h.test(n)){if(l=d=n,o=t.jqotecache[n])return o}else if(l=m===c||n.nodeType?t(n):n instanceof jQuery?n:null,l[0]&&((d=l[0].innerHTML)||(d=l.text()))||e(new Error("Empty or undefined template passed to $.jqotec"),{type:s}),o=t.jqotecache[t.data(l[0],"jqote_id")])return o;for(var g,v="",b=d.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,"").split("<"+i).join(i+">").split(i+">"),y=0,w=b.length;y<w;y++)v+=""!==b[y].charAt(0)?"out+='"+b[y].replace(/(\\|["'])/g,"\\$1")+"'":"="===b[y].charAt(1)?";out+=("+b[y].substr(2)+");":"!"===b[y].charAt(1)?";out+=$.jqotenc(("+b[y].substr(2)+"));":";"+b[y].substr(1);v="try{"+('var out="";'+v+";return out;").split("out+='';").join("").split('var out="";out+=').join("var out=")+'}catch(e){e.type="'+r+'";e.args=arguments;e.template=arguments.callee.toString();throw e;}';try{var x=new Function("i, j, data, fn",v)}catch(t){e(t,{type:a})}return g=l instanceof jQuery?t.data(l[0],"jqote_id",u):l,t.jqotecache[g]=(x.jqote_id=u++,x)},jqotefn:function(e){var n=f.call(e),i=n===c&&h.test(e)?e:t.data(t(e)[0],"jqote_id");return t.jqotecache[i]||o},jqotetag:function(t){f.call(t)===c&&(p=t)},jqotenc:function(t){return t.toString().replace(/&(?!\w+;)/g,"&#38;").split("<").join("&#60;").split(">").join("&#62;").split('"').join("&#34;").split("'").join("&#39;")},jqotecache:{}}),t.event.special.jqote={add:function(t){var e,o=t.handler,s=t.data?f.call(t.data)!==l?[t.data]:t.data:[];t.namespace||(t.namespace="app.pre.sub"),s.length&&(e=n(i(s)))&&(t.handler=function(t,n,i){return!i||i.test(e)?o.apply(this,[t,n]):null})}}}(jQuery),define("jquery.jquote2",["jquery"],function(){}),void 0==Heiduc&&alert(messages("heiduc.namespace_error")),Heiduc.AUTOSAVE_TIMEOUT=60,Heiduc.ENGLISH_CODE="en",Heiduc.info=function(t){noty({text:t,layout:"bottomRight",type:"success",theme:"tisa_theme",timeout:1e4,closeWith:["button"],maxVisible:10})},Heiduc.error=function(t){noty({text:t,layout:"bottomRight",type:"error",theme:"tisa_theme",timeout:!1,closeWith:["button"],maxVisible:10})},Heiduc.infoMessage=function(t,e){noty({text:e,layout:"bottomRight",type:"info",theme:"tisa_theme",timeout:1e3,dismissQueue:!1,closeWith:["click"],maxVisible:10})},Heiduc.errorMessage=function(t,e){noty({text:e,layout:"bottomRight",type:"error",theme:"tisa_theme",dismissQueue:!1,timeout:3e3,closeWith:["click"],maxVisible:10})},Heiduc.errorMessages=function(t,e){var n="";$.each(e,function(t,e){n+=(0==t?"":"<br />")+e}),Heiduc.errorMessage(t,n)},Heiduc.showServiceMessages=function(t){"success"==t.result?t.messages.list.length>0&&$.each(t.messages.list,function(t,e){Heiduc.info(e)}):t.messages.list.length>0&&$.each(t.messages.list,function(t,e){Heiduc.error(e)})},Heiduc.idMap=function(t){var e={};return $.each(t,function(t,n){e[n.id]=n}),e},Heiduc.message=function(t){return"$"==t.charAt(0)?messages(t.substr(1)):t},Heiduc.addCSSFile=function(t){$("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />')},Heiduc.addCSSFiles=function(t){$.each(t,function(t,e){Heiduc.addCSSFile(e)})},Heiduc.removeCSSFile=function(t){$('head link[href="'+t+'"]').remove()},Heiduc.removeCSSFiles=function(t){$.each(t,function(t,e){Heiduc.removeCSSFile(e)})},Heiduc.clientId=Heiduc.generateGUID(),Heiduc.channel=null,Heiduc.socket=null,Heiduc.initChannel=function(t,e,n,i){var o=atmosphere;null!=Heiduc.socket&&o.unsubscribe();var s="websocket",a={url:"/_ah/channel/"+Heiduc.clientId,contentType:"application/json",logLevel:"error",transport:s,fallbackTransport:"long-polling",trackMessageLength:!1,reconnectInterval:5e3,enableXDR:!0,enableProtocol:!0,timeout:6e4};a.onOpen=t,a.onMessage=e,a.onError=n,a.onClose=i;var r=o.subscribe(a);Heiduc.socket=r},Heiduc.sendChannelCommand=function(t,e){var n="&clientId="+Heiduc.clientId;$.each(e,function(t,e){n+="&"+t+"="+e});var i=new XMLHttpRequest;i.open("POST","/_ah/channelCommand?cmd="+t+n,!0),i.send()},Heiduc.changeLanguageCall=function(t){Heiduc.jsonrpc.loginFrontService.setLanguage(function(t){location.reload()},t)},define("cms",["heiduc"],function(){}),void 0==Heiduc&&alert(messages("heiduc.namespace_error")),Heiduc.backServiceFailed=function(t){return null!=t&&(Heiduc.error(messages("heiduc.cant_connect")+" "+t+" "+t.message+" "+t.code+" "+t.msg),!0)},Heiduc.serviceHandler=function(t){return function(){var e=arguments[0],n=arguments;n[0]=function(t,n){$("#loading").hide(),Heiduc.backServiceFailed(n)||e(t)},$("#loading").show(),t.apply(null,n)}},Heiduc.setupJSONRpcHooks=function(){for(var t in Heiduc.jsonrpc)if(t.indexOf("Service")!=-1&&t.indexOf("FrontService")==-1)for(var e in Heiduc.jsonrpc[t])if("function"==typeof Heiduc.jsonrpc[t][e]){var n=Heiduc.jsonrpc[t][e];Heiduc.jsonrpc[t][e]=Heiduc.serviceHandler(n)}},Heiduc.initBackServices=function(){Heiduc.setupJSONRpcHooks()},define("back-services",["heiduc"],function(){}),function(t){function e(t,e){return function(n){return l(t.call(this,n),e)}}function n(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function i(){}function o(t){w(t),a(this,t)}function s(t){var e=f(t),n=e.year||0,i=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,r=e.minute||0,l=e.second||0,c=e.millisecond||0;this._input=t,this._milliseconds=+c+1e3*l+6e4*r+36e5*a,this._days=+s+7*o,this._months=+i+12*n,this._data={},this._bubble()}function a(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function r(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function c(t,e,n,i){var o,s,a=e._milliseconds,r=e._days,l=e._months;a&&t._d.setTime(+t._d+a*n),(r||l)&&(o=t.minute(),s=t.hour()),r&&t.date(t.date()+r*n),l&&t.month(t.month()+l*n),a&&!i&&et.updateOffset(t),(r||l)&&(t.minute(o),t.hour(s))}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function u(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function p(t,e,n){var i,o=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(i=0;o>i;i++)(n&&t[i]!==e[i]||!n&&g(t[i])!==g(e[i]))&&a++;return a+s}function h(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=At[t]||It[e]||e}return t}function f(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=h(n),e&&(i[e]=t[n]));return i}function m(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}et[e]=function(o,s){var a,r,l=et.fn._lang[e],c=[];if("number"==typeof o&&(s=o,o=t),r=function(t){var e=et().utc().set(i,t);return l.call(et.fn._lang,e,o||"")},null!=s)return r(s);for(a=0;n>a;a++)c.push(r(a));return c}}function g(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function v(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function b(t){return y(t)?366:365}function y(t){return 0===t%4&&0!==t%100||0===t%400}function w(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[at]<0||t._a[at]>11?at:t._a[rt]<1||t._a[rt]>v(t._a[st],t._a[at])?rt:t._a[lt]<0||t._a[lt]>23?lt:t._a[ct]<0||t._a[ct]>59?ct:t._a[dt]<0||t._a[dt]>59?dt:t._a[ut]<0||t._a[ut]>999?ut:-1,t._pf._overflowDayOfYear&&(st>e||e>rt)&&(e=rt),t._pf.overflow=e)}function x(t){t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function C(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function S(t){return t?t.toLowerCase().replace("_","-"):t}function k(t,e){return e.abbr=t,pt[t]||(pt[t]=new i),pt[t].set(e),pt[t]}function $(t){delete pt[t]}function T(t){var e,n,i,o,s=0,a=function(t){if(!pt[t]&&ht)try{require("./lang/"+t)}catch(t){}return pt[t]};if(!t)return et.fn._lang;if(!d(t)){if(n=a(t))return n;t=[t]}for(;s<t.length;){for(o=S(t[s]).split("-"),e=o.length,i=S(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=a(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&p(o,i,!0)>=e-1)break;e--}s++}return et.fn._lang}function _(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function D(t){var e,n,i=t.match(vt);for(e=0,n=i.length;n>e;e++)i[e]=Ft[i[e]]?Ft[i[e]]:_(i[e]);return function(o){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(o,t):i[e];return s}}function R(t,e){return t.isValid()?(e=E(e,t.lang()),jt[e]||(jt[e]=D(e)),jt[e](t)):t.lang().invalidDate()}function E(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(bt.lastIndex=0;i>=0&&bt.test(t);)t=t.replace(bt,n),bt.lastIndex=0,i-=1;return t}function M(t,e){var n;switch(t){case"DDDD":return xt;case"YYYY":case"GGGG":case"gggg":return Ct;case"YYYYY":case"GGGGG":case"ggggg":return St;case"S":case"SS":case"SSS":case"DDD":return wt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $t;case"a":case"A":return T(e._l)._meridiemParse;case"X":return Dt;case"Z":case"ZZ":return Tt;case"T":return _t;case"SSSS":return kt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return yt;default:return n=new RegExp(O(j(t.replace("\\","")),"i"))}}function H(t){var e=(Tt.exec(t)||[])[0],n=(e+"").match(Nt)||["-",0,0],i=+(60*n[1])+g(n[2]);return"+"===n[0]?-i:i}function N(t,e,n){var i,o=n._a;switch(t){case"M":case"MM":null!=e&&(o[at]=g(e)-1);break;case"MMM":case"MMMM":i=T(n._l).monthsParse(e),null!=i?o[at]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[rt]=g(e));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=g(e));break;case"YY":o[st]=g(e)+(g(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":o[st]=g(e);break;case"a":case"A":n._isPm=T(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":o[lt]=g(e);break;case"m":case"mm":o[ct]=g(e);break;case"s":case"ss":o[dt]=g(e);break;case"S":case"SS":case"SSS":case"SSSS":o[ut]=g(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=H(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function P(t){var e,n,i,o,s,a,r,l,c,d,u=[];if(!t._d){for(i=A(t),t._w&&null==t._a[rt]&&null==t._a[at]&&(s=function(e){return e?e.length<3?parseInt(e,10)>68?"19"+e:"20"+e:e:null==t._a[st]?et().weekYear():t._a[st]},a=t._w,null!=a.GG||null!=a.W||null!=a.E?r=J(s(a.GG),a.W||1,a.E,4,1):(l=T(t._l),c=null!=a.d?q(a.d,l):null!=a.e?parseInt(a.e,10)+l._week.dow:0,d=parseInt(a.w,10)||1,null!=a.d&&c<l._week.dow&&d++,r=J(s(a.gg),d,c,l._week.doy,l._week.dow)),t._a[st]=r.year,t._dayOfYear=r.dayOfYear),t._dayOfYear&&(o=null==t._a[st]?i[st]:t._a[st],t._dayOfYear>b(o)&&(t._pf._overflowDayOfYear=!0),n=U(o,0,t._dayOfYear),t._a[at]=n.getUTCMonth(),t._a[rt]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=u[e]=i[e];for(;7>e;e++)t._a[e]=u[e]=null==t._a[e]?2===e?1:0:t._a[e];u[lt]+=g((t._tzm||0)/60),u[ct]+=g((t._tzm||0)%60),t._d=(t._useUTC?U:V).apply(null,u)}}function L(t){var e;t._d||(e=f(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],P(t))}function A(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function I(t){t._a=[],t._pf.empty=!0;var e,n,i,o,s,a=T(t._l),r=""+t._i,l=r.length,c=0;for(i=E(t._f,a).match(vt)||[],e=0;e<i.length;e++)o=i[e],n=(M(o,t).exec(r)||[])[0],n&&(s=r.substr(0,r.indexOf(n)),s.length>0&&t._pf.unusedInput.push(s),r=r.slice(r.indexOf(n)+n.length),c+=n.length),Ft[o]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(o),N(o,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-c,r.length>0&&t._pf.unusedInput.push(r),t._isPm&&t._a[lt]<12&&(t._a[lt]+=12),t._isPm===!1&&12===t._a[lt]&&(t._a[lt]=0),P(t),w(t)}function j(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,o){return e||n||i||o})}function O(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function z(t){var e,n,i,o,s;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)s=0,e=a({},t),x(e),e._f=t._f[o],I(e),C(e)&&(s+=e._pf.charsLeftOver,s+=10*e._pf.unusedTokens.length,e._pf.score=s,(null==i||i>s)&&(i=s,n=e));a(t,n||e)}function F(t){var e,n=t._i,i=Rt.exec(n);if(i){for(t._pf.iso=!0,e=4;e>0;e--)if(i[e]){t._f=Mt[e-1]+(i[6]||" ");break}for(e=0;4>e;e++)if(Ht[e][1].exec(n)){t._f+=Ht[e][0];break}Tt.exec(n)&&(t._f+="Z"),I(t)}else t._d=new Date(n)}function B(e){var n=e._i,i=ft.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?F(e):d(n)?(e._a=n.slice(0),P(e)):u(n)?e._d=new Date(+n):"object"==typeof n?L(e):e._d=new Date(n)}function V(t,e,n,i,o,s,a){var r=new Date(t,e,n,i,o,s,a);return 1970>t&&r.setFullYear(t),r}function U(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function q(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function W(t,e,n,i,o){return o.relativeTime(e||1,!!n,t,i)}function Y(t,e,n){var i=ot(Math.abs(t)/1e3),o=ot(i/60),s=ot(o/60),a=ot(s/24),r=ot(a/365),l=45>i&&["s",i]||1===o&&["m"]||45>o&&["mm",o]||1===s&&["h"]||22>s&&["hh",s]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",ot(a/30)]||1===r&&["y"]||["yy",r];return l[2]=e,l[3]=t>0,l[4]=n,W.apply({},l)}function X(t,e,n){var i,o=n-e,s=n-t.day();return s>o&&(s-=7),o-7>s&&(s+=7),i=et(t).add("d",s),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function J(t,e,n,i,o){var s,a,r=new Date(Date.UTC(t,0)).getUTCDay();return n=null!=n?n:o,s=o-r+(r>i?7:0),a=7*(e-1)+(n-o)+s+1,{year:a>0?t:t-1,dayOfYear:a>0?a:b(t-1)+a}}function G(t){var e=t._i,n=t._f;return"undefined"==typeof t._pf&&x(t),null===e?et.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=T().preparse(e)),et.isMoment(e)?(t=a({},e),t._d=new Date(+e._d)):n?d(n)?z(t):I(t):B(t),new o(t))}function K(t,e){et.fn[t]=et.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),et.updateOffset(this),this):this._d["get"+n+e]()}}function Q(t){et.duration.fn[t]=function(){return this._data[t]}}function Z(t,e){et.duration.fn["as"+t]=function(){return+this/e}}function tt(t){var e=!1,n=et;"undefined"==typeof ender&&(this.moment=t?function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)}:et)}for(var et,nt,it="2.4.0",ot=Math.round,st=0,at=1,rt=2,lt=3,ct=4,dt=5,ut=6,pt={},ht="undefined"!=typeof module&&module.exports,ft=/^\/?Date\((\-?\d+)/i,mt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,gt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,bt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,yt=/\d\d?/,wt=/\d{1,3}/,xt=/\d{3}/,Ct=/\d{1,4}/,St=/[+\-]?\d{1,6}/,kt=/\d+/,$t=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Tt=/Z|[\+\-]\d\d:?\d\d/i,_t=/T/i,Dt=/[\+\-]?\d+(\.\d{1,3})?/,Rt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Et="YYYY-MM-DDTHH:mm:ssZ",Mt=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Ht=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Nt=/([\+\-]|\d\d)/gi,Pt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Lt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},At={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},It={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},jt={},Ot="DDD w W M D d".split(" "),zt="M D H h m s w W".split(" "),Ft={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return l(g(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(t/60),2)+":"+l(g(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(g(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Bt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Ot.length;)nt=Ot.pop(),Ft[nt+"o"]=n(Ft[nt],nt);for(;zt.length;)nt=zt.pop(),Ft[nt+nt]=e(Ft[nt],2);for(Ft.DDDD=e(Ft.DDD,3),a(i.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=et.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=et([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var o=this._relativeTime[n];return"function"==typeof o?o(t,e,n,i):o.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return X(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),et=function(e,n,i,o){return"boolean"==typeof i&&(o=i,i=t),G({_i:e,_f:n,_l:i,_strict:o,_isUTC:!1})},et.utc=function(e,n,i,o){var s;return"boolean"==typeof i&&(o=i,i=t),s=G({_useUTC:!0,_isUTC:!0,_l:i,_i:e,_f:n,_strict:o}).utc()},et.unix=function(t){return et(1e3*t)},et.duration=function(t,e){var n,i,o,a=et.isDuration(t),r="number"==typeof t,l=a?t._input:r?{}:t,c=null;return r?e?l[e]=t:l.milliseconds=t:(c=mt.exec(t))?(n="-"===c[1]?-1:1,l={y:0,d:g(c[rt])*n,h:g(c[lt])*n,m:g(c[ct])*n,s:g(c[dt])*n,ms:g(c[ut])*n}):(c=gt.exec(t))&&(n="-"===c[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},l={y:o(c[2]),M:o(c[3]),d:o(c[4]),h:o(c[5]),m:o(c[6]),s:o(c[7]),w:o(c[8])}),i=new s(l),a&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},et.version=it,et.defaultFormat=Et,et.updateOffset=function(){},et.lang=function(t,e){var n;return t?(e?k(S(t),e):null===e?($(t),t="en"):pt[t]||T(t),n=et.duration.fn._lang=et.fn._lang=T(t),n._abbr):et.fn._lang._abbr},et.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),T(t)},et.isMoment=function(t){return t instanceof o},et.isDuration=function(t){return t instanceof s},nt=Bt.length-1;nt>=0;--nt)m(Bt[nt]);for(et.normalizeUnits=function(t){return h(t)},et.invalid=function(t){var e=et.utc(NaN);return null!=t?a(e._pf,t):e._pf.userInvalidated=!0,e},et.parseZone=function(t){return et(t).parseZone()},a(et.fn=o.prototype,{clone:function(){return et(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");
},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return R(et(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return C(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&p(this._a,(this._isUTC?et.utc(this._a):et(this._a)).toArray())>0)},parsingFlags:function(){return a({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=R(this,t||et.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?et.duration(+e,t):et.duration(t,e),c(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?et.duration(+e,t):et.duration(t,e),c(this,n,-1),this},diff:function(t,e,n){var i,o,s=this._isUTC?et(t).zone(this._offset||0):et(t).local(),a=6e4*(this.zone()-s.zone());return e=h(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+s.daysInMonth()),o=12*(this.year()-s.year())+(this.month()-s.month()),o+=(this-et(this).startOf("month")-(s-et(s).startOf("month")))/i,o-=6e4*(this.zone()-et(this).startOf("month").zone()-(s.zone()-et(s).startOf("month").zone()))/i,"year"===e&&(o/=12)):(i=this-s,o="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?o:r(o)},from:function(t,e){return et.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(et(),t)},calendar:function(){var t=this.diff(et().zone(this.zone()).startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){return y(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=q(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),et.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=h(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=h(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+et(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+et(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+et(t).startOf(e)},min:function(t){return t=et.apply(null,arguments),this>t?this:t},max:function(t){return t=et.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=H(t)),Math.abs(t)<16&&(t*=60),this._offset=t,this._isUTC=!0,e!==t&&c(this,et.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?et(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(t){var e=ot((et(this).startOf("day")-et(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=X(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=X(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=h(t),this[t]()},set:function(t,e){return t=h(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=T(e),this)}}),nt=0;nt<Pt.length;nt++)K(Pt[nt].toLowerCase().replace(/s$/,""),Pt[nt]);K("year","FullYear"),et.fn.days=et.fn.day,et.fn.months=et.fn.month,et.fn.weeks=et.fn.week,et.fn.isoWeeks=et.fn.isoWeek,et.fn.toJSON=et.fn.toISOString,a(et.duration.fn=s.prototype,{_bubble:function(){var t,e,n,i,o=this._milliseconds,s=this._days,a=this._months,l=this._data;l.milliseconds=o%1e3,t=r(o/1e3),l.seconds=t%60,e=r(t/60),l.minutes=e%60,n=r(e/60),l.hours=n%24,s+=r(n/24),l.days=s%30,a+=r(s/30),l.months=a%12,i=r(a/12),l.years=i},weeks:function(){return r(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)},humanize:function(t){var e=+this,n=Y(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=et.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=et.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=h(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=h(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:et.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||o||s?"T":"")+(i?i+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"}});for(nt in Lt)Lt.hasOwnProperty(nt)&&(Z(nt,Lt[nt]),Q(nt.toLowerCase()));Z("Weeks",6048e5),et.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},et.lang("en",{ordinal:function(t){var e=t%10,n=1===g(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),ht?(module.exports=et,tt(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(e,n,i){return i.config().noGlobal!==!0&&tt(i.config().noGlobal===t),et}):tt()}.call(this),define("moment-js",function(){}),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t){var e={init:function(e){return this.options=t.extend({},t.noty.defaults,e),this.options.layout=this.options.custom?t.noty.layouts.inline:t.noty.layouts[this.options.layout],t.noty.themes[this.options.theme]?this.options.theme=t.noty.themes[this.options.theme]:e.themeClassName=this.options.theme,delete e.layout,delete e.theme,this.options=t.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=t.extend({},this.options,e),this._build(),this},_build:function(){var e=t('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?t(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=t("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;t.each(this.options.buttons,function(e,n){var o=t("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+e).appendTo(i.$bar.find(".noty_buttons")).bind("click",function(){t.isFunction(n.onClick)&&n.onClick.call(o,i)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),t.noty.store[this.options.id]=this},show:function(){var e=this;return e.options.custom?e.options.custom.find(e.options.layout.container.selector).append(e.$bar):t(e.options.layout.container.selector).append(e.$bar),e.options.theme&&e.options.theme.style&&e.options.theme.style.apply(e),"function"===t.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply(t(e.options.layout.container.selector)),e.showing=!0,e.options.theme&&e.options.theme.style&&e.options.theme.callback.onShow.apply(this),t.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(t){e.stopPropagation(t),e.options.callback.onCloseClick&&e.options.callback.onCloseClick.apply(e),e.close()}),t.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),t.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(t){e.stopPropagation(t),e.close()}),t.inArray("button",e.options.closeWith)==-1&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var e=this;if(this.showing)return void e.$bar.queue(function(){e.close.apply(e)});if(!this.shown&&!this.showing){var n=[];return t.each(t.noty.queue,function(t,i){i.options.id!=e.options.id&&n.push(i)}),void(t.noty.queue=n)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.options.modal&&(t.notyRenderer.setModalCount(-1),0==t.notyRenderer.getModalCount()&&t(".noty_modal").fadeOut("fast",function(){t(this).remove()})),t.notyRenderer.setLayoutCountFor(e,-1),0==t.notyRenderer.getLayoutCountFor(e)&&t(e.options.layout.container.selector,e.options.custom).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&(e.$bar.remove(),e.$bar=null,e.closed=!0),delete t.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(t.noty.ontap=!0,t.notyRenderer.render()),e.options.maxVisible>0&&e.options.dismissQueue&&t.notyRenderer.render()})}},setText:function(t){return this.closed||(this.options.text=t,this.$bar.find(".noty_text").html(t)),this},setType:function(t){return this.closed||(this.options.type=t,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(t){if(!this.closed){var e=this;this.options.timeout=t,e.$bar.delay(e.options.timeout).promise().done(function(){e.close()})}return this},stopPropagation:function(t){t=t||window.event,"undefined"!=typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},closed:!1,showing:!1,shown:!1};t.notyRenderer={},t.notyRenderer.init=function(n){var i=Object.create(e).init(n);return i.options.killer&&t.noty.closeAll(),i.options.force?t.noty.queue.unshift(i):t.noty.queue.push(i),t.notyRenderer.render(),"object"==t.noty.returns?i:i.options.id},t.notyRenderer.render=function(){var e=t.noty.queue[0];"object"===t.type(e)?e.options.dismissQueue?e.options.maxVisible>0?t(e.options.layout.container.selector+" li").length<e.options.maxVisible&&t.notyRenderer.show(t.noty.queue.shift()):t.notyRenderer.show(t.noty.queue.shift()):t.noty.ontap&&(t.notyRenderer.show(t.noty.queue.shift()),t.noty.ontap=!1):t.noty.ontap=!0},t.notyRenderer.show=function(e){e.options.modal&&(t.notyRenderer.createModalFor(e),t.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append(t(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==t(e.options.layout.container.selector).length?t("body").append(t(e.options.layout.container.object).addClass("i-am-new")):t(e.options.layout.container.selector).removeClass("i-am-new"),t.notyRenderer.setLayoutCountFor(e,1),e.show()},t.notyRenderer.createModalFor=function(e){if(0==t(".noty_modal").length){var n=t("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&n.css(e.options.theme.modal.css),n.prependTo(t("body")).fadeIn("fast")}},t.notyRenderer.getLayoutCountFor=function(e){return t(e.options.layout.container.selector,e.options.custom).data("noty_layout_count")||0},t.notyRenderer.setLayoutCountFor=function(e,n){return t(e.options.layout.container.selector,e.options.custom).data("noty_layout_count",t.notyRenderer.getLayoutCountFor(e)+n)},t.notyRenderer.getModalCount=function(){return t(".noty_modal").data("noty_modal_count")||0},t.notyRenderer.setModalCount=function(e){return t(".noty_modal").data("noty_modal_count",t.notyRenderer.getModalCount()+e)},t.fn.noty=function(e){return e.custom=t(this),t.notyRenderer.init(e)},t.noty={},t.noty.queue=[],t.noty.ontap=!0,t.noty.layouts={},t.noty.themes={},t.noty.returns="object",t.noty.store={},t.noty.get=function(e){return!!t.noty.store.hasOwnProperty(e)&&t.noty.store[e]},t.noty.close=function(e){return!!t.noty.get(e)&&t.noty.get(e).close()},t.noty.setText=function(e,n){return!!t.noty.get(e)&&t.noty.get(e).setText(n)},t.noty.setType=function(e,n){return!!t.noty.get(e)&&t.noty.get(e).setType(n)},t.noty.clearQueue=function(){t.noty.queue=[]},t.noty.closeAll=function(){t.noty.clearQueue(),t.each(t.noty.store,function(t,e){e.close()})};var n=window.alert;t.noty.consumeAlert=function(e){window.alert=function(n){e?e.text=n:e={text:n},t.notyRenderer.init(e)}},t.noty.stopConsumeAlert=function(){window.alert=n},t.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},t(window).resize(function(){t.each(t.noty.layouts,function(e,n){n.container.style.apply(t(n.container.selector))})})}(jQuery),window.noty=function(t){return jQuery.notyRenderer.init(t)},define("noty",["jquery"],function(){}),function(t){t.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){t(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),define("noty-layout",["jquery","noty"],function(){}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,n,i,o){return jQuery.easing[jQuery.easing.def](t,e,n,i,o)},easeInQuad:function(t,e,n,i,o){return i*(e/=o)*e+n},easeOutQuad:function(t,e,n,i,o){return-i*(e/=o)*(e-2)+n},easeInOutQuad:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,o){return i*(e/=o)*e*e+n},easeOutCubic:function(t,e,n,i,o){return i*((e=e/o-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,o){return i*(e/=o)*e*e*e+n},easeOutQuart:function(t,e,n,i,o){return-i*((e=e/o-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,o){return i*(e/=o)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,o){return i*((e=e/o-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,o){return-i*Math.cos(e/o*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,o){return i*Math.sin(e/o*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,o){return-i/2*(Math.cos(Math.PI*e/o)-1)+n},easeInExpo:function(t,e,n,i,o){return 0==e?n:i*Math.pow(2,10*(e/o-1))+n},easeOutExpo:function(t,e,n,i,o){return e==o?n+i:i*(-Math.pow(2,-10*e/o)+1)+n},easeInOutExpo:function(t,e,n,i,o){return 0==e?n:e==o?n+i:(e/=o/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(t,e,n,i,o){return-i*(Math.sqrt(1-(e/=o)*e)-1)+n},easeOutCirc:function(t,e,n,i,o){return i*Math.sqrt(1-(e=e/o-1)*e)+n},easeInOutCirc:function(t,e,n,i,o){return(e/=o/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,o){var s=1.70158,a=0,r=i;if(0==e)return n;if(1==(e/=o))return n+i;if(a||(a=.3*o),r<Math.abs(i)){r=i;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(i/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*o-s)*Math.PI/a))+n},easeOutElastic:function(t,e,n,i,o){var s=1.70158,a=0,r=i;if(0==e)return n;if(1==(e/=o))return n+i;if(a||(a=.3*o),r<Math.abs(i)){r=i;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(i/r);return r*Math.pow(2,-10*e)*Math.sin(2*(e*o-s)*Math.PI/a)+i+n},easeInOutElastic:function(t,e,n,i,o){var s=1.70158,a=0,r=i;if(0==e)return n;if(2==(e/=o/2))return n+i;if(a||(a=.3*o*1.5),r<Math.abs(i)){r=i;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(i/r);return e<1?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*o-s)*Math.PI/a)+n:r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*o-s)*Math.PI/a)*.5+i+n},easeInBack:function(t,e,n,i,o,s){return void 0==s&&(s=1.70158),i*(e/=o)*e*((s+1)*e-s)+n},easeOutBack:function(t,e,n,i,o,s){return void 0==s&&(s=1.70158),i*((e=e/o-1)*e*((s+1)*e+s)+1)+n},easeInOutBack:function(t,e,n,i,o,s){return void 0==s&&(s=1.70158),(e/=o/2)<1?i/2*e*e*(((s*=1.525)+1)*e-s)+n:i/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+n},easeInBounce:function(t,e,n,i,o){return i-jQuery.easing.easeOutBounce(t,o-e,0,i,o)+n},easeOutBounce:function(t,e,n,i,o){return(e/=o)<1/2.75?7.5625*i*e*e+n:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,o){return e<o/2?.5*jQuery.easing.easeInBounce(t,2*e,0,i,o)+n:.5*jQuery.easing.easeOutBounce(t,2*e-o,0,i,o)+.5*i+n}}),define("jquery.easing",["jquery"],function(){}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof e&&o[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t(s);e&&e.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.button"),s="object"==typeof e&&e;o||i.data("bs.button",o=new n(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",s=i.data();e+="Text",null==s.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;o||i.data("bs.carousel",o=new n(this,s)),"number"==typeof e?o.to(e):a?o[a]():s.interval&&o.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var o="prev"==t?-1:1,s=(n+o)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),s=i||this.getItemForDirection(e,o),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var c=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(s)]);u&&u.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(r),s.addClass(r),o.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),o.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(n){var i,o=t(this),s=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),o.data()),r=o.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),o||n.data("bs.collapse",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.4",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var s=e(o),a=s.data("bs.collapse"),r=a?"toggle":o.data();n.call(s,r)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(o).remove(),t(s).each(function(){var i=t(this),o=n(i),s={relatedTarget:this};o.hasClass("open")&&(o.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(n)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.4",a.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var s=n(o),a=s.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",r)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),a=o.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&o.find(s).trigger("focus"),
i.trigger("click");var r=" li:not(.disabled):visible a",l=o.find('[role="menu"]'+r+', [role="listbox"]'+r);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),s=o.data("bs.modal"),a=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new n(this,a)),"string"==typeof e?s[e](i):a.show&&s.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),o=i.attr("href"),s=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),i.data());i.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(s,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),s="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||i.data("bs.tooltip",o=new n(this,s)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var a=o[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var o=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(r);c&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var d=this.getPosition(),u=s[0].offsetWidth,p=s[0].offsetHeight;if(c){var h=r,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);r="bottom"==r&&d.bottom+p>m.bottom?"top":"top"==r&&d.top-p<m.top?"bottom":"right"==r&&d.right+u>m.width?"left":"left"==r&&d.left-u<m.left?"right":r,s.removeClass(h).addClass(r)}var g=this.getCalculatedOffset(r,d,u,p);this.applyPlacement(g,r);var v=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,s=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),r=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=s&&(e.top=e.top+s-c);var d=this.getViewportAdjustedDelta(n,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var u=/top|bottom/.test(n),p=u?2*d.left-o+l:2*d.top-s+c,h=u?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(p,i[0][h],u)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=i?{top:0,left:0}:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,r,s)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+i;r<a.top?o.top=a.top-r:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var c=e.left-s,d=e.left+s+n;c<a.left?o.left=a.left-c:d>a.width&&(o.left=a.left+a.width-d)}return o},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.popover"),s="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||i.data("bs.popover",o=new n(this,s)),"string"==typeof e&&o[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),s="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,s)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)a!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(i);this.activate(e.closest("li"),n),this.activate(r,r.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(e,i,o){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=i.find("> .active"),r=o&&t.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),a.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.affix"),s="object"==typeof e&&e;o||i.data("bs.affix",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=s.top)&&"bottom":!(t-i>=o+a)&&"bottom";var r=null==this.affixed,l=r?o:s.top,c=r?a:e;return null!=n&&n>=o?"top":null!=i&&l+c>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,s=i.bottom,a=t(document.body).height();"object"!=typeof i&&(s=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var r=this.getState(a,e,o,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function o(t){return function(){return this[t].apply(this,arguments)}}function s(e,n){function i(t,e){return e.toLowerCase()}var o,s=t(e).data(),a={},r=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in s)n.test(l)&&(o=l.replace(r,i),a[o]=s[l]);return a}function a(e){var n={};if(f[e]||(e=e.split("-")[0],f[e])){var i=f[e];return t.each(h,function(t,e){e in i&&(n[e]=i[e])}),n}}var r=t(window),l=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(this[n].valueOf()===e)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.splice(0)},copy:function(){var t=new l;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),c=function(e,n){this.dates=new l,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_process_options:function(e){this._o=t.extend({},this._o,e);var n=this.o=t.extend({},this._o),i=n.language;switch(f[i]||(i=i.split("-")[0],f[i]||(i=p.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate!==!1?n.multidate=Math.max(0,n.multidate):n.multidate=1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var o=m.parseFormat(n.format);n.startDate!==-(1/0)&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=m.parseDate(n.startDate,o,n.language):n.startDate=-(1/0)),n.endDate!==1/0&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=m.parseDate(n.endDate,o,n.language):n.endDate=1/0),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],t.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=t.map(n.daysOfWeekDisabled,function(t){return parseInt(t,10)});var s=String(n.orientation).toLowerCase().split(/\s+/g),a=n.orientation.toLowerCase();if(s=t.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)}),n.orientation={x:"auto",y:"auto"},a&&"auto"!==a)if(1===s.length)switch(s[0]){case"top":case"bottom":n.orientation.y=s[0];break;case"left":case"right":n.orientation.x=s[0]}else a=t.grep(s,function(t){return/^left|right$/.test(t)}),n.orientation.x=a[0]||"auto",a=t.grep(s,function(t){return/^top|bottom$/.test(t)}),n.orientation.y=a[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,o,s=0;s<t.length;s++)n=t[s][0],2===t[s].length?(i=e,o=t[s][1]):3===t[s].length&&(i=t[s][1],o=t[s][2]),n.on(o,i)},_unapplyEvents:function(t){for(var n,i,o,s=0;s<t.length;s++)n=t[s][0],2===t[s].length?(o=e,i=t[s][1]):3===t[s].length&&(o=t[s][1],i=t[s][2]),n.off(i,o)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),o=this._utc_to_local(i);this.element.trigger({type:e,date:o,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return m.formatDate(n,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:o("setDates"),setUTCDate:o("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return m.formatDate(t,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,o=r.width(),s=r.height(),a=r.scrollTop(),l=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!=e&&0!==e&&l.push(parseInt(e))});var c=Math.max.apply(Math,l)+10,d=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),p=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=d.left,f=d.top;
this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=e-p)):(this.picker.addClass("datepicker-orient-left"),d.left<0?h-=d.left-i:d.left+e>o&&(h=o-e-i));var m,g,v=this.o.orientation.y;"auto"===v&&(m=-a+d.top-n,g=a+s-(d.top+u+n),v=Math.max(m,g)===g?"top":"bottom"),this.picker.addClass("datepicker-orient-"+v),"top"===v?f+=u:f-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:f,left:h,zIndex:c})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),n=[],i=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return m.parseDate(t,this.o.format,this.o.language)},this)),n=t.grep(n,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';e+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+f[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+f[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<o?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>o)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===s.getFullYear()&&e.getUTCMonth()===s.getMonth()&&e.getUTCDate()===s.getDate()&&n.push("today"),this.dates.contains(e)!==-1&&n.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),t.inArray(e.valueOf(),this.range)!==-1&&n.push("selected")),n},fill:function(){var i,o=new Date(this.viewDate),s=o.getUTCFullYear(),a=o.getUTCMonth(),r=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,d=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,u=f[this.o.language].today||f.en.today||"",p=f[this.o.language].clear||f.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(f[this.o.language].months[a]+" "+s),this.picker.find("tfoot th.today").text(u).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(p).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var h=n(s,a-1,28),g=m.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(g),h.setUTCDate(g-(h.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(h);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var b,y=[];h.valueOf()<v;){if(h.getUTCDay()===this.o.weekStart&&(y.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864e5),x=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),C=new Date(Number(C=n(x.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),S=(x-C)/864e5/7+1;y.push('<td class="cw">'+S+"</td>")}if(b=this.getClassNames(h),b.push("day"),this.o.beforeShowDay!==t.noop){var k=this.o.beforeShowDay(this._utc_to_local(h));k===e?k={}:"boolean"==typeof k?k={enabled:k}:"string"==typeof k&&(k={classes:k}),k.enabled===!1&&b.push("disabled"),k.classes&&(b=b.concat(k.classes.split(/\s+/))),k.tooltip&&(i=k.tooltip)}b=t.unique(b),y.push('<td class="'+b.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+h.getUTCDate()+"</td>"),h.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var $=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===s&&$.eq(e.getUTCMonth()).addClass("active")}),(s<r||s>c)&&$.addClass("disabled"),s===r&&$.slice(0,l).addClass("disabled"),s===c&&$.slice(d+1).addClass("disabled"),y="",s=10*parseInt(s/10,10);var T=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var _,D=t.map(this.dates,function(t){return t.getUTCFullYear()}),R=-1;R<11;R++)_=["year"],R===-1?_.push("old"):10===R&&_.push("new"),t.inArray(s,D)!==-1&&_.push("active"),(s<r||s>c)&&_.push("disabled"),y+='<span class="'+_.join(" ")+'">'+s+"</span>",s+=1;T.html(y)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault();var i,o,s,a=t(e.target).closest("span, td, th");if(1===a.length)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var r=m.modes[this.viewMode].navStep*("prev"===a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,r),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,r),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(l,c);break;case"clear":var d;this.isInput?d=this.element:this.component&&(d=this.element.find("input")),d&&d.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":a.is(".disabled")||(this.viewDate.setUTCDate(1),a.is(".month")?(s=1,o=a.parent().find("span").index(a),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(o),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,o,s))):(s=1,o=0,i=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,o,s))),this.showMode(-1),this.fill());break;case"td":a.is(".day")&&!a.is(".disabled")&&(s=parseInt(a.text(),10)||1,i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),a.is(".old")?0===o?(o=11,i-=1):o-=1:a.is(".new")&&(11===o?(o=0,i+=1):o+=1),this._setDate(n(i,o,s)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t?e!==-1?this.dates.remove(e):this.dates.push(t):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,n){if(!t)return e;if(!n)return t;var i,o,s=new Date(t.valueOf()),a=s.getUTCDate(),r=s.getUTCMonth(),l=Math.abs(n);if(n=n>0?1:-1,1===l)o=n===-1?function(){return s.getUTCMonth()===r}:function(){return s.getUTCMonth()!==i},i=r+n,s.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var c=0;c<l;c++)s=this.moveMonth(s,n);i=s.getUTCMonth(),s.setUTCDate(a),o=function(){return i!==s.getUTCMonth()}}for(;o();)s.setUTCDate(--a),s.setUTCMonth(i);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27===t.keyCode&&this.show());var e,n,o,s=!1,a=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),o=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),o=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+e),o=new Date(a),o.setUTCDate(a.getUTCDate()+e)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),o=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),o=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*e),o=new Date(a),o.setUTCDate(a.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(a),s=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(s){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var d=function(e,n){this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,t(this.inputs).datepicker(n).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};d.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var n=t(e.target).data("datepicker"),i=n.getUTCDate(),o=t.inArray(e.target,this.inputs),s=this.inputs.length;if(o!==-1){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[o])for(;o>=0&&i<this.dates[o];)this.pickers[o--].setUTCDate(i);else if(i>this.dates[o])for(;o<s&&i>this.dates[o];)this.pickers[o++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var u=t.fn.datepicker;t.fn.datepicker=function(n){var i=Array.apply(null,arguments);i.shift();var o;return this.each(function(){var r=t(this),l=r.data("datepicker"),u="object"==typeof n&&n;if(!l){var h=s(this,"date"),f=t.extend({},p,h,u),m=a(f.language),g=t.extend({},p,m,h,u);if(r.is(".input-daterange")||g.inputs){var v={inputs:g.inputs||r.find("input").toArray()};r.data("datepicker",l=new d(this,t.extend(g,v)))}else r.data("datepicker",l=new c(this,g))}if("string"==typeof n&&"function"==typeof l[n]&&(o=l[n].apply(l,i),o!==e))return!1}),o!==e?o:this};var p=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},h=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=c;var f=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,m.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(i,o,s){function a(){var t=this.slice(0,p[d].length),e=p[d].slice(0,t.length);return t===e}if(!i)return e;if(i instanceof Date)return i;"string"==typeof o&&(o=m.parseFormat(o));var r,l,d,u=/([\-+]\d+)([dmwy])/,p=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,d=0;d<p.length;d++)switch(r=u.exec(p[d]),l=parseInt(r[1]),r[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=c.prototype.moveMonth.call(c.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+7*l);break;case"y":i=c.prototype.moveYear.call(c.prototype,i,l)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}p=i&&i.match(this.nonpunctuation)||[],i=new Date;var h,g,v={},b=["yyyy","yy","M","MM","m","mm","d","dd"],y={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};y.M=y.MM=y.mm=y.m,y.dd=y.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var w=o.parts.slice();if(p.length!==w.length&&(w=t(w).filter(function(e,n){return t.inArray(n,b)!==-1}).toArray()),p.length===w.length){var x;for(d=0,x=w.length;d<x;d++){if(h=parseInt(p[d],10),r=w[d],isNaN(h))switch(r){case"MM":g=t(f[s].months).filter(a),h=t.inArray(g[0],f[s].months)+1;break;case"M":g=t(f[s].monthsShort).filter(a),h=t.inArray(g[0],f[s].monthsShort)+1}v[r]=h}var C,S;for(d=0;d<b.length;d++)S=b[d],S in v&&!isNaN(v[S])&&(C=new Date(i),y[S](C,v[S]),isNaN(C)||(i=C))}return i},formatDate:function(e,n,i){if(!e)return"";"string"==typeof n&&(n=m.parseFormat(n));var o={d:e.getUTCDate(),D:f[i].daysShort[e.getUTCDay()],DD:f[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:f[i].monthsShort[e.getUTCMonth()],MM:f[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var s=t.extend([],n.separators),a=0,r=n.parts.length;a<=r;a++)s.length&&e.push(s.shift()),e.push(o[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="glyphicon glyphicon-chevron-left"></i></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="glyphicon glyphicon-chevron-right"></i></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=m,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=u,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),n.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),define("datepicker",["bootstrap"],function(){}),!function(t){"function"==typeof define&&define.amd?define("jquery.nicescroll",["jquery"],t):t(jQuery)}(function(t){function e(){var t=document.getElementsByTagName("script"),e=t[t.length-1].src.split("?")[0];return e.split("/").length>0?e.split("/").slice(0,-1).join("/")+"/":""}function n(t,e,n){for(var i=0;i<e.length;i++)n(t,e[i])}var i=!1,o=!1,s=0,a=2e3,r=0,l=t,c=["ms","moz","webkit","o"],d=window.requestAnimationFrame||!1,u=window.cancelAnimationFrame||!1;if(!d)for(var p in c){var h=c[p];d||(d=window[h+"RequestAnimationFrame"]),u||(u=window[h+"CancelAnimationFrame"]||window[h+"CancelRequestAnimationFrame"])}var f=window.MutationObserver||window.WebKitMutationObserver||!1,m={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:e()},g=!1,v=function(){function t(){var t=["-moz-grab","-webkit-grab","grab"];(n.ischrome&&!n.ischrome22||n.isie)&&(t=[]);for(var i=0;i<t.length;i++){var o=t[i];if(e.style.cursor=o,e.style.cursor==o)return o}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}if(g)return g;var e=document.createElement("DIV"),n={};n.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,n.isopera="opera"in window,n.isopera12=n.isopera&&"getUserMedia"in navigator,n.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),n.isie="all"in document&&"attachEvent"in e&&!n.isopera,n.isieold=n.isie&&!("msInterpolationMode"in e.style),n.isie7=!(!n.isie||n.isieold||"documentMode"in document&&7!=document.documentMode),n.isie8=n.isie&&"documentMode"in document&&8==document.documentMode,n.isie9=n.isie&&"performance"in window&&document.documentMode>=9,n.isie10=n.isie&&"performance"in window&&document.documentMode>=10,n.isie9mobile=/iemobile.9/i.test(navigator.userAgent),n.isie9mobile&&(n.isie9=!1),n.isie7mobile=!n.isie9mobile&&n.isie7&&/iemobile/i.test(navigator.userAgent),n.ismozilla="MozAppearance"in e.style,n.iswebkit="WebkitAppearance"in e.style,n.ischrome="chrome"in window,n.ischrome22=n.ischrome&&n.haspointerlock,n.ischrome26=n.ischrome&&"transition"in e.style,n.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,n.hasmstouch=window.navigator.msPointerEnabled||!1,n.ismac=/^mac$/i.test(navigator.platform),n.isios=n.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),n.isios4=n.isios&&!("seal"in Object),n.isandroid=/android/i.test(navigator.userAgent),n.trstyle=!1,n.hastransform=!1,n.hastranslate3d=!1,n.transitionstyle=!1,n.hastransition=!1,n.transitionend=!1;for(var i=["transform","msTransform","webkitTransform","MozTransform","OTransform"],o=0;o<i.length;o++)if(void 0!==e.style[i[o]]){n.trstyle=i[o];break}n.hastransform=0!=n.trstyle,n.hastransform&&(e.style[n.trstyle]="translate3d(1px,2px,3px)",n.hastranslate3d=/translate3d/.test(e.style[n.trstyle])),n.transitionstyle=!1,n.prefixstyle="",n.transitionend=!1;for(var i=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],s=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],a=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"],o=0;o<i.length;o++)if(i[o]in e.style){n.transitionstyle=i[o],n.prefixstyle=s[o],n.transitionend=a[o];break}return n.ischrome26&&(n.prefixstyle=s[1]),n.hastransition=n.transitionstyle,n.cursorgrabvalue=t(),n.hasmousecapture="setCapture"in e,n.hasMutationObserver=f!==!1,e=null,g=n,n},b=function(t,e){function n(){var t=b.doc.css(x.trstyle);return!(!t||"matrix"!=t.substr(0,6))&&t.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function c(){var t=b.win;if("zIndex"in t)return t.zIndex();for(;t.length>0;){if(9==t[0].nodeType)return!1;var e=t.css("zIndex");if(!isNaN(e)&&0!=e)return parseInt(e);t=t.parent()}return!1}function p(t,e,n){var i=t.css(e),o=parseFloat(i);if(isNaN(o)){o=k[i]||0;var s=3==o?n?b.win.outerHeight()-b.win.innerHeight():b.win.outerWidth()-b.win.innerWidth():1;return b.isie8&&o&&(o+=1),s?o:0}return o}function h(t,e,n,i){b._bind(t,e,function(i){var i=i?i:window.event,o={original:i,target:i.target||i.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==i.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return i.preventDefault?i.preventDefault():i.returnValue=!1,!1},stopImmediatePropagation:function(){i.stopImmediatePropagation?i.stopImmediatePropagation():i.cancelBubble=!0}};return"mousewheel"==e?(o.deltaY=-.025*i.wheelDelta,i.wheelDeltaX&&(o.deltaX=-.025*i.wheelDeltaX)):o.deltaY=i.detail,n.call(t,o)},i)}function g(t,e,n){var i,o;if(0==t.deltaMode?(i=-Math.floor(t.deltaX*(b.opt.mousescrollstep/54)),o=-Math.floor(t.deltaY*(b.opt.mousescrollstep/54))):1==t.deltaMode&&(i=-Math.floor(t.deltaX*b.opt.mousescrollstep),o=-Math.floor(t.deltaY*b.opt.mousescrollstep)),e&&b.opt.oneaxismousemode&&0==i&&o&&(i=o,o=0),i&&(b.scrollmom&&b.scrollmom.stop(),b.lastdeltax+=i,b.debounced("mousewheelx",function(){var t=b.lastdeltax;b.lastdeltax=0,b.rail.drag||b.doScrollLeftBy(t)},15)),o){if(b.opt.nativeparentscrolling&&n&&!b.ispage&&!b.zoomactive)if(0>o){if(b.getScrollTop()>=b.page.maxh)return!0}else if(b.getScrollTop()<=0)return!0;b.scrollmom&&b.scrollmom.stop(),b.lastdeltay+=o,b.debounced("mousewheely",function(){var t=b.lastdeltay;b.lastdeltay=0,b.rail.drag||b.doScrollBy(t)},15)}return t.stopImmediatePropagation(),t.preventDefault()}var b=this;if(this.version="3.5.6",this.name="nicescroll",this.me=e,this.opt={doc:l("body"),win:!1},l.extend(this.opt,m),this.opt.snapbackspeed=80,t)for(var w in b.opt)void 0!==t[w]&&(b.opt[w]=t[w]);this.doc=b.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(b.opt.win?b.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=b.opt.win!==!1,this.win=b.opt.win||(this.ispage?l(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?l(window):this.win,this.body=l("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=b.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):this.opt.rtlmode===!0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do this.id="ascrail"+a++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=b.opt.overflowx,this.overflowy=b.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=v();var x=l.extend({},this.detected);this.canhwscroll=x.hastransform&&b.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&b.haswrapper,this.istouchcapable=!1,x.cantouch&&x.iswebkit&&!x.isios&&!x.isandroid&&(this.istouchcapable=!0,x.cantouch=!1),x.cantouch&&x.ismozilla&&!x.isios&&!x.isandroid&&(this.istouchcapable=!0,x.cantouch=!1),b.opt.enablemouselockapi||(x.hasmousecapture=!1,x.haspointerlock=!1),this.delayed=function(t,e,n,i){var o=b.delaylist[t],s=(new Date).getTime();return!(!i&&o&&o.tt)&&(o&&o.tt&&clearTimeout(o.tt),void(o&&o.last+n>s&&!o.tt?b.delaylist[t]={last:s+n,tt:setTimeout(function(){b&&(b.delaylist[t].tt=0,e.call())},n)}:o&&o.tt||(b.delaylist[t]={last:s,tt:0},setTimeout(function(){e.call()},0))))},this.debounced=function(t,e,n){var i=b.delaylist[t];(new Date).getTime(),b.delaylist[t]=e,i||setTimeout(function(){var e=b.delaylist[t];b.delaylist[t]=!1,e.call()},n)};var C=!1;if(this.synched=function(t,e){function n(){C||(d(function(){C=!1;for(t in b.synclist){var e=b.synclist[t];e&&e.call(b),b.synclist[t]=!1}}),C=!0)}return b.synclist[t]=e,n(),t},this.unsynched=function(t){b.synclist[t]&&(b.synclist[t]=!1)},this.css=function(t,e){for(var n in e)b.saved.css.push([t,n,t.css(n)]),t.css(n,e[n])},this.scrollTop=function(t){return void 0===t?b.getScrollTop():b.setScrollTop(t)},this.scrollLeft=function(t){return void 0===t?b.getScrollLeft():b.setScrollLeft(t)},BezierClass=function(t,e,n,i,o,s,a){this.st=t,this.ed=e,this.spd=n,this.p1=i||0,this.p2=o||1,this.p3=s||0,this.p4=a||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(t){return 3*t*t*(1-t)},B3:function(t){return 3*t*(1-t)*(1-t)},B4:function(t){return(1-t)*(1-t)*(1-t)},getNow:function(){var t=(new Date).getTime(),e=1-(t-this.ts)/this.spd,n=this.B2(e)+this.B3(e)+this.B4(e);return 0>e?this.ed:this.st+Math.round(this.df*n)},update:function(t,e){return this.st=this.getNow(),this.ed=t,this.spd=e,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},x.hastranslate3d&&x.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(t){if(!t){var e=n();if(e)return 16==e.length?-e[13]:-e[5];if(b.timerscroll&&b.timerscroll.bz)return b.timerscroll.bz.getNow()}return b.doc.translate.y},this.getScrollLeft=function(t){if(!t){var e=n();if(e)return 16==e.length?-e[12]:-e[4];if(b.timerscroll&&b.timerscroll.bh)return b.timerscroll.bh.getNow()}return b.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(t){var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!1,!0,window,1),t.dispatchEvent(e)}:document.fireEvent?function(t){var e=document.createEventObject();t.fireEvent("onscroll"),e.cancelBubble=!0}:function(){};var S=this.isrtlmode?1:-1;x.hastranslate3d&&b.opt.enabletranslate3d?(this.setScrollTop=function(t,e){b.doc.translate.y=t,b.doc.translate.ty=-1*t+"px",b.doc.css(x.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)"),e||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(t,e){b.doc.translate.x=t,b.doc.translate.tx=t*S+"px",b.doc.css(x.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)"),e||b.notifyScrollEvent(b.win[0])}):(this.setScrollTop=function(t,e){b.doc.translate.y=t,b.doc.translate.ty=-1*t+"px",b.doc.css(x.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")"),e||b.notifyScrollEvent(b.win[0])},this.setScrollLeft=function(t,e){b.doc.translate.x=t,b.doc.translate.tx=t*S+"px",b.doc.css(x.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")"),e||b.notifyScrollEvent(b.win[0])})}else this.getScrollTop=function(){return b.docscroll.scrollTop()},this.setScrollTop=function(t){return b.docscroll.scrollTop(t)},this.getScrollLeft=function(){return b.detected.ismozilla&&b.isrtlmode?Math.abs(b.docscroll.scrollLeft()):b.docscroll.scrollLeft()},this.setScrollLeft=function(t){return b.docscroll.scrollLeft(b.detected.ismozilla&&b.isrtlmode?-t:t)};this.getTarget=function(t){return!!t&&(t.target?t.target:!!t.srcElement&&t.srcElement)},this.hasParent=function(t,e){if(!t)return!1;for(var n=t.target||t.srcElement||t||!1;n&&n.id!=e;)n=n.parentNode||!1;return n!==!1};var k={thin:1,medium:3,thick:5};this.getOffset=function(){if(b.isfixed)return{top:parseFloat(b.win.css("top")),left:parseFloat(b.win.css("left"))};if(!b.viewport)return b.win.offset();var t=b.win.offset(),e=b.viewport.offset();return{top:t.top-e.top+b.viewport.scrollTop(),left:t.left-e.left+b.viewport.scrollLeft()}},this.updateScrollBar=function(t){if(b.ishwscroll)b.rail.css({height:b.win.innerHeight()}),b.railh&&b.railh.css({width:b.win.innerWidth()});else{var e=b.getOffset(),n={top:e.top,left:e.left};n.top+=p(b.win,"border-top-width",!0),(b.win.outerWidth()-b.win.innerWidth())/2,n.left+=b.rail.align?b.win.outerWidth()-p(b.win,"border-right-width")-b.rail.width:p(b.win,"border-left-width");var i=b.opt.railoffset;if(i&&(i.top&&(n.top+=i.top),b.rail.align&&i.left&&(n.left+=i.left)),b.locked||b.rail.css({top:n.top,left:n.left,height:t?t.h:b.win.innerHeight()}),b.zoom&&b.zoom.css({top:n.top+1,left:1==b.rail.align?n.left-20:n.left+b.rail.width+4}),b.railh&&!b.locked){var n={top:e.top,left:e.left},i=b.opt.railhoffset;i&&(i.top&&(n.top+=i.top),i.left&&(n.left+=i.left));var o=b.railh.align?n.top+p(b.win,"border-top-width",!0)+b.win.innerHeight()-b.railh.height:n.top+p(b.win,"border-top-width",!0),s=n.left+p(b.win,"border-left-width");b.railh.css({top:o,left:s,width:b.railh.width})}}},this.doRailClick=function(t,e,n){var i,o,s,a;b.locked||(b.cancelEvent(t),e?(i=n?b.doScrollLeft:b.doScrollTop,s=n?(t.pageX-b.railh.offset().left-b.cursorwidth/2)*b.scrollratio.x:(t.pageY-b.rail.offset().top-b.cursorheight/2)*b.scrollratio.y,i(s)):(i=n?b.doScrollLeftBy:b.doScrollBy,s=n?b.scroll.x:b.scroll.y,
a=n?t.pageX-b.railh.offset().left:t.pageY-b.rail.offset().top,o=n?b.view.w:b.view.h,i(s>=a?o:-o)))},b.hasanimationframe=d,b.hascancelanimationframe=u,b.hasanimationframe?b.hascancelanimationframe||(u=function(){b.cancelAnimationFrame=!0}):(d=function(t){return setTimeout(t,15-Math.floor(+new Date/1e3)%16)},u=clearInterval),this.init=function(){function t(e){if(b.selectiondrag){if(e){var n=b.win.outerHeight(),i=e.pageY-b.selectiondrag.top;i>0&&n>i&&(i=0),i>=n&&(i-=n),b.selectiondrag.df=i}if(0!=b.selectiondrag.df){var o=2*-Math.floor(b.selectiondrag.df/6);b.doScrollBy(o),b.debounced("doselectionscroll",function(){t()},50)}}}function e(){b.iframexd=!1;try{var t="contentDocument"in this?this.contentDocument:this.contentWindow.document;t.domain}catch(e){b.iframexd=!0,t=!1}if(b.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(b.forcescreen=!0,b.isiframe&&(b.iframe={doc:l(t),html:b.doc.contents().find("html")[0],body:b.doc.contents().find("body")[0]},b.getContentSize=function(){return{w:Math.max(b.iframe.html.scrollWidth,b.iframe.body.scrollWidth),h:Math.max(b.iframe.html.scrollHeight,b.iframe.body.scrollHeight)}},b.docscroll=l(b.iframe.body)),!x.isios&&b.opt.iframeautoresize&&!b.isiframe){b.win.scrollTop(0),b.doc.height("");var e=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight);b.doc.height(e)}b.lazyResize(30),x.isie7&&b.css(l(b.iframe.html),{"overflow-y":"hidden"}),b.css(l(b.iframe.body),{"overflow-y":"hidden"}),x.isios&&b.haswrapper&&b.css(l(t.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?b.bind(this.contentWindow,"scroll",b.onscroll):b.bind(t,"scroll",b.onscroll),b.opt.enablemousewheel&&b.bind(t,"mousewheel",b.onmousewheel),b.opt.enablekeyboard&&b.bind(t,x.isopera?"keypress":"keydown",b.onkeypress),(x.cantouch||b.opt.touchbehavior)&&(b.bind(t,"mousedown",b.ontouchstart),b.bind(t,"mousemove",function(t){b.ontouchmove(t,!0)}),b.opt.grabcursorenabled&&x.cursorgrabvalue&&b.css(l(t.body),{cursor:x.cursorgrabvalue})),b.bind(t,"mouseup",b.ontouchend),b.zoom&&(b.opt.dblclickzoom&&b.bind(t,"dblclick",b.doZoom),b.ongesturezoom&&b.bind(t,"gestureend",b.ongesturezoom))}if(b.saved.css=[],x.isie7mobile)return!0;if(x.isoperamini)return!0;if(x.hasmstouch&&b.css(b.ispage?l("html"):b.win,{"-ms-touch-action":"none"}),b.zindex="auto",b.zindex=b.ispage||"auto"!=b.opt.zindex?b.opt.zindex:c()||"auto",b.ispage||"auto"==b.zindex||b.zindex>r&&(r=b.zindex),b.isie&&0==b.zindex&&"auto"==b.opt.zindex&&(b.zindex="auto"),!b.ispage||!x.cantouch&&!x.isieold&&!x.isie9mobile){var n=b.docscroll;b.ispage&&(n=b.haswrapper?b.win:b.doc),x.isie9mobile||b.css(n,{"overflow-y":"hidden"}),b.ispage&&x.isie7&&("BODY"==b.doc[0].nodeName?b.css(l("html"),{"overflow-y":"hidden"}):"HTML"==b.doc[0].nodeName&&b.css(l("body"),{"overflow-y":"hidden"})),!x.isios||b.ispage||b.haswrapper||b.css(l("body"),{"-webkit-overflow-scrolling":"touch"});var a=l(document.createElement("div"));a.css({position:"relative",top:0,float:"right",width:b.opt.cursorwidth,height:"0px","background-color":b.opt.cursorcolor,border:b.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,"border-radius":b.opt.cursorborderradius}),a.hborder=parseFloat(a.outerHeight()-a.innerHeight()),b.cursor=a;var d=l(document.createElement("div"));d.attr("id",b.id),d.addClass("nicescroll-rails");var u,p,h=["left","right"];for(var m in h)p=h[m],u=b.opt.railpadding[p],u?d.css("padding-"+p,u+"px"):b.opt.railpadding[p]=0;d.append(a),d.width=Math.max(parseFloat(b.opt.cursorwidth),a.outerWidth())+b.opt.railpadding.left+b.opt.railpadding.right,d.css({width:d.width+"px",zIndex:b.zindex,background:b.opt.background,cursor:"default"}),d.visibility=!0,d.scrollable=!0,d.align="left"==b.opt.railalign?0:1,b.rail=d,b.rail.drag=!1;var g=!1;if(!b.opt.boxzoom||b.ispage||x.isieold||(g=document.createElement("div"),b.bind(g,"click",b.doZoom),b.zoom=l(g),b.zoom.css({cursor:"pointer","z-index":b.zindex,backgroundImage:"url("+b.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),b.opt.dblclickzoom&&b.bind(b.win,"dblclick",b.doZoom),x.cantouch&&b.opt.gesturezoom&&(b.ongesturezoom=function(t){return t.scale>1.5&&b.doZoomIn(t),t.scale<.8&&b.doZoomOut(t),b.cancelEvent(t)},b.bind(b.win,"gestureend",b.ongesturezoom))),b.railh=!1,b.opt.horizrailenabled){b.css(n,{"overflow-x":"hidden"});var a=l(document.createElement("div"));a.css({position:"absolute",top:0,height:b.opt.cursorwidth,width:"0px","background-color":b.opt.cursorcolor,border:b.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,"border-radius":b.opt.cursorborderradius}),a.wborder=parseFloat(a.outerWidth()-a.innerWidth()),b.cursorh=a;var v=l(document.createElement("div"));v.attr("id",b.id+"-hr"),v.addClass("nicescroll-rails"),v.height=Math.max(parseFloat(b.opt.cursorwidth),a.outerHeight()),v.css({height:v.height+"px",zIndex:b.zindex,background:b.opt.background}),v.append(a),v.visibility=!0,v.scrollable=!0,v.align="top"==b.opt.railvalign?0:1,b.railh=v,b.railh.drag=!1}if(b.ispage)d.css({position:"fixed",top:"0px",height:"100%"}),d.css(d.align?{right:"0px"}:{left:"0px"}),b.body.append(d),b.railh&&(v.css({position:"fixed",left:"0px",width:"100%"}),v.css(v.align?{bottom:"0px"}:{top:"0px"}),b.body.append(v));else{if(b.ishwscroll){"static"==b.win.css("position")&&b.css(b.win,{position:"relative"});var w="HTML"==b.win[0].nodeName?b.body:b.win;b.zoom&&(b.zoom.css({position:"absolute",top:1,right:0,"margin-right":d.width+4}),w.append(b.zoom)),d.css({position:"absolute",top:0}),d.css(d.align?{right:0}:{left:0}),w.append(d),v&&(v.css({position:"absolute",left:0,bottom:0}),v.css(v.align?{bottom:0}:{top:0}),w.append(v))}else{b.isfixed="fixed"==b.win.css("position");var C=b.isfixed?"fixed":"absolute";b.isfixed||(b.viewport=b.getViewport(b.win[0])),b.viewport&&(b.body=b.viewport,0==/fixed|relative|absolute/.test(b.viewport.css("position"))&&b.css(b.viewport,{position:"relative"})),d.css({position:C}),b.zoom&&b.zoom.css({position:C}),b.updateScrollBar(),b.body.append(d),b.zoom&&b.body.append(b.zoom),b.railh&&(v.css({position:C}),b.body.append(v))}x.isios&&b.css(b.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),x.isie&&b.opt.disableoutline&&b.win.attr("hideFocus","true"),x.iswebkit&&b.opt.disableoutline&&b.win.css({outline:"none"})}if(b.opt.autohidemode===!1?(b.autohidedom=!1,b.rail.css({opacity:b.opt.cursoropacitymax}),b.railh&&b.railh.css({opacity:b.opt.cursoropacitymax})):b.opt.autohidemode===!0||"leave"===b.opt.autohidemode?(b.autohidedom=l().add(b.rail),x.isie8&&(b.autohidedom=b.autohidedom.add(b.cursor)),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh)),b.railh&&x.isie8&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"scroll"==b.opt.autohidemode?(b.autohidedom=l().add(b.rail),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh))):"cursor"==b.opt.autohidemode?(b.autohidedom=l().add(b.cursor),b.railh&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"hidden"==b.opt.autohidemode&&(b.autohidedom=!1,b.hide(),b.locked=!1),x.isie9mobile){b.scrollmom=new y(b),b.onmangotouch=function(){var t=b.getScrollTop(),e=b.getScrollLeft();if(t==b.scrollmom.lastscrolly&&e==b.scrollmom.lastscrollx)return!0;var n=t-b.mangotouch.sy,i=e-b.mangotouch.sx,o=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(n,2)));if(0!=o){var s=0>n?-1:1,a=0>i?-1:1,r=+new Date;if(b.mangotouch.lazy&&clearTimeout(b.mangotouch.lazy),r-b.mangotouch.tm>80||b.mangotouch.dry!=s||b.mangotouch.drx!=a)b.scrollmom.stop(),b.scrollmom.reset(e,t),b.mangotouch.sy=t,b.mangotouch.ly=t,b.mangotouch.sx=e,b.mangotouch.lx=e,b.mangotouch.dry=s,b.mangotouch.drx=a,b.mangotouch.tm=r;else{b.scrollmom.stop(),b.scrollmom.update(b.mangotouch.sx-i,b.mangotouch.sy-n),r-b.mangotouch.tm,b.mangotouch.tm=r;var l=Math.max(Math.abs(b.mangotouch.ly-t),Math.abs(b.mangotouch.lx-e));b.mangotouch.ly=t,b.mangotouch.lx=e,l>2&&(b.mangotouch.lazy=setTimeout(function(){b.mangotouch.lazy=!1,b.mangotouch.dry=0,b.mangotouch.drx=0,b.mangotouch.tm=0,b.scrollmom.doMomentum(30)},100))}}};var S=b.getScrollTop(),k=b.getScrollLeft();b.mangotouch={sy:S,ly:S,dry:0,sx:k,lx:k,drx:0,lazy:!1,tm:0},b.bind(b.docscroll,"scroll",b.onmangotouch)}else{if(x.cantouch||b.istouchcapable||b.opt.touchbehavior||x.hasmstouch){b.scrollmom=new y(b),b.ontouchstart=function(t){if(t.pointerType&&2!=t.pointerType&&"touch"!=t.pointerType)return!1;if(b.hasmoving=!1,!b.locked){if(x.hasmstouch)for(var e=!!t.target&&t.target;e;){var n=l(e).getNiceScroll();if(n.length>0&&n[0].me==b.me)break;if(n.length>0)return!1;if("DIV"==e.nodeName&&e.id==b.id)break;e=!!e.parentNode&&e.parentNode}b.cancelScroll();var e=b.getTarget(t);if(e){var i=/INPUT/i.test(e.nodeName)&&/range/i.test(e.type);if(i)return b.stopPropagation(t)}if(!("clientX"in t)&&"changedTouches"in t&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),b.forcescreen){var o=t,t={original:t.original?t.original:t};t.clientX=o.screenX,t.clientY=o.screenY}if(b.rail.drag={x:t.clientX,y:t.clientY,sx:b.scroll.x,sy:b.scroll.y,st:b.getScrollTop(),sl:b.getScrollLeft(),pt:2,dl:!1},b.ispage||!b.opt.directionlockdeadzone)b.rail.drag.dl="f";else{var s={w:l(window).width(),h:l(window).height()},a={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},r=Math.max(0,a.h-s.h),c=Math.max(0,a.w-s.w);b.rail.drag.ck=!b.rail.scrollable&&b.railh.scrollable?r>0&&"v":!!(b.rail.scrollable&&!b.railh.scrollable&&c>0)&&"h",b.rail.drag.ck||(b.rail.drag.dl="f")}if(b.opt.touchbehavior&&b.isiframe&&x.isie){var d=b.win.position();b.rail.drag.x+=d.left,b.rail.drag.y+=d.top}if(b.hasmoving=!1,b.lastmouseup=!1,b.scrollmom.reset(t.clientX,t.clientY),!x.cantouch&&!this.istouchcapable&&!x.hasmstouch){var u=!!e&&/INPUT|SELECT|TEXTAREA/i.test(e.nodeName);if(!u)return!b.ispage&&x.hasmousecapture&&e.setCapture(),b.opt.touchbehavior?(e.onclick&&!e._onclick&&(e._onclick=e.onclick,e.onclick=function(t){return!b.hasmoving&&void e._onclick.call(this,t)}),b.cancelEvent(t)):b.stopPropagation(t);/SUBMIT|CANCEL|BUTTON/i.test(l(e).attr("type"))&&(pc={tg:e,click:!1},b.preventclick=pc)}}},b.ontouchend=function(t){return(!t.pointerType||2==t.pointerType||"touch"==t.pointerType)&&(b.rail.drag&&2==b.rail.drag.pt&&(b.scrollmom.doMomentum(),b.rail.drag=!1,b.hasmoving&&(b.lastmouseup=!0,b.hideCursor(),x.hasmousecapture&&document.releaseCapture(),!x.cantouch))?b.cancelEvent(t):void 0)};var $=b.opt.touchbehavior&&b.isiframe&&!x.hasmousecapture;b.ontouchmove=function(t,e){if(t.pointerType&&2!=t.pointerType&&"touch"!=t.pointerType)return!1;if(b.rail.drag&&2==b.rail.drag.pt){if(x.cantouch&&void 0===t.original)return!0;b.hasmoving=!0,b.preventclick&&!b.preventclick.click&&(b.preventclick.click=b.preventclick.tg.onclick||!1,b.preventclick.tg.onclick=b.onpreventclick);var n=l.extend({original:t},t);if(t=n,"changedTouches"in t&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),b.forcescreen){var i=t,t={original:t.original?t.original:t};t.clientX=i.screenX,t.clientY=i.screenY}var o=ofy=0;if($&&!e){var s=b.win.position();o=-s.left,ofy=-s.top}var a=t.clientY+ofy,r=a-b.rail.drag.y,c=t.clientX+o,d=c-b.rail.drag.x,u=b.rail.drag.st-r;if(b.ishwscroll&&b.opt.bouncescroll?0>u?u=Math.round(u/2):u>b.page.maxh&&(u=b.page.maxh+Math.round((u-b.page.maxh)/2)):(0>u&&(u=0,a=0),u>b.page.maxh&&(u=b.page.maxh,a=0)),b.railh&&b.railh.scrollable){var p=b.isrtlmode?d-b.rail.drag.sl:b.rail.drag.sl-d;b.ishwscroll&&b.opt.bouncescroll?0>p?p=Math.round(p/2):p>b.page.maxw&&(p=b.page.maxw+Math.round((p-b.page.maxw)/2)):(0>p&&(p=0,c=0),p>b.page.maxw&&(p=b.page.maxw,c=0))}var h=!1;if(b.rail.drag.dl)h=!0,"v"==b.rail.drag.dl?p=b.rail.drag.sl:"h"==b.rail.drag.dl&&(u=b.rail.drag.st);else{var f=Math.abs(r),m=Math.abs(d),g=b.opt.directionlockdeadzone;if("v"==b.rail.drag.ck){if(f>g&&.3*f>=m)return b.rail.drag=!1,!0;m>g&&(b.rail.drag.dl="f",l("body").scrollTop(l("body").scrollTop()))}else if("h"==b.rail.drag.ck){if(m>g&&.3*m>=f)return b.rail.drag=!1,!0;f>g&&(b.rail.drag.dl="f",l("body").scrollLeft(l("body").scrollLeft()))}}if(b.synched("touchmove",function(){b.rail.drag&&2==b.rail.drag.pt&&(b.prepareTransition&&b.prepareTransition(0),b.rail.scrollable&&b.setScrollTop(u),b.scrollmom.update(c,a),b.railh&&b.railh.scrollable?(b.setScrollLeft(p),b.showCursor(u,p)):b.showCursor(u),x.isie10&&document.selection.clear())}),x.ischrome&&b.istouchcapable&&(h=!1),h)return b.cancelEvent(t)}}}b.onmousedown=function(t,e){if(!b.rail.drag||1==b.rail.drag.pt){if(b.locked)return b.cancelEvent(t);b.cancelScroll(),b.rail.drag={x:t.clientX,y:t.clientY,sx:b.scroll.x,sy:b.scroll.y,pt:1,hr:!!e};var n=b.getTarget(t);return!b.ispage&&x.hasmousecapture&&n.setCapture(),b.isiframe&&!x.hasmousecapture&&(b.saved.csspointerevents=b.doc.css("pointer-events"),b.css(b.doc,{"pointer-events":"none"})),b.hasmoving=!1,b.cancelEvent(t)}},b.onmouseup=function(t){if(b.rail.drag){if(x.hasmousecapture&&document.releaseCapture(),b.isiframe&&!x.hasmousecapture&&b.doc.css("pointer-events",b.saved.csspointerevents),1!=b.rail.drag.pt)return;return b.rail.drag=!1,b.hasmoving&&b.triggerScrollEnd(),b.cancelEvent(t)}},b.onmousemove=function(t){if(b.rail.drag){if(1!=b.rail.drag.pt)return;if(x.ischrome&&0==t.which)return b.onmouseup(t);if(b.cursorfreezed=!0,b.hasmoving=!0,b.rail.drag.hr){b.scroll.x=b.rail.drag.sx+(t.clientX-b.rail.drag.x),b.scroll.x<0&&(b.scroll.x=0);var e=b.scrollvaluemaxw;b.scroll.x>e&&(b.scroll.x=e)}else{b.scroll.y=b.rail.drag.sy+(t.clientY-b.rail.drag.y),b.scroll.y<0&&(b.scroll.y=0);var n=b.scrollvaluemax;b.scroll.y>n&&(b.scroll.y=n)}return b.synched("mousemove",function(){b.rail.drag&&1==b.rail.drag.pt&&(b.showCursor(),b.rail.drag.hr?b.doScrollLeft(Math.round(b.scroll.x*b.scrollratio.x),b.opt.cursordragspeed):b.doScrollTop(Math.round(b.scroll.y*b.scrollratio.y),b.opt.cursordragspeed))}),b.cancelEvent(t)}},x.cantouch||b.opt.touchbehavior?(b.onpreventclick=function(t){return b.preventclick?(b.preventclick.tg.onclick=b.preventclick.click,b.preventclick=!1,b.cancelEvent(t)):void 0},b.bind(b.win,"mousedown",b.ontouchstart),b.onclick=!x.isios&&function(t){return!b.lastmouseup||(b.lastmouseup=!1,b.cancelEvent(t))},b.opt.grabcursorenabled&&x.cursorgrabvalue&&(b.css(b.ispage?b.doc:b.win,{cursor:x.cursorgrabvalue}),b.css(b.rail,{cursor:x.cursorgrabvalue}))):(b.hasTextSelected="getSelection"in document?function(){return document.getSelection().rangeCount>0}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},b.onselectionstart=function(){b.ispage||(b.selectiondrag=b.win.offset())},b.onselectionend=function(){b.selectiondrag=!1},b.onselectiondrag=function(e){b.selectiondrag&&b.hasTextSelected()&&b.debounced("selectionscroll",function(){t(e)},250)}),x.hasmstouch&&(b.css(b.rail,{"-ms-touch-action":"none"}),b.css(b.cursor,{"-ms-touch-action":"none"}),b.bind(b.win,"MSPointerDown",b.ontouchstart),b.bind(document,"MSPointerUp",b.ontouchend),b.bind(document,"MSPointerMove",b.ontouchmove),b.bind(b.cursor,"MSGestureHold",function(t){t.preventDefault()}),b.bind(b.cursor,"contextmenu",function(t){t.preventDefault()})),this.istouchcapable&&(b.bind(b.win,"touchstart",b.ontouchstart),b.bind(document,"touchend",b.ontouchend),b.bind(document,"touchcancel",b.ontouchend),b.bind(document,"touchmove",b.ontouchmove)),b.bind(b.cursor,"mousedown",b.onmousedown),b.bind(b.cursor,"mouseup",b.onmouseup),b.railh&&(b.bind(b.cursorh,"mousedown",function(t){b.onmousedown(t,!0)}),b.bind(b.cursorh,"mouseup",b.onmouseup)),(b.opt.cursordragontouch||!x.cantouch&&!b.opt.touchbehavior)&&(b.rail.css({cursor:"default"}),b.railh&&b.railh.css({cursor:"default"}),b.jqbind(b.rail,"mouseenter",function(){return!!b.win.is(":visible")&&(b.canshowonmouseevent&&b.showCursor(),void(b.rail.active=!0))}),b.jqbind(b.rail,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}),b.opt.sensitiverail&&(b.bind(b.rail,"click",function(t){b.doRailClick(t,!1,!1)}),b.bind(b.rail,"dblclick",function(t){b.doRailClick(t,!0,!1)}),b.bind(b.cursor,"click",function(t){b.cancelEvent(t)}),b.bind(b.cursor,"dblclick",function(t){b.cancelEvent(t)})),b.railh&&(b.jqbind(b.railh,"mouseenter",function(){return!!b.win.is(":visible")&&(b.canshowonmouseevent&&b.showCursor(),void(b.rail.active=!0))}),b.jqbind(b.railh,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}),b.opt.sensitiverail&&(b.bind(b.railh,"click",function(t){b.doRailClick(t,!1,!0)}),b.bind(b.railh,"dblclick",function(t){b.doRailClick(t,!0,!0)}),b.bind(b.cursorh,"click",function(t){b.cancelEvent(t)}),b.bind(b.cursorh,"dblclick",function(t){b.cancelEvent(t)})))),x.cantouch||b.opt.touchbehavior?(b.bind(x.hasmousecapture?b.win:document,"mouseup",b.ontouchend),b.bind(document,"mousemove",b.ontouchmove),b.onclick&&b.bind(document,"click",b.onclick),b.opt.cursordragontouch&&(b.bind(b.cursor,"mousedown",b.onmousedown),b.bind(b.cursor,"mousemove",b.onmousemove),b.cursorh&&b.bind(b.cursorh,"mousedown",function(t){b.onmousedown(t,!0)}),b.cursorh&&b.bind(b.cursorh,"mousemove",b.onmousemove))):(b.bind(x.hasmousecapture?b.win:document,"mouseup",b.onmouseup),b.bind(document,"mousemove",b.onmousemove),b.onclick&&b.bind(document,"click",b.onclick),!b.ispage&&b.opt.enablescrollonselection&&(b.bind(b.win[0],"mousedown",b.onselectionstart),b.bind(document,"mouseup",b.onselectionend),b.bind(b.cursor,"mouseup",b.onselectionend),b.cursorh&&b.bind(b.cursorh,"mouseup",b.onselectionend),b.bind(document,"mousemove",b.onselectiondrag)),b.zoom&&(b.jqbind(b.zoom,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor(),b.rail.active=!0}),b.jqbind(b.zoom,"mouseleave",function(){b.rail.active=!1,b.rail.drag||b.hideCursor()}))),b.opt.enablemousewheel&&(b.isiframe||b.bind(x.isie&&b.ispage?document:b.win,"mousewheel",b.onmousewheel),b.bind(b.rail,"mousewheel",b.onmousewheel),b.railh&&b.bind(b.railh,"mousewheel",b.onmousewheelhr)),b.ispage||x.cantouch||/HTML|^BODY/.test(b.win[0].nodeName)||(b.win.attr("tabindex")||b.win.attr({tabindex:s++}),b.jqbind(b.win,"focus",function(t){i=b.getTarget(t).id||!0,b.hasfocus=!0,b.canshowonmouseevent&&b.noticeCursor()}),b.jqbind(b.win,"blur",function(){i=!1,b.hasfocus=!1}),b.jqbind(b.win,"mouseenter",function(t){o=b.getTarget(t).id||!0,b.hasmousefocus=!0,b.canshowonmouseevent&&b.noticeCursor()}),b.jqbind(b.win,"mouseleave",function(){o=!1,b.hasmousefocus=!1,b.rail.drag||b.hideCursor()}))}if(b.onkeypress=function(t){if(b.locked&&0==b.page.maxh)return!0;t=t?t:window.e;var e=b.getTarget(t);if(e&&/INPUT|TEXTAREA|SELECT|OPTION/.test(e.nodeName)){var n=e.getAttribute("type")||e.type||!1;if(!n||!/submit|button|cancel/i.tp)return!0}if(l(e).attr("contenteditable"))return!0;if(b.hasfocus||b.hasmousefocus&&!i||b.ispage&&!i&&!o){var s=t.keyCode;if(b.locked&&27!=s)return b.cancelEvent(t);var a=t.ctrlKey||!1,r=t.shiftKey||!1,c=!1;switch(s){case 38:case 63233:b.doScrollBy(72),c=!0;break;case 40:case 63235:b.doScrollBy(-72),c=!0;break;case 37:case 63232:b.railh&&(a?b.doScrollLeft(0):b.doScrollLeftBy(72),c=!0);break;case 39:case 63234:b.railh&&(a?b.doScrollLeft(b.page.maxw):b.doScrollLeftBy(-72),c=!0);break;case 33:case 63276:b.doScrollBy(b.view.h),c=!0;break;case 34:case 63277:b.doScrollBy(-b.view.h),c=!0;break;case 36:case 63273:b.railh&&a?b.doScrollPos(0,0):b.doScrollTo(0),c=!0;break;case 35:case 63275:b.railh&&a?b.doScrollPos(b.page.maxw,b.page.maxh):b.doScrollTo(b.page.maxh),c=!0;break;case 32:b.opt.spacebarenabled&&(b.doScrollBy(r?b.view.h:-b.view.h),c=!0);break;case 27:b.zoomactive&&(b.doZoom(),c=!0)}if(c)return b.cancelEvent(t)}},b.opt.enablekeyboard&&b.bind(document,x.isopera&&!x.isopera12?"keypress":"keydown",b.onkeypress),b.bind(document,"keydown",function(t){var e=t.ctrlKey||!1;e&&(b.wheelprevented=!0)}),b.bind(document,"keyup",function(t){var e=t.ctrlKey||!1;e||(b.wheelprevented=!1)}),b.bind(window,"resize",b.lazyResize),b.bind(window,"orientationchange",b.lazyResize),b.bind(window,"load",b.lazyResize),x.ischrome&&!b.ispage&&!b.haswrapper){var T=b.win.attr("style"),_=parseFloat(b.win.css("width"))+1;b.win.css("width",_),b.synched("chromefix",function(){b.win.attr("style",T)})}b.onAttributeChange=function(){b.lazyResize(250)},b.ispage||b.haswrapper||(f!==!1?(b.observer=new f(function(t){t.forEach(b.onAttributeChange)}),b.observer.observe(b.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),b.observerremover=new f(function(t){t.forEach(function(t){if(t.removedNodes.length>0)for(var e in t.removedNodes)if(t.removedNodes[e]==b.win[0])return b.remove()})}),b.observerremover.observe(b.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(b.bind(b.win,x.isie&&!x.isie9?"propertychange":"DOMAttrModified",b.onAttributeChange),x.isie9&&b.win[0].attachEvent("onpropertychange",b.onAttributeChange),b.bind(b.win,"DOMNodeRemoved",function(t){t.target==b.win[0]&&b.remove()}))),!b.ispage&&b.opt.boxzoom&&b.bind(window,"resize",b.resizeZoom),b.istextarea&&b.bind(b.win,"mouseup",b.lazyResize),b.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){e.call(b.doc[0],!1)},500),b.bind(this.doc,"load",e))},this.showCursor=function(t,e){b.cursortimeout&&(clearTimeout(b.cursortimeout),b.cursortimeout=0),b.rail&&(b.autohidedom&&(b.autohidedom.stop().css({opacity:b.opt.cursoropacitymax}),b.cursoractive=!0),b.rail.drag&&1==b.rail.drag.pt||(void 0!==t&&t!==!1&&(b.scroll.y=Math.round(1*t/b.scrollratio.y)),void 0!==e&&(b.scroll.x=Math.round(1*e/b.scrollratio.x))),b.cursor.css({height:b.cursorheight,top:b.scroll.y}),b.cursorh&&(b.cursorh.css(!b.rail.align&&b.rail.visibility?{width:b.cursorwidth,left:b.scroll.x+b.rail.width}:{width:b.cursorwidth,left:b.scroll.x}),b.cursoractive=!0),b.zoom&&b.zoom.stop().css({opacity:b.opt.cursoropacitymax}))},this.hideCursor=function(t){b.cursortimeout||b.rail&&b.autohidedom&&(b.hasmousefocus&&"leave"==b.opt.autohidemode||(b.cursortimeout=setTimeout(function(){b.rail.active&&b.showonmouseevent||(b.autohidedom.stop().animate({opacity:b.opt.cursoropacitymin}),b.zoom&&b.zoom.stop().animate({opacity:b.opt.cursoropacitymin}),b.cursoractive=!1),b.cursortimeout=0},t||b.opt.hidecursordelay)))},this.noticeCursor=function(t,e,n){b.showCursor(e,n),b.rail.active||b.hideCursor(t)},this.getContentSize=b.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:b.haswrapper?function(){return{w:b.doc.outerWidth()+parseInt(b.win.css("paddingLeft"))+parseInt(b.win.css("paddingRight")),h:b.doc.outerHeight()+parseInt(b.win.css("paddingTop"))+parseInt(b.win.css("paddingBottom"))}}:function(){return{w:b.docscroll[0].scrollWidth,h:b.docscroll[0].scrollHeight}},this.onResize=function(t,e){if(!b||!b.win)return!1;if(!b.haswrapper&&!b.ispage){if("none"==b.win.css("display"))return b.visibility&&b.hideRail().hideRailHr(),!1;b.hidden||b.visibility||b.showRail().showRailHr()}var n=b.page.maxh,i=b.page.maxw,o={h:b.view.h,w:b.view.w};if(b.view={w:b.ispage?b.win.width():parseInt(b.win[0].clientWidth),h:b.ispage?b.win.height():parseInt(b.win[0].clientHeight)},b.page=e?e:b.getContentSize(),b.page.maxh=Math.max(0,b.page.h-b.view.h),b.page.maxw=Math.max(0,b.page.w-b.view.w),b.page.maxh==n&&b.page.maxw==i&&b.view.w==o.w){if(b.ispage)return b;var s=b.win.offset();if(b.lastposition){var a=b.lastposition;if(a.top==s.top&&a.left==s.left)return b}b.lastposition=s}if(0==b.page.maxh?(b.hideRail(),b.scrollvaluemax=0,b.scroll.y=0,b.scrollratio.y=0,b.cursorheight=0,b.setScrollTop(0),b.rail.scrollable=!1):b.rail.scrollable=!0,0==b.page.maxw?(b.hideRailHr(),b.scrollvaluemaxw=0,b.scroll.x=0,b.scrollratio.x=0,b.cursorwidth=0,b.setScrollLeft(0),b.railh.scrollable=!1):b.railh.scrollable=!0,b.locked=0==b.page.maxh&&0==b.page.maxw,b.locked)return b.ispage||b.updateScrollBar(b.view),!1;b.hidden||b.visibility?b.hidden||b.railh.visibility||b.showRailHr():b.showRail().showRailHr(),b.istextarea&&b.win.css("resize")&&"none"!=b.win.css("resize")&&(b.view.h-=20),b.cursorheight=Math.min(b.view.h,Math.round(b.view.h*(b.view.h/b.page.h))),b.cursorheight=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,b.cursorheight),b.cursorwidth=Math.min(b.view.w,Math.round(b.view.w*(b.view.w/b.page.w))),b.cursorwidth=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,b.cursorwidth),b.scrollvaluemax=b.view.h-b.cursorheight-b.cursor.hborder,b.railh&&(b.railh.width=b.page.maxh>0?b.view.w-b.rail.width:b.view.w,b.scrollvaluemaxw=b.railh.width-b.cursorwidth-b.cursorh.wborder),b.ispage||b.updateScrollBar(b.view),b.scrollratio={x:b.page.maxw/b.scrollvaluemaxw,y:b.page.maxh/b.scrollvaluemax};var r=b.getScrollTop();return r>b.page.maxh?b.doScrollTop(b.page.maxh):(b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y)),b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x)),b.cursoractive&&b.noticeCursor()),b.scroll.y&&0==b.getScrollTop()&&b.doScrollTo(Math.floor(b.scroll.y*b.scrollratio.y)),b},this.resize=b.onResize,this.lazyResize=function(t){return t=isNaN(t)?30:t,b.delayed("resize",b.resize,t),b},this._bind=function(t,e,n,i){b.events.push({e:t,n:e,f:n,b:i,q:!1}),t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},this.jqbind=function(t,e,n){b.events.push({e:t,n:e,f:n,q:!0}),l(t).bind(e,n)},this.bind=function(t,e,n,i){var o="jquery"in t?t[0]:t;if("mousewheel"==e)if("onwheel"in document||document.documentMode>=9)b._bind(o,"wheel",n,i||!1);else{var s=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";h(o,s,n,i||!1),"DOMMouseScroll"==s&&h(o,"MozMousePixelScroll",n,i||!1)}else if(o.addEventListener){if(x.cantouch&&/mouseup|mousedown|mousemove/.test(e)){var a="mousedown"==e?"touchstart":"mouseup"==e?"touchend":"touchmove";b._bind(o,a,function(t){if(t.touches){if(t.touches.length<2){var e=t.touches.length?t.touches[0]:t;e.original=t,n.call(this,e)}}else if(t.changedTouches){var e=t.changedTouches[0];e.original=t,n.call(this,e)}},i||!1)}b._bind(o,e,n,i||!1),x.cantouch&&"mouseup"==e&&b._bind(o,"touchcancel",n,i||!1)}else b._bind(o,e,function(t){return t=t||window.event||!1,t&&t.srcElement&&(t.target=t.srcElement),"pageY"in t||(t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop),n.call(o,t)!==!1&&i!==!1||b.cancelEvent(t)})},this._unbind=function(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=!1},this.unbindAll=function(){for(var t=0;t<b.events.length;t++){var e=b.events[t];e.q?e.e.unbind(e.n,e.f):b._unbind(e.e,e.n,e.f,e.b)}},this.cancelEvent=function(t){var t=t.original?t.original:t?t:window.event||!1;return!!t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.preventManipulation&&t.preventManipulation(),t.cancelBubble=!0,t.cancel=!0,t.returnValue=!1,!1)},this.stopPropagation=function(t){var t=t.original?t.original:t?t:window.event||!1;return!!t&&(t.stopPropagation?t.stopPropagation():(t.cancelBubble&&(t.cancelBubble=!0),!1))},this.showRail=function(){return 0==b.page.maxh||!b.ispage&&"none"==b.win.css("display")||(b.visibility=!0,b.rail.visibility=!0,b.rail.css("display","block")),b},this.showRailHr=function(){return b.railh?(0==b.page.maxw||!b.ispage&&"none"==b.win.css("display")||(b.railh.visibility=!0,b.railh.css("display","block")),b):b},this.hideRail=function(){return b.visibility=!1,b.rail.visibility=!1,b.rail.css("display","none"),b},this.hideRailHr=function(){return b.railh?(b.railh.visibility=!1,b.railh.css("display","none"),b):b},this.show=function(){return b.hidden=!1,b.locked=!1,b.showRail().showRailHr()},this.hide=function(){return b.hidden=!0,b.locked=!0,b.hideRail().hideRailHr()},this.toggle=function(){return b.hidden?b.show():b.hide()},this.remove=function(){b.stop(),b.cursortimeout&&clearTimeout(b.cursortimeout),b.doZoomOut(),b.unbindAll(),x.isie9&&b.win[0].detachEvent("onpropertychange",b.onAttributeChange),b.observer!==!1&&b.observer.disconnect(),b.observerremover!==!1&&b.observerremover.disconnect(),b.events=null,b.cursor&&b.cursor.remove(),b.cursorh&&b.cursorh.remove(),b.rail&&b.rail.remove(),b.railh&&b.railh.remove(),b.zoom&&b.zoom.remove();for(var t=0;t<b.saved.css.length;t++){var e=b.saved.css[t];e[0].css(e[1],void 0===e[2]?"":e[2])}b.saved=!1,b.me.data("__nicescroll","");var n=l.nicescroll;n.each(function(t){if(this&&this.id===b.id){delete n[t];for(var e=++t;e<n.length;e++,t++)n[t]=n[e];n.length--,n.length&&delete n[n.length]}});for(var i in b)b[i]=null,delete b[i];b=null},this.scrollstart=function(t){return this.onscrollstart=t,b},this.scrollend=function(t){return this.onscrollend=t,b},this.scrollcancel=function(t){return this.onscrollcancel=t,b},this.zoomin=function(t){return this.onzoomin=t,b},this.zoomout=function(t){return this.onzoomout=t,b},this.isScrollable=function(t){var e=t.target?t.target:t;if("OPTION"==e.nodeName)return!0;for(;e&&1==e.nodeType&&!/^BODY|HTML/.test(e.nodeName);){var n=l(e),i=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(i))return e.clientHeight!=e.scrollHeight;e=!!e.parentNode&&e.parentNode}return!1},this.getViewport=function(t){for(var e=!(!t||!t.parentNode)&&t.parentNode;e&&1==e.nodeType&&!/^BODY|HTML/.test(e.nodeName);){var n=l(e);if(/fixed|absolute/.test(n.css("position")))return n;var i=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(i)&&e.clientHeight!=e.scrollHeight)return n;if(n.getNiceScroll().length>0)return n;e=!!e.parentNode&&e.parentNode}return!!e&&l(e)},this.triggerScrollEnd=function(){if(b.onscrollend){var t=b.getScrollLeft(),e=b.getScrollTop(),n={type:"scrollend",current:{x:t,y:e},end:{x:t,y:e}};b.onscrollend.call(b,n)}},this.onmousewheel=function(t){if(!b.wheelprevented){if(b.locked)return b.debounced("checkunlock",b.resize,250),!0;if(b.rail.drag)return b.cancelEvent(t);if("auto"==b.opt.oneaxismousemode&&0!=t.deltaX&&(b.opt.oneaxismousemode=!1),b.opt.oneaxismousemode&&0==t.deltaX&&!b.rail.scrollable)return!b.railh||!b.railh.scrollable||b.onmousewheelhr(t);var e=+new Date,n=!1;if(b.opt.preservenativescrolling&&b.checkarea+600<e&&(b.nativescrollingarea=b.isScrollable(t),n=!0),b.checkarea=e,b.nativescrollingarea)return!0;var i=g(t,!1,n);return i&&(b.checkarea=0),i}},this.onmousewheelhr=function(t){if(!b.wheelprevented){if(b.locked||!b.railh.scrollable)return!0;if(b.rail.drag)return b.cancelEvent(t);var e=+new Date,n=!1;return b.opt.preservenativescrolling&&b.checkarea+600<e&&(b.nativescrollingarea=b.isScrollable(t),n=!0),b.checkarea=e,!!b.nativescrollingarea||(b.locked?b.cancelEvent(t):g(t,!0,n))}},this.stop=function(){return b.cancelScroll(),b.scrollmon&&b.scrollmon.stop(),b.cursorfreezed=!1,b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y)),b.noticeCursor(),b},this.getTransitionSpeed=function(t){var e=Math.round(10*b.opt.scrollspeed),n=Math.min(e,Math.round(t/20*b.opt.scrollspeed));return n>20?n:0},b.opt.smoothscroll?b.ishwscroll&&x.hastransition&&b.opt.usetransition?(this.prepareTransition=function(t,e){var n=e?t>20?t:0:b.getTransitionSpeed(t),i=n?x.prefixstyle+"transform "+n+"ms ease-out":"";return b.lasttransitionstyle&&b.lasttransitionstyle==i||(b.lasttransitionstyle=i,b.doc.css(x.transitionstyle,i)),n},this.doScrollLeft=function(t,e){var n=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(t,n,e)},this.doScrollTop=function(t,e){var n=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(n,t,e)},this.doScrollPos=function(t,e,n){var i=b.getScrollTop(),o=b.getScrollLeft();return((b.newscrolly-i)*(e-i)<0||(b.newscrollx-o)*(t-o)<0)&&b.cancelScroll(),0==b.opt.bouncescroll&&(0>e?e=0:e>b.page.maxh&&(e=b.page.maxh),0>t?t=0:t>b.page.maxw&&(t=b.page.maxw)),(!b.scrollrunning||t!=b.newscrollx||e!=b.newscrolly)&&(b.newscrolly=e,
b.newscrollx=t,b.newscrollspeed=n||!1,!b.timer&&void(b.timer=setTimeout(function(){var n=b.getScrollTop(),i=b.getScrollLeft(),o={};o.x=t-i,o.y=e-n,o.px=i,o.py=n;var s=Math.round(Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))),a=b.newscrollspeed&&b.newscrollspeed>1?b.newscrollspeed:b.getTransitionSpeed(s);if(b.newscrollspeed&&b.newscrollspeed<=1&&(a*=b.newscrollspeed),b.prepareTransition(a,!0),b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm),a>0){if(!b.scrollrunning&&b.onscrollstart){var r={type:"scrollstart",current:{x:i,y:n},request:{x:t,y:e},end:{x:b.newscrollx,y:b.newscrolly},speed:a};b.onscrollstart.call(b,r)}x.transitionend?b.scrollendtrapped||(b.scrollendtrapped=!0,b.bind(b.doc,x.transitionend,b.onScrollTransitionEnd,!1)):(b.scrollendtrapped&&clearTimeout(b.scrollendtrapped),b.scrollendtrapped=setTimeout(b.onScrollTransitionEnd,a));var l=n,c=i;b.timerscroll={bz:new BezierClass(l,b.newscrolly,a,0,0,.58,1),bh:new BezierClass(c,b.newscrollx,a,0,0,.58,1)},b.cursorfreezed||(b.timerscroll.tm=setInterval(function(){b.showCursor(b.getScrollTop(),b.getScrollLeft())},60))}b.synched("doScroll-set",function(){b.timer=0,b.scrollendtrapped&&(b.scrollrunning=!0),b.setScrollTop(b.newscrolly),b.setScrollLeft(b.newscrollx),b.scrollendtrapped||b.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!b.scrollendtrapped)return!0;var t=b.getScrollTop(),e=b.getScrollLeft();return b.scrollrunning=!1,x.transitionend||clearTimeout(x.transitionend),b.scrollendtrapped=!1,b._unbind(b.doc,x.transitionend,b.onScrollTransitionEnd),b.prepareTransition(0),b.setScrollTop(t),b.railh&&b.setScrollLeft(e),b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm),b.timerscroll=!1,b.cursorfreezed=!1,b.showCursor(t,e),b},this.onScrollTransitionEnd=function(){b.scrollendtrapped&&b._unbind(b.doc,x.transitionend,b.onScrollTransitionEnd),b.scrollendtrapped=!1,b.prepareTransition(0),b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm),b.timerscroll=!1;var t=b.getScrollTop(),e=b.getScrollLeft();return b.setScrollTop(t),b.railh&&b.setScrollLeft(e),b.noticeCursor(!1,t,e),b.cursorfreezed=!1,0>t?t=0:t>b.page.maxh&&(t=b.page.maxh),0>e?e=0:e>b.page.maxw&&(e=b.page.maxw),t!=b.newscrolly||e!=b.newscrollx?b.doScrollPos(e,t,b.opt.snapbackspeed):(b.onscrollend&&b.scrollrunning&&b.triggerScrollEnd(),void(b.scrollrunning=!1))}):(this.doScrollLeft=function(t,e){var n=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(t,n,e)},this.doScrollTop=function(t,e){var n=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(n,t,e)},this.doScrollPos=function(t,e,n){function i(){if(b.cancelAnimationFrame)return!0;if(b.scrollrunning=!0,p=1-p)return b.timer=d(i)||1;var t=0,e=sy=b.getScrollTop();if(b.dst.ay){e=b.bzscroll?b.dst.py+b.bzscroll.getNow()*b.dst.ay:b.newscrolly;var n=e-sy;(0>n&&e<b.newscrolly||n>0&&e>b.newscrolly)&&(e=b.newscrolly),b.setScrollTop(e),e==b.newscrolly&&(t=1)}else t=1;var o=sx=b.getScrollLeft();if(b.dst.ax){o=b.bzscroll?b.dst.px+b.bzscroll.getNow()*b.dst.ax:b.newscrollx;var n=o-sx;(0>n&&o<b.newscrollx||n>0&&o>b.newscrollx)&&(o=b.newscrollx),b.setScrollLeft(o),o==b.newscrollx&&(t+=1)}else t+=1;2==t?(b.timer=0,b.cursorfreezed=!1,b.bzscroll=!1,b.scrollrunning=!1,0>e?e=0:e>b.page.maxh&&(e=b.page.maxh),0>o?o=0:o>b.page.maxw&&(o=b.page.maxw),o!=b.newscrollx||e!=b.newscrolly?b.doScrollPos(o,e):b.onscrollend&&b.triggerScrollEnd()):b.timer=d(i)||1}var e=void 0===e||e===!1?b.getScrollTop(!0):e;if(b.timer&&b.newscrolly==e&&b.newscrollx==t)return!0;b.timer&&u(b.timer),b.timer=0;var o=b.getScrollTop(),s=b.getScrollLeft();((b.newscrolly-o)*(e-o)<0||(b.newscrollx-s)*(t-s)<0)&&b.cancelScroll(),b.newscrolly=e,b.newscrollx=t,b.bouncescroll&&b.rail.visibility||(b.newscrolly<0?b.newscrolly=0:b.newscrolly>b.page.maxh&&(b.newscrolly=b.page.maxh)),b.bouncescroll&&b.railh.visibility||(b.newscrollx<0?b.newscrollx=0:b.newscrollx>b.page.maxw&&(b.newscrollx=b.page.maxw)),b.dst={},b.dst.x=t-s,b.dst.y=e-o,b.dst.px=s,b.dst.py=o;var a=Math.round(Math.sqrt(Math.pow(b.dst.x,2)+Math.pow(b.dst.y,2)));b.dst.ax=b.dst.x/a,b.dst.ay=b.dst.y/a;var r=0,l=a;0==b.dst.x?(r=o,l=e,b.dst.ay=1,b.dst.py=0):0==b.dst.y&&(r=s,l=t,b.dst.ax=1,b.dst.px=0);var c=b.getTransitionSpeed(a);if(n&&1>=n&&(c*=n),b.bzscroll=c>0&&(b.bzscroll?b.bzscroll.update(l,c):new BezierClass(r,l,c,0,1,0,1)),!b.timer){(o==b.page.maxh&&e>=b.page.maxh||s==b.page.maxw&&t>=b.page.maxw)&&b.checkContentSize();var p=1;if(b.cancelAnimationFrame=!1,b.timer=1,b.onscrollstart&&!b.scrollrunning){var h={type:"scrollstart",current:{x:s,y:o},request:{x:t,y:e},end:{x:b.newscrollx,y:b.newscrolly},speed:c};b.onscrollstart.call(b,h)}i(),(o==b.page.maxh&&e>=o||s==b.page.maxw&&t>=s)&&b.checkContentSize(),b.noticeCursor()}},this.cancelScroll=function(){return b.timer&&u(b.timer),b.timer=0,b.bzscroll=!1,b.scrollrunning=!1,b}):(this.doScrollLeft=function(t,e){var n=b.getScrollTop();b.doScrollPos(t,n,e)},this.doScrollTop=function(t,e){var n=b.getScrollLeft();b.doScrollPos(n,t,e)},this.doScrollPos=function(t,e){var n=t>b.page.maxw?b.page.maxw:t;0>n&&(n=0);var i=e>b.page.maxh?b.page.maxh:e;0>i&&(i=0),b.synched("scroll",function(){b.setScrollTop(i),b.setScrollLeft(n)})},this.cancelScroll=function(){}),this.doScrollBy=function(t,e){var n=0;if(e)n=Math.floor((b.scroll.y-t)*b.scrollratio.y);else{var i=b.timer?b.newscrolly:b.getScrollTop(!0);n=i-t}if(b.bouncescroll){var o=Math.round(b.view.h/2);-o>n?n=-o:n>b.page.maxh+o&&(n=b.page.maxh+o)}return b.cursorfreezed=!1,py=b.getScrollTop(!0),0>n&&0>=py?b.noticeCursor():n>b.page.maxh&&py>=b.page.maxh?(b.checkContentSize(),b.noticeCursor()):void b.doScrollTop(n)},this.doScrollLeftBy=function(t,e){var n=0;if(e)n=Math.floor((b.scroll.x-t)*b.scrollratio.x);else{var i=b.timer?b.newscrollx:b.getScrollLeft(!0);n=i-t}if(b.bouncescroll){var o=Math.round(b.view.w/2);-o>n?n=-o:n>b.page.maxw+o&&(n=b.page.maxw+o)}return b.cursorfreezed=!1,px=b.getScrollLeft(!0),0>n&&0>=px?b.noticeCursor():n>b.page.maxw&&px>=b.page.maxw?b.noticeCursor():void b.doScrollLeft(n)},this.doScrollTo=function(t,e){var n=e?Math.round(t*b.scrollratio.y):t;0>n?n=0:n>b.page.maxh&&(n=b.page.maxh),b.cursorfreezed=!1,b.doScrollTop(t)},this.checkContentSize=function(){var t=b.getContentSize();(t.h!=b.page.h||t.w!=b.page.w)&&b.resize(!1,t)},b.onscroll=function(){b.rail.drag||b.cursorfreezed||b.synched("scroll",function(){b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y)),b.railh&&(b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x))),b.noticeCursor()})},b.bind(b.docscroll,"scroll",b.onscroll),this.doZoomIn=function(t){if(!b.zoomactive){b.zoomactive=!0,b.zoomrestore={style:{}};var e=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],n=b.win[0].style;for(var i in e){var o=e[i];b.zoomrestore.style[o]=void 0!==n[o]?n[o]:""}b.zoomrestore.style.width=b.win.css("width"),b.zoomrestore.style.height=b.win.css("height"),b.zoomrestore.padding={w:b.win.outerWidth()-b.win.width(),h:b.win.outerHeight()-b.win.height()},x.isios4&&(b.zoomrestore.scrollTop=l(window).scrollTop(),l(window).scrollTop(0)),b.win.css({position:x.isios4?"absolute":"fixed",top:0,left:0,"z-index":r+100,margin:"0px"});var s=b.win.css("backgroundColor");return(""==s||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&b.win.css("backgroundColor","#fff"),b.rail.css({"z-index":r+101}),b.zoom.css({"z-index":r+102}),b.zoom.css("backgroundPosition","0px -18px"),b.resizeZoom(),b.onzoomin&&b.onzoomin.call(b),b.cancelEvent(t)}},this.doZoomOut=function(t){return b.zoomactive?(b.zoomactive=!1,b.win.css("margin",""),b.win.css(b.zoomrestore.style),x.isios4&&l(window).scrollTop(b.zoomrestore.scrollTop),b.rail.css({"z-index":b.zindex}),b.zoom.css({"z-index":b.zindex}),b.zoomrestore=!1,b.zoom.css("backgroundPosition","0px 0px"),b.onResize(),b.onzoomout&&b.onzoomout.call(b),b.cancelEvent(t)):void 0},this.doZoom=function(t){return b.zoomactive?b.doZoomOut(t):b.doZoomIn(t)},this.resizeZoom=function(){if(b.zoomactive){var t=b.getScrollTop();b.win.css({width:l(window).width()-b.zoomrestore.padding.w+"px",height:l(window).height()-b.zoomrestore.padding.h+"px"}),b.onResize(),b.setScrollTop(Math.min(b.page.maxh,t))}},this.init(),l.nicescroll.push(this)},y=function(t){var e=this;this.nc=t,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(t,n){e.stop();var i=e.time();e.steptime=0,e.lasttime=i,e.speedx=0,e.speedy=0,e.lastx=t,e.lasty=n,e.lastscrollx=-1,e.lastscrolly=-1},this.update=function(t,n){var i=e.time();e.steptime=i-e.lasttime,e.lasttime=i;var o=n-e.lasty,s=t-e.lastx,a=e.nc.getScrollTop(),r=e.nc.getScrollLeft(),l=a+o,c=r+s;e.snapx=0>c||c>e.nc.page.maxw,e.snapy=0>l||l>e.nc.page.maxh,e.speedx=s,e.speedy=o,e.lastx=t,e.lasty=n},this.stop=function(){e.nc.unsynched("domomentum2d"),e.timer&&clearTimeout(e.timer),e.timer=0,e.lastscrollx=-1,e.lastscrolly=-1},this.doSnapy=function(t,n){var i=!1;0>n?(n=0,i=!0):n>e.nc.page.maxh&&(n=e.nc.page.maxh,i=!0),0>t?(t=0,i=!0):t>e.nc.page.maxw&&(t=e.nc.page.maxw,i=!0),i?e.nc.doScrollPos(t,n,e.nc.opt.snapbackspeed):e.nc.triggerScrollEnd()},this.doMomentum=function(t){var n=e.time(),i=t?n+t:e.lasttime,o=e.nc.getScrollLeft(),s=e.nc.getScrollTop(),a=e.nc.page.maxh,r=e.nc.page.maxw;e.speedx=r>0?Math.min(60,e.speedx):0,e.speedy=a>0?Math.min(60,e.speedy):0;var l=i&&60>=n-i;(0>s||s>a||0>o||o>r)&&(l=!1);var c=!(!e.speedy||!l)&&e.speedy,d=!(!e.speedx||!l)&&e.speedx;if(c||d){var u=Math.max(16,e.steptime);if(u>50){var p=u/50;e.speedx*=p,e.speedy*=p,u=50}e.demulxy=0,e.lastscrollx=e.nc.getScrollLeft(),e.chkx=e.lastscrollx,e.lastscrolly=e.nc.getScrollTop(),e.chky=e.lastscrolly;var h=e.lastscrollx,f=e.lastscrolly,m=function(){var t=e.time()-n>600?.04:.02;e.speedx&&(h=Math.floor(e.lastscrollx-e.speedx*(1-e.demulxy)),e.lastscrollx=h,(0>h||h>r)&&(t=.1)),e.speedy&&(f=Math.floor(e.lastscrolly-e.speedy*(1-e.demulxy)),e.lastscrolly=f,(0>f||f>a)&&(t=.1)),e.demulxy=Math.min(1,e.demulxy+t),e.nc.synched("domomentum2d",function(){if(e.speedx){var t=e.nc.getScrollLeft();t!=e.chkx&&e.stop(),e.chkx=h,e.nc.setScrollLeft(h)}if(e.speedy){var n=e.nc.getScrollTop();n!=e.chky&&e.stop(),e.chky=f,e.nc.setScrollTop(f)}e.timer||(e.nc.hideCursor(),e.doSnapy(h,f))}),e.demulxy<1?e.timer=setTimeout(m,u):(e.stop(),e.nc.hideCursor(),e.doSnapy(h,f))};m()}else e.doSnapy(e.nc.getScrollLeft(),e.nc.getScrollTop())}},w=t.fn.scrollTop;t.cssHooks.pageYOffset={get:function(t){var e=l.data(t,"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollTop():w.call(t)},set:function(t,e){var n=l.data(t,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollTop(parseInt(e)):w.call(t,e),this}},t.fn.scrollTop=function(t){if(void 0===t){var e=!!this[0]&&(l.data(this[0],"__nicescroll")||!1);return e&&e.ishwscroll?e.getScrollTop():w.call(this)}return this.each(function(){var e=l.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollTop(parseInt(t)):w.call(l(this),t)})};var x=t.fn.scrollLeft;l.cssHooks.pageXOffset={get:function(t){var e=l.data(t,"__nicescroll")||!1;return e&&e.ishwscroll?e.getScrollLeft():x.call(t)},set:function(t,e){var n=l.data(t,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollLeft(parseInt(e)):x.call(t,e),this}},t.fn.scrollLeft=function(t){if(void 0===t){var e=!!this[0]&&(l.data(this[0],"__nicescroll")||!1);return e&&e.ishwscroll?e.getScrollLeft():x.call(this)}return this.each(function(){var e=l.data(this,"__nicescroll")||!1;e&&e.ishwscroll?e.setScrollLeft(parseInt(t)):x.call(l(this),t)})};var C=function(t){var e=this;if(this.length=0,this.name="nicescrollarray",this.each=function(t){for(var n=0,i=0;n<e.length;n++)t.call(e[n],i++);return e},this.push=function(t){e[e.length]=t,e.length++},this.eq=function(t){return e[t]},t)for(var n=0;n<t.length;n++){var i=l.data(t[n],"__nicescroll")||!1;i&&(this[this.length]=i,this.length++)}return this};n(C.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(t,e){t[e]=function(){var t=arguments;return this.each(function(){this[e].apply(this,t)})}}),t.fn.getNiceScroll=function(t){if(void 0===t)return new C(this);var e=this[t]&&l.data(this[t],"__nicescroll")||!1;return e},t.extend(t.expr[":"],{nicescroll:function(t){return!!l.data(t,"__nicescroll")}}),l.fn.niceScroll=function(t,e){void 0===e&&("object"!=typeof t||"jquery"in t||(e=t,t=!1));var n=new C;void 0===e&&(e={}),t&&(e.doc=l(t),e.win=l(this));var i=!("doc"in e);return i||"win"in e||(e.win=l(this)),this.each(function(){var t=l(this).data("__nicescroll")||!1;t||(e.doc=i?l(this):e.doc,t=new b(e,l(this)),l(this).data("__nicescroll",t)),n.push(t)}),1==n.length?n[0]:n},window.NiceScroll={getjQuery:function(){return t}},l.nicescroll||(l.nicescroll=new C,l.nicescroll.options=m)}),require.config({paths:{jquery:"/static/assets/js/jquery.min",underscore:"libs/underscore",backbone:"libs/backbone",text:"libs/text","jquery.cookie":"/static/js/jquery.cookie","jquery.xmldom":"/static/js/jquery.xmldom","jquery.form":"/static/js/jquery.form","jquery.treeview":"/static/js/jquery.treeview","jquery.jquote2":"libs/jquery.jquote2.min",jsonrpc:"/static/js/jsonrpc",heiduc:"/static/js/heiduc",cms:"/static/js/cms",i18n:"/i18n","back-services":"/static/js/back-services",interact:"libs/interact.min","slick.core":"/static/slickgrid/slick.core","slick.grid":"/static/slickgrid/slick.grid","slick.dataview":"/static/slickgrid/slick.dataview","slick.rowselectionmodel":"/static/slickgrid/slick.rowselectionmodel","slick.checkboxselectcolumn":"/static/slickgrid/slick.checkboxselectcolumn",cm:"/static/js/codemirror/codemirror","cm-css":"/static/js/codemirror/css","cm-html":"/static/js/codemirror/htmlmixed","cm-js":"/static/js/codemirror/javascript","cm-xml":"/static/js/codemirror/xml","moment-js":"/static/assets/lib/moment-js/moment.min","jquery.easing":"/static/assets/js/jquery.easing.1.3.min",bootstrap:"/static/assets/bootstrap/js/bootstrap.min",datepicker:"/static/assets/lib/bootstrap-datepicker/js/bootstrap-datepicker",noty:"/static/assets/lib/noty/jquery.noty","noty-layout":"/static/assets/lib/noty/layouts/bottomRight","jquery.nicescroll":"/static/assets/lib/nicescroll/jquery.nicescroll.min"},shim:{underscore:{exports:"_"},backbone:{deps:["jquery","underscore"],exports:"Backbone"},bootstrap:["jquery"],"jquery.cookie":["jquery"],"jquery.xmldom":["jquery"],"jquery.form":["jquery"],"jquery.treeview":["jquery"],"jquery.jquote2":["jquery"],"jquery.easing":["jquery"],"slick.grid":["interact","slick.core"],"jquery.nicescroll":["jquery"],"cm-css":["cm"],"cm-html":["cm"],"cm-js":["cm"],"cm-xml":["cm"],heiduc:["jsonrpc"],cms:["heiduc"],"back-services":["heiduc"],datepicker:["bootstrap"],noty:["jquery"],"noty-layout":["jquery","noty"],app:["jquery","heiduc","backbone"]}}),require(["app","jquery","underscore","backbone","jquery.cookie","jquery.xmldom","jquery.jquote2","i18n","jsonrpc","heiduc","cms","back-services","moment-js","noty","noty-layout","jquery.easing","bootstrap","datepicker","jquery.nicescroll"],function(t){Heiduc.initJSONRpc(function(){Heiduc.jsonrpc.loginFrontService.getSystemProperties(function(e){Heiduc.version=e.map.version,Heiduc.fullVersion=e.map.fullVersion,Heiduc.loggedIn="true"===e.map.loggedIn,Heiduc.app=new t})})}),define("main",function(){});